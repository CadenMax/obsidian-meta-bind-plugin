"use strict";
/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod2) => function __require() {
  return mod2 || (0, cb[__getOwnPropNames(cb)[0]])((mod2 = { exports: {} }).exports, mod2), mod2.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod2, isNodeMode, target) => (target = mod2 != null ? __create(__getProtoOf(mod2)) : {}, __copyProps(isNodeMode || !mod2 || !mod2.__esModule ? __defProp(target, "default", { value: mod2, enumerable: true }) : target, mod2));
var __toCommonJS = (mod2) => __copyProps(__defProp({}, "__esModule", { value: true }), mod2);
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// node_modules/@opd-libs/opd-metadata-lib/lib/Utils.js
var require_Utils = __commonJS({
  "node_modules/@opd-libs/opd-metadata-lib/lib/Utils.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.OPDTraversalError = exports.validatePath = exports.parsePath = exports.traverseObjectByPath = exports.traverseObjectToParent = exports.traverseObject = void 0;
    function traverseObject3(path, o) {
      let pathParts = parsePath(path);
      return traverseObjectByPath(pathParts, o);
    }
    exports.traverseObject = traverseObject3;
    function traverseObjectToParent(path, o) {
      var _a;
      let pathParts = parsePath(path);
      if (pathParts[0] === "") {
        throw new OPDTraversalError("can not traverse to parent on self reference");
      }
      let parentPath = pathParts.slice(0, -1);
      let childKey = (_a = pathParts.at(-1)) !== null && _a !== void 0 ? _a : "";
      let parentObject = traverseObjectByPath(parentPath, o);
      return {
        parent: { key: parentPath, value: parentObject },
        child: { key: childKey, value: parentObject[childKey] }
      };
    }
    exports.traverseObjectToParent = traverseObjectToParent;
    function traverseObjectByPath(pathParts, o) {
      for (const pathPart of pathParts) {
        if (pathPart === "") {
          return o;
        }
        if (o === void 0) {
          return void 0;
        }
        o = o[pathPart];
      }
      return o;
    }
    exports.traverseObjectByPath = traverseObjectByPath;
    function parsePath(path) {
      path = path.replace(/'/g, '"');
      validatePath(path);
      return path.split(".").map((x) => x.split("[").map((y) => {
        if (y.endsWith("]")) {
          y = y.slice(0, -1);
        }
        if (y.startsWith('"') && y.endsWith('"')) {
          y = y.slice(1, -1);
        }
        return y;
      })).flat();
    }
    exports.parsePath = parsePath;
    function validatePath(path) {
      const numbers = "0123456789";
      const letters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
      let insideStringBrackets = false;
      let insideNumberBrackets = false;
      for (let i = 0; i < path.length; i++) {
        const char = path[i];
        const nextChar = path[i + 1];
        if (char === ".") {
          if (i === 0) {
            throw new OPDTraversalError(`Invalid character '${char}' at position ${i} in "${path}", path may not start with '.'`);
          }
          if (!(letters.includes(nextChar) || nextChar === "_" || nextChar === "$")) {
            throw new OPDTraversalError(`Invalid character '${nextChar}' at position ${i + 1} in "${path}", expected a letter, '_' or '$' to follow '.'`);
          }
        }
        if (char === "[") {
          if (numbers.includes(nextChar)) {
            insideNumberBrackets = true;
            continue;
          } else if (nextChar === '"') {
            if (path[i + 2] === '"') {
              throw new OPDTraversalError(`Invalid character '${path[i + 2]}' at position ${i + 2} in "${path}", the string between the quotation-marks may not be empty`);
            }
            insideStringBrackets = true;
            i += 1;
            continue;
          } else {
            throw new OPDTraversalError(`Invalid character '${nextChar}' at position ${i + 1} in "${path}", expected number or '"' to follow a '['`);
          }
        }
        if (insideStringBrackets && char === '"') {
          if (nextChar === "]") {
            insideStringBrackets = false;
            i += 1;
            continue;
          } else {
            throw new OPDTraversalError(`Invalid character '${nextChar}' at position ${i + 1} in "${path}", expected ']' to follow a '"'`);
          }
        }
        if (insideNumberBrackets && char === "]") {
          insideNumberBrackets = false;
          continue;
        }
        if (insideStringBrackets && (char === "." || char === "]" || char === "[")) {
          throw new OPDTraversalError(`Invalid character '${char}' at position ${i} in "${path}"`);
        }
        if (insideNumberBrackets && !numbers.includes(char)) {
          throw new OPDTraversalError(`Invalid character '${char}' at position ${i} in "${path}", number expected inside of brackets`);
        }
        if (!insideNumberBrackets && !insideStringBrackets) {
          if (char === "]") {
            throw new OPDTraversalError(`Invalid character '${char}' at position ${i} in "${path}", expected '[' to proceed`);
          }
        }
      }
    }
    exports.validatePath = validatePath;
    var OPDTraversalError = class extends Error {
      constructor(message) {
        super(message);
      }
    };
    exports.OPDTraversalError = OPDTraversalError;
  }
});

// node_modules/@opd-libs/opd-metadata-lib/lib/ObsUtils.js
var require_ObsUtils = __commonJS({
  "node_modules/@opd-libs/opd-metadata-lib/lib/ObsUtils.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.stringifyFrontmatter = void 0;
    var obsidian_1 = require("obsidian");
    function stringifyFrontmatter(frontmatter) {
      return `---
${(0, obsidian_1.stringifyYaml)(frontmatter)}---`;
    }
    exports.stringifyFrontmatter = stringifyFrontmatter;
  }
});

// node_modules/@opd-libs/opd-metadata-lib/lib/Internal.js
var require_Internal = __commonJS({
  "node_modules/@opd-libs/opd-metadata-lib/lib/Internal.js"(exports) {
    "use strict";
    var __awaiter = exports && exports.__awaiter || function(thisArg, _arguments, P, generator) {
      function adopt(value) {
        return value instanceof P ? value : new P(function(resolve) {
          resolve(value);
        });
      }
      return new (P || (P = Promise))(function(resolve, reject) {
        function fulfilled(value) {
          try {
            step(generator.next(value));
          } catch (e) {
            reject(e);
          }
        }
        function rejected(value) {
          try {
            step(generator["throw"](value));
          } catch (e) {
            reject(e);
          }
        }
        function step(result) {
          result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
        }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
      });
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Internal = void 0;
    var obsidian_1 = require("obsidian");
    var Utils_1 = require_Utils();
    var ObsUtils_1 = require_ObsUtils();
    var Internal;
    (function(Internal2) {
      Internal2.frontMatterRexExpPattern = "^(---)\\n[\\s\\S]*?\\n---";
      function getMetaDataFromFileContent(fileContent) {
        const regExp = new RegExp(Internal2.frontMatterRexExpPattern);
        const frontMatterRegExpResult = regExp.exec(fileContent);
        if (!frontMatterRegExpResult) {
          return [];
        }
        let frontMatter = frontMatterRegExpResult[0];
        if (!frontMatter) {
          return [];
        }
        frontMatter = frontMatter.substring(4);
        frontMatter = frontMatter.substring(0, frontMatter.length - 3);
        return getMetaDataFromYAML(frontMatter);
      }
      Internal2.getMetaDataFromFileContent = getMetaDataFromFileContent;
      function getMetaDataFromYAML(yaml) {
        if (!yaml) {
          return {};
        }
        const obj = (0, obsidian_1.parseYaml)(yaml);
        if (!obj) {
          return {};
        }
        return obj;
      }
      Internal2.getMetaDataFromYAML = getMetaDataFromYAML;
      function getMetadataFromFileCache(file, plugin) {
        var _a;
        let metadata = (_a = plugin.app.metadataCache.getFileCache(file)) === null || _a === void 0 ? void 0 : _a.frontmatter;
        if (metadata) {
          metadata = Object.assign({}, metadata);
          delete metadata.position;
        } else {
          return {};
        }
        return metadata;
      }
      Internal2.getMetadataFromFileCache = getMetadataFromFileCache;
      function removeFrontmatter(fileContent) {
        return fileContent.replace(new RegExp(Internal2.frontMatterRexExpPattern), "");
      }
      Internal2.removeFrontmatter = removeFrontmatter;
      function updateFrontmatter(metadata, file, plugin) {
        return __awaiter(this, void 0, void 0, function* () {
          let fileContent = yield plugin.app.vault.cachedRead(file);
          fileContent = removeFrontmatter(fileContent);
          fileContent = `${(0, ObsUtils_1.stringifyFrontmatter)(metadata)}${fileContent}`;
          yield plugin.app.vault.modify(file, fileContent);
        });
      }
      Internal2.updateFrontmatter = updateFrontmatter;
      function hasField(path, metadata) {
        return getField(path, metadata) !== void 0;
      }
      Internal2.hasField = hasField;
      function getField(path, metadata) {
        return (0, Utils_1.traverseObject)(path, metadata);
      }
      Internal2.getField = getField;
      function deleteField(path, metadata) {
        let { parent, child } = (0, Utils_1.traverseObjectToParent)(path, metadata);
        if (parent.value === void 0) {
          throw Error(`The parent of "${path}" does not exist in Object, can not delete child from non existing parent`);
        }
        if (Array.isArray(parent.value)) {
          const index = Number.parseInt(child.key);
          if (Number.isNaN(index)) {
            return metadata;
          }
          parent.value.splice(index, 1);
        } else {
          delete parent.value[child.key];
        }
        return metadata;
      }
      Internal2.deleteField = deleteField;
      function updateField(path, value, metadata) {
        let { parent, child } = (0, Utils_1.traverseObjectToParent)(path, metadata);
        if (parent.value === void 0) {
          throw Error(`The parent of "${path}" does not exist in Object, please create the parent first`);
        }
        if (child.value === void 0) {
          throw Error(`Field with key "${path}" does not exist in Object`);
        }
        parent.value[child.key] = value;
        return metadata;
      }
      Internal2.updateField = updateField;
      function insertField(path, value, metadata) {
        let { parent, child } = (0, Utils_1.traverseObjectToParent)(path, metadata);
        if (parent.value === void 0) {
          throw Error(`The parent of "${path}" does not exist in Object, please create the parent first`);
        }
        if (child.value !== void 0) {
          throw Error(`Field with key "${path}" does already exist in Object`);
        }
        parent.value[child.key] = value;
        return metadata;
      }
      Internal2.insertField = insertField;
      function updateOrInsertField(path, value, metadata) {
        let { parent, child } = (0, Utils_1.traverseObjectToParent)(path, metadata);
        if (parent.value === void 0) {
          throw Error(`The parent of "${path}" does not exist in Object, please create the parent first`);
        }
        parent.value[child.key] = value;
        return metadata;
      }
      Internal2.updateOrInsertField = updateOrInsertField;
    })(Internal = exports.Internal || (exports.Internal = {}));
  }
});

// node_modules/@opd-libs/opd-metadata-lib/lib/API.js
var require_API = __commonJS({
  "node_modules/@opd-libs/opd-metadata-lib/lib/API.js"(exports) {
    "use strict";
    var __awaiter = exports && exports.__awaiter || function(thisArg, _arguments, P, generator) {
      function adopt(value) {
        return value instanceof P ? value : new P(function(resolve) {
          resolve(value);
        });
      }
      return new (P || (P = Promise))(function(resolve, reject) {
        function fulfilled(value) {
          try {
            step(generator.next(value));
          } catch (e) {
            reject(e);
          }
        }
        function rejected(value) {
          try {
            step(generator["throw"](value));
          } catch (e) {
            reject(e);
          }
        }
        function step(result) {
          result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
        }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
      });
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.setFrontmatterOfTFile = exports.getFrontmatterOfTFile = exports.deleteFieldInTFile = exports.updateOrInsertFieldInTFile = exports.updateFieldInTFile = exports.insertFieldInTFile = exports.getFieldFromTFile = exports.doesFieldExistInTFile = void 0;
    var Internal_1 = require_Internal();
    function doesFieldExistInTFile(field, file, plugin, isInline = false) {
      const metadata = Internal_1.Internal.getMetadataFromFileCache(file, plugin);
      return Internal_1.Internal.hasField(field, metadata);
    }
    exports.doesFieldExistInTFile = doesFieldExistInTFile;
    function getFieldFromTFile2(field, file, plugin, isInline = false) {
      const metadata = Internal_1.Internal.getMetadataFromFileCache(file, plugin);
      return Internal_1.Internal.getField(field, metadata);
    }
    exports.getFieldFromTFile = getFieldFromTFile2;
    function insertFieldInTFile(field, value, file, plugin, isInline = false) {
      return __awaiter(this, void 0, void 0, function* () {
        const metadata = Internal_1.Internal.getMetadataFromFileCache(file, plugin);
        Internal_1.Internal.insertField(field, value, metadata);
        yield Internal_1.Internal.updateFrontmatter(metadata, file, plugin);
      });
    }
    exports.insertFieldInTFile = insertFieldInTFile;
    function updateFieldInTFile(field, value, file, plugin, isInline = false) {
      return __awaiter(this, void 0, void 0, function* () {
        const metadata = Internal_1.Internal.getMetadataFromFileCache(file, plugin);
        Internal_1.Internal.updateField(field, value, metadata);
        yield Internal_1.Internal.updateFrontmatter(metadata, file, plugin);
      });
    }
    exports.updateFieldInTFile = updateFieldInTFile;
    function updateOrInsertFieldInTFile2(field, value, file, plugin, isInline = false) {
      return __awaiter(this, void 0, void 0, function* () {
        let metadata = Internal_1.Internal.getMetadataFromFileCache(file, plugin);
        Internal_1.Internal.updateOrInsertField(field, value, metadata);
        yield Internal_1.Internal.updateFrontmatter(metadata, file, plugin);
      });
    }
    exports.updateOrInsertFieldInTFile = updateOrInsertFieldInTFile2;
    function deleteFieldInTFile(field, file, plugin, isInline = false) {
      return __awaiter(this, void 0, void 0, function* () {
        const metadata = Internal_1.Internal.getMetadataFromFileCache(file, plugin);
        Internal_1.Internal.deleteField(field, metadata);
        yield Internal_1.Internal.updateFrontmatter(metadata, file, plugin);
      });
    }
    exports.deleteFieldInTFile = deleteFieldInTFile;
    function getFrontmatterOfTFile3(file, plugin) {
      return Internal_1.Internal.getMetadataFromFileCache(file, plugin);
    }
    exports.getFrontmatterOfTFile = getFrontmatterOfTFile3;
    function setFrontmatterOfTFile(metadata, file, plugin) {
      return __awaiter(this, void 0, void 0, function* () {
        yield Internal_1.Internal.updateFrontmatter(metadata, file, plugin);
      });
    }
    exports.setFrontmatterOfTFile = setFrontmatterOfTFile;
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MetaBindPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian14 = require("obsidian");

// src/settings/Settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  devMode: false,
  preferredDateFormat: "YYYY-MM-DD",
  useUsDateInputOrder: false,
  syncInterval: 200,
  minSyncInterval: 50,
  maxSyncInterval: 1e3,
  inputTemplates: ""
};
var MetaBindSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Meta Bind Plugin Settings" });
    new import_obsidian.Setting(containerEl).setName("Sync interval").setDesc(`The interval in milli-seconds between disk writes. Changing this number is not recommended except if your hard drive is exceptionally slow. Standard: ${DEFAULT_SETTINGS.syncInterval}; Minimum: ${DEFAULT_SETTINGS.minSyncInterval}; Maximum: ${DEFAULT_SETTINGS.maxSyncInterval}`).addText((cb) => {
      cb.setValue(this.plugin.settings.syncInterval.toString());
      cb.onChange((data) => {
        this.plugin.settings.syncInterval = Number.parseInt(data);
        if (Number.isNaN(this.plugin.settings.syncInterval)) {
          this.plugin.settings.syncInterval = DEFAULT_SETTINGS.syncInterval;
        }
        if (this.plugin.settings.syncInterval < DEFAULT_SETTINGS.minSyncInterval) {
          this.plugin.settings.syncInterval = DEFAULT_SETTINGS.minSyncInterval;
        }
        if (this.plugin.settings.syncInterval > DEFAULT_SETTINGS.maxSyncInterval) {
          this.plugin.settings.syncInterval = DEFAULT_SETTINGS.maxSyncInterval;
        }
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Date format").setDesc(`The date format to be used by this plugin. Changing this setting will break the parsing of existing date inputs. Here is a list of all available date tokes https://momentjs.com/docs/#/displaying/.`).addText((cb) => {
      cb.setValue(this.plugin.settings.preferredDateFormat);
      cb.onChange((data) => {
        this.plugin.settings.preferredDateFormat = data;
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Use US date input field order").setDesc(`When enabled the month input is before the day input.`).addToggle((cb) => {
      cb.setValue(this.plugin.settings.useUsDateInputOrder);
      cb.onChange((data) => {
        this.plugin.settings.useUsDateInputOrder = data;
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Templates").setDesc(`You can specify templates here, and access them using \`TEMPLATE_INPUT[...]\` in your notes.`);
    const ta = new import_obsidian.TextAreaComponent(containerEl);
    ta.setValue(this.plugin.settings.inputTemplates);
    ta.setPlaceholder("template_name -> INPUT[input_type(argument(value)):bind_target]");
    ta.inputEl.style.width = "100%";
    ta.inputEl.style.height = "200px";
    ta.onChange((data) => {
      this.plugin.settings.inputTemplates = data;
      this.plugin.saveSettings();
    });
    new import_obsidian.Setting(containerEl).setName("Dev Mode").setDesc("Enable dev mode. Not recommended unless you want to debug this plugin.").addToggle((cb) => {
      cb.setValue(this.plugin.settings.devMode);
      cb.onChange((data) => {
        this.plugin.settings.devMode = data;
        this.plugin.saveSettings();
      });
    });
  }
};

// src/InputFieldMarkdownRenderChild.ts
var import_obsidian13 = require("obsidian");

// src/utils/Logger.ts
var _Logger = class {
  static log(...data) {
    console.log(this.prefix, ...data);
  }
  static logDebug(...data) {
    if (this.devMode) {
      _Logger.log(...data);
    }
  }
  static logWarning(...data) {
    console.warn(this.prefix, data);
  }
  static warn(...data) {
    console.warn(data);
  }
  static logError(...data) {
    console.error(this.prefix, data);
  }
};
var Logger = _Logger;
Logger.prefix = "meta-bind |";

// src/inputFields/AbstractInputField.ts
var AbstractInputField = class {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    this.inputFieldMarkdownRenderChild = inputFieldMarkdownRenderChild;
    this.onValueChange = onValueChange;
  }
};
AbstractInputField.allowCodeBlock = true;
AbstractInputField.allowInlineCodeBlock = true;

// src/inputFields/ToggleInputField.ts
var import_obsidian2 = require("obsidian");

// src/utils/Utils.ts
var MetaBindInternalError = class extends Error {
  constructor(message) {
    super(`[MB_INTERNAL_ERROR - please report this error here https://github.com/mProjectsCode/obsidian-meta-bind-plugin/issues] ${message}`);
  }
};
var MetaBindParsingError = class extends Error {
  constructor(message) {
    super(`[MB_PARSING_ERROR] ${message}`);
  }
};
var MetaBindBindTargetError = class extends Error {
  constructor(message) {
    super(`[MB_BIND_TARGET_ERROR] ${message}`);
  }
};
function getFileName(path) {
  var _a;
  return (_a = path.split("/").at(-1)) != null ? _a : path;
}
function isPath(path) {
  return path.split("/").length > 1;
}
function removeFileEnding(fileName) {
  const fileNameParts = fileName.split(".");
  if (fileNameParts.length === 1) {
    return fileName;
  } else {
    let newFileName = fileNameParts[0];
    for (let i = 1; i < fileNameParts.length - 1; i++) {
      newFileName += "." + fileNameParts[i];
    }
    return newFileName;
  }
}
function mod(n, m) {
  return (n % m + m) % m;
}
function arrayEquals(arr1, arr2) {
  if (arr1.length !== arr2.length) {
    return false;
  }
  for (const arr1Element of arr1) {
    if (!arr2.contains(arr1Element)) {
      return false;
    }
  }
  return true;
}
function isTruthy(value) {
  return !!value;
}
function isFalsy(value) {
  return !value;
}
function equalOrIncludes(str1, str2) {
  return str1 === str2 || str1.includes(str2) || str2.includes(str1);
}

// src/inputFields/ToggleInputField.ts
var ToggleInputField = class extends AbstractInputField {
  getValue() {
    if (!this.toggleComponent) {
      throw new MetaBindInternalError("toggle input component is undefined");
    }
    return this.toggleComponent.getValue();
  }
  setValue(value) {
    if (!this.toggleComponent) {
      throw new MetaBindInternalError("toggle input component is undefined");
    }
    if (value != null && typeof value == "boolean") {
      this.toggleComponent.setValue(value);
    } else {
      Logger.logWarning(`can not set value of toggle to '${value}'`);
      this.toggleComponent.setValue(false);
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return false;
  }
  getHtmlElement() {
    if (!this.toggleComponent) {
      throw new MetaBindInternalError("toggle input component is undefined");
    }
    return this.toggleComponent.toggleEl;
  }
  render(container) {
    const component = new import_obsidian2.ToggleComponent(container);
    component.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
    component.onChange(this.onValueChange);
    this.toggleComponent = component;
  }
};

// src/inputFields/TextInputField.ts
var import_obsidian3 = require("obsidian");
var TextInputField = class extends AbstractInputField {
  getValue() {
    if (!this.textComponent) {
      throw new MetaBindInternalError("text input component is undefined");
    }
    return this.textComponent.getValue();
  }
  setValue(value) {
    if (!this.textComponent) {
      throw new MetaBindInternalError("text input component is undefined");
    }
    if (value != null && typeof value == "string") {
      this.textComponent.setValue(value);
    } else {
      Logger.logWarning(`can not set value of text input to '${value}'`);
      this.textComponent.setValue("");
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return "";
  }
  getHtmlElement() {
    if (!this.textComponent) {
      throw new MetaBindInternalError("text input component is undefined");
    }
    return this.textComponent.inputEl;
  }
  render(container) {
    const component = new import_obsidian3.TextComponent(container);
    component.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
    component.onChange(this.onValueChange);
    this.textComponent = component;
  }
};

// src/inputFields/SliderInputField.ts
var import_obsidian4 = require("obsidian");

// src/utils/ParserUtils.ts
var EnclosingPair = class {
  constructor(openingString, closingString) {
    if (isFalsy(openingString)) {
      throw new MetaBindInternalError("opening string must not be empty");
    }
    this.openingEqualsClosing = isFalsy(closingString) || openingString === closingString;
    if (this.openingEqualsClosing) {
      this._openingString = openingString;
      this._closingString = openingString;
    } else {
      this._openingString = openingString;
      this._closingString = closingString;
    }
  }
  get openingString() {
    return this._openingString;
  }
  get closingString() {
    return this.openingEqualsClosing ? this._openingString : this._closingString;
  }
  overlaps(other) {
    return equalOrIncludes(this.openingString, other.openingString) || equalOrIncludes(this.openingString, other.closingString) || equalOrIncludes(this.closingString, other.openingString) || equalOrIncludes(this.closingString, other.closingString);
  }
  equals(other) {
    if (isFalsy(other)) {
      return false;
    }
    return this.openingString === other.openingString && this.closingString === other.closingString;
  }
  toString() {
    return JSON.stringify(this);
  }
};
var ParserUtils = class {
  static split(str, separator, ignore) {
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    if (!separator) {
      throw new MetaBindInternalError("separator must not be empty");
    }
    let subStr = "";
    const subStrings = [];
    if (ignore) {
      let remainingOpeningStringCount = ParserUtils.numberOfOccurrences(str, ignore.openingString);
      let remainingClosingStringCount = ParserUtils.numberOfOccurrences(str, ignore.closingString);
      let enclosingLevel = 0;
      strLoop:
        for (let i = 0; i < str.length; i++) {
          if (enclosingLevel === 0 && ParserUtils.isStringAt(str, separator, i)) {
            subStrings.push(subStr);
            subStr = "";
            i += separator.length - 1;
          } else {
            subStr += str[i];
          }
          if (ignore.openingEqualsClosing) {
            if (ParserUtils.isStringAt(str, ignore.openingString, i)) {
              if (enclosingLevel % 2 === 0 && remainingOpeningStringCount === 1) {
              } else if (enclosingLevel % 2 === 0) {
                enclosingLevel += 1;
                for (let j = 1; j < ignore.openingString.length; j++) {
                  i += 1;
                  subStr += str[i];
                  if (i >= str.length) {
                    break strLoop;
                  }
                }
              } else {
                enclosingLevel -= 1;
                for (let j = 1; j < ignore.closingString.length; j++) {
                  i += 1;
                  subStr += str[i];
                  if (i >= str.length) {
                    break strLoop;
                  }
                }
              }
              remainingOpeningStringCount -= 1;
            }
          } else {
            if (ParserUtils.isStringAt(str, ignore.openingString, i)) {
              if (remainingOpeningStringCount <= remainingClosingStringCount) {
                enclosingLevel += 1;
                for (let j = 1; j < ignore.openingString.length; j++) {
                  i += 1;
                  subStr += str[i];
                  if (i >= str.length) {
                    break strLoop;
                  }
                }
              }
              remainingOpeningStringCount -= 1;
            } else if (ParserUtils.isStringAt(str, ignore.closingString, i)) {
              if (enclosingLevel > 0) {
                enclosingLevel -= 1;
                for (let j = 1; j < ignore.closingString.length; j++) {
                  i += 1;
                  subStr += str[i];
                  if (i >= str.length) {
                    break strLoop;
                  }
                }
              }
              remainingClosingStringCount -= 1;
            }
          }
        }
    } else {
      for (let i = 0; i < str.length; i++) {
        if (ParserUtils.isStringAt(str, separator, i)) {
          subStrings.push(subStr);
          subStr = "";
          i += separator.length - 1;
        } else {
          subStr += str[i];
        }
      }
    }
    subStrings.push(subStr);
    return subStrings;
  }
  static removeInBetween(str, enclosingPair) {
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    let remainingOpeningStringCount = ParserUtils.numberOfOccurrences(str, enclosingPair.openingString);
    let remainingClosingStringCount = ParserUtils.numberOfOccurrences(str, enclosingPair.closingString);
    let enclosingLevel = 0;
    let subStr = "";
    for (let i = 0; i < str.length; i++) {
      if (enclosingPair.openingEqualsClosing) {
        if (ParserUtils.isStringAt(str, enclosingPair.openingString, i)) {
          if (enclosingLevel % 2 === 0 && remainingOpeningStringCount === 1) {
          } else if (enclosingLevel % 2 === 0) {
            enclosingLevel += 1;
            i += enclosingPair.openingString.length;
            if (i >= str.length) {
              break;
            }
          } else {
            enclosingLevel -= 1;
            i += enclosingPair.closingString.length;
            if (i >= str.length) {
              break;
            }
          }
          remainingOpeningStringCount -= 1;
        }
      } else {
        if (ParserUtils.isStringAt(str, enclosingPair.openingString, i)) {
          if (remainingOpeningStringCount <= remainingClosingStringCount) {
            enclosingLevel += 1;
            i += enclosingPair.openingString.length;
            if (i >= str.length) {
              break;
            }
          }
          remainingOpeningStringCount -= 1;
        } else if (ParserUtils.isStringAt(str, enclosingPair.closingString, i)) {
          if (enclosingLevel > 0) {
            enclosingLevel -= 1;
            i += enclosingPair.closingString.length;
            if (i >= str.length) {
              break;
            }
          }
          remainingClosingStringCount -= 1;
        }
      }
      if (enclosingLevel === 0) {
        subStr += str[i];
      }
    }
    return subStr;
  }
  static getInBetween(str, enclosingPair) {
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    let remainingOpeningStringCount = ParserUtils.numberOfOccurrences(str, enclosingPair.openingString);
    let remainingClosingStringCount = ParserUtils.numberOfOccurrences(str, enclosingPair.closingString);
    let enclosingLevel = 0;
    let subStr = "";
    const subStrings = [];
    strLoop:
      for (let i = 0; i < str.length; i++) {
        if (enclosingPair.openingEqualsClosing) {
          if (ParserUtils.isStringAt(str, enclosingPair.openingString, i)) {
            if (enclosingLevel % 2 === 0 && remainingOpeningStringCount === 1) {
            } else if (enclosingLevel % 2 === 0) {
              enclosingLevel += 1;
              subStr += str[i];
              for (let j = 1; j < enclosingPair.openingString.length; j++) {
                i += 1;
                subStr += str[i];
                if (i >= str.length) {
                  break strLoop;
                }
              }
            } else {
              enclosingLevel -= 1;
              subStr += str[i];
              for (let j = 1; j < enclosingPair.closingString.length; j++) {
                i += 1;
                subStr += str[i];
                if (i > str.length) {
                  break strLoop;
                }
              }
              subStrings.push(subStr);
              subStr = "";
            }
            remainingOpeningStringCount -= 1;
          } else {
            if (enclosingLevel >= 1) {
              subStr += str[i];
            }
          }
        } else {
          if (ParserUtils.isStringAt(str, enclosingPair.openingString, i)) {
            if (remainingOpeningStringCount <= remainingClosingStringCount) {
              enclosingLevel += 1;
              subStr += str[i];
              for (let j = 1; j < enclosingPair.openingString.length; j++) {
                i += 1;
                subStr += str[i];
                if (i >= str.length) {
                  break strLoop;
                }
              }
            }
            remainingOpeningStringCount -= 1;
          } else if (ParserUtils.isStringAt(str, enclosingPair.closingString, i)) {
            if (enclosingLevel > 0) {
              enclosingLevel -= 1;
              subStr += str[i];
              for (let j = 1; j < enclosingPair.closingString.length; j++) {
                i += 1;
                subStr += str[i];
                if (i > str.length) {
                  break strLoop;
                }
              }
              if (enclosingLevel === 0) {
                subStrings.push(subStr);
                subStr = "";
              }
            }
            remainingClosingStringCount -= 1;
          } else {
            if (enclosingLevel >= 1) {
              subStr += str[i];
            }
          }
        }
      }
    if (subStrings.length === 0) {
      return "";
    } else if (subStrings.length === 1) {
      return subStrings[0].substring(enclosingPair.openingString.length, subStrings[0].length - enclosingPair.closingString.length);
    } else {
      return subStrings.map((x) => x.substring(enclosingPair.openingString.length, x.length - enclosingPair.closingString.length));
    }
  }
  static isStringAt(str, subStr, index) {
    if (index < 0) {
      throw new MetaBindInternalError("index must be greater than 0");
    }
    if (index >= str.length) {
      throw new MetaBindInternalError("index out of bounds of string");
    }
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    if (!subStr) {
      throw new MetaBindInternalError("sub string must not be empty");
    }
    for (let i = 0; i < subStr.length; i++) {
      if (str[i + index] !== subStr[i]) {
        return false;
      }
    }
    return true;
  }
  static contains(str, subStr) {
    return ParserUtils.numberOfOccurrences(str, subStr) > 0;
  }
  static numberOfOccurrences(str, subStr) {
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    if (!subStr) {
      throw new MetaBindInternalError("sub string must not be empty");
    }
    let occurrences = 0;
    for (let i = 0; i < str.length; i++) {
      if (ParserUtils.isStringAt(str, subStr, i)) {
        occurrences += 1;
      }
    }
    return occurrences;
  }
};

// src/inputFieldArguments/AbstractInputFieldArgument.ts
var AbstractInputFieldArgument = class {
  constructor() {
    this.identifier = "invalid" /* INVALID */;
    this.allowedInputFields = [];
    this.requiresValue = false;
    this.allowMultiple = false;
  }
  isAllowed(inputFieldType) {
    if (this.allowedInputFields.length === 0) {
      return true;
    }
    return this.allowedInputFields.contains(inputFieldType);
  }
  getAllowedInputFieldsAsString() {
    return this.allowedInputFields.length === 0 ? "all" : this.allowedInputFields.join(", ");
  }
};

// src/inputFieldArguments/ClassInputFieldArgument.ts
var ClassInputFieldArgument = class extends AbstractInputFieldArgument {
  constructor() {
    super(...arguments);
    this.identifier = "class" /* CLASS */;
    this.allowedInputFields = [];
    this.value = [];
    this.requiresValue = true;
    this.allowMultiple = true;
  }
  parseValue(valueStr) {
    this.value = valueStr.split(" ");
  }
};

// src/inputFieldArguments/AddLabelsInputFieldArgument.ts
var AddLabelsInputFieldArgument = class extends AbstractInputFieldArgument {
  constructor() {
    super(...arguments);
    this.identifier = "addLabels" /* ADD_LABELS */;
    this.allowedInputFields = ["slider" /* SLIDER */];
    this.value = true;
    this.requiresValue = false;
    this.allowMultiple = false;
  }
  parseValue(valueStr) {
    this.value = valueStr.toLowerCase() === "true";
  }
};

// src/inputFieldArguments/MinValueInputFieldArgument.ts
var MinValueInputFieldArgument = class extends AbstractInputFieldArgument {
  constructor() {
    super(...arguments);
    this.identifier = "minValue" /* MIN_VALUE */;
    this.allowedInputFields = ["slider" /* SLIDER */];
    this.value = 0;
    this.requiresValue = true;
    this.allowMultiple = false;
  }
  parseValue(valueStr) {
    this.value = Number.parseInt(valueStr);
    if (Number.isNaN(this.value)) {
      throw new MetaBindParsingError("value of argument 'minValue' must be of type number");
    }
  }
};

// src/inputFieldArguments/MaxValueInputFieldArgument.ts
var MaxValueInputFieldArgument = class extends AbstractInputFieldArgument {
  constructor() {
    super(...arguments);
    this.identifier = "maxValue" /* MAX_VALUE */;
    this.allowedInputFields = ["slider" /* SLIDER */];
    this.value = 100;
    this.requiresValue = true;
    this.allowMultiple = false;
  }
  parseValue(valueStr) {
    this.value = Number.parseInt(valueStr);
    if (Number.isNaN(this.value)) {
      throw new MetaBindParsingError("value of argument 'maxValue' must be of type number");
    }
  }
};

// src/inputFieldArguments/OptionInputFieldArgument.ts
var OptionInputFieldArgument = class extends AbstractInputFieldArgument {
  constructor() {
    super(...arguments);
    this.identifier = "option" /* OPTION */;
    this.allowedInputFields = ["select" /* SELECT */, "multi_select" /* MULTI_SELECT */];
    this.value = "";
    this.requiresValue = true;
    this.allowMultiple = true;
  }
  parseValue(valueStr) {
    this.value = valueStr;
  }
};

// src/inputFieldArguments/TitleInputFieldArgument.ts
var TitleInputFieldArgument = class extends AbstractInputFieldArgument {
  constructor() {
    super(...arguments);
    this.identifier = "title" /* TITLE */;
    this.allowedInputFields = ["select" /* SELECT */, "multi_select" /* MULTI_SELECT */];
    this.value = "";
    this.requiresValue = true;
    this.allowMultiple = false;
  }
  parseValue(valueStr) {
    this.value = valueStr;
  }
};

// src/inputFieldArguments/AlignRightInputFieldArgument.ts
var AlignRightInputFieldArgument = class extends AbstractInputFieldArgument {
  constructor() {
    super(...arguments);
    this.identifier = "alignRight" /* ALIGN_RIGHT */;
    this.allowedInputFields = ["date_picker" /* DATE_PICKER */];
    this.value = true;
    this.requiresValue = false;
    this.allowMultiple = false;
  }
  parseValue(valueStr) {
    this.value = valueStr.toLowerCase() === "true";
  }
};

// src/inputFieldArguments/InputFieldArgumentFactory.ts
var InputFieldArgumentFactory = class {
  static createInputFieldArgument(argumentIdentifier) {
    if (argumentIdentifier === "class" /* CLASS */) {
      return new ClassInputFieldArgument();
    } else if (argumentIdentifier === "addLabels" /* ADD_LABELS */) {
      return new AddLabelsInputFieldArgument();
    } else if (argumentIdentifier === "minValue" /* MIN_VALUE */) {
      return new MinValueInputFieldArgument();
    } else if (argumentIdentifier === "maxValue" /* MAX_VALUE */) {
      return new MaxValueInputFieldArgument();
    } else if (argumentIdentifier === "option" /* OPTION */) {
      return new OptionInputFieldArgument();
    } else if (argumentIdentifier === "title" /* TITLE */) {
      return new TitleInputFieldArgument();
    } else if (argumentIdentifier === "alignRight" /* ALIGN_RIGHT */) {
      return new AlignRightInputFieldArgument();
    } else {
      throw new MetaBindParsingError(`unknown argument '${argumentIdentifier}'`);
    }
  }
};

// src/inputFieldArguments/InputFieldArgumentContainer.ts
var InputFieldArgumentContainer = class {
  constructor() {
    this.arguments = [];
  }
  add(argument) {
    this.arguments.push(argument);
  }
  validate() {
    let map = {};
    for (const inputFieldArgumentType of Object.values(InputFieldArgumentType)) {
      map[inputFieldArgumentType] = 0;
    }
    for (const argument of this.arguments) {
      map[argument.identifier] += 1;
      if (map[argument.identifier] > 1 && !argument.allowMultiple) {
        throw new MetaBindParsingError(`argument '${argument.identifier}' does not allow duplicates`);
      }
    }
  }
  mergeByOverride(other) {
    for (const argument of other.arguments) {
      if (!argument.allowMultiple) {
        this.arguments = this.arguments.filter((x) => x.identifier !== argument.identifier);
      }
      this.arguments.push(argument);
    }
    this.validate();
    return this;
  }
  mergeByThrow(other) {
    for (const argument of other.arguments) {
      if (!argument.allowMultiple) {
        if (this.arguments.filter((x) => x.identifier === argument.identifier).length > 0) {
          throw new MetaBindParsingError("can not merge InputFieldArgumentContainers, since arguments overlap");
        }
      }
      this.arguments.push(argument);
    }
    this.validate();
    return this;
  }
};

// src/parsers/InputFieldDeclarationParser.ts
var InputFieldType3 = /* @__PURE__ */ ((InputFieldType4) => {
  InputFieldType4["TOGGLE"] = "toggle";
  InputFieldType4["SLIDER"] = "slider";
  InputFieldType4["TEXT"] = "text";
  InputFieldType4["TEXT_AREA"] = "text_area";
  InputFieldType4["SELECT"] = "select";
  InputFieldType4["MULTI_SELECT"] = "multi_select";
  InputFieldType4["DATE"] = "date";
  InputFieldType4["TIME"] = "time";
  InputFieldType4["DATE_PICKER"] = "date_picker";
  InputFieldType4["INVALID"] = "invalid";
  return InputFieldType4;
})(InputFieldType3 || {});
var InputFieldArgumentType = /* @__PURE__ */ ((InputFieldArgumentType2) => {
  InputFieldArgumentType2["CLASS"] = "class";
  InputFieldArgumentType2["ADD_LABELS"] = "addLabels";
  InputFieldArgumentType2["MIN_VALUE"] = "minValue";
  InputFieldArgumentType2["MAX_VALUE"] = "maxValue";
  InputFieldArgumentType2["OPTION"] = "option";
  InputFieldArgumentType2["TITLE"] = "title";
  InputFieldArgumentType2["ALIGN_RIGHT"] = "alignRight";
  InputFieldArgumentType2["INVALID"] = "invalid";
  return InputFieldArgumentType2;
})(InputFieldArgumentType || {});
var _InputFieldDeclarationParser = class {
  static parse(fullDeclaration) {
    var _a, _b;
    let inputFieldDeclaration = {};
    let useTemplate = false;
    let templateName = "";
    inputFieldDeclaration.fullDeclaration = fullDeclaration;
    const temp = ParserUtils.getInBetween(fullDeclaration, _InputFieldDeclarationParser.squareBracesPair);
    if (Array.isArray(temp)) {
      if (temp.length === 2) {
        useTemplate = true;
        templateName = temp[0];
        inputFieldDeclaration.declaration = temp[1];
      } else {
        throw new MetaBindParsingError("invalid input field declaration");
      }
    } else {
      inputFieldDeclaration.declaration = temp;
    }
    const declarationParts = ParserUtils.split(inputFieldDeclaration.declaration, ":", _InputFieldDeclarationParser.squareBracesPair);
    inputFieldDeclaration.bindTarget = (_a = declarationParts[1]) != null ? _a : "";
    inputFieldDeclaration.isBound = isTruthy(inputFieldDeclaration.bindTarget);
    const inputFieldTypeWithArguments = declarationParts[0];
    if (inputFieldTypeWithArguments) {
      const inputFieldTypeString = ParserUtils.removeInBetween(inputFieldTypeWithArguments, _InputFieldDeclarationParser.roundBracesPair);
      inputFieldDeclaration.inputFieldType = _InputFieldDeclarationParser.getInputFieldType(inputFieldTypeString);
      const inputFieldArgumentsString = ParserUtils.getInBetween(inputFieldTypeWithArguments, _InputFieldDeclarationParser.roundBracesPair);
      if (inputFieldArgumentsString) {
        inputFieldDeclaration.argumentContainer = _InputFieldDeclarationParser.parseArguments(inputFieldArgumentsString, inputFieldDeclaration.inputFieldType);
      } else {
        inputFieldDeclaration.argumentContainer = new InputFieldArgumentContainer();
      }
    } else {
      inputFieldDeclaration.inputFieldType = "invalid" /* INVALID */;
      inputFieldDeclaration.argumentContainer = new InputFieldArgumentContainer();
    }
    if (useTemplate) {
      const template = (_b = _InputFieldDeclarationParser.templates.filter((x) => x.identifier === templateName).first()) == null ? void 0 : _b.template;
      if (template) {
        inputFieldDeclaration.bindTarget = inputFieldDeclaration.bindTarget || template.bindTarget;
        inputFieldDeclaration.isBound = inputFieldDeclaration.isBound || template.isBound;
        inputFieldDeclaration.inputFieldType = inputFieldDeclaration.inputFieldType === "invalid" /* INVALID */ ? template.inputFieldType : inputFieldDeclaration.inputFieldType || template.inputFieldType;
        inputFieldDeclaration.argumentContainer = template.argumentContainer.mergeByOverride(inputFieldDeclaration.argumentContainer);
      } else {
        throw new MetaBindParsingError(`unknown template name '${templateName}'`);
      }
    }
    if (inputFieldDeclaration.inputFieldType === "invalid" /* INVALID */) {
      throw new MetaBindParsingError(`unknown input field type`);
    }
    return inputFieldDeclaration;
  }
  static parseTemplates(templates) {
    let templateDeclarations = templates ? ParserUtils.split(templates, "\n", _InputFieldDeclarationParser.squareBracesPair) : [];
    templateDeclarations = templateDeclarations.map((x) => x.trim()).filter((x) => x.length > 0);
    for (const templateDeclaration of templateDeclarations) {
      let templateDeclarationParts = ParserUtils.split(templateDeclaration, "->", _InputFieldDeclarationParser.squareBracesPair);
      templateDeclarationParts = templateDeclarationParts.map((x) => x.trim());
      if (templateDeclarationParts.length === 1) {
        throw new MetaBindParsingError("Invalid template syntax");
      } else if (templateDeclarationParts.length === 2) {
        _InputFieldDeclarationParser.templates.push({
          identifier: templateDeclarationParts[0],
          template: _InputFieldDeclarationParser.parse(templateDeclarationParts[1])
        });
      }
    }
    console.log(_InputFieldDeclarationParser.templates);
  }
  static parseArguments(inputFieldArgumentsString, inputFieldType) {
    let inputFieldArgumentStrings = ParserUtils.split(inputFieldArgumentsString, ",", _InputFieldDeclarationParser.roundBracesPair);
    inputFieldArgumentStrings = inputFieldArgumentStrings.map((x) => x.trim());
    const inputFieldArgumentContainer = new InputFieldArgumentContainer();
    for (const inputFieldArgumentString of inputFieldArgumentStrings) {
      const inputFieldArgumentIdentifier = _InputFieldDeclarationParser.extractInputFieldArgumentIdentifier(inputFieldArgumentString);
      const inputFieldArgument = InputFieldArgumentFactory.createInputFieldArgument(inputFieldArgumentIdentifier);
      if (!inputFieldArgument.isAllowed(inputFieldType)) {
        throw new MetaBindParsingError(`argument '${inputFieldArgumentIdentifier}' is only applicable to ${inputFieldArgument.getAllowedInputFieldsAsString()} input fields`);
      }
      if (inputFieldArgument.requiresValue) {
        inputFieldArgument.parseValue(_InputFieldDeclarationParser.extractInputFieldArgumentValue(inputFieldArgumentString));
      }
      inputFieldArgumentContainer.add(inputFieldArgument);
    }
    inputFieldArgumentContainer.validate();
    return inputFieldArgumentContainer;
  }
  static extractInputFieldArgumentIdentifier(argumentString) {
    return ParserUtils.removeInBetween(argumentString, _InputFieldDeclarationParser.roundBracesPair);
  }
  static extractInputFieldArgumentValue(argumentString) {
    const argumentName = this.extractInputFieldArgumentIdentifier(argumentString);
    const argumentValue = ParserUtils.getInBetween(argumentString, _InputFieldDeclarationParser.roundBracesPair);
    if (!argumentValue) {
      throw new MetaBindParsingError(`argument '${argumentName}' requires a non empty value`);
    }
    return argumentValue;
  }
  static getInputFieldType(str) {
    for (const entry of Object.entries(InputFieldType3)) {
      if (entry[1] === str) {
        return entry[1];
      }
    }
    return "invalid" /* INVALID */;
  }
};
var InputFieldDeclarationParser = _InputFieldDeclarationParser;
InputFieldDeclarationParser.roundBracesPair = new EnclosingPair("(", ")");
InputFieldDeclarationParser.squareBracesPair = new EnclosingPair("[", "]");
InputFieldDeclarationParser.curlyBracesPair = new EnclosingPair("{", "}");
InputFieldDeclarationParser.allBracesPairs = [
  _InputFieldDeclarationParser.roundBracesPair,
  _InputFieldDeclarationParser.squareBracesPair,
  _InputFieldDeclarationParser.curlyBracesPair
];
InputFieldDeclarationParser.templates = [];

// src/inputFields/SliderInputField.ts
var SliderInputField = class extends AbstractInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    var _a, _b, _c, _d;
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.minValue = (_b = (_a = inputFieldMarkdownRenderChild.getArgument("minValue" /* MIN_VALUE */)) == null ? void 0 : _a.value) != null ? _b : 0;
    this.maxValue = (_d = (_c = inputFieldMarkdownRenderChild.getArgument("maxValue" /* MAX_VALUE */)) == null ? void 0 : _c.value) != null ? _d : 100;
  }
  getValue() {
    if (!this.sliderComponent) {
      throw new MetaBindInternalError("slider input component is undefined");
    }
    return this.sliderComponent.getValue();
  }
  setValue(value) {
    if (!this.sliderComponent) {
      throw new MetaBindInternalError("slider input component is undefined");
    }
    if (value != null && typeof value == "number") {
      if (value >= this.minValue && value <= this.maxValue) {
        this.sliderComponent.setValue(value);
      }
    } else {
      Logger.logWarning(`can not set value of slider to '${value}'`);
      this.sliderComponent.setValue(this.getDefaultValue());
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return this.minValue;
  }
  getHtmlElement() {
    if (!this.sliderComponent) {
      throw new MetaBindInternalError("slider input component is undefined");
    }
    return this.sliderComponent.sliderEl;
  }
  render(container) {
    container.removeClass("meta-bind-plugin-input-wrapper");
    container.addClass("meta-bind-plugin-flex-input-wrapper");
    const labelArgument = this.inputFieldMarkdownRenderChild.getArgument("addLabels" /* ADD_LABELS */);
    if (labelArgument && labelArgument.value === true) {
      container.createSpan({ text: this.minValue.toString(), cls: "meta-bind-plugin-slider-input-label" });
    }
    const component = new import_obsidian4.SliderComponent(container);
    component.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
    component.onChange(this.onValueChange);
    component.setDynamicTooltip();
    component.setLimits(this.minValue, this.maxValue, 1);
    component.sliderEl.addClass("meta-bind-plugin-slider-input");
    if (labelArgument && labelArgument.value === true) {
      container.createSpan({ text: this.maxValue.toString(), cls: "meta-bind-plugin-slider-input-label" });
    }
    this.sliderComponent = component;
  }
};

// src/inputFields/TextAreaInputField.ts
var import_obsidian5 = require("obsidian");
var TextAreaInputField = class extends AbstractInputField {
  getValue() {
    if (!this.textAreaComponent) {
      throw new MetaBindInternalError("text area input component is undefined");
    }
    return this.textAreaComponent.getValue();
  }
  setValue(value) {
    if (!this.textAreaComponent) {
      throw new MetaBindInternalError("text area input component is undefined");
    }
    if (value != null && typeof value == "string") {
      this.textAreaComponent.setValue(value);
    } else {
      Logger.logWarning(`can not set value of text area input to '${value}'`);
      this.textAreaComponent.setValue("");
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return "";
  }
  getHtmlElement() {
    if (!this.textAreaComponent) {
      throw new MetaBindInternalError("text area input component is undefined");
    }
    return this.textAreaComponent.inputEl;
  }
  render(container) {
    const component = new import_obsidian5.TextAreaComponent(container);
    component.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
    component.onChange(this.onValueChange);
    this.textAreaComponent = component;
  }
};

// src/inputFields/SelectInputFieldElement.ts
var SelectInputFieldElement = class {
  constructor(value, parentElement, id, multiSelectInputField, active = false) {
    this.value = value;
    this.id = id;
    this.active = active;
    this.highlighted = false;
    this.selectInputField = multiSelectInputField;
    this.cssClass = "meta-bind-plugin-select-input-element";
    this.activeClass = "meta-bind-plugin-select-input-element-selected";
    this.hoverClass = "meta-bind-plugin-select-input-element-hover";
    this.element = parentElement.createDiv({ cls: this.cssClass });
    this.element.id = this.getHTMLId();
    this.element.on("click", "#" + this.getHTMLId(), () => {
      this.setActive(!this.active);
      if (!this.selectInputField.allowMultiSelect) {
        this.selectInputField.disableAllOtherElements(this.id);
      }
    });
    this.element.on("mouseenter", "#" + this.getHTMLId(), () => {
      this.setHighlighted(true);
    });
    this.element.on("mouseleave", "#" + this.getHTMLId(), () => {
      this.setHighlighted(false);
    });
  }
  getHTMLId() {
    return `meta-bind-select-input-element-${this.selectInputField.inputFieldMarkdownRenderChild.uid}-${this.id}`;
  }
  isHighlighted() {
    return this.highlighted;
  }
  setHighlighted(value) {
    this.highlighted = value;
    if (this.highlighted) {
      this.addClass(this.hoverClass);
      this.selectInputField.deHighlightAllOtherElements(this.id);
    } else {
      this.removeClass(this.hoverClass);
    }
  }
  isActive() {
    return this.active;
  }
  setActive(active, updateParent = true) {
    this.active = active;
    this.update(updateParent);
  }
  update(updateParent) {
    if (this.active) {
      this.addClass(this.activeClass);
    } else {
      this.removeClass(this.activeClass);
    }
    if (updateParent) {
      this.selectInputField.onChange();
    }
  }
  addClass(cssClass) {
    if (!this.element.hasClass(cssClass)) {
      this.element.addClass(cssClass);
    }
  }
  removeClass(cssClass) {
    if (this.element.hasClass(cssClass)) {
      this.element.removeClass(cssClass);
    }
  }
  render() {
    this.element.createEl("div", { text: this.value });
  }
};

// src/inputFields/SelectInputField.ts
var SelectInputField = class extends AbstractInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.elements = [];
    this.allowMultiSelect = false;
  }
  getHtmlElement() {
    if (!this.container) {
      throw new MetaBindInternalError("select input container is undefined");
    }
    return this.container;
  }
  getValue() {
    var _a, _b;
    return (_b = (_a = this.elements.filter((x) => x.isActive()).first()) == null ? void 0 : _a.value) != null ? _b : "";
  }
  setValue(value) {
    for (const element2 of this.elements) {
      if (value === element2.value) {
        element2.setActive(true, false);
      } else {
        element2.setActive(false, false);
      }
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return "";
  }
  onChange() {
    this.onValueChange(this.getValue());
  }
  render(container) {
    container.addClass("meta-bind-plugin-select-input-bg");
    this.container = container;
    const elementWrapper = container.createDiv({ cls: "meta-bind-plugin-select-input-wrapper" });
    const titleArgument = this.inputFieldMarkdownRenderChild.getArgument("title" /* TITLE */);
    if (titleArgument) {
      elementWrapper.createEl("div", { text: titleArgument.value, cls: "meta-bind-plugin-select-input-header" });
    }
    const elementArguments = this.inputFieldMarkdownRenderChild.getArguments("option" /* OPTION */);
    let i = 0;
    for (const elementArgument of elementArguments) {
      const selectInputFieldElement = new SelectInputFieldElement(elementArgument.value, elementWrapper, i, this, false);
      this.elements.push(selectInputFieldElement);
      selectInputFieldElement.render();
      i += 1;
    }
    this.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
  }
  disableAllOtherElements(elementId) {
    for (const selectModalElement of this.elements) {
      if (selectModalElement.id !== elementId) {
        selectModalElement.setActive(false);
      }
    }
  }
  deHighlightAllOtherElements(elementId) {
    for (const selectModalElement of this.elements) {
      if (selectModalElement.id !== elementId) {
        selectModalElement.setHighlighted(false);
      }
    }
  }
  activateHighlighted() {
    for (const selectModalElement of this.elements) {
      if (selectModalElement.isHighlighted()) {
        selectModalElement.setActive(!selectModalElement.isActive());
        if (!this.allowMultiSelect) {
          this.disableAllOtherElements(selectModalElement.id);
        }
      }
    }
  }
  highlightUp() {
    var _a, _b;
    for (const selectModalElement of this.elements) {
      if (selectModalElement.isHighlighted()) {
        (_a = this.getPreviousSelectModalElement(selectModalElement)) == null ? void 0 : _a.setHighlighted(true);
        return;
      }
    }
    (_b = this.elements.at(-1)) == null ? void 0 : _b.setHighlighted(true);
  }
  highlightDown() {
    var _a, _b;
    for (const selectModalElement of this.elements) {
      if (selectModalElement.isHighlighted()) {
        (_a = this.getNextSelectModalElement(selectModalElement)) == null ? void 0 : _a.setHighlighted(true);
        return;
      }
    }
    (_b = this.elements.at(0)) == null ? void 0 : _b.setHighlighted(true);
  }
  getNextSelectModalElement(element2) {
    let nextId = element2.id + 1;
    nextId = mod(nextId, this.elements.length);
    return this.elements.filter((x) => x.id === nextId).at(0);
  }
  getPreviousSelectModalElement(element2) {
    let nextId = element2.id - 1;
    nextId = mod(nextId, this.elements.length);
    return this.elements.filter((x) => x.id === nextId).at(0);
  }
};
SelectInputField.allowInlineCodeBlock = false;

// src/inputFields/MultiSelectInputField.ts
var MultiSelectInputField = class extends SelectInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.allowMultiSelect = true;
  }
  getValue() {
    return this.elements.filter((x) => x.isActive()).map((x) => x.value);
  }
  setValue(value) {
    if (value.length === 0) {
      for (const element2 of this.elements) {
        element2.setActive(false, false);
      }
      return;
    }
    elementLoop:
      for (const element2 of this.elements) {
        for (const valueElement of value) {
          if (valueElement === element2.value) {
            element2.setActive(true, false);
            continue elementLoop;
          }
        }
        element2.setActive(false, false);
      }
  }
  isEqualValue(value) {
    if (!Array.isArray(value)) {
      return false;
    }
    return arrayEquals(this.getValue(), value);
  }
  getDefaultValue() {
    return [];
  }
};

// src/inputFields/DateInputField.ts
var import_obsidian7 = require("obsidian");

// src/parsers/DateParser.ts
var import_obsidian6 = require("obsidian");
var DateParser = class {
  static stringify(date) {
    return date.format(this.dateFormat);
  }
  static parse(dateString) {
    return (0, import_obsidian6.moment)(dateString, DateParser.dateFormat);
  }
  static getDefaultDate() {
    return (0, import_obsidian6.moment)(new Date(DateParser.getDefaultYear(), DateParser.getDefaultMonth(), DateParser.getDefaultDay()));
  }
  static getDefaultDay() {
    return 1;
  }
  static getDefaultMonth() {
    return 1;
  }
  static getDefaultYear() {
    return 2022;
  }
};

// src/inputFields/DateInputField.ts
var DateInputField = class extends AbstractInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.months = {
      "0": "January",
      "1": "February",
      "2": "March",
      "3": "April",
      "4": "May",
      "5": "June",
      "6": "July",
      "7": "August",
      "8": "September",
      "9": "October",
      "10": "November",
      "11": "December"
    };
    this.date = DateParser.getDefaultDate();
    this.days = {};
    for (let i = 1; i <= 31; i++) {
      this.days[i.toString()] = i.toString();
    }
  }
  getHtmlElement() {
    if (!this.container) {
      throw new MetaBindInternalError("toggle input container is undefined");
    }
    return this.container;
  }
  getValue() {
    return DateParser.stringify(this.date);
  }
  setValue(value) {
    var _a;
    if (!this.monthComponent) {
      throw new MetaBindInternalError("date input month component is undefined");
    }
    if (!this.dayComponent) {
      throw new MetaBindInternalError("date input day component is undefined");
    }
    if (!this.yearComponent) {
      throw new MetaBindInternalError("date input hour component is undefined");
    }
    this.date = (_a = DateParser.parse(value)) != null ? _a : DateParser.getDefaultDate();
    if (!this.date.isValid()) {
      this.date = DateParser.getDefaultDate();
      this.onValueChange(this.getValue());
    }
    this.monthComponent.setValue(this.date.month().toString());
    this.dayComponent.setValue(this.date.date().toString());
    this.yearComponent.setValue(this.date.year().toString());
  }
  isEqualValue(value) {
    return value == this.getValue();
  }
  getDefaultValue() {
    return DateParser.stringify(DateParser.getDefaultDate());
  }
  render(container) {
    var _a;
    this.date = (_a = DateParser.parse(this.inputFieldMarkdownRenderChild.getInitialValue())) != null ? _a : DateParser.getDefaultDate();
    if (!this.date.isValid()) {
      this.date = DateParser.getDefaultDate();
      this.onValueChange(this.getValue());
    }
    let useUsInputOrder = this.inputFieldMarkdownRenderChild.plugin.settings.useUsDateInputOrder;
    container.removeClass("meta-bind-plugin-input-wrapper");
    container.addClass("meta-bind-plugin-flex-input-wrapper", "meta-bind-plugin-input-element-group");
    if (!useUsInputOrder) {
      this.dayComponent = new import_obsidian7.DropdownComponent(container);
      this.dayComponent.addOptions(this.days);
      this.dayComponent.setValue(this.date.date().toString());
      this.dayComponent.onChange(this.onDayChange.bind(this));
      this.monthComponent = new import_obsidian7.DropdownComponent(container);
      this.monthComponent.addOptions(this.months);
      this.monthComponent.setValue(this.date.month().toString());
      this.monthComponent.onChange(this.onMonthChange.bind(this));
      this.dayComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
      this.monthComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
    } else {
      this.monthComponent = new import_obsidian7.DropdownComponent(container);
      this.monthComponent.addOptions(this.months);
      this.monthComponent.setValue(this.date.month().toString());
      this.monthComponent.onChange(this.onMonthChange.bind(this));
      this.dayComponent = new import_obsidian7.DropdownComponent(container);
      this.dayComponent.addOptions(this.days);
      this.dayComponent.setValue(this.date.date().toString());
      this.dayComponent.onChange(this.onDayChange.bind(this));
      this.dayComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
      this.monthComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
    }
    this.yearComponent = new import_obsidian7.TextComponent(container);
    this.yearComponent.setValue(this.date.year().toString());
    this.yearComponent.onChange(this.onYearChange.bind(this));
    this.yearComponent.inputEl.addClass("meta-bind-plugin-date-input-year-input");
    this.yearComponent.inputEl.addClass("meta-bind-plugin-input-element-group-element");
    this.yearComponent.inputEl.type = "number";
    this.yearComponent.inputEl.max = "9999";
    this.container = container;
  }
  onMonthChange(value) {
    var _a;
    this.date.month(value);
    const clampedDay = this.clampDay(this.date.date());
    (_a = this.dayComponent) == null ? void 0 : _a.setValue(clampedDay.toString());
    this.date.date(clampedDay);
    this.onValueChange(this.getValue());
  }
  onDayChange(value) {
    var _a;
    const day = Number.parseInt(value);
    const clampedDay = this.clampDay(day);
    if (clampedDay !== day) {
      (_a = this.dayComponent) == null ? void 0 : _a.setValue(clampedDay.toString());
    }
    this.date.date(clampedDay);
    this.onValueChange(this.getValue());
  }
  onYearChange(value) {
    const year = Number.parseInt(value);
    this.date.year(Number.isNaN(year) ? DateParser.getDefaultYear() : year);
    this.onValueChange(this.getValue());
  }
  clampDay(day) {
    if (Number.isNaN(day)) {
      return DateParser.getDefaultDay();
    } else if (day < 1) {
      return 1;
    } else if (day > this.date.daysInMonth()) {
      return this.date.daysInMonth();
    }
    return day;
  }
};

// src/inputFields/TimeInputField.ts
var import_obsidian8 = require("obsidian");

// src/parsers/TimeParser.ts
var Time = class {
  constructor() {
    this._hour = TimeParser.getDefaultHour();
    this._minute = TimeParser.getDefaultHour();
  }
  getHour() {
    return this._hour;
  }
  setHour(value) {
    if (value < 0 || value > 24) {
      this._hour = TimeParser.getDefaultHour();
      return;
    }
    this._hour = value;
  }
  getMinute() {
    return this._minute;
  }
  setMinute(value) {
    if (value < 0 || value > 59) {
      this._minute = TimeParser.getDefaultMinute();
      return;
    }
    this._minute = value;
  }
  getUniformHour() {
    return ("00" + this.getHour().toString()).slice(-2);
  }
  getUniformMinute() {
    return ("00" + this.getMinute().toString()).slice(-2);
  }
  setHourFromString(str) {
    const v = Number.parseInt(str);
    this.setHour(Number.isNaN(v) ? TimeParser.getDefaultHour() : v);
  }
  setMinuteFromString(str) {
    const v = Number.parseInt(str);
    this.setMinute(Number.isNaN(v) ? TimeParser.getDefaultMinute() : v);
  }
};
var TimeParser = class {
  static parse(timeString) {
    const time = TimeParser.getDefaultTime();
    const timeParts = timeString.split(":");
    if (timeParts.length !== 2) {
      return void 0;
    }
    time.setHourFromString(timeParts[0]);
    time.setMinuteFromString(timeParts[1]);
    return time;
  }
  static stringify(time) {
    return `${time.getUniformHour()}:${time.getUniformMinute()}`;
  }
  static getDefaultTime() {
    return new Time();
  }
  static getDefaultHour() {
    return 0;
  }
  static getDefaultMinute() {
    return 0;
  }
};

// src/inputFields/TimeInputField.ts
var TimeInputField = class extends AbstractInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.time = TimeParser.getDefaultTime();
    this.hours = {};
    for (let i = 0; i <= 24; i++) {
      this.hours[i.toString()] = i.toString();
    }
    this.minutes = {};
    for (let i = 0; i <= 59; i++) {
      this.minutes[i.toString()] = i.toString();
    }
  }
  getHtmlElement() {
    if (!this.container) {
      throw new MetaBindInternalError("time input container is undefined");
    }
    return this.container;
  }
  getValue() {
    return TimeParser.stringify(this.time);
  }
  setValue(value) {
    var _a;
    if (!this.hourComponent) {
      throw new MetaBindInternalError("time input hour component is undefined");
    }
    if (!this.minuteComponent) {
      throw new MetaBindInternalError("time input minute component is undefined");
    }
    this.time = (_a = TimeParser.parse(value)) != null ? _a : TimeParser.getDefaultTime();
    this.hourComponent.setValue(this.time.getHour().toString());
    this.minuteComponent.setValue(this.time.getMinute().toString());
  }
  isEqualValue(value) {
    return value == this.getValue();
  }
  getDefaultValue() {
    return TimeParser.stringify(TimeParser.getDefaultTime());
  }
  render(container) {
    var _a;
    this.time = (_a = TimeParser.parse(this.inputFieldMarkdownRenderChild.getInitialValue())) != null ? _a : TimeParser.getDefaultTime();
    container.removeClass("meta-bind-plugin-input-wrapper");
    container.addClass("meta-bind-plugin-flex-input-wrapper", "meta-bind-plugin-input-element-group");
    this.hourComponent = new import_obsidian8.DropdownComponent(container);
    this.hourComponent.addOptions(this.hours);
    this.hourComponent.setValue(this.time.getHour().toString());
    this.hourComponent.onChange(this.onHourChange.bind(this));
    this.minuteComponent = new import_obsidian8.DropdownComponent(container);
    this.minuteComponent.addOptions(this.minutes);
    this.minuteComponent.setValue(this.time.getMinute().toString());
    this.minuteComponent.onChange(this.onMinuteChange.bind(this));
    this.hourComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
    this.minuteComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
    this.container = container;
  }
  onHourChange(value) {
    this.time.setHourFromString(value);
    this.onValueChange(this.getValue());
  }
  onMinuteChange(value) {
    this.time.setMinuteFromString(value);
    this.onValueChange(this.getValue());
  }
};

// node_modules/svelte/internal/index.mjs
function noop() {
}
function run(fn) {
  return fn();
}
function blank_object() {
  return /* @__PURE__ */ Object.create(null);
}
function run_all(fns) {
  fns.forEach(run);
}
function is_function(thing) {
  return typeof thing === "function";
}
function safe_not_equal(a, b) {
  return a != a ? b == b : a !== b || (a && typeof a === "object" || typeof a === "function");
}
function is_empty(obj) {
  return Object.keys(obj).length === 0;
}
var is_hydrating = false;
function start_hydrating() {
  is_hydrating = true;
}
function end_hydrating() {
  is_hydrating = false;
}
function append(target, node) {
  target.appendChild(node);
}
function append_styles(target, style_sheet_id, styles) {
  const append_styles_to = get_root_for_style(target);
  if (!append_styles_to.getElementById(style_sheet_id)) {
    const style = element("style");
    style.id = style_sheet_id;
    style.textContent = styles;
    append_stylesheet(append_styles_to, style);
  }
}
function get_root_for_style(node) {
  if (!node)
    return document;
  const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;
  if (root && root.host) {
    return root;
  }
  return node.ownerDocument;
}
function append_stylesheet(node, style) {
  append(node.head || node, style);
}
function insert(target, node, anchor) {
  target.insertBefore(node, anchor || null);
}
function detach(node) {
  node.parentNode.removeChild(node);
}
function destroy_each(iterations, detaching) {
  for (let i = 0; i < iterations.length; i += 1) {
    if (iterations[i])
      iterations[i].d(detaching);
  }
}
function element(name) {
  return document.createElement(name);
}
function text(data) {
  return document.createTextNode(data);
}
function space() {
  return text(" ");
}
function empty() {
  return text("");
}
function listen(node, event, handler, options) {
  node.addEventListener(event, handler, options);
  return () => node.removeEventListener(event, handler, options);
}
function attr(node, attribute, value) {
  if (value == null)
    node.removeAttribute(attribute);
  else if (node.getAttribute(attribute) !== value)
    node.setAttribute(attribute, value);
}
function children(element2) {
  return Array.from(element2.childNodes);
}
function set_data(text2, data) {
  data = "" + data;
  if (text2.wholeText !== data)
    text2.data = data;
}
function toggle_class(element2, name, toggle) {
  element2.classList[toggle ? "add" : "remove"](name);
}
function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {
  const e = document.createEvent("CustomEvent");
  e.initCustomEvent(type, bubbles, cancelable, detail);
  return e;
}
var current_component;
function set_current_component(component) {
  current_component = component;
}
function get_current_component() {
  if (!current_component)
    throw new Error("Function called outside component initialization");
  return current_component;
}
function onMount(fn) {
  get_current_component().$$.on_mount.push(fn);
}
function createEventDispatcher() {
  const component = get_current_component();
  return (type, detail, { cancelable = false } = {}) => {
    const callbacks = component.$$.callbacks[type];
    if (callbacks) {
      const event = custom_event(type, detail, { cancelable });
      callbacks.slice().forEach((fn) => {
        fn.call(component, event);
      });
      return !event.defaultPrevented;
    }
    return true;
  };
}
var dirty_components = [];
var binding_callbacks = [];
var render_callbacks = [];
var flush_callbacks = [];
var resolved_promise = Promise.resolve();
var update_scheduled = false;
function schedule_update() {
  if (!update_scheduled) {
    update_scheduled = true;
    resolved_promise.then(flush);
  }
}
function add_render_callback(fn) {
  render_callbacks.push(fn);
}
var seen_callbacks = /* @__PURE__ */ new Set();
var flushidx = 0;
function flush() {
  const saved_component = current_component;
  do {
    while (flushidx < dirty_components.length) {
      const component = dirty_components[flushidx];
      flushidx++;
      set_current_component(component);
      update(component.$$);
    }
    set_current_component(null);
    dirty_components.length = 0;
    flushidx = 0;
    while (binding_callbacks.length)
      binding_callbacks.pop()();
    for (let i = 0; i < render_callbacks.length; i += 1) {
      const callback = render_callbacks[i];
      if (!seen_callbacks.has(callback)) {
        seen_callbacks.add(callback);
        callback();
      }
    }
    render_callbacks.length = 0;
  } while (dirty_components.length);
  while (flush_callbacks.length) {
    flush_callbacks.pop()();
  }
  update_scheduled = false;
  seen_callbacks.clear();
  set_current_component(saved_component);
}
function update($$) {
  if ($$.fragment !== null) {
    $$.update();
    run_all($$.before_update);
    const dirty = $$.dirty;
    $$.dirty = [-1];
    $$.fragment && $$.fragment.p($$.ctx, dirty);
    $$.after_update.forEach(add_render_callback);
  }
}
var outroing = /* @__PURE__ */ new Set();
var outros;
function group_outros() {
  outros = {
    r: 0,
    c: [],
    p: outros
  };
}
function check_outros() {
  if (!outros.r) {
    run_all(outros.c);
  }
  outros = outros.p;
}
function transition_in(block, local) {
  if (block && block.i) {
    outroing.delete(block);
    block.i(local);
  }
}
function transition_out(block, local, detach2, callback) {
  if (block && block.o) {
    if (outroing.has(block))
      return;
    outroing.add(block);
    outros.c.push(() => {
      outroing.delete(block);
      if (callback) {
        if (detach2)
          block.d(1);
        callback();
      }
    });
    block.o(local);
  }
}
var globals = typeof window !== "undefined" ? window : typeof globalThis !== "undefined" ? globalThis : global;
function destroy_block(block, lookup) {
  block.d(1);
  lookup.delete(block.key);
}
function update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block2, next, get_context) {
  let o = old_blocks.length;
  let n = list.length;
  let i = o;
  const old_indexes = {};
  while (i--)
    old_indexes[old_blocks[i].key] = i;
  const new_blocks = [];
  const new_lookup = /* @__PURE__ */ new Map();
  const deltas = /* @__PURE__ */ new Map();
  i = n;
  while (i--) {
    const child_ctx = get_context(ctx, list, i);
    const key = get_key(child_ctx);
    let block = lookup.get(key);
    if (!block) {
      block = create_each_block2(key, child_ctx);
      block.c();
    } else if (dynamic) {
      block.p(child_ctx, dirty);
    }
    new_lookup.set(key, new_blocks[i] = block);
    if (key in old_indexes)
      deltas.set(key, Math.abs(i - old_indexes[key]));
  }
  const will_move = /* @__PURE__ */ new Set();
  const did_move = /* @__PURE__ */ new Set();
  function insert2(block) {
    transition_in(block, 1);
    block.m(node, next);
    lookup.set(block.key, block);
    next = block.first;
    n--;
  }
  while (o && n) {
    const new_block = new_blocks[n - 1];
    const old_block = old_blocks[o - 1];
    const new_key = new_block.key;
    const old_key = old_block.key;
    if (new_block === old_block) {
      next = new_block.first;
      o--;
      n--;
    } else if (!new_lookup.has(old_key)) {
      destroy(old_block, lookup);
      o--;
    } else if (!lookup.has(new_key) || will_move.has(new_key)) {
      insert2(new_block);
    } else if (did_move.has(old_key)) {
      o--;
    } else if (deltas.get(new_key) > deltas.get(old_key)) {
      did_move.add(new_key);
      insert2(new_block);
    } else {
      will_move.add(old_key);
      o--;
    }
  }
  while (o--) {
    const old_block = old_blocks[o];
    if (!new_lookup.has(old_block.key))
      destroy(old_block, lookup);
  }
  while (n)
    insert2(new_blocks[n - 1]);
  return new_blocks;
}
function create_component(block) {
  block && block.c();
}
function mount_component(component, target, anchor, customElement) {
  const { fragment, on_mount, on_destroy, after_update } = component.$$;
  fragment && fragment.m(target, anchor);
  if (!customElement) {
    add_render_callback(() => {
      const new_on_destroy = on_mount.map(run).filter(is_function);
      if (on_destroy) {
        on_destroy.push(...new_on_destroy);
      } else {
        run_all(new_on_destroy);
      }
      component.$$.on_mount = [];
    });
  }
  after_update.forEach(add_render_callback);
}
function destroy_component(component, detaching) {
  const $$ = component.$$;
  if ($$.fragment !== null) {
    run_all($$.on_destroy);
    $$.fragment && $$.fragment.d(detaching);
    $$.on_destroy = $$.fragment = null;
    $$.ctx = [];
  }
}
function make_dirty(component, i) {
  if (component.$$.dirty[0] === -1) {
    dirty_components.push(component);
    schedule_update();
    component.$$.dirty.fill(0);
  }
  component.$$.dirty[i / 31 | 0] |= 1 << i % 31;
}
function init(component, options, instance4, create_fragment4, not_equal, props, append_styles2, dirty = [-1]) {
  const parent_component = current_component;
  set_current_component(component);
  const $$ = component.$$ = {
    fragment: null,
    ctx: null,
    props,
    update: noop,
    not_equal,
    bound: blank_object(),
    on_mount: [],
    on_destroy: [],
    on_disconnect: [],
    before_update: [],
    after_update: [],
    context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),
    callbacks: blank_object(),
    dirty,
    skip_bound: false,
    root: options.target || parent_component.$$.root
  };
  append_styles2 && append_styles2($$.root);
  let ready = false;
  $$.ctx = instance4 ? instance4(component, options.props || {}, (i, ret, ...rest) => {
    const value = rest.length ? rest[0] : ret;
    if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {
      if (!$$.skip_bound && $$.bound[i])
        $$.bound[i](value);
      if (ready)
        make_dirty(component, i);
    }
    return ret;
  }) : [];
  $$.update();
  ready = true;
  run_all($$.before_update);
  $$.fragment = create_fragment4 ? create_fragment4($$.ctx) : false;
  if (options.target) {
    if (options.hydrate) {
      start_hydrating();
      const nodes = children(options.target);
      $$.fragment && $$.fragment.l(nodes);
      nodes.forEach(detach);
    } else {
      $$.fragment && $$.fragment.c();
    }
    if (options.intro)
      transition_in(component.$$.fragment);
    mount_component(component, options.target, options.anchor, options.customElement);
    end_hydrating();
    flush();
  }
  set_current_component(parent_component);
}
var SvelteElement;
if (typeof HTMLElement === "function") {
  SvelteElement = class extends HTMLElement {
    constructor() {
      super();
      this.attachShadow({ mode: "open" });
    }
    connectedCallback() {
      const { on_mount } = this.$$;
      this.$$.on_disconnect = on_mount.map(run).filter(is_function);
      for (const key in this.$$.slotted) {
        this.appendChild(this.$$.slotted[key]);
      }
    }
    attributeChangedCallback(attr2, _oldValue, newValue) {
      this[attr2] = newValue;
    }
    disconnectedCallback() {
      run_all(this.$$.on_disconnect);
    }
    $destroy() {
      destroy_component(this, 1);
      this.$destroy = noop;
    }
    $on(type, callback) {
      const callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);
      callbacks.push(callback);
      return () => {
        const index = callbacks.indexOf(callback);
        if (index !== -1)
          callbacks.splice(index, 1);
      };
    }
    $set($$props) {
      if (this.$$set && !is_empty($$props)) {
        this.$$.skip_bound = true;
        this.$$set($$props);
        this.$$.skip_bound = false;
      }
    }
  };
}
var SvelteComponent = class {
  $destroy() {
    destroy_component(this, 1);
    this.$destroy = noop;
  }
  $on(type, callback) {
    const callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);
    callbacks.push(callback);
    return () => {
      const index = callbacks.indexOf(callback);
      if (index !== -1)
        callbacks.splice(index, 1);
    };
  }
  $set($$props) {
    if (this.$$set && !is_empty($$props)) {
      this.$$.skip_bound = true;
      this.$$set($$props);
      this.$$.skip_bound = false;
    }
  }
};

// src/inputFields/DatePicker/DatePickerInputSvelteHelpers.ts
var import_obsidian9 = require("obsidian");
var monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
function getMonthName(index) {
  return monthNames[index];
}
function getDateRows(monthIndex, year) {
  const days = (0, import_obsidian9.moment)(new Date(year, monthIndex)).daysInMonth();
  let rows = new Array(42).fill(void 0);
  const startIndex = getWeekDay(new Date(year, monthIndex, 1));
  for (let i = 0; i < days; i++) {
    rows[i + startIndex] = i + 1;
  }
  rows = rows[rows.length - 7] ? rows : rows.slice(0, -7);
  rows = rows[rows.length - 7] ? rows : rows.slice(0, -7);
  return rows;
}
function getWeekDay(date) {
  return date.getDay() === 0 ? 6 : date.getDay() - 1;
}
function getWeekDays() {
  return ["Mo", "Tu", "We", "Th", "Fr", "Sa", "Su"];
}
function uuid() {
  let id = 0;
  return () => {
    return ++id;
  };
}

// src/inputFields/DatePicker/Calender.svelte
var import_obsidian10 = require("obsidian");
function add_css(target) {
  append_styles(target, "svelte-sdiiqi", ".calendar.svelte-sdiiqi{margin-top:10px}.calendar-header.svelte-sdiiqi{display:flex;justify-content:space-around;flex-wrap:wrap;gap:2px;background:var(--background-primary);border-radius:var(--meta-bind-plugin-border-radius);margin-bottom:2px}.calendar-content.svelte-sdiiqi{display:grid;flex-wrap:wrap;grid-template-columns:repeat(7, 1fr);gap:2px}.cell.svelte-sdiiqi{min-width:40px;height:30px;padding:5px;display:flex;justify-content:center;align-items:center;border-radius:var(--meta-bind-plugin-border-radius)}.content-cell.svelte-sdiiqi{cursor:pointer}.cell-text.svelte-sdiiqi{margin:auto;text-align:center}.selected.svelte-sdiiqi{background:var(--background-modifier-success)}.highlight.svelte-sdiiqi:hover{background:var(--interactive-hover)}.selected.highlight.svelte-sdiiqi:hover{background:green}");
}
function get_each_context(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[7] = list[i];
  return child_ctx;
}
function get_each_context_1(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[10] = list[i];
  return child_ctx;
}
function create_each_block_1(ctx) {
  let div;
  let span;
  let t0_value = ctx[10] + "";
  let t0;
  let t1;
  return {
    c() {
      div = element("div");
      span = element("span");
      t0 = text(t0_value);
      t1 = space();
      attr(span, "class", "cell-text svelte-sdiiqi");
      attr(div, "class", "cell header-cell svelte-sdiiqi");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      append(div, span);
      append(span, t0);
      append(div, t1);
    },
    p: noop,
    d(detaching) {
      if (detaching)
        detach(div);
    }
  };
}
function create_each_block(key_1, ctx) {
  let div;
  let span;
  let t0_value = (ctx[7] || "") + "";
  let t0;
  let t1;
  let mounted;
  let dispose;
  function click_handler() {
    return ctx[5](ctx[7]);
  }
  return {
    key: key_1,
    first: null,
    c() {
      div = element("div");
      span = element("span");
      t0 = text(t0_value);
      t1 = space();
      attr(span, "class", "cell-text svelte-sdiiqi");
      attr(div, "class", "cell svelte-sdiiqi");
      toggle_class(div, "highlight", ctx[7]);
      toggle_class(div, "content-cell", ctx[7]);
      toggle_class(div, "selected", ctx[0].year() === ctx[2] && ctx[0].month() === ctx[1] && ctx[0].date() === ctx[7]);
      this.first = div;
    },
    m(target, anchor) {
      insert(target, div, anchor);
      append(div, span);
      append(span, t0);
      append(div, t1);
      if (!mounted) {
        dispose = listen(div, "click", function() {
          if (is_function(ctx[7] ? click_handler : click_handler_1))
            (ctx[7] ? click_handler : click_handler_1).apply(this, arguments);
        });
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty & 8 && t0_value !== (t0_value = (ctx[7] || "") + ""))
        set_data(t0, t0_value);
      if (dirty & 8) {
        toggle_class(div, "highlight", ctx[7]);
      }
      if (dirty & 8) {
        toggle_class(div, "content-cell", ctx[7]);
      }
      if (dirty & 15) {
        toggle_class(div, "selected", ctx[0].year() === ctx[2] && ctx[0].month() === ctx[1] && ctx[0].date() === ctx[7]);
      }
    },
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      dispose();
    }
  };
}
function create_fragment(ctx) {
  let div2;
  let div0;
  let t;
  let div1;
  let each_blocks = [];
  let each1_lookup = /* @__PURE__ */ new Map();
  let each_value_1 = getWeekDays();
  let each_blocks_1 = [];
  for (let i = 0; i < each_value_1.length; i += 1) {
    each_blocks_1[i] = create_each_block_1(get_each_context_1(ctx, each_value_1, i));
  }
  let each_value = ctx[3];
  const get_key = (ctx2) => uuid();
  for (let i = 0; i < each_value.length; i += 1) {
    let child_ctx = get_each_context(ctx, each_value, i);
    let key = get_key(child_ctx);
    each1_lookup.set(key, each_blocks[i] = create_each_block(key, child_ctx));
  }
  return {
    c() {
      div2 = element("div");
      div0 = element("div");
      for (let i = 0; i < each_blocks_1.length; i += 1) {
        each_blocks_1[i].c();
      }
      t = space();
      div1 = element("div");
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      attr(div0, "class", "calendar-header svelte-sdiiqi");
      attr(div1, "class", "calendar-content svelte-sdiiqi");
      attr(div2, "class", "calendar svelte-sdiiqi");
    },
    m(target, anchor) {
      insert(target, div2, anchor);
      append(div2, div0);
      for (let i = 0; i < each_blocks_1.length; i += 1) {
        each_blocks_1[i].m(div0, null);
      }
      append(div2, t);
      append(div2, div1);
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].m(div1, null);
      }
    },
    p(ctx2, [dirty]) {
      if (dirty & 0) {
        each_value_1 = getWeekDays();
        let i;
        for (i = 0; i < each_value_1.length; i += 1) {
          const child_ctx = get_each_context_1(ctx2, each_value_1, i);
          if (each_blocks_1[i]) {
            each_blocks_1[i].p(child_ctx, dirty);
          } else {
            each_blocks_1[i] = create_each_block_1(child_ctx);
            each_blocks_1[i].c();
            each_blocks_1[i].m(div0, null);
          }
        }
        for (; i < each_blocks_1.length; i += 1) {
          each_blocks_1[i].d(1);
        }
        each_blocks_1.length = each_value_1.length;
      }
      if (dirty & 31) {
        each_value = ctx2[3];
        each_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx2, each_value, each1_lookup, div1, destroy_block, create_each_block, null, get_each_context);
      }
    },
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching)
        detach(div2);
      destroy_each(each_blocks_1, detaching);
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].d();
      }
    }
  };
}
var click_handler_1 = () => {
};
function instance($$self, $$props, $$invalidate) {
  const dispatch = createEventDispatcher();
  let { selectedDate } = $$props;
  let { month } = $$props;
  let { year } = $$props;
  let cells;
  function onChange(date) {
    dispatch("dateChange", (0, import_obsidian10.moment)(new Date(year, month, date)));
  }
  const click_handler = (value) => onChange(value);
  $$self.$$set = ($$props2) => {
    if ("selectedDate" in $$props2)
      $$invalidate(0, selectedDate = $$props2.selectedDate);
    if ("month" in $$props2)
      $$invalidate(1, month = $$props2.month);
    if ("year" in $$props2)
      $$invalidate(2, year = $$props2.year);
  };
  $$self.$$.update = () => {
    if ($$self.$$.dirty & 6) {
      $:
        $$invalidate(3, cells = getDateRows(month, year));
    }
  };
  return [selectedDate, month, year, cells, onChange, click_handler];
}
var Calender = class extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance, create_fragment, safe_not_equal, { selectedDate: 0, month: 1, year: 2 }, add_css);
  }
};
var Calender_default = Calender;

// src/inputFields/DatePicker/DatePicker.svelte
var import_obsidian12 = require("obsidian");

// src/inputFields/DatePicker/Icon.svelte
var import_obsidian11 = require("obsidian");
function add_css2(target) {
  append_styles(target, "svelte-9cikvm", ".icon-wrapper.svelte-9cikvm{display:inline-block;position:relative;width:20px}.icon.svelte-9cikvm{position:absolute;height:20px;width:20px;bottom:-5px}");
}
function create_if_block(ctx) {
  let div1;
  let div0;
  return {
    c() {
      div1 = element("div");
      div0 = element("div");
      attr(div0, "class", "icon svelte-9cikvm");
      attr(div1, "class", "icon-wrapper svelte-9cikvm");
    },
    m(target, anchor) {
      insert(target, div1, anchor);
      append(div1, div0);
      ctx[3](div0);
    },
    p: noop,
    d(detaching) {
      if (detaching)
        detach(div1);
      ctx[3](null);
    }
  };
}
function create_fragment2(ctx) {
  let if_block_anchor;
  let if_block = ctx[0].length > 0 && create_if_block(ctx);
  return {
    c() {
      if (if_block)
        if_block.c();
      if_block_anchor = empty();
    },
    m(target, anchor) {
      if (if_block)
        if_block.m(target, anchor);
      insert(target, if_block_anchor, anchor);
    },
    p(ctx2, [dirty]) {
      if (ctx2[0].length > 0) {
        if (if_block) {
          if_block.p(ctx2, dirty);
        } else {
          if_block = create_if_block(ctx2);
          if_block.c();
          if_block.m(if_block_anchor.parentNode, if_block_anchor);
        }
      } else if (if_block) {
        if_block.d(1);
        if_block = null;
      }
    },
    i: noop,
    o: noop,
    d(detaching) {
      if (if_block)
        if_block.d(detaching);
      if (detaching)
        detach(if_block_anchor);
    }
  };
}
function instance2($$self, $$props, $$invalidate) {
  let { iconName = "" } = $$props;
  let { iconSize = 20 } = $$props;
  let iconEl;
  onMount(() => {
    (0, import_obsidian11.setIcon)(iconEl, iconName, iconSize);
  });
  function div0_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      iconEl = $$value;
      $$invalidate(1, iconEl);
    });
  }
  $$self.$$set = ($$props2) => {
    if ("iconName" in $$props2)
      $$invalidate(0, iconName = $$props2.iconName);
    if ("iconSize" in $$props2)
      $$invalidate(2, iconSize = $$props2.iconSize);
  };
  return [iconName, iconEl, iconSize, div0_binding];
}
var Icon = class extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance2, create_fragment2, safe_not_equal, { iconName: 0, iconSize: 2 }, add_css2);
  }
};
var Icon_default = Icon;

// src/inputFields/DatePicker/DatePicker.svelte
function add_css3(target) {
  append_styles(target, "svelte-vzlvwz", ".date-picker-input.svelte-vzlvwz{position:relative;color:var(--text-normal);display:inline-block}.date-picker.svelte-vzlvwz{position:absolute;top:35px;display:inline-block;background:var(--background-secondary);border-radius:var(--meta-bind-plugin-border-radius);border:var(--meta-bind-plugin-border-width) solid var(--background-modifier-border);padding:10px;z-index:1000000}.date-picker-text.svelte-vzlvwz{background:var(--background-secondary);border-radius:var(--meta-bind-plugin-border-radius);border:var(--meta-bind-plugin-border-width) solid var(--background-modifier-border);padding:5px 5px 5px 7px;cursor:pointer;width:fit-content;display:inline-block}.date-picker-close-layer.svelte-vzlvwz{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:900000}.date-picker-header.svelte-vzlvwz{display:flex;gap:5px;align-items:center;justify-content:space-around}.date-picker-header-text.svelte-vzlvwz{flex:1;text-align:center;display:flex;gap:5px;align-items:center;justify-content:center;width:min-content}.date-picker-header-text-year.svelte-vzlvwz{width:60px;padding:5px}.date-picker-header-text-month.svelte-vzlvwz{height:min-content}.month-switch-button.svelte-vzlvwz{margin:0}");
}
function create_if_block2(ctx) {
  let div0;
  let t0;
  let div3;
  let div2;
  let button0;
  let t2;
  let div1;
  let span;
  let t3_value = getMonthName(ctx[3]) + "";
  let t3;
  let t4;
  let input;
  let input_value_value;
  let t5;
  let button1;
  let t7;
  let calender;
  let div3_style_value;
  let current;
  let mounted;
  let dispose;
  calender = new Calender_default({
    props: {
      month: ctx[3],
      year: ctx[4],
      selectedDate: ctx[0]
    }
  });
  calender.$on("dateChange", ctx[9]);
  return {
    c() {
      div0 = element("div");
      t0 = space();
      div3 = element("div");
      div2 = element("div");
      button0 = element("button");
      button0.textContent = "Prev";
      t2 = space();
      div1 = element("div");
      span = element("span");
      t3 = text(t3_value);
      t4 = space();
      input = element("input");
      t5 = space();
      button1 = element("button");
      button1.textContent = "Next";
      t7 = space();
      create_component(calender.$$.fragment);
      attr(div0, "class", "date-picker-close-layer svelte-vzlvwz");
      attr(button0, "class", "month-switch-button svelte-vzlvwz");
      attr(span, "class", "date-picker-header-text-month svelte-vzlvwz");
      attr(input, "class", "date-picker-header-text-year svelte-vzlvwz");
      attr(input, "type", "number");
      input.value = input_value_value = ctx[4].toString();
      attr(div1, "class", "date-picker-header-text svelte-vzlvwz");
      attr(button1, "class", "month-switch-button svelte-vzlvwz");
      attr(div2, "class", "date-picker-header svelte-vzlvwz");
      attr(div3, "class", "date-picker svelte-vzlvwz");
      attr(div3, "style", div3_style_value = ctx[2] ? "left: auto; right: 0;" : "right: auto; left: 0;");
    },
    m(target, anchor) {
      insert(target, div0, anchor);
      insert(target, t0, anchor);
      insert(target, div3, anchor);
      append(div3, div2);
      append(div2, button0);
      append(div2, t2);
      append(div2, div1);
      append(div1, span);
      append(span, t3);
      append(div1, t4);
      append(div1, input);
      append(div2, t5);
      append(div2, button1);
      append(div3, t7);
      mount_component(calender, div3, null);
      current = true;
      if (!mounted) {
        dispose = [
          listen(div0, "click", ctx[12]),
          listen(button0, "click", ctx[7]),
          listen(input, "input", ctx[8]),
          listen(button1, "click", ctx[6])
        ];
        mounted = true;
      }
    },
    p(ctx2, dirty) {
      if ((!current || dirty & 8) && t3_value !== (t3_value = getMonthName(ctx2[3]) + ""))
        set_data(t3, t3_value);
      if (!current || dirty & 16 && input_value_value !== (input_value_value = ctx2[4].toString()) && input.value !== input_value_value) {
        input.value = input_value_value;
      }
      const calender_changes = {};
      if (dirty & 8)
        calender_changes.month = ctx2[3];
      if (dirty & 16)
        calender_changes.year = ctx2[4];
      if (dirty & 1)
        calender_changes.selectedDate = ctx2[0];
      calender.$set(calender_changes);
      if (!current || dirty & 4 && div3_style_value !== (div3_style_value = ctx2[2] ? "left: auto; right: 0;" : "right: auto; left: 0;")) {
        attr(div3, "style", div3_style_value);
      }
    },
    i(local) {
      if (current)
        return;
      transition_in(calender.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(calender.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(div0);
      if (detaching)
        detach(t0);
      if (detaching)
        detach(div3);
      destroy_component(calender);
      mounted = false;
      run_all(dispose);
    }
  };
}
function create_fragment3(ctx) {
  let div1;
  let div0;
  let t0_value = ctx[0].format(ctx[1]) + "";
  let t0;
  let t1;
  let icon;
  let t2;
  let current;
  let mounted;
  let dispose;
  icon = new Icon_default({ props: { iconName: "calendar" } });
  let if_block = ctx[5] && create_if_block2(ctx);
  return {
    c() {
      div1 = element("div");
      div0 = element("div");
      t0 = text(t0_value);
      t1 = space();
      create_component(icon.$$.fragment);
      t2 = space();
      if (if_block)
        if_block.c();
      attr(div0, "class", "date-picker-text svelte-vzlvwz");
      attr(div1, "class", "date-picker-input svelte-vzlvwz");
    },
    m(target, anchor) {
      insert(target, div1, anchor);
      append(div1, div0);
      append(div0, t0);
      append(div0, t1);
      mount_component(icon, div0, null);
      append(div1, t2);
      if (if_block)
        if_block.m(div1, null);
      current = true;
      if (!mounted) {
        dispose = listen(div0, "click", ctx[11]);
        mounted = true;
      }
    },
    p(ctx2, [dirty]) {
      if ((!current || dirty & 3) && t0_value !== (t0_value = ctx2[0].format(ctx2[1]) + ""))
        set_data(t0, t0_value);
      if (ctx2[5]) {
        if (if_block) {
          if_block.p(ctx2, dirty);
          if (dirty & 32) {
            transition_in(if_block, 1);
          }
        } else {
          if_block = create_if_block2(ctx2);
          if_block.c();
          transition_in(if_block, 1);
          if_block.m(div1, null);
        }
      } else if (if_block) {
        group_outros();
        transition_out(if_block, 1, 1, () => {
          if_block = null;
        });
        check_outros();
      }
    },
    i(local) {
      if (current)
        return;
      transition_in(icon.$$.fragment, local);
      transition_in(if_block);
      current = true;
    },
    o(local) {
      transition_out(icon.$$.fragment, local);
      transition_out(if_block);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(div1);
      destroy_component(icon);
      if (if_block)
        if_block.d();
      mounted = false;
      dispose();
    }
  };
}
function instance3($$self, $$props, $$invalidate) {
  const dispatch = createEventDispatcher();
  let { selectedDate = (0, import_obsidian12.moment)() } = $$props;
  let { dateFormat = "dddd, MMMM Do YYYY" } = $$props;
  let { dateChangeCallback } = $$props;
  let { alignRight } = $$props;
  let date;
  let month;
  let year;
  let showDatePicker;
  function nextMonth() {
    if (month === 11) {
      $$invalidate(3, month = 0);
      $$invalidate(4, year += 1);
      return;
    }
    $$invalidate(3, month = month + 1);
  }
  function prevMonth() {
    if (month === 0) {
      $$invalidate(3, month = 11);
      $$invalidate(4, year -= 1);
      return;
    }
    $$invalidate(3, month -= 1);
  }
  function changeYear(value) {
    const v = value.target.value;
    const vNum = Number.parseInt(v);
    if (!Number.isNaN(vNum)) {
      $$invalidate(4, year = vNum);
    }
  }
  function onDateChange(d) {
    $$invalidate(5, showDatePicker = false);
    $$invalidate(0, selectedDate = d.detail);
    dateChangeCallback(d.detail);
  }
  const click_handler = () => $$invalidate(5, showDatePicker = true);
  const click_handler_12 = () => $$invalidate(5, showDatePicker = false);
  $$self.$$set = ($$props2) => {
    if ("selectedDate" in $$props2)
      $$invalidate(0, selectedDate = $$props2.selectedDate);
    if ("dateFormat" in $$props2)
      $$invalidate(1, dateFormat = $$props2.dateFormat);
    if ("dateChangeCallback" in $$props2)
      $$invalidate(10, dateChangeCallback = $$props2.dateChangeCallback);
    if ("alignRight" in $$props2)
      $$invalidate(2, alignRight = $$props2.alignRight);
  };
  $$self.$$.update = () => {
    if ($$self.$$.dirty & 1) {
      $: {
        console.log("update date picker", selectedDate);
        date = selectedDate.date();
        $$invalidate(3, month = selectedDate.month());
        $$invalidate(4, year = selectedDate.year());
      }
    }
  };
  return [
    selectedDate,
    dateFormat,
    alignRight,
    month,
    year,
    showDatePicker,
    nextMonth,
    prevMonth,
    changeYear,
    onDateChange,
    dateChangeCallback,
    click_handler,
    click_handler_12
  ];
}
var DatePicker = class extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance3, create_fragment3, safe_not_equal, {
      selectedDate: 0,
      dateFormat: 1,
      dateChangeCallback: 10,
      alignRight: 2
    }, add_css3);
  }
};
var DatePicker_default = DatePicker;

// src/inputFields/DatePicker/DatePickerInputField.ts
var DatePickerInputField = class extends AbstractInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.date = DateParser.getDefaultDate();
  }
  getValue() {
    return DateParser.stringify(this.date);
  }
  setValue(value) {
    var _a, _b;
    this.date = (_a = DateParser.parse(value)) != null ? _a : DateParser.getDefaultDate();
    if (!this.date.isValid()) {
      this.date = DateParser.getDefaultDate();
      this.onValueChange(this.getValue());
    }
    (_b = this.component) == null ? void 0 : _b.$set({ selectedDate: this.date });
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return DateParser.stringify(DateParser.getDefaultDate());
  }
  getHtmlElement() {
    if (!this.container) {
      throw new MetaBindInternalError("");
    }
    return this.container;
  }
  datePickerValueChanged(date) {
    this.date = date;
    if (this.date.isValid()) {
      this.onValueChange(this.getValue());
    }
  }
  render(container) {
    var _a, _b;
    this.container = container;
    this.date = (_a = DateParser.parse(this.inputFieldMarkdownRenderChild.getInitialValue())) != null ? _a : DateParser.getDefaultDate();
    if (!this.date.isValid()) {
      this.date = DateParser.getDefaultDate();
      this.onValueChange(this.getValue());
    }
    this.component = new DatePicker_default({
      target: container,
      props: {
        alignRight: (_b = this.inputFieldMarkdownRenderChild.getArgument("alignRight" /* ALIGN_RIGHT */)) == null ? void 0 : _b.value,
        selectedDate: this.date,
        dateFormat: this.inputFieldMarkdownRenderChild.plugin.settings.preferredDateFormat,
        dateChangeCallback: (date) => this.datePickerValueChanged(date)
      }
    });
  }
};

// src/inputFields/InputFieldFactory.ts
var _InputFieldFactory = class {
  static createInputField(inputFieldType, args) {
    if (inputFieldType === "toggle" /* TOGGLE */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new ToggleInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "slider" /* SLIDER */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new SliderInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "text" /* TEXT */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new TextInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "text_area" /* TEXT_AREA */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new TextAreaInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "select" /* SELECT */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new SelectInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "multi_select" /* MULTI_SELECT */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new MultiSelectInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "date" /* DATE */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new DateInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "time" /* TIME */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new TimeInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "date_picker" /* DATE_PICKER */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new DatePickerInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    }
    return void 0;
  }
  static checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, type) {
    const allowCodeBlock = _InputFieldFactory.allowCodeBlockMap[inputFieldType];
    if (type === 1 /* CODE_BLOCK */ && !allowCodeBlock.codeBlock) {
      throw new MetaBindParsingError(`'${inputFieldType}' is not allowed as code block`);
    }
    if (type === 0 /* INLINE_CODE_BLOCK */ && !allowCodeBlock.inlineCodeBlock) {
      throw new MetaBindParsingError(`'${inputFieldType}' is not allowed as inline code block`);
    }
  }
};
var InputFieldFactory = _InputFieldFactory;
InputFieldFactory.allowCodeBlockMap = {
  ["toggle" /* TOGGLE */]: {
    codeBlock: ToggleInputField.allowCodeBlock,
    inlineCodeBlock: ToggleInputField.allowInlineCodeBlock
  },
  ["slider" /* SLIDER */]: {
    codeBlock: SliderInputField.allowCodeBlock,
    inlineCodeBlock: SliderInputField.allowInlineCodeBlock
  },
  ["text" /* TEXT */]: {
    codeBlock: TextInputField.allowCodeBlock,
    inlineCodeBlock: TextInputField.allowInlineCodeBlock
  },
  ["text_area" /* TEXT_AREA */]: {
    codeBlock: TextAreaInputField.allowCodeBlock,
    inlineCodeBlock: TextAreaInputField.allowInlineCodeBlock
  },
  ["select" /* SELECT */]: {
    codeBlock: SelectInputField.allowCodeBlock,
    inlineCodeBlock: SelectInputField.allowInlineCodeBlock
  },
  ["multi_select" /* MULTI_SELECT */]: {
    codeBlock: MultiSelectInputField.allowCodeBlock,
    inlineCodeBlock: MultiSelectInputField.allowInlineCodeBlock
  },
  ["date" /* DATE */]: {
    codeBlock: DateInputField.allowCodeBlock,
    inlineCodeBlock: DateInputField.allowInlineCodeBlock
  },
  ["time" /* TIME */]: {
    codeBlock: TimeInputField.allowCodeBlock,
    inlineCodeBlock: TimeInputField.allowInlineCodeBlock
  },
  ["date_picker" /* DATE_PICKER */]: {
    codeBlock: DatePickerInputField.allowCodeBlock,
    inlineCodeBlock: DatePickerInputField.allowInlineCodeBlock
  }
};

// src/InputFieldMarkdownRenderChild.ts
var import_API = __toESM(require_API());
var import_Utils18 = __toESM(require_Utils());
var InputFieldMarkdownRenderChild2 = class extends import_obsidian13.MarkdownRenderChild {
  constructor(containerEl, type, fullDeclaration, plugin, filePath, uid) {
    super(containerEl);
    this.error = "";
    this.filePath = filePath;
    this.uid = uid;
    this.plugin = plugin;
    this.type = type;
    this.fullDeclaration = fullDeclaration;
    this.metadataValueUpdateQueue = [];
    this.inputFieldValueUpdateQueue = [];
    this.intervalCounter = 0;
    try {
      this.inputFieldDeclaration = InputFieldDeclarationParser.parse(fullDeclaration);
      if (this.inputFieldDeclaration.isBound) {
        this.parseBindTarget();
        this.metaData = (0, import_API.getFrontmatterOfTFile)(this.bindTargetFile, this.plugin);
      }
      this.inputField = InputFieldFactory.createInputField(this.inputFieldDeclaration.inputFieldType, {
        type,
        inputFieldMarkdownRenderChild: this,
        onValueChanged: this.pushToMetadataValueUpdateQueue.bind(this)
      });
      this.limitInterval = window.setInterval(() => this.applyValueUpdateQueues(), this.plugin.settings.syncInterval);
    } catch (e) {
      this.error = e.message;
      console.warn(e);
    }
  }
  parseBindTarget() {
    if (!this.inputFieldDeclaration) {
      throw new MetaBindInternalError("inputFieldDeclaration is undefined, can not parse bind target");
    }
    const bindTargetParts = this.inputFieldDeclaration.bindTarget.split("#");
    let bindTargetFileName;
    let bindTargetMetadataFieldName;
    if (bindTargetParts.length === 1) {
      bindTargetFileName = this.filePath;
      bindTargetMetadataFieldName = this.inputFieldDeclaration.bindTarget;
    } else if (bindTargetParts.length === 2) {
      bindTargetFileName = bindTargetParts[0];
      bindTargetMetadataFieldName = bindTargetParts[1];
    } else {
      throw new MetaBindBindTargetError("bind target may only contain one '#' to specify the metadata field");
    }
    try {
      (0, import_Utils18.validatePath)(bindTargetMetadataFieldName);
    } catch (e) {
      if (e instanceof Error) {
        throw new MetaBindBindTargetError(`bind target parsing error: ${e == null ? void 0 : e.message}`);
      }
    }
    this.bindTargetMetadataField = bindTargetMetadataFieldName;
    const files = this.plugin.getFilesByName(bindTargetFileName);
    if (files.length === 0) {
      throw new MetaBindBindTargetError("bind target file not found");
    } else if (files.length === 1) {
      this.bindTargetFile = files[0];
    } else {
      throw new MetaBindBindTargetError("bind target resolves to multiple files, please also specify the file path");
    }
  }
  applyValueUpdateQueues() {
    return __async(this, null, function* () {
      if (this.metadataValueUpdateQueue.length !== 0) {
        yield this.applyMetadataValueUpdateQueue();
        this.cleanUpUpdateQueues();
        return;
      }
      if (this.inputFieldValueUpdateQueue.length !== 0) {
        yield this.applyInputFieldValueUpdateQueue();
        this.cleanUpUpdateQueues();
        return;
      }
    });
  }
  applyMetadataValueUpdateQueue() {
    return __async(this, null, function* () {
      if (!this.inputFieldDeclaration) {
        throw new MetaBindInternalError("inputFieldDeclaration is undefined, can not update metadata");
      }
      if (!this.inputFieldDeclaration.isBound) {
        return;
      }
      if (!this.bindTargetMetadataField || !this.bindTargetFile) {
        throw new MetaBindInternalError("bindTargetMetadataField or bindTargetFile is undefined, can not update metadata");
      }
      if (this.metadataValueUpdateQueue.length > 0) {
        yield (0, import_API.updateOrInsertFieldInTFile)(this.bindTargetMetadataField, this.metadataValueUpdateQueue.at(-1), this.bindTargetFile, this.plugin);
      } else {
        throw new MetaBindInternalError(`cannot apply metadataValueUpdateQueue to inputField ${this.uid}, metadataValueUpdateQueue is empty`);
      }
    });
  }
  applyInputFieldValueUpdateQueue() {
    return __async(this, null, function* () {
      if (!this.inputFieldDeclaration) {
        throw new MetaBindInternalError("inputFieldDeclaration is undefined, can not update inputField");
      }
      if (!this.inputField) {
        throw new MetaBindInternalError("inputField is undefined, can not update inputField");
      }
      if (this.inputFieldValueUpdateQueue.length > 0) {
        let value = this.inputFieldValueUpdateQueue.at(-1);
        if (value == null) {
          value = this.inputField.getDefaultValue();
        }
        Logger.logDebug(`updating input field ${this.uid} to`, value);
        this.inputField.setValue(value);
      } else {
        throw new MetaBindInternalError(`cannot apply inputFieldValueUpdateQueue to inputField ${this.uid}, inputFieldValueUpdateQueue is empty`);
      }
    });
  }
  cleanUpUpdateQueues() {
    this.metadataValueUpdateQueue = [];
    this.inputFieldValueUpdateQueue = [];
  }
  pushToMetadataValueUpdateQueue(value) {
    var _a;
    if ((_a = this.inputFieldDeclaration) == null ? void 0 : _a.isBound) {
      this.metadataValueUpdateQueue.push(value);
    }
  }
  pushToInputFieldValueUpdateQueue(value) {
    var _a;
    if (!((_a = this.inputField) == null ? void 0 : _a.isEqualValue(value))) {
      this.inputFieldValueUpdateQueue.push(value);
    }
  }
  getInitialValue() {
    var _a, _b, _c;
    if (((_a = this.inputFieldDeclaration) == null ? void 0 : _a.isBound) && this.bindTargetMetadataField) {
      return (_c = (0, import_Utils18.traverseObject)(this.bindTargetMetadataField, this.metaData)) != null ? _c : (_b = this.inputField) == null ? void 0 : _b.getDefaultValue();
    }
  }
  getArguments(name) {
    if (!this.inputFieldDeclaration) {
      throw new MetaBindInternalError("inputFieldDeclaration is undefined, can not retrieve arguments");
    }
    return this.inputFieldDeclaration.argumentContainer.arguments.filter((x) => x.identifier === name);
  }
  getArgument(name) {
    return this.getArguments(name).at(0);
  }
  onload() {
    return __async(this, null, function* () {
      Logger.logDebug("load", this);
      this.metaData = yield this.metaData;
      const container = this.containerEl.createDiv();
      container.addClass("meta-bind-plugin-input-wrapper");
      this.containerEl.addClass("meta-bind-plugin-input");
      if (this.error) {
        this.containerEl.empty();
        const originalText = this.containerEl.createEl("span", { text: this.fullDeclaration, cls: "meta-bind-code" });
        container.innerText = ` -> ERROR: ${this.error}`;
        container.addClass("meta-bind-plugin-error");
        this.containerEl.appendChild(container);
        return;
      }
      if (!this.inputField) {
        this.containerEl.empty();
        const originalText = this.containerEl.createEl("span", { text: this.fullDeclaration, cls: "meta-bind-code" });
        container.innerText = ` -> ERROR: ${new MetaBindInternalError("input field is undefined and error is empty").message}`;
        container.addClass("meta-bind-plugin-error");
        this.containerEl.appendChild(container);
        return;
      }
      this.plugin.registerInputFieldMarkdownRenderChild(this);
      this.inputField.render(container);
      const classArguments = this.getArguments("class" /* CLASS */);
      if (classArguments) {
        this.inputField.getHtmlElement().addClasses(classArguments.map((x) => x.value).flat());
      }
      this.containerEl.empty();
      this.containerEl.appendChild(container);
    });
  }
  onunload() {
    Logger.logDebug("unload", this);
    this.plugin.unregisterInputFieldMarkdownRenderChild(this);
    super.onunload();
    window.clearInterval(this.limitInterval);
  }
};

// src/main.ts
var import_API2 = __toESM(require_API());
var import_Utils20 = __toESM(require_Utils());
var MetaBindPlugin = class extends import_obsidian14.Plugin {
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      Logger.devMode = this.settings.devMode;
      DateParser.dateFormat = this.settings.preferredDateFormat;
      InputFieldDeclarationParser.parseTemplates(this.settings.inputTemplates);
      this.activeMarkdownInputFields = [];
      this.markDownInputFieldIndex = 0;
      this.registerMarkdownPostProcessor((element2, context) => {
        const codeBlocks = element2.querySelectorAll("code");
        for (let index = 0; index < codeBlocks.length; index++) {
          const codeBlock = codeBlocks.item(index);
          const text2 = codeBlock.innerText;
          const isInputField = text2.startsWith("INPUT[") && text2.endsWith("]");
          if (isInputField) {
            context.addChild(new InputFieldMarkdownRenderChild2(codeBlock, 0 /* INLINE_CODE_BLOCK */, text2, this, context.sourcePath, this.markDownInputFieldIndex));
            this.markDownInputFieldIndex += 1;
          }
        }
      });
      this.registerMarkdownCodeBlockProcessor("meta-bind", (source, el, ctx) => {
        const codeBlock = el;
        const text2 = source.replace(/\n/g, "");
        const isInputField = text2.startsWith("INPUT[") && text2.endsWith("]");
        if (isInputField) {
          ctx.addChild(new InputFieldMarkdownRenderChild2(codeBlock, 1 /* CODE_BLOCK */, text2, this, ctx.sourcePath, this.markDownInputFieldIndex));
          this.markDownInputFieldIndex += 1;
        }
      });
      this.registerEvent(this.app.metadataCache.on("changed", (file, data, cache) => __async(this, null, function* () {
        yield this.updateMarkdownInputFieldsOnMetadataCacheChange(file, cache);
      })));
      this.addSettingTab(new MetaBindSettingTab(this.app, this));
    });
  }
  onunload() {
    for (const activeMarkdownInputField of this.activeMarkdownInputFields) {
      activeMarkdownInputField.unload();
    }
  }
  registerInputFieldMarkdownRenderChild(inputFieldMarkdownRenderChild) {
    this.activeMarkdownInputFields.push(inputFieldMarkdownRenderChild);
  }
  unregisterInputFieldMarkdownRenderChild(inputFieldMarkdownRenderChild) {
    this.activeMarkdownInputFields = this.activeMarkdownInputFields.filter((x) => x.uid !== inputFieldMarkdownRenderChild.uid);
  }
  updateMarkdownInputFieldsOnMetadataCacheChange(file, cache) {
    var _a;
    let metadata = void 0;
    for (const activeMarkdownInputField of this.activeMarkdownInputFields) {
      if (!((_a = activeMarkdownInputField.inputFieldDeclaration) == null ? void 0 : _a.isBound) || !activeMarkdownInputField.bindTargetFile || !activeMarkdownInputField.bindTargetMetadataField) {
        continue;
      }
      if (activeMarkdownInputField.bindTargetFile.path === file.path) {
        if (metadata === void 0) {
          metadata = (0, import_API2.getFrontmatterOfTFile)(file, this);
        }
        activeMarkdownInputField.pushToInputFieldValueUpdateQueue((0, import_Utils20.traverseObject)(activeMarkdownInputField.bindTargetMetadataField, metadata));
      }
    }
  }
  getFilesByName(name) {
    console.log(getFileName(removeFileEnding(name)));
    const fileNameIsPath = isPath(name);
    const processedFileName = fileNameIsPath ? removeFileEnding(name) : getFileName(removeFileEnding(name));
    const allFiles = this.app.vault.getMarkdownFiles();
    const files = [];
    for (const file of allFiles) {
      if (fileNameIsPath) {
        if (removeFileEnding(file.path) === processedFileName) {
          files.push(file);
        }
      } else {
        if (getFileName(removeFileEnding(file.name)) === processedFileName) {
          files.push(file);
        }
      }
    }
    return files;
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      DateParser.dateFormat = this.settings.preferredDateFormat;
      Logger.devMode = this.settings.devMode;
      InputFieldDeclarationParser.parseTemplates(this.settings.inputTemplates);
      yield this.saveData(this.settings);
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BvcGQtbGlicy9vcGQtbWV0YWRhdGEtbGliL2xpYi9VdGlscy5qcyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZC1saWJzL29wZC1tZXRhZGF0YS1saWIvbGliL09ic1V0aWxzLmpzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ab3BkLWxpYnMvb3BkLW1ldGFkYXRhLWxpYi9saWIvSW50ZXJuYWwuanMiLCAiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BvcGQtbGlicy9vcGQtbWV0YWRhdGEtbGliL2xpYi9BUEkuanMiLCAiLi4vLi4vLi4vLi4vc3JjL21haW4udHMiLCAiLi4vLi4vLi4vLi4vc3JjL3NldHRpbmdzL1NldHRpbmdzLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvdXRpbHMvTG9nZ2VyLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9BYnN0cmFjdElucHV0RmllbGQudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2lucHV0RmllbGRzL1RvZ2dsZUlucHV0RmllbGQudHMiLCAiLi4vLi4vLi4vLi4vc3JjL3V0aWxzL1V0aWxzLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9UZXh0SW5wdXRGaWVsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvaW5wdXRGaWVsZHMvU2xpZGVySW5wdXRGaWVsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvdXRpbHMvUGFyc2VyVXRpbHMudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2lucHV0RmllbGRBcmd1bWVudHMvQWJzdHJhY3RJbnB1dEZpZWxkQXJndW1lbnQudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2lucHV0RmllbGRBcmd1bWVudHMvQ2xhc3NJbnB1dEZpZWxkQXJndW1lbnQudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2lucHV0RmllbGRBcmd1bWVudHMvQWRkTGFiZWxzSW5wdXRGaWVsZEFyZ3VtZW50LnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkQXJndW1lbnRzL01pblZhbHVlSW5wdXRGaWVsZEFyZ3VtZW50LnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkQXJndW1lbnRzL01heFZhbHVlSW5wdXRGaWVsZEFyZ3VtZW50LnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkQXJndW1lbnRzL09wdGlvbklucHV0RmllbGRBcmd1bWVudC50cyIsICIuLi8uLi8uLi8uLi9zcmMvaW5wdXRGaWVsZEFyZ3VtZW50cy9UaXRsZUlucHV0RmllbGRBcmd1bWVudC50cyIsICIuLi8uLi8uLi8uLi9zcmMvaW5wdXRGaWVsZEFyZ3VtZW50cy9BbGlnblJpZ2h0SW5wdXRGaWVsZEFyZ3VtZW50LnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkQXJndW1lbnRzL0lucHV0RmllbGRBcmd1bWVudEZhY3RvcnkudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2lucHV0RmllbGRBcmd1bWVudHMvSW5wdXRGaWVsZEFyZ3VtZW50Q29udGFpbmVyLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9wYXJzZXJzL0lucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci50cyIsICIuLi8uLi8uLi8uLi9zcmMvaW5wdXRGaWVsZHMvVGV4dEFyZWFJbnB1dEZpZWxkLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9TZWxlY3RJbnB1dEZpZWxkRWxlbWVudC50cyIsICIuLi8uLi8uLi8uLi9zcmMvaW5wdXRGaWVsZHMvU2VsZWN0SW5wdXRGaWVsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvaW5wdXRGaWVsZHMvTXVsdGlTZWxlY3RJbnB1dEZpZWxkLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9EYXRlSW5wdXRGaWVsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvcGFyc2Vycy9EYXRlUGFyc2VyLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9UaW1lSW5wdXRGaWVsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvcGFyc2Vycy9UaW1lUGFyc2VyLnRzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdmVsdGUvaW50ZXJuYWwvaW5kZXgubWpzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9EYXRlUGlja2VyL0RhdGVQaWNrZXJJbnB1dFN2ZWx0ZUhlbHBlcnMudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2lucHV0RmllbGRzL0RhdGVQaWNrZXIvQ2FsZW5kZXIuc3ZlbHRlIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9EYXRlUGlja2VyL0ljb24uc3ZlbHRlIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9EYXRlUGlja2VyL0RhdGVQaWNrZXIuc3ZlbHRlIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9EYXRlUGlja2VyL0RhdGVQaWNrZXJJbnB1dEZpZWxkLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9JbnB1dEZpZWxkRmFjdG9yeS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk9QRFRyYXZlcnNhbEVycm9yID0gZXhwb3J0cy52YWxpZGF0ZVBhdGggPSBleHBvcnRzLnBhcnNlUGF0aCA9IGV4cG9ydHMudHJhdmVyc2VPYmplY3RCeVBhdGggPSBleHBvcnRzLnRyYXZlcnNlT2JqZWN0VG9QYXJlbnQgPSBleHBvcnRzLnRyYXZlcnNlT2JqZWN0ID0gdm9pZCAwO1xuZnVuY3Rpb24gdHJhdmVyc2VPYmplY3QocGF0aCwgbykge1xuICAgIGxldCBwYXRoUGFydHMgPSBwYXJzZVBhdGgocGF0aCk7XG4gICAgcmV0dXJuIHRyYXZlcnNlT2JqZWN0QnlQYXRoKHBhdGhQYXJ0cywgbyk7XG59XG5leHBvcnRzLnRyYXZlcnNlT2JqZWN0ID0gdHJhdmVyc2VPYmplY3Q7XG5mdW5jdGlvbiB0cmF2ZXJzZU9iamVjdFRvUGFyZW50KHBhdGgsIG8pIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IHBhdGhQYXJ0cyA9IHBhcnNlUGF0aChwYXRoKTtcbiAgICBpZiAocGF0aFBhcnRzWzBdID09PSAnJykge1xuICAgICAgICB0aHJvdyBuZXcgT1BEVHJhdmVyc2FsRXJyb3IoJ2NhbiBub3QgdHJhdmVyc2UgdG8gcGFyZW50IG9uIHNlbGYgcmVmZXJlbmNlJyk7XG4gICAgfVxuICAgIGxldCBwYXJlbnRQYXRoID0gcGF0aFBhcnRzLnNsaWNlKDAsIC0xKTtcbiAgICBsZXQgY2hpbGRLZXkgPSAoX2EgPSBwYXRoUGFydHMuYXQoLTEpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJztcbiAgICBsZXQgcGFyZW50T2JqZWN0ID0gdHJhdmVyc2VPYmplY3RCeVBhdGgocGFyZW50UGF0aCwgbyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcGFyZW50OiB7IGtleTogcGFyZW50UGF0aCwgdmFsdWU6IHBhcmVudE9iamVjdCB9LFxuICAgICAgICBjaGlsZDogeyBrZXk6IGNoaWxkS2V5LCB2YWx1ZTogcGFyZW50T2JqZWN0W2NoaWxkS2V5XSB9LFxuICAgIH07XG59XG5leHBvcnRzLnRyYXZlcnNlT2JqZWN0VG9QYXJlbnQgPSB0cmF2ZXJzZU9iamVjdFRvUGFyZW50O1xuZnVuY3Rpb24gdHJhdmVyc2VPYmplY3RCeVBhdGgocGF0aFBhcnRzLCBvKSB7XG4gICAgZm9yIChjb25zdCBwYXRoUGFydCBvZiBwYXRoUGFydHMpIHtcbiAgICAgICAgaWYgKHBhdGhQYXJ0ID09PSAnJykge1xuICAgICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBvID0gb1twYXRoUGFydF07XG4gICAgfVxuICAgIHJldHVybiBvO1xufVxuZXhwb3J0cy50cmF2ZXJzZU9iamVjdEJ5UGF0aCA9IHRyYXZlcnNlT2JqZWN0QnlQYXRoO1xuZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHtcbiAgICBwYXRoID0gcGF0aC5yZXBsYWNlKC8nL2csICdcIicpO1xuICAgIHZhbGlkYXRlUGF0aChwYXRoKTtcbiAgICByZXR1cm4gcGF0aFxuICAgICAgICAuc3BsaXQoJy4nKVxuICAgICAgICAubWFwKHggPT4geC5zcGxpdCgnWycpLm1hcCh5ID0+IHtcbiAgICAgICAgaWYgKHkuZW5kc1dpdGgoJ10nKSkge1xuICAgICAgICAgICAgeSA9IHkuc2xpY2UoMCwgLTEpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh5LnN0YXJ0c1dpdGgoJ1wiJykgJiYgeS5lbmRzV2l0aCgnXCInKSkge1xuICAgICAgICAgICAgeSA9IHkuc2xpY2UoMSwgLTEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB5O1xuICAgIH0pKVxuICAgICAgICAuZmxhdCgpO1xufVxuZXhwb3J0cy5wYXJzZVBhdGggPSBwYXJzZVBhdGg7XG5mdW5jdGlvbiB2YWxpZGF0ZVBhdGgocGF0aCkge1xuICAgIGNvbnN0IG51bWJlcnMgPSAnMDEyMzQ1Njc4OSc7XG4gICAgY29uc3QgbGV0dGVycyA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJztcbiAgICBsZXQgaW5zaWRlU3RyaW5nQnJhY2tldHMgPSBmYWxzZTtcbiAgICBsZXQgaW5zaWRlTnVtYmVyQnJhY2tldHMgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgY2hhciA9IHBhdGhbaV07XG4gICAgICAgIGNvbnN0IG5leHRDaGFyID0gcGF0aFtpICsgMV07XG4gICAgICAgIC8vIGlmIGNoYXIgaXMgYSBkb3RcbiAgICAgICAgaWYgKGNoYXIgPT09ICcuJykge1xuICAgICAgICAgICAgLy8gYSBkb3QgbWF5IG5vdCBiZSBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgcGF0aFxuICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgT1BEVHJhdmVyc2FsRXJyb3IoYEludmFsaWQgY2hhcmFjdGVyICcke2NoYXJ9JyBhdCBwb3NpdGlvbiAke2l9IGluIFwiJHtwYXRofVwiLCBwYXRoIG1heSBub3Qgc3RhcnQgd2l0aCAnLidgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRoZSB0aGluZyBmb2xsb3dpbmcgYSBkb3QgbXVzdCBiZSBhIHZhbGlkIHZhcmlhYmxlIG5hbWUsIHNvIGl0IG11c3Qgc3RhcnQgd2l0aCBhIGxldHRlciBvciBhbiB1bmRlcnNjb3JlXG4gICAgICAgICAgICBpZiAoIShsZXR0ZXJzLmluY2x1ZGVzKG5leHRDaGFyKSB8fCBuZXh0Q2hhciA9PT0gJ18nIHx8IG5leHRDaGFyID09PSAnJCcpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE9QRFRyYXZlcnNhbEVycm9yKGBJbnZhbGlkIGNoYXJhY3RlciAnJHtuZXh0Q2hhcn0nIGF0IHBvc2l0aW9uICR7aSArIDF9IGluIFwiJHtwYXRofVwiLCBleHBlY3RlZCBhIGxldHRlciwgJ18nIG9yICckJyB0byBmb2xsb3cgJy4nYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gYnJhY2tldCBlbnRlciBjb25kaXRpb25cbiAgICAgICAgaWYgKGNoYXIgPT09ICdbJykge1xuICAgICAgICAgICAgaWYgKG51bWJlcnMuaW5jbHVkZXMobmV4dENoYXIpKSB7XG4gICAgICAgICAgICAgICAgLy8gdGhlIGJyYWNrZXQgaXMgdXNlZCB0byBhY2Nlc3MgYW4gYXJyYXlcbiAgICAgICAgICAgICAgICBpbnNpZGVOdW1iZXJCcmFja2V0cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29udGludWU7IC8vIHNraXAgcmVzdCBvZiBjdXJyZW50IGNoYXJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG5leHRDaGFyID09PSAnXCInKSB7XG4gICAgICAgICAgICAgICAgLy8gdGhlIHN0cmluZyBiZXR3ZWVuIHRoZSBxdW90YXRpb24tbWFya3MgbWF5IG5vdCBiZSBlbXB0eVxuICAgICAgICAgICAgICAgIGlmIChwYXRoW2kgKyAyXSA9PT0gJ1wiJykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgT1BEVHJhdmVyc2FsRXJyb3IoYEludmFsaWQgY2hhcmFjdGVyICcke3BhdGhbaSArIDJdfScgYXQgcG9zaXRpb24gJHtpICsgMn0gaW4gXCIke3BhdGh9XCIsIHRoZSBzdHJpbmcgYmV0d2VlbiB0aGUgcXVvdGF0aW9uLW1hcmtzIG1heSBub3QgYmUgZW1wdHlgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5zaWRlU3RyaW5nQnJhY2tldHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGkgKz0gMTsgLy8gc2tpcCBuZXh0IGNoYXJcbiAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gc2tpcCByZXN0IG9mIGN1cnJlbnQgY2hhclxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE9QRFRyYXZlcnNhbEVycm9yKGBJbnZhbGlkIGNoYXJhY3RlciAnJHtuZXh0Q2hhcn0nIGF0IHBvc2l0aW9uICR7aSArIDF9IGluIFwiJHtwYXRofVwiLCBleHBlY3RlZCBudW1iZXIgb3IgJ1wiJyB0byBmb2xsb3cgYSAnWydgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBzdHJpbmcgYnJhY2tldCBleGl0IGNvbmRpdGlvblxuICAgICAgICBpZiAoaW5zaWRlU3RyaW5nQnJhY2tldHMgJiYgY2hhciA9PT0gJ1wiJykge1xuICAgICAgICAgICAgaWYgKG5leHRDaGFyID09PSAnXScpIHtcbiAgICAgICAgICAgICAgICBpbnNpZGVTdHJpbmdCcmFja2V0cyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGkgKz0gMTsgLy8gc2tpcCBuZXh0IGNoYXJcbiAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gc2tpcCByZXN0IG9mIGN1cnJlbnQgY2hhclxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE9QRFRyYXZlcnNhbEVycm9yKGBJbnZhbGlkIGNoYXJhY3RlciAnJHtuZXh0Q2hhcn0nIGF0IHBvc2l0aW9uICR7aSArIDF9IGluIFwiJHtwYXRofVwiLCBleHBlY3RlZCAnXScgdG8gZm9sbG93IGEgJ1wiJ2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIG51bWJlciBicmFja2V0IGV4aXQgY29uZGl0aW9uXG4gICAgICAgIGlmIChpbnNpZGVOdW1iZXJCcmFja2V0cyAmJiBjaGFyID09PSAnXScpIHtcbiAgICAgICAgICAgIGluc2lkZU51bWJlckJyYWNrZXRzID0gZmFsc2U7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5zaWRlU3RyaW5nQnJhY2tldHMgJiYgKGNoYXIgPT09ICcuJyB8fCBjaGFyID09PSAnXScgfHwgY2hhciA9PT0gJ1snKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9QRFRyYXZlcnNhbEVycm9yKGBJbnZhbGlkIGNoYXJhY3RlciAnJHtjaGFyfScgYXQgcG9zaXRpb24gJHtpfSBpbiBcIiR7cGF0aH1cImApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnNpZGVOdW1iZXJCcmFja2V0cyAmJiAhbnVtYmVycy5pbmNsdWRlcyhjaGFyKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9QRFRyYXZlcnNhbEVycm9yKGBJbnZhbGlkIGNoYXJhY3RlciAnJHtjaGFyfScgYXQgcG9zaXRpb24gJHtpfSBpbiBcIiR7cGF0aH1cIiwgbnVtYmVyIGV4cGVjdGVkIGluc2lkZSBvZiBicmFja2V0c2ApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaW5zaWRlTnVtYmVyQnJhY2tldHMgJiYgIWluc2lkZVN0cmluZ0JyYWNrZXRzKSB7XG4gICAgICAgICAgICBpZiAoY2hhciA9PT0gJ10nKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE9QRFRyYXZlcnNhbEVycm9yKGBJbnZhbGlkIGNoYXJhY3RlciAnJHtjaGFyfScgYXQgcG9zaXRpb24gJHtpfSBpbiBcIiR7cGF0aH1cIiwgZXhwZWN0ZWQgJ1snIHRvIHByb2NlZWRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMudmFsaWRhdGVQYXRoID0gdmFsaWRhdGVQYXRoO1xuY2xhc3MgT1BEVHJhdmVyc2FsRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB9XG59XG5leHBvcnRzLk9QRFRyYXZlcnNhbEVycm9yID0gT1BEVHJhdmVyc2FsRXJyb3I7XG4iLCAiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnN0cmluZ2lmeUZyb250bWF0dGVyID0gdm9pZCAwO1xuY29uc3Qgb2JzaWRpYW5fMSA9IHJlcXVpcmUoXCJvYnNpZGlhblwiKTtcbmZ1bmN0aW9uIHN0cmluZ2lmeUZyb250bWF0dGVyKGZyb250bWF0dGVyKSB7XG4gICAgcmV0dXJuIGAtLS1cXG4keygwLCBvYnNpZGlhbl8xLnN0cmluZ2lmeVlhbWwpKGZyb250bWF0dGVyKX0tLS1gO1xufVxuZXhwb3J0cy5zdHJpbmdpZnlGcm9udG1hdHRlciA9IHN0cmluZ2lmeUZyb250bWF0dGVyO1xuIiwgIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkludGVybmFsID0gdm9pZCAwO1xuY29uc3Qgb2JzaWRpYW5fMSA9IHJlcXVpcmUoXCJvYnNpZGlhblwiKTtcbmNvbnN0IFV0aWxzXzEgPSByZXF1aXJlKFwiLi9VdGlsc1wiKTtcbmNvbnN0IE9ic1V0aWxzXzEgPSByZXF1aXJlKFwiLi9PYnNVdGlsc1wiKTtcbi8qKlxuICogYEludGVybmFsYCBob2xkcyBtZXRob2RzIHRoYXQgdGhlIEFQSSB1c2VzIGludGVybmFsbHkuIFRoZSBtZXRob2RzIHRoYXQgd2UgZXhwZWN0IGEgcGx1Z2luIHRvIHVzZSBhcmUgd2l0aGluIGBBUEkudHNgLlxuICovXG52YXIgSW50ZXJuYWw7XG4oZnVuY3Rpb24gKEludGVybmFsKSB7XG4gICAgLyoqXG4gICAgICogUmVnZXggRXhwcmVzc2lvbiB0byBtYXRjaCB0aGUgbWFya2Rvd24gZnJvbnRtYXR0ZXIgYmxvY2suXG4gICAgICovXG4gICAgSW50ZXJuYWwuZnJvbnRNYXR0ZXJSZXhFeHBQYXR0ZXJuID0gJ14oLS0tKVxcXFxuW1xcXFxzXFxcXFNdKj9cXFxcbi0tLSc7XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbWV0YWRhdGEgb2JqZWN0IGZyb20gdGhlIGZpbGUgY29udGVudHMgdXNpbmcgcmVnRXguXG4gICAgICogSWYgcG9zc2libGUgdXNlIHtAbGluayBnZXRNZXRhZGF0YUZyb21GaWxlQ2FjaGV9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbGVDb250ZW50IHRoZSBmaWxlIGNvbnRlbnQgdG8gcmVhZCB0aGUgbWV0YWRhdGEgZnJvbVxuICAgICAqXG4gICAgICogQHJldHVybnMgdGhlIGZyb250bWF0dGVyIGFzIGEgcHJvcGVydHkgYXJyYXlcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRNZXRhRGF0YUZyb21GaWxlQ29udGVudChmaWxlQ29udGVudCkge1xuICAgICAgICBjb25zdCByZWdFeHAgPSBuZXcgUmVnRXhwKEludGVybmFsLmZyb250TWF0dGVyUmV4RXhwUGF0dGVybik7XG4gICAgICAgIGNvbnN0IGZyb250TWF0dGVyUmVnRXhwUmVzdWx0ID0gcmVnRXhwLmV4ZWMoZmlsZUNvbnRlbnQpO1xuICAgICAgICBpZiAoIWZyb250TWF0dGVyUmVnRXhwUmVzdWx0KSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZyb250TWF0dGVyID0gZnJvbnRNYXR0ZXJSZWdFeHBSZXN1bHRbMF07XG4gICAgICAgIGlmICghZnJvbnRNYXR0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICBmcm9udE1hdHRlciA9IGZyb250TWF0dGVyLnN1YnN0cmluZyg0KTtcbiAgICAgICAgZnJvbnRNYXR0ZXIgPSBmcm9udE1hdHRlci5zdWJzdHJpbmcoMCwgZnJvbnRNYXR0ZXIubGVuZ3RoIC0gMyk7XG4gICAgICAgIHJldHVybiBnZXRNZXRhRGF0YUZyb21ZQU1MKGZyb250TWF0dGVyKTtcbiAgICB9XG4gICAgSW50ZXJuYWwuZ2V0TWV0YURhdGFGcm9tRmlsZUNvbnRlbnQgPSBnZXRNZXRhRGF0YUZyb21GaWxlQ29udGVudDtcbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSB5YW1sIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB5YW1sXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0aGUgcGFyc2VkIHlhbWwgYXMgYW4gb2JqZWN0XG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0TWV0YURhdGFGcm9tWUFNTCh5YW1sKSB7XG4gICAgICAgIGlmICgheWFtbCkge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9iaiA9ICgwLCBvYnNpZGlhbl8xLnBhcnNlWWFtbCkoeWFtbCk7XG4gICAgICAgIGlmICghb2JqKSB7XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG4gICAgSW50ZXJuYWwuZ2V0TWV0YURhdGFGcm9tWUFNTCA9IGdldE1ldGFEYXRhRnJvbVlBTUw7XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbWVkYXRhIG9iamVjdCBmb3JtIG9ic2lkaWFuIGZpbGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmlsZVxuICAgICAqXG4gICAgICogQHBhcmFtIHBsdWdpblxuICAgICAqIEByZXR1cm5zIHRoZSBtZXRhZGF0YSBhcyBhbiBvYmplY3RcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRNZXRhZGF0YUZyb21GaWxlQ2FjaGUoZmlsZSwgcGx1Z2luKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgbGV0IG1ldGFkYXRhID0gKF9hID0gcGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZyb250bWF0dGVyO1xuICAgICAgICBpZiAobWV0YWRhdGEpIHtcbiAgICAgICAgICAgIG1ldGFkYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgbWV0YWRhdGEpOyAvLyBjb3B5XG4gICAgICAgICAgICBkZWxldGUgbWV0YWRhdGEucG9zaXRpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1ldGFkYXRhO1xuICAgIH1cbiAgICBJbnRlcm5hbC5nZXRNZXRhZGF0YUZyb21GaWxlQ2FjaGUgPSBnZXRNZXRhZGF0YUZyb21GaWxlQ2FjaGU7XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgZnJvbnRtYXR0ZXIgYmxvY2sgZnJvbSBhIGZpbGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmlsZUNvbnRlbnRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVGcm9udG1hdHRlcihmaWxlQ29udGVudCkge1xuICAgICAgICByZXR1cm4gZmlsZUNvbnRlbnQucmVwbGFjZShuZXcgUmVnRXhwKEludGVybmFsLmZyb250TWF0dGVyUmV4RXhwUGF0dGVybiksICcnKTtcbiAgICB9XG4gICAgSW50ZXJuYWwucmVtb3ZlRnJvbnRtYXR0ZXIgPSByZW1vdmVGcm9udG1hdHRlcjtcbiAgICAvKipcbiAgICAgKiBSZXBsYWNlcyB0aGUgRnJvbnRtYXR0ZXIgb2YgYSBmaWxlIHdpdGggdGhlIG1ldGFkYXRhLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1ldGFkYXRhXG4gICAgICogQHBhcmFtIGZpbGUgdGhlIGZpbGUgdG8gbW9kaWZ5IHRoZSBmcm9udG1hdHRlciBpblxuICAgICAqIEBwYXJhbSBwbHVnaW5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1cGRhdGVGcm9udG1hdHRlcihtZXRhZGF0YSwgZmlsZSwgcGx1Z2luKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBsZXQgZmlsZUNvbnRlbnQgPSB5aWVsZCBwbHVnaW4uYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSk7XG4gICAgICAgICAgICBmaWxlQ29udGVudCA9IHJlbW92ZUZyb250bWF0dGVyKGZpbGVDb250ZW50KTtcbiAgICAgICAgICAgIGZpbGVDb250ZW50ID0gYCR7KDAsIE9ic1V0aWxzXzEuc3RyaW5naWZ5RnJvbnRtYXR0ZXIpKG1ldGFkYXRhKX0ke2ZpbGVDb250ZW50fWA7XG4gICAgICAgICAgICB5aWVsZCBwbHVnaW4uYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBmaWxlQ29udGVudCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBJbnRlcm5hbC51cGRhdGVGcm9udG1hdHRlciA9IHVwZGF0ZUZyb250bWF0dGVyO1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgb2JqZWN0IGhhcyB0aGUgZmllbGQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aFxuICAgICAqIEBwYXJhbSBtZXRhZGF0YVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGhhc0ZpZWxkKHBhdGgsIG1ldGFkYXRhKSB7XG4gICAgICAgIHJldHVybiBnZXRGaWVsZChwYXRoLCBtZXRhZGF0YSkgIT09IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgSW50ZXJuYWwuaGFzRmllbGQgPSBoYXNGaWVsZDtcbiAgICAvKipcbiAgICAgKiBHZXRzIG9uZSBmaWVsZCBmb3JtIGFuIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoXG4gICAgICogQHBhcmFtIG1ldGFkYXRhXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0RmllbGQocGF0aCwgbWV0YWRhdGEpIHtcbiAgICAgICAgcmV0dXJuICgwLCBVdGlsc18xLnRyYXZlcnNlT2JqZWN0KShwYXRoLCBtZXRhZGF0YSk7XG4gICAgfVxuICAgIEludGVybmFsLmdldEZpZWxkID0gZ2V0RmllbGQ7XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBvbmUgZmllbGQgZnJvbSBhbSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aFxuICAgICAqIEBwYXJhbSBtZXRhZGF0YVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRlbGV0ZUZpZWxkKHBhdGgsIG1ldGFkYXRhKSB7XG4gICAgICAgIGxldCB7IHBhcmVudCwgY2hpbGQgfSA9ICgwLCBVdGlsc18xLnRyYXZlcnNlT2JqZWN0VG9QYXJlbnQpKHBhdGgsIG1ldGFkYXRhKTtcbiAgICAgICAgaWYgKHBhcmVudC52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgVGhlIHBhcmVudCBvZiBcIiR7cGF0aH1cIiBkb2VzIG5vdCBleGlzdCBpbiBPYmplY3QsIGNhbiBub3QgZGVsZXRlIGNoaWxkIGZyb20gbm9uIGV4aXN0aW5nIHBhcmVudGApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBhcmVudC52YWx1ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gTnVtYmVyLnBhcnNlSW50KGNoaWxkLmtleSk7XG4gICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGluZGV4KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXRhZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudC52YWx1ZS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVsZXRlIHBhcmVudC52YWx1ZVtjaGlsZC5rZXldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXRhZGF0YTtcbiAgICB9XG4gICAgSW50ZXJuYWwuZGVsZXRlRmllbGQgPSBkZWxldGVGaWVsZDtcbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIG9uZSBmaWVsZCBpbiBhbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aFxuICAgICAqIEBwYXJhbSB2YWx1ZVxuICAgICAqIEBwYXJhbSBtZXRhZGF0YVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVwZGF0ZUZpZWxkKHBhdGgsIHZhbHVlLCBtZXRhZGF0YSkge1xuICAgICAgICBsZXQgeyBwYXJlbnQsIGNoaWxkIH0gPSAoMCwgVXRpbHNfMS50cmF2ZXJzZU9iamVjdFRvUGFyZW50KShwYXRoLCBtZXRhZGF0YSk7XG4gICAgICAgIGlmIChwYXJlbnQudmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYFRoZSBwYXJlbnQgb2YgXCIke3BhdGh9XCIgZG9lcyBub3QgZXhpc3QgaW4gT2JqZWN0LCBwbGVhc2UgY3JlYXRlIHRoZSBwYXJlbnQgZmlyc3RgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hpbGQudmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYEZpZWxkIHdpdGgga2V5IFwiJHtwYXRofVwiIGRvZXMgbm90IGV4aXN0IGluIE9iamVjdGApO1xuICAgICAgICB9XG4gICAgICAgIHBhcmVudC52YWx1ZVtjaGlsZC5rZXldID0gdmFsdWU7XG4gICAgICAgIHJldHVybiBtZXRhZGF0YTtcbiAgICB9XG4gICAgSW50ZXJuYWwudXBkYXRlRmllbGQgPSB1cGRhdGVGaWVsZDtcbiAgICAvKipcbiAgICAgKiBJbnNlcnRzIG9uZSBmaWVsZCBpbiBhbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aFxuICAgICAqIEBwYXJhbSB2YWx1ZVxuICAgICAqIEBwYXJhbSBtZXRhZGF0YVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluc2VydEZpZWxkKHBhdGgsIHZhbHVlLCBtZXRhZGF0YSkge1xuICAgICAgICBsZXQgeyBwYXJlbnQsIGNoaWxkIH0gPSAoMCwgVXRpbHNfMS50cmF2ZXJzZU9iamVjdFRvUGFyZW50KShwYXRoLCBtZXRhZGF0YSk7XG4gICAgICAgIGlmIChwYXJlbnQudmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYFRoZSBwYXJlbnQgb2YgXCIke3BhdGh9XCIgZG9lcyBub3QgZXhpc3QgaW4gT2JqZWN0LCBwbGVhc2UgY3JlYXRlIHRoZSBwYXJlbnQgZmlyc3RgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hpbGQudmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYEZpZWxkIHdpdGgga2V5IFwiJHtwYXRofVwiIGRvZXMgYWxyZWFkeSBleGlzdCBpbiBPYmplY3RgKTtcbiAgICAgICAgfVxuICAgICAgICBwYXJlbnQudmFsdWVbY2hpbGQua2V5XSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gbWV0YWRhdGE7XG4gICAgfVxuICAgIEludGVybmFsLmluc2VydEZpZWxkID0gaW5zZXJ0RmllbGQ7XG4gICAgLyoqXG4gICAgICogVXBkYXRlIG9yIGluc2VydHMgb25lIGZpZWxkIGluIGFuIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoXG4gICAgICogQHBhcmFtIHZhbHVlXG4gICAgICogQHBhcmFtIG1ldGFkYXRhXG4gICAgICovXG4gICAgZnVuY3Rpb24gdXBkYXRlT3JJbnNlcnRGaWVsZChwYXRoLCB2YWx1ZSwgbWV0YWRhdGEpIHtcbiAgICAgICAgbGV0IHsgcGFyZW50LCBjaGlsZCB9ID0gKDAsIFV0aWxzXzEudHJhdmVyc2VPYmplY3RUb1BhcmVudCkocGF0aCwgbWV0YWRhdGEpO1xuICAgICAgICBpZiAocGFyZW50LnZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBUaGUgcGFyZW50IG9mIFwiJHtwYXRofVwiIGRvZXMgbm90IGV4aXN0IGluIE9iamVjdCwgcGxlYXNlIGNyZWF0ZSB0aGUgcGFyZW50IGZpcnN0YCk7XG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50LnZhbHVlW2NoaWxkLmtleV0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIG1ldGFkYXRhO1xuICAgIH1cbiAgICBJbnRlcm5hbC51cGRhdGVPckluc2VydEZpZWxkID0gdXBkYXRlT3JJbnNlcnRGaWVsZDtcbn0pKEludGVybmFsID0gZXhwb3J0cy5JbnRlcm5hbCB8fCAoZXhwb3J0cy5JbnRlcm5hbCA9IHt9KSk7XG4iLCAiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuc2V0RnJvbnRtYXR0ZXJPZlRGaWxlID0gZXhwb3J0cy5nZXRGcm9udG1hdHRlck9mVEZpbGUgPSBleHBvcnRzLmRlbGV0ZUZpZWxkSW5URmlsZSA9IGV4cG9ydHMudXBkYXRlT3JJbnNlcnRGaWVsZEluVEZpbGUgPSBleHBvcnRzLnVwZGF0ZUZpZWxkSW5URmlsZSA9IGV4cG9ydHMuaW5zZXJ0RmllbGRJblRGaWxlID0gZXhwb3J0cy5nZXRGaWVsZEZyb21URmlsZSA9IGV4cG9ydHMuZG9lc0ZpZWxkRXhpc3RJblRGaWxlID0gdm9pZCAwO1xuY29uc3QgSW50ZXJuYWxfMSA9IHJlcXVpcmUoXCIuL0ludGVybmFsXCIpO1xuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBhIGZpZWxkIGV4aXN0cyBpbnNpZGUgYSBmaWxlcycgbWV0YWRhdGEuXG4gKiBOb3RlLCB3aGVuIHRoZSBmaWVsZCBleGlzdHMgYnV0IHRoZSB2YWx1ZSBpcyBgdW5kZWZpbmVkYCwgdGhlIG1ldGhvZCB3aWxsIHJldHVybiBmYWxzZS5cbiAqXG4gKiBAdGhyb3dzIE9QRFRyYXZlcnNhbEVycm9yIGlmIGZpZWxkIGlzIGFuIGludmFsaWQgcGF0aCB0byBhIG1ldGFkYXRhIGZpZWxkLlxuICpcbiAqIEBwYXJhbSBmaWVsZCBUaGUgZmllbGQgdG8gZmluZCwgdGhpcyBjYW4gYWxzbyBiZSBhIHBhdGggdG8gYSBuZXN0ZWQgb2JqZWN0IGUuZy4gYGZvby5iYXJgLFxuICogXHRcdFx0XHRhIHBhdGggdG8gYSBzcGVjaWZpYyBpbmRleCBpbiBhbiBhcnJheSBlLmcuIGBmb29bMF1gXG4gKiBcdFx0XHRcdG9yIGFueSBjb21iaW5hdGlvbiBvZiB0aG9zZSBlLmcuIGBmb29bJ2JhciddLmJhelswXWAsXG4gKiBcdFx0XHRcdGxpa2UgeW91IGFyZSB1c2VkIHRvIGZyb20gamF2YXNjcmlwdCwgZXhjZXB0IHRoYXQgdGhlIGA/YCBvcGVyYXRvciBpcyAqKm5vdCoqIHN1cHBvcnRlZC5cbiAqIEBwYXJhbSBmaWxlXG4gKiBAcGFyYW0gcGx1Z2luXG4gKiBAcGFyYW0gaXNJbmxpbmUgdW51c2VkIGZvciBub3dcbiAqXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGZpZWxkIGV4aXN0cywgYGZhbHNlYCBvdGhlcndpc2VcbiAqL1xuZnVuY3Rpb24gZG9lc0ZpZWxkRXhpc3RJblRGaWxlKGZpZWxkLCBmaWxlLCBwbHVnaW4sIGlzSW5saW5lID0gZmFsc2UpIHtcbiAgICBjb25zdCBtZXRhZGF0YSA9IEludGVybmFsXzEuSW50ZXJuYWwuZ2V0TWV0YWRhdGFGcm9tRmlsZUNhY2hlKGZpbGUsIHBsdWdpbik7XG4gICAgcmV0dXJuIEludGVybmFsXzEuSW50ZXJuYWwuaGFzRmllbGQoZmllbGQsIG1ldGFkYXRhKTtcbn1cbmV4cG9ydHMuZG9lc0ZpZWxkRXhpc3RJblRGaWxlID0gZG9lc0ZpZWxkRXhpc3RJblRGaWxlO1xuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiBhIGZpZWxkIGluIGEgZmlsZXMnIG1ldGFkYXRhLlxuICogSWYgdGhlIGZpZWxkIGRvZXMgbm90IGV4aXN0LCB0aGlzIG1ldGhvZCB3aWxsIHJldHVybiBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAdGhyb3dzIE9QRFRyYXZlcnNhbEVycm9yIGlmIGZpZWxkIGlzIGFuIGludmFsaWQgcGF0aCB0byBhIG1ldGFkYXRhIGZpZWxkLlxuICpcbiAqIEBwYXJhbSBmaWVsZCBUaGUgZmllbGQgdG8gZ2V0LCB0aGlzIGNhbiBhbHNvIGJlIGEgcGF0aCB0byBhIG5lc3RlZCBvYmplY3QgZS5nLiBgZm9vLmJhcmAsXG4gKiBcdFx0XHRcdGEgcGF0aCB0byBhIHNwZWNpZmljIGluZGV4IGluIGFuIGFycmF5IGUuZy4gYGZvb1swXWBcbiAqIFx0XHRcdFx0b3IgYW55IGNvbWJpbmF0aW9uIG9mIHRob3NlIGUuZy4gYGZvb1snYmFyJ10uYmF6WzBdYCxcbiAqIFx0XHRcdFx0bGlrZSB5b3UgYXJlIHVzZWQgdG8gZnJvbSBqYXZhc2NyaXB0LCBleGNlcHQgdGhhdCB0aGUgYD9gIG9wZXJhdG9yIGlzICoqbm90Kiogc3VwcG9ydGVkLlxuICogQHBhcmFtIGZpbGVcbiAqIEBwYXJhbSBwbHVnaW5cbiAqIEBwYXJhbSBpc0lubGluZSB1bnVzZWQgZm9yIG5vd1xuICpcbiAqIEByZXR1cm5zIFRoZSB2YWx1ZSBvZiB0aGUgZmllbGQgb3IgYHVuZGVmaW5lZGAgaWYgdGhlIGZpZWxkIGRvZXMgbm90IGV4aXN0LlxuICovXG5mdW5jdGlvbiBnZXRGaWVsZEZyb21URmlsZShmaWVsZCwgZmlsZSwgcGx1Z2luLCBpc0lubGluZSA9IGZhbHNlKSB7XG4gICAgY29uc3QgbWV0YWRhdGEgPSBJbnRlcm5hbF8xLkludGVybmFsLmdldE1ldGFkYXRhRnJvbUZpbGVDYWNoZShmaWxlLCBwbHVnaW4pO1xuICAgIHJldHVybiBJbnRlcm5hbF8xLkludGVybmFsLmdldEZpZWxkKGZpZWxkLCBtZXRhZGF0YSk7XG59XG5leHBvcnRzLmdldEZpZWxkRnJvbVRGaWxlID0gZ2V0RmllbGRGcm9tVEZpbGU7XG4vKipcbiAqIEluc2VydHMgYSBmaWVsZCBpbiBhIGZpbGVzJyBtZXRhZGF0YS4gSWYgdGhlIGZpZWxkIGFscmVhZHkgZXhpc3RzLCB0aGlzIG1ldGhvZCB3aWxsIHRocm93LlxuICpcbiAqIEB0aHJvd3MgRXJyb3IgSWYgdGhlIGZpZWxkIGFscmVhZHkgZXhpc3RzLlxuICogQHRocm93cyBFcnJvciBJZiB0aGUgcGFyZW50IG9mIHRoZSBmaWVsZCB0byB1cGRhdGUvaW5zZXJ0IGRvZXMgbm90IGV4aXN0LFxuICogXHRcdCAgIGUuZy4gaWYgdGhlIG1ldGhvZCBpcyBjYWxsZWQgd2l0aCB0aGUgZmllbGQgYGZvby5iYXJgLCBidXQgYGZvb2AgZG9lcyBub3QgZXhpc3QgaW4gdGhlIG1ldGFkYXRhIHRoaXMgbWV0aG9kIHdpbGwgdGhyb3cuXG4gKiBAdGhyb3dzIE9QRFRyYXZlcnNhbEVycm9yIElmIGZpZWxkIGlzIGFuIGludmFsaWQgcGF0aCB0byBhIG1ldGFkYXRhIGZpZWxkLlxuICpcbiAqIEBwYXJhbSBmaWVsZCBUaGUgZmllbGQgdG8gaW5zZXJ0LCB0aGlzIGNhbiBhbHNvIGJlIGEgcGF0aCB0byBhIG5lc3RlZCBvYmplY3QgZS5nLiBgZm9vLmJhcmAsXG4gKiBcdFx0XHRcdGEgcGF0aCB0byBhIHNwZWNpZmljIGluZGV4IGluIGFuIGFycmF5IGUuZy4gYGZvb1swXWBcbiAqIFx0XHRcdFx0b3IgYW55IGNvbWJpbmF0aW9uIG9mIHRob3NlIGUuZy4gYGZvb1snYmFyJ10uYmF6WzBdYCxcbiAqIFx0XHRcdFx0bGlrZSB5b3UgYXJlIHVzZWQgdG8gZnJvbSBqYXZhc2NyaXB0LCBleGNlcHQgdGhhdCB0aGUgYD9gIG9wZXJhdG9yIGlzICoqbm90Kiogc3VwcG9ydGVkLlxuICogQHBhcmFtIHZhbHVlIFRoZSBuZXcgdmFsdWUgb2YgdGhlIGZpZWxkLlxuICogQHBhcmFtIGZpbGVcbiAqIEBwYXJhbSBwbHVnaW5cbiAqIEBwYXJhbSBpc0lubGluZSB1bnVzZWQgZm9yIG5vd1xuICovXG5mdW5jdGlvbiBpbnNlcnRGaWVsZEluVEZpbGUoZmllbGQsIHZhbHVlLCBmaWxlLCBwbHVnaW4sIGlzSW5saW5lID0gZmFsc2UpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IEludGVybmFsXzEuSW50ZXJuYWwuZ2V0TWV0YWRhdGFGcm9tRmlsZUNhY2hlKGZpbGUsIHBsdWdpbik7XG4gICAgICAgIEludGVybmFsXzEuSW50ZXJuYWwuaW5zZXJ0RmllbGQoZmllbGQsIHZhbHVlLCBtZXRhZGF0YSk7XG4gICAgICAgIHlpZWxkIEludGVybmFsXzEuSW50ZXJuYWwudXBkYXRlRnJvbnRtYXR0ZXIobWV0YWRhdGEsIGZpbGUsIHBsdWdpbik7XG4gICAgfSk7XG59XG5leHBvcnRzLmluc2VydEZpZWxkSW5URmlsZSA9IGluc2VydEZpZWxkSW5URmlsZTtcbi8qKlxuICogVXBkYXRlcyBhIGZpZWxkIGluIGEgZmlsZXMnIG1ldGFkYXRhLiBJZiB0aGUgZmllbGQgZG9lcyBub3QgZXhpc3QsIHRoaXMgbWV0aG9kIHdpbGwgdGhyb3cuXG4gKlxuICogQHRocm93cyBFcnJvciBJZiB0aGUgZmllbGQgZG9lcyBub3QgZXhpc3QuXG4gKiBAdGhyb3dzIEVycm9yIElmIHRoZSBwYXJlbnQgb2YgdGhlIGZpZWxkIHRvIHVwZGF0ZS9pbnNlcnQgZG9lcyBub3QgZXhpc3QsXG4gKiBcdFx0ICAgZS5nLiBpZiB0aGUgbWV0aG9kIGlzIGNhbGxlZCB3aXRoIHRoZSBmaWVsZCBgZm9vLmJhcmAsIGJ1dCBgZm9vYCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgbWV0YWRhdGEgdGhpcyBtZXRob2Qgd2lsbCB0aHJvdy5cbiAqIEB0aHJvd3MgT1BEVHJhdmVyc2FsRXJyb3IgSWYgZmllbGQgaXMgYW4gaW52YWxpZCBwYXRoIHRvIGEgbWV0YWRhdGEgZmllbGQuXG4gKlxuICogQHBhcmFtIGZpZWxkIFRoZSBmaWVsZCB0byB1cGRhdGUsIHRoaXMgY2FuIGFsc28gYmUgYSBwYXRoIHRvIGEgbmVzdGVkIG9iamVjdCBlLmcuIGBmb28uYmFyYCxcbiAqIFx0XHRcdFx0YSBwYXRoIHRvIGEgc3BlY2lmaWMgaW5kZXggaW4gYW4gYXJyYXkgZS5nLiBgZm9vWzBdYFxuICogXHRcdFx0XHRvciBhbnkgY29tYmluYXRpb24gb2YgdGhvc2UgZS5nLiBgZm9vWydiYXInXS5iYXpbMF1gLFxuICogXHRcdFx0XHRsaWtlIHlvdSBhcmUgdXNlZCB0byBmcm9tIGphdmFzY3JpcHQsIGV4Y2VwdCB0aGF0IHRoZSBgP2Agb3BlcmF0b3IgaXMgKipub3QqKiBzdXBwb3J0ZWQuXG4gKiBAcGFyYW0gdmFsdWUgVGhlIG5ldyB2YWx1ZSBvZiB0aGUgZmllbGQuXG4gKiBAcGFyYW0gZmlsZVxuICogQHBhcmFtIHBsdWdpblxuICogQHBhcmFtIGlzSW5saW5lIHVudXNlZCBmb3Igbm93XG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZUZpZWxkSW5URmlsZShmaWVsZCwgdmFsdWUsIGZpbGUsIHBsdWdpbiwgaXNJbmxpbmUgPSBmYWxzZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gSW50ZXJuYWxfMS5JbnRlcm5hbC5nZXRNZXRhZGF0YUZyb21GaWxlQ2FjaGUoZmlsZSwgcGx1Z2luKTtcbiAgICAgICAgSW50ZXJuYWxfMS5JbnRlcm5hbC51cGRhdGVGaWVsZChmaWVsZCwgdmFsdWUsIG1ldGFkYXRhKTtcbiAgICAgICAgeWllbGQgSW50ZXJuYWxfMS5JbnRlcm5hbC51cGRhdGVGcm9udG1hdHRlcihtZXRhZGF0YSwgZmlsZSwgcGx1Z2luKTtcbiAgICB9KTtcbn1cbmV4cG9ydHMudXBkYXRlRmllbGRJblRGaWxlID0gdXBkYXRlRmllbGRJblRGaWxlO1xuLyoqXG4gKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYSBmaWVsZCBpbiBhIGZpbGVzJyBtZXRhZGF0YS5cbiAqIFRoaXMgaXMgbW9yZSBlZmZpY2llbnQgdGhhbiBjaGVja2luZyB5b3Vyc2VsZiB3aXRoIHtAbGluayBkb2VzRmllbGRFeGlzdEluVEZpbGV9IGFuZCB0aGVuIGluc2VydGluZyB3aXRoIHtAbGluayBpbnNlcnRGaWVsZEluVEZpbGV9IG9yIHVwZGF0aW5nIHdpdGgge0BsaW5rIHVwZGF0ZUZpZWxkSW5URmlsZX0uXG4gKlxuICogQHRocm93cyBFcnJvciBJZiB0aGUgcGFyZW50IG9mIHRoZSBmaWVsZCB0byB1cGRhdGUvaW5zZXJ0IGRvZXMgbm90IGV4aXN0LFxuICogXHRcdCAgIGUuZy4gaWYgdGhlIG1ldGhvZCBpcyBjYWxsZWQgd2l0aCB0aGUgZmllbGQgYGZvby5iYXJgLCBidXQgYGZvb2AgZG9lcyBub3QgZXhpc3QgaW4gdGhlIG1ldGFkYXRhIHRoaXMgbWV0aG9kIHdpbGwgdGhyb3cuXG4gKiBAdGhyb3dzIE9QRFRyYXZlcnNhbEVycm9yIElmIGZpZWxkIGlzIGFuIGludmFsaWQgcGF0aCB0byBhIG1ldGFkYXRhIGZpZWxkLlxuICpcbiAqIEBwYXJhbSBmaWVsZCBUaGUgZmllbGQgdG8gdXBkYXRlL2luc2VydCwgdGhpcyBjYW4gYWxzbyBiZSBhIHBhdGggdG8gYSBuZXN0ZWQgb2JqZWN0IGUuZy4gYGZvby5iYXJgLFxuICogXHRcdFx0XHRhIHBhdGggdG8gYSBzcGVjaWZpYyBpbmRleCBpbiBhbiBhcnJheSBlLmcuIGBmb29bMF1gXG4gKiBcdFx0XHRcdG9yIGFueSBjb21iaW5hdGlvbiBvZiB0aG9zZSBlLmcuIGBmb29bJ2JhciddLmJhelswXWAsXG4gKiBcdFx0XHRcdGxpa2UgeW91IGFyZSB1c2VkIHRvIGZyb20gamF2YXNjcmlwdCwgZXhjZXB0IHRoYXQgdGhlIGA/YCBvcGVyYXRvciBpcyAqKm5vdCoqIHN1cHBvcnRlZC5cbiAqIEBwYXJhbSB2YWx1ZSBUaGUgbmV3IHZhbHVlIG9mIHRoZSBmaWVsZC5cbiAqIEBwYXJhbSBmaWxlXG4gKiBAcGFyYW0gcGx1Z2luXG4gKiBAcGFyYW0gaXNJbmxpbmUgdW51c2VkIGZvciBub3dcbiAqL1xuZnVuY3Rpb24gdXBkYXRlT3JJbnNlcnRGaWVsZEluVEZpbGUoZmllbGQsIHZhbHVlLCBmaWxlLCBwbHVnaW4sIGlzSW5saW5lID0gZmFsc2UpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBsZXQgbWV0YWRhdGEgPSBJbnRlcm5hbF8xLkludGVybmFsLmdldE1ldGFkYXRhRnJvbUZpbGVDYWNoZShmaWxlLCBwbHVnaW4pO1xuICAgICAgICBJbnRlcm5hbF8xLkludGVybmFsLnVwZGF0ZU9ySW5zZXJ0RmllbGQoZmllbGQsIHZhbHVlLCBtZXRhZGF0YSk7XG4gICAgICAgIHlpZWxkIEludGVybmFsXzEuSW50ZXJuYWwudXBkYXRlRnJvbnRtYXR0ZXIobWV0YWRhdGEsIGZpbGUsIHBsdWdpbik7XG4gICAgfSk7XG59XG5leHBvcnRzLnVwZGF0ZU9ySW5zZXJ0RmllbGRJblRGaWxlID0gdXBkYXRlT3JJbnNlcnRGaWVsZEluVEZpbGU7XG4vKipcbiAqIERlbGV0ZXMgYSBmaWVsZCBpbiBhIGZpbGVzJyBtZXRhZGF0YS5cbiAqXG4gKiBAdGhyb3dzIEVycm9yIElmIHRoZSBwYXJlbnQgb2YgdGhlIGZpZWxkIHRvIHVwZGF0ZS9pbnNlcnQgZG9lcyBub3QgZXhpc3QsXG4gKiBcdFx0ICAgZS5nLiBpZiB0aGUgbWV0aG9kIGlzIGNhbGxlZCB3aXRoIHRoZSBmaWVsZCBgZm9vLmJhcmAsIGJ1dCBgZm9vYCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgbWV0YWRhdGEgdGhpcyBtZXRob2Qgd2lsbCB0aHJvdy5cbiAqIEB0aHJvd3MgT1BEVHJhdmVyc2FsRXJyb3IgSWYgZmllbGQgaXMgYW4gaW52YWxpZCBwYXRoIHRvIGEgbWV0YWRhdGEgZmllbGQuXG4gKlxuICogQHBhcmFtIGZpZWxkIFRoZSBmaWVsZCB0byBkZWxldGUsIHRoaXMgY2FuIGFsc28gYmUgYSBwYXRoIHRvIGEgbmVzdGVkIG9iamVjdCBlLmcuIGBmb28uYmFyYCxcbiAqIFx0XHRcdFx0YSBwYXRoIHRvIGEgc3BlY2lmaWMgaW5kZXggaW4gYW4gYXJyYXkgZS5nLiBgZm9vWzBdYFxuICogXHRcdFx0XHRvciBhbnkgY29tYmluYXRpb24gb2YgdGhvc2UgZS5nLiBgZm9vWydiYXInXS5iYXpbMF1gLFxuICogXHRcdFx0XHRsaWtlIHlvdSBhcmUgdXNlZCB0byBmcm9tIGphdmFzY3JpcHQsIGV4Y2VwdCB0aGF0IHRoZSBgP2Agb3BlcmF0b3IgaXMgKipub3QqKiBzdXBwb3J0ZWQuXG4gKiBAcGFyYW0gZmlsZVxuICogQHBhcmFtIHBsdWdpblxuICogQHBhcmFtIGlzSW5saW5lIHVudXNlZCBmb3Igbm93XG4gKi9cbmZ1bmN0aW9uIGRlbGV0ZUZpZWxkSW5URmlsZShmaWVsZCwgZmlsZSwgcGx1Z2luLCBpc0lubGluZSA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBJbnRlcm5hbF8xLkludGVybmFsLmdldE1ldGFkYXRhRnJvbUZpbGVDYWNoZShmaWxlLCBwbHVnaW4pO1xuICAgICAgICBJbnRlcm5hbF8xLkludGVybmFsLmRlbGV0ZUZpZWxkKGZpZWxkLCBtZXRhZGF0YSk7XG4gICAgICAgIHlpZWxkIEludGVybmFsXzEuSW50ZXJuYWwudXBkYXRlRnJvbnRtYXR0ZXIobWV0YWRhdGEsIGZpbGUsIHBsdWdpbik7XG4gICAgfSk7XG59XG5leHBvcnRzLmRlbGV0ZUZpZWxkSW5URmlsZSA9IGRlbGV0ZUZpZWxkSW5URmlsZTtcbi8qKlxuICogUmV0dXJucyB0aGUgZnJvbnRtYXR0ZXIgZnJvbSBhIGZpbGUuXG4gKlxuICogQHBhcmFtIGZpbGVcbiAqIEBwYXJhbSBwbHVnaW5cbiAqL1xuZnVuY3Rpb24gZ2V0RnJvbnRtYXR0ZXJPZlRGaWxlKGZpbGUsIHBsdWdpbikge1xuICAgIHJldHVybiBJbnRlcm5hbF8xLkludGVybmFsLmdldE1ldGFkYXRhRnJvbUZpbGVDYWNoZShmaWxlLCBwbHVnaW4pO1xufVxuZXhwb3J0cy5nZXRGcm9udG1hdHRlck9mVEZpbGUgPSBnZXRGcm9udG1hdHRlck9mVEZpbGU7XG4vKipcbiAqIFVwZGF0ZXMgdGhlIGVudGlyZSBmcm9udG1hdHRlciBvZiBhIGZpbGUuXG4gKlxuICogQHBhcmFtIG1ldGFkYXRhXG4gKiBAcGFyYW0gZmlsZVxuICogQHBhcmFtIHBsdWdpblxuICovXG5mdW5jdGlvbiBzZXRGcm9udG1hdHRlck9mVEZpbGUobWV0YWRhdGEsIGZpbGUsIHBsdWdpbikge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHlpZWxkIEludGVybmFsXzEuSW50ZXJuYWwudXBkYXRlRnJvbnRtYXR0ZXIobWV0YWRhdGEsIGZpbGUsIHBsdWdpbik7XG4gICAgfSk7XG59XG5leHBvcnRzLnNldEZyb250bWF0dGVyT2ZURmlsZSA9IHNldEZyb250bWF0dGVyT2ZURmlsZTtcbi8qKlxuICogVU5VU0VEXG4gKiBAZGVwcmVjYXRlZFxuICpcbiAqIEBwYXJhbSBwbHVnaW5cbiAqIEBwYXJhbSBmaWxlXG4gKiBAcGFyYW0gZnJvbnRtYXR0ZXJBc1lhbWxcbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVGaWxlQ29udGVudHMocGx1Z2luLCBmaWxlLCBmcm9udG1hdHRlckFzWWFtbCkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnN0IGZpbGVDb250ZW50cyA9IHlpZWxkIHBsdWdpbi5hcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcbiAgICAgICAgcmV0dXJuIGZpbGVDb250ZW50cy5yZXBsYWNlKC9eLS0tXFxuKC4qXFxuKSotLS0vLCBmcm9udG1hdHRlckFzWWFtbCk7XG4gICAgfSk7XG59XG4iLCAiaW1wb3J0IHsgQ2FjaGVkTWV0YWRhdGEsIEZyb250TWF0dGVyQ2FjaGUsIHBhcnNlWWFtbCwgUGx1Z2luLCBzdHJpbmdpZnlZYW1sLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MsIE1ldGFCaW5kUGx1Z2luU2V0dGluZ3MsIE1ldGFCaW5kU2V0dGluZ1RhYiB9IGZyb20gJy4vc2V0dGluZ3MvU2V0dGluZ3MnO1xuaW1wb3J0IHsgSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZSB9IGZyb20gJy4vSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQnO1xuaW1wb3J0IHsgZ2V0RmlsZU5hbWUsIGlzUGF0aCwgcmVtb3ZlRmlsZUVuZGluZyB9IGZyb20gJy4vdXRpbHMvVXRpbHMnO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnLi91dGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgRGF0ZVBhcnNlciB9IGZyb20gJy4vcGFyc2Vycy9EYXRlUGFyc2VyJztcbmltcG9ydCB7IElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlciB9IGZyb20gJy4vcGFyc2Vycy9JbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXInO1xuaW1wb3J0IHtnZXRGaWVsZEZyb21URmlsZSwgZ2V0RnJvbnRtYXR0ZXJPZlRGaWxlfSBmcm9tICdAb3BkLWxpYnMvb3BkLW1ldGFkYXRhLWxpYi9saWIvQVBJJztcbmltcG9ydCB7dHJhdmVyc2VPYmplY3R9IGZyb20gJ0BvcGQtbGlicy9vcGQtbWV0YWRhdGEtbGliL2xpYi9VdGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1ldGFCaW5kUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0Ly8gQHRzLWlnbm9yZSBkZWZpbmVkIGluIGBvbmxvYWRgXG5cdHNldHRpbmdzOiBNZXRhQmluZFBsdWdpblNldHRpbmdzO1xuXG5cdC8vIEB0cy1pZ25vcmUgZGVmaW5lZCBpbiBgb25sb2FkYFxuXHRhY3RpdmVNYXJrZG93bklucHV0RmllbGRzOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFtdO1xuXHQvLyBAdHMtaWdub3JlIGRlZmluZWQgaW4gYG9ubG9hZGBcblx0bWFya0Rvd25JbnB1dEZpZWxkSW5kZXg6IG51bWJlcjtcblxuXHRhc3luYyBvbmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdExvZ2dlci5kZXZNb2RlID0gdGhpcy5zZXR0aW5ncy5kZXZNb2RlO1xuXHRcdERhdGVQYXJzZXIuZGF0ZUZvcm1hdCA9IHRoaXMuc2V0dGluZ3MucHJlZmVycmVkRGF0ZUZvcm1hdDtcblx0XHRJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIucGFyc2VUZW1wbGF0ZXModGhpcy5zZXR0aW5ncy5pbnB1dFRlbXBsYXRlcyk7XG5cblx0XHR0aGlzLmFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZHMgPSBbXTtcblx0XHR0aGlzLm1hcmtEb3duSW5wdXRGaWVsZEluZGV4ID0gMDtcblxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93blBvc3RQcm9jZXNzb3IoKGVsZW1lbnQsIGNvbnRleHQpID0+IHtcblx0XHRcdGNvbnN0IGNvZGVCbG9ja3MgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2NvZGUnKTtcblx0XHRcdGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjb2RlQmxvY2tzLmxlbmd0aDsgaW5kZXgrKykge1xuXHRcdFx0XHRjb25zdCBjb2RlQmxvY2sgPSBjb2RlQmxvY2tzLml0ZW0oaW5kZXgpO1xuXHRcdFx0XHRjb25zdCB0ZXh0ID0gY29kZUJsb2NrLmlubmVyVGV4dDtcblx0XHRcdFx0Y29uc3QgaXNJbnB1dEZpZWxkID0gdGV4dC5zdGFydHNXaXRoKCdJTlBVVFsnKSAmJiB0ZXh0LmVuZHNXaXRoKCddJyk7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKGNvbnRleHQuc291cmNlUGF0aCk7XG5cdFx0XHRcdGlmIChpc0lucHV0RmllbGQpIHtcblx0XHRcdFx0XHRjb250ZXh0LmFkZENoaWxkKFxuXHRcdFx0XHRcdFx0bmV3IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkKFxuXHRcdFx0XHRcdFx0XHRjb2RlQmxvY2ssXG5cdFx0XHRcdFx0XHRcdElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZS5JTkxJTkVfQ09ERV9CTE9DSyxcblx0XHRcdFx0XHRcdFx0dGV4dCxcblx0XHRcdFx0XHRcdFx0dGhpcyxcblx0XHRcdFx0XHRcdFx0Y29udGV4dC5zb3VyY2VQYXRoLFxuXHRcdFx0XHRcdFx0XHR0aGlzLm1hcmtEb3duSW5wdXRGaWVsZEluZGV4XG5cdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR0aGlzLm1hcmtEb3duSW5wdXRGaWVsZEluZGV4ICs9IDE7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvcignbWV0YS1iaW5kJywgKHNvdXJjZSwgZWwsIGN0eCkgPT4ge1xuXHRcdFx0Y29uc3QgY29kZUJsb2NrID0gZWw7XG5cdFx0XHRjb25zdCB0ZXh0ID0gc291cmNlLnJlcGxhY2UoL1xcbi9nLCAnJyk7XG5cdFx0XHRjb25zdCBpc0lucHV0RmllbGQgPSB0ZXh0LnN0YXJ0c1dpdGgoJ0lOUFVUWycpICYmIHRleHQuZW5kc1dpdGgoJ10nKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKGNvbnRleHQuc291cmNlUGF0aCk7XG5cdFx0XHRpZiAoaXNJbnB1dEZpZWxkKSB7XG5cdFx0XHRcdGN0eC5hZGRDaGlsZChuZXcgSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQoY29kZUJsb2NrLCBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGUuQ09ERV9CTE9DSywgdGV4dCwgdGhpcywgY3R4LnNvdXJjZVBhdGgsIHRoaXMubWFya0Rvd25JbnB1dEZpZWxkSW5kZXgpKTtcblx0XHRcdFx0dGhpcy5tYXJrRG93bklucHV0RmllbGRJbmRleCArPSAxO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5hcHAubWV0YWRhdGFDYWNoZS5vbignY2hhbmdlZCcsIGFzeW5jIChmaWxlOiBURmlsZSwgZGF0YTogc3RyaW5nLCBjYWNoZTogQ2FjaGVkTWV0YWRhdGEpID0+IHtcblx0XHRcdFx0YXdhaXQgdGhpcy51cGRhdGVNYXJrZG93bklucHV0RmllbGRzT25NZXRhZGF0YUNhY2hlQ2hhbmdlKGZpbGUsIGNhY2hlKTtcblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTWV0YUJpbmRTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cdH1cblxuXHRvbnVubG9hZCgpOiB2b2lkIHtcblx0XHRmb3IgKGNvbnN0IGFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZCBvZiB0aGlzLmFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZHMpIHtcblx0XHRcdGFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZC51bmxvYWQoKTtcblx0XHR9XG5cdH1cblxuXHRyZWdpc3RlcklucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkKGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCk6IHZvaWQge1xuXHRcdHRoaXMuYWN0aXZlTWFya2Rvd25JbnB1dEZpZWxkcy5wdXNoKGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkKTtcblx0fVxuXG5cdHVucmVnaXN0ZXJJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZChpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQpOiB2b2lkIHtcblx0XHR0aGlzLmFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZHMgPSB0aGlzLmFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZHMuZmlsdGVyKHggPT4geC51aWQgIT09IGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLnVpZCk7XG5cdH1cblxuXHR1cGRhdGVNYXJrZG93bklucHV0RmllbGRzT25NZXRhZGF0YUNhY2hlQ2hhbmdlKGZpbGU6IFRGaWxlLCBjYWNoZTogQ2FjaGVkTWV0YWRhdGEpOiB2b2lkIHtcblx0XHRsZXQgbWV0YWRhdGE6IGFueSA9IHVuZGVmaW5lZDtcblxuXHRcdGZvciAoY29uc3QgYWN0aXZlTWFya2Rvd25JbnB1dEZpZWxkIG9mIHRoaXMuYWN0aXZlTWFya2Rvd25JbnB1dEZpZWxkcykge1xuXHRcdFx0aWYgKCFhY3RpdmVNYXJrZG93bklucHV0RmllbGQuaW5wdXRGaWVsZERlY2xhcmF0aW9uPy5pc0JvdW5kIHx8ICFhY3RpdmVNYXJrZG93bklucHV0RmllbGQuYmluZFRhcmdldEZpbGUgfHwgIWFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZC5iaW5kVGFyZ2V0TWV0YWRhdGFGaWVsZCkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZC5iaW5kVGFyZ2V0RmlsZS5wYXRoID09PSBmaWxlLnBhdGgpIHtcblx0XHRcdFx0aWYgKG1ldGFkYXRhID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRtZXRhZGF0YSA9IGdldEZyb250bWF0dGVyT2ZURmlsZShmaWxlLCB0aGlzKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRhY3RpdmVNYXJrZG93bklucHV0RmllbGQucHVzaFRvSW5wdXRGaWVsZFZhbHVlVXBkYXRlUXVldWUodHJhdmVyc2VPYmplY3QoYWN0aXZlTWFya2Rvd25JbnB1dEZpZWxkLmJpbmRUYXJnZXRNZXRhZGF0YUZpZWxkLCBtZXRhZGF0YSkpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGdldEZpbGVzQnlOYW1lKG5hbWU6IHN0cmluZyk6IFRGaWxlW10ge1xuXHRcdGNvbnNvbGUubG9nKGdldEZpbGVOYW1lKHJlbW92ZUZpbGVFbmRpbmcobmFtZSkpKTtcblx0XHRjb25zdCBmaWxlTmFtZUlzUGF0aCA9IGlzUGF0aChuYW1lKTtcblx0XHRjb25zdCBwcm9jZXNzZWRGaWxlTmFtZSA9IGZpbGVOYW1lSXNQYXRoID8gcmVtb3ZlRmlsZUVuZGluZyhuYW1lKSA6IGdldEZpbGVOYW1lKHJlbW92ZUZpbGVFbmRpbmcobmFtZSkpO1xuXG5cdFx0Y29uc3QgYWxsRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cdFx0Y29uc3QgZmlsZXM6IFRGaWxlW10gPSBbXTtcblx0XHRmb3IgKGNvbnN0IGZpbGUgb2YgYWxsRmlsZXMpIHtcblx0XHRcdC8vIGNvbnNvbGUubG9nKHJlbW92ZUZpbGVFbmRpbmcoZmlsZS5wYXRoKSk7XG5cdFx0XHRpZiAoZmlsZU5hbWVJc1BhdGgpIHtcblx0XHRcdFx0aWYgKHJlbW92ZUZpbGVFbmRpbmcoZmlsZS5wYXRoKSA9PT0gcHJvY2Vzc2VkRmlsZU5hbWUpIHtcblx0XHRcdFx0XHRmaWxlcy5wdXNoKGZpbGUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoZ2V0RmlsZU5hbWUocmVtb3ZlRmlsZUVuZGluZyhmaWxlLm5hbWUpKSA9PT0gcHJvY2Vzc2VkRmlsZU5hbWUpIHtcblx0XHRcdFx0XHRmaWxlcy5wdXNoKGZpbGUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZpbGVzO1xuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdERhdGVQYXJzZXIuZGF0ZUZvcm1hdCA9IHRoaXMuc2V0dGluZ3MucHJlZmVycmVkRGF0ZUZvcm1hdDtcblx0XHRMb2dnZXIuZGV2TW9kZSA9IHRoaXMuc2V0dGluZ3MuZGV2TW9kZTtcblx0XHRJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIucGFyc2VUZW1wbGF0ZXModGhpcy5zZXR0aW5ncy5pbnB1dFRlbXBsYXRlcyk7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxufVxuIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgVGV4dEFyZWFDb21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBNZXRhQmluZFBsdWdpbiBmcm9tICcuLi9tYWluJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWV0YUJpbmRQbHVnaW5TZXR0aW5ncyB7XHJcblx0ZGV2TW9kZTogYm9vbGVhbjtcclxuXHRwcmVmZXJyZWREYXRlRm9ybWF0OiBzdHJpbmc7XHJcblx0dXNlVXNEYXRlSW5wdXRPcmRlcjogYm9vbGVhbjtcclxuXHRzeW5jSW50ZXJ2YWw6IG51bWJlcjtcclxuXHRtYXhTeW5jSW50ZXJ2YWw6IG51bWJlcjtcclxuXHRtaW5TeW5jSW50ZXJ2YWw6IG51bWJlcjtcclxuXHJcblx0aW5wdXRUZW1wbGF0ZXM6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE1ldGFCaW5kUGx1Z2luU2V0dGluZ3MgPSB7XHJcblx0ZGV2TW9kZTogZmFsc2UsXHJcblx0cHJlZmVycmVkRGF0ZUZvcm1hdDogJ1lZWVktTU0tREQnLFxyXG5cdHVzZVVzRGF0ZUlucHV0T3JkZXI6IGZhbHNlLFxyXG5cdHN5bmNJbnRlcnZhbDogMjAwLFxyXG5cdG1pblN5bmNJbnRlcnZhbDogNTAsXHJcblx0bWF4U3luY0ludGVydmFsOiAxMDAwLFxyXG5cclxuXHRpbnB1dFRlbXBsYXRlczogJycsXHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgTWV0YUJpbmRTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cGx1Z2luOiBNZXRhQmluZFBsdWdpbjtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTWV0YUJpbmRQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdNZXRhIEJpbmQgUGx1Z2luIFNldHRpbmdzJyB9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1N5bmMgaW50ZXJ2YWwnKVxyXG5cdFx0XHQuc2V0RGVzYyhcclxuXHRcdFx0XHRgVGhlIGludGVydmFsIGluIG1pbGxpLXNlY29uZHMgYmV0d2VlbiBkaXNrIHdyaXRlcy4gQ2hhbmdpbmcgdGhpcyBudW1iZXIgaXMgbm90IHJlY29tbWVuZGVkIGV4Y2VwdCBpZiB5b3VyIGhhcmQgZHJpdmUgaXMgZXhjZXB0aW9uYWxseSBzbG93LiBTdGFuZGFyZDogJHtERUZBVUxUX1NFVFRJTkdTLnN5bmNJbnRlcnZhbH07IE1pbmltdW06ICR7REVGQVVMVF9TRVRUSU5HUy5taW5TeW5jSW50ZXJ2YWx9OyBNYXhpbXVtOiAke0RFRkFVTFRfU0VUVElOR1MubWF4U3luY0ludGVydmFsfWBcclxuXHRcdFx0KVxyXG5cdFx0XHQuYWRkVGV4dChjYiA9PiB7XHJcblx0XHRcdFx0Y2Iuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc3luY0ludGVydmFsLnRvU3RyaW5nKCkpO1xyXG5cdFx0XHRcdGNiLm9uQ2hhbmdlKGRhdGEgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3luY0ludGVydmFsID0gTnVtYmVyLnBhcnNlSW50KGRhdGEpO1xyXG5cdFx0XHRcdFx0aWYgKE51bWJlci5pc05hTih0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeW5jSW50ZXJ2YWwpKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA9IERFRkFVTFRfU0VUVElOR1Muc3luY0ludGVydmFsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA8IERFRkFVTFRfU0VUVElOR1MubWluU3luY0ludGVydmFsKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA9IERFRkFVTFRfU0VUVElOR1MubWluU3luY0ludGVydmFsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA+IERFRkFVTFRfU0VUVElOR1MubWF4U3luY0ludGVydmFsKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA9IERFRkFVTFRfU0VUVElOR1MubWF4U3luY0ludGVydmFsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnRGF0ZSBmb3JtYXQnKVxyXG5cdFx0XHQuc2V0RGVzYyhcclxuXHRcdFx0XHRgVGhlIGRhdGUgZm9ybWF0IHRvIGJlIHVzZWQgYnkgdGhpcyBwbHVnaW4uIENoYW5naW5nIHRoaXMgc2V0dGluZyB3aWxsIGJyZWFrIHRoZSBwYXJzaW5nIG9mIGV4aXN0aW5nIGRhdGUgaW5wdXRzLiBIZXJlIGlzIGEgbGlzdCBvZiBhbGwgYXZhaWxhYmxlIGRhdGUgdG9rZXMgaHR0cHM6Ly9tb21lbnRqcy5jb20vZG9jcy8jL2Rpc3BsYXlpbmcvLmBcclxuXHRcdFx0KVxyXG5cdFx0XHQuYWRkVGV4dChjYiA9PiB7XHJcblx0XHRcdFx0Y2Iuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlZmVycmVkRGF0ZUZvcm1hdCk7XHJcblx0XHRcdFx0Y2Iub25DaGFuZ2UoZGF0YSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmZXJyZWREYXRlRm9ybWF0ID0gZGF0YTtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1VzZSBVUyBkYXRlIGlucHV0IGZpZWxkIG9yZGVyJylcclxuXHRcdFx0LnNldERlc2MoYFdoZW4gZW5hYmxlZCB0aGUgbW9udGggaW5wdXQgaXMgYmVmb3JlIHRoZSBkYXkgaW5wdXQuYClcclxuXHRcdFx0LmFkZFRvZ2dsZShjYiA9PiB7XHJcblx0XHRcdFx0Y2Iuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlVXNEYXRlSW5wdXRPcmRlcik7XHJcblx0XHRcdFx0Y2Iub25DaGFuZ2UoZGF0YSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VVc0RhdGVJbnB1dE9yZGVyID0gZGF0YTtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZSgnVGVtcGxhdGVzJykuc2V0RGVzYyhgWW91IGNhbiBzcGVjaWZ5IHRlbXBsYXRlcyBoZXJlLCBhbmQgYWNjZXNzIHRoZW0gdXNpbmcgXFxgVEVNUExBVEVfSU5QVVRbLi4uXVxcYCBpbiB5b3VyIG5vdGVzLmApO1xyXG5cclxuXHRcdGNvbnN0IHRhID0gbmV3IFRleHRBcmVhQ29tcG9uZW50KGNvbnRhaW5lckVsKTtcclxuXHRcdHRhLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmlucHV0VGVtcGxhdGVzKTtcclxuXHRcdHRhLnNldFBsYWNlaG9sZGVyKCd0ZW1wbGF0ZV9uYW1lIC0+IElOUFVUW2lucHV0X3R5cGUoYXJndW1lbnQodmFsdWUpKTpiaW5kX3RhcmdldF0nKTtcclxuXHRcdHRhLmlucHV0RWwuc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcblx0XHR0YS5pbnB1dEVsLnN0eWxlLmhlaWdodCA9ICcyMDBweCc7XHJcblx0XHR0YS5vbkNoYW5nZShkYXRhID0+IHtcclxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5wdXRUZW1wbGF0ZXMgPSBkYXRhO1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnRGV2IE1vZGUnKVxyXG5cdFx0XHQuc2V0RGVzYygnRW5hYmxlIGRldiBtb2RlLiBOb3QgcmVjb21tZW5kZWQgdW5sZXNzIHlvdSB3YW50IHRvIGRlYnVnIHRoaXMgcGx1Z2luLicpXHJcblx0XHRcdC5hZGRUb2dnbGUoY2IgPT4ge1xyXG5cdFx0XHRcdGNiLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRldk1vZGUpO1xyXG5cdFx0XHRcdGNiLm9uQ2hhbmdlKGRhdGEgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGV2TW9kZSA9IGRhdGE7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBNYXJrZG93blJlbmRlckNoaWxkLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBNZXRhQmluZFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnLi91dGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgQWJzdHJhY3RJbnB1dEZpZWxkIH0gZnJvbSAnLi9pbnB1dEZpZWxkcy9BYnN0cmFjdElucHV0RmllbGQnO1xuaW1wb3J0IHsgSW5wdXRGaWVsZEZhY3RvcnkgfSBmcm9tICcuL2lucHV0RmllbGRzL0lucHV0RmllbGRGYWN0b3J5JztcbmltcG9ydCB7IElucHV0RmllbGRBcmd1bWVudFR5cGUsIElucHV0RmllbGREZWNsYXJhdGlvbiwgSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyIH0gZnJvbSAnLi9wYXJzZXJzL0lucHV0RmllbGREZWNsYXJhdGlvblBhcnNlcic7XG5pbXBvcnQgeyBNZXRhQmluZEJpbmRUYXJnZXRFcnJvciwgTWV0YUJpbmRJbnRlcm5hbEVycm9yIH0gZnJvbSAnLi91dGlscy9VdGlscyc7XG5pbXBvcnQgeyBBYnN0cmFjdElucHV0RmllbGRBcmd1bWVudCB9IGZyb20gJy4vaW5wdXRGaWVsZEFyZ3VtZW50cy9BYnN0cmFjdElucHV0RmllbGRBcmd1bWVudCc7XG5pbXBvcnQgeyBDbGFzc0lucHV0RmllbGRBcmd1bWVudCB9IGZyb20gJy4vaW5wdXRGaWVsZEFyZ3VtZW50cy9DbGFzc0lucHV0RmllbGRBcmd1bWVudCc7XG5pbXBvcnQgeyBnZXRGcm9udG1hdHRlck9mVEZpbGUsIHVwZGF0ZU9ySW5zZXJ0RmllbGRJblRGaWxlIH0gZnJvbSAnQG9wZC1saWJzL29wZC1tZXRhZGF0YS1saWIvbGliL0FQSSc7XG5pbXBvcnQge3RyYXZlcnNlT2JqZWN0LCB2YWxpZGF0ZVBhdGggYXMgdmFsaWRhdGVPYmplY3RQYXRofSBmcm9tICdAb3BkLWxpYnMvb3BkLW1ldGFkYXRhLWxpYi9saWIvVXRpbHMnO1xuXG5leHBvcnQgZW51bSBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGUge1xuXHRJTkxJTkVfQ09ERV9CTE9DSyxcblx0Q09ERV9CTE9DSyxcbn1cblxuZXhwb3J0IGNsYXNzIElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkIGV4dGVuZHMgTWFya2Rvd25SZW5kZXJDaGlsZCB7XG5cdHBsdWdpbjogTWV0YUJpbmRQbHVnaW47XG5cdG1ldGFEYXRhOiBhbnk7XG5cdGZpbGVQYXRoOiBzdHJpbmc7XG5cdHVpZDogbnVtYmVyO1xuXHRpbnB1dEZpZWxkOiBBYnN0cmFjdElucHV0RmllbGQgfCB1bmRlZmluZWQ7XG5cdGVycm9yOiBzdHJpbmc7XG5cdHR5cGU6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZTtcblxuXHRmdWxsRGVjbGFyYXRpb246IHN0cmluZztcblx0aW5wdXRGaWVsZERlY2xhcmF0aW9uOiBJbnB1dEZpZWxkRGVjbGFyYXRpb24gfCB1bmRlZmluZWQ7XG5cdGJpbmRUYXJnZXRGaWxlOiBURmlsZSB8IHVuZGVmaW5lZDtcblx0YmluZFRhcmdldE1ldGFkYXRhRmllbGQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuXHRsaW1pdEludGVydmFsOiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cdGludGVydmFsQ291bnRlcjogbnVtYmVyO1xuXHRtZXRhZGF0YVZhbHVlVXBkYXRlUXVldWU6IGFueVtdO1xuXHRpbnB1dEZpZWxkVmFsdWVVcGRhdGVRdWV1ZTogYW55W107XG5cblx0Y29uc3RydWN0b3IoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCB0eXBlOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGUsIGZ1bGxEZWNsYXJhdGlvbjogc3RyaW5nLCBwbHVnaW46IE1ldGFCaW5kUGx1Z2luLCBmaWxlUGF0aDogc3RyaW5nLCB1aWQ6IG51bWJlcikge1xuXHRcdHN1cGVyKGNvbnRhaW5lckVsKTtcblxuXHRcdHRoaXMuZXJyb3IgPSAnJztcblx0XHR0aGlzLmZpbGVQYXRoID0gZmlsZVBhdGg7XG5cdFx0dGhpcy51aWQgPSB1aWQ7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdFx0dGhpcy50eXBlID0gdHlwZTtcblx0XHR0aGlzLmZ1bGxEZWNsYXJhdGlvbiA9IGZ1bGxEZWNsYXJhdGlvbjtcblxuXHRcdHRoaXMubWV0YWRhdGFWYWx1ZVVwZGF0ZVF1ZXVlID0gW107XG5cdFx0dGhpcy5pbnB1dEZpZWxkVmFsdWVVcGRhdGVRdWV1ZSA9IFtdO1xuXHRcdHRoaXMuaW50ZXJ2YWxDb3VudGVyID0gMDtcblxuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLmlucHV0RmllbGREZWNsYXJhdGlvbiA9IElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5wYXJzZShmdWxsRGVjbGFyYXRpb24pO1xuXG5cdFx0XHRpZiAodGhpcy5pbnB1dEZpZWxkRGVjbGFyYXRpb24uaXNCb3VuZCkge1xuXHRcdFx0XHR0aGlzLnBhcnNlQmluZFRhcmdldCgpO1xuXHRcdFx0XHR0aGlzLm1ldGFEYXRhID0gZ2V0RnJvbnRtYXR0ZXJPZlRGaWxlKHRoaXMuYmluZFRhcmdldEZpbGUgYXMgVEZpbGUsIHRoaXMucGx1Z2luKTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5pbnB1dEZpZWxkID0gSW5wdXRGaWVsZEZhY3RvcnkuY3JlYXRlSW5wdXRGaWVsZCh0aGlzLmlucHV0RmllbGREZWNsYXJhdGlvbi5pbnB1dEZpZWxkVHlwZSwge1xuXHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogdGhpcyxcblx0XHRcdFx0b25WYWx1ZUNoYW5nZWQ6IHRoaXMucHVzaFRvTWV0YWRhdGFWYWx1ZVVwZGF0ZVF1ZXVlLmJpbmQodGhpcyksXG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy5saW1pdEludGVydmFsID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHRoaXMuYXBwbHlWYWx1ZVVwZGF0ZVF1ZXVlcygpLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeW5jSW50ZXJ2YWwpO1xuXHRcdH0gY2F0Y2ggKGU6IGFueSkge1xuXHRcdFx0dGhpcy5lcnJvciA9IGUubWVzc2FnZTtcblx0XHRcdGNvbnNvbGUud2FybihlKTtcblx0XHR9XG5cdH1cblxuXHRwYXJzZUJpbmRUYXJnZXQoKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLmlucHV0RmllbGREZWNsYXJhdGlvbikge1xuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignaW5wdXRGaWVsZERlY2xhcmF0aW9uIGlzIHVuZGVmaW5lZCwgY2FuIG5vdCBwYXJzZSBiaW5kIHRhcmdldCcpO1xuXHRcdH1cblxuXHRcdGNvbnN0IGJpbmRUYXJnZXRQYXJ0cyA9IHRoaXMuaW5wdXRGaWVsZERlY2xhcmF0aW9uLmJpbmRUYXJnZXQuc3BsaXQoJyMnKTtcblx0XHRsZXQgYmluZFRhcmdldEZpbGVOYW1lO1xuXHRcdGxldCBiaW5kVGFyZ2V0TWV0YWRhdGFGaWVsZE5hbWU7XG5cblx0XHRpZiAoYmluZFRhcmdldFBhcnRzLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0Ly8gdGhlIGJpbmQgdGFyZ2V0IGlzIGluIHRoZSBzYW1lIGZpbGVcblx0XHRcdGJpbmRUYXJnZXRGaWxlTmFtZSA9IHRoaXMuZmlsZVBhdGg7XG5cdFx0XHRiaW5kVGFyZ2V0TWV0YWRhdGFGaWVsZE5hbWUgPSB0aGlzLmlucHV0RmllbGREZWNsYXJhdGlvbi5iaW5kVGFyZ2V0O1xuXHRcdH0gZWxzZSBpZiAoYmluZFRhcmdldFBhcnRzLmxlbmd0aCA9PT0gMikge1xuXHRcdFx0Ly8gdGhlIGJpbmQgdGFyZ2V0IGlzIGluIGFub3RoZXIgZmlsZVxuXHRcdFx0YmluZFRhcmdldEZpbGVOYW1lID0gYmluZFRhcmdldFBhcnRzWzBdO1xuXHRcdFx0YmluZFRhcmdldE1ldGFkYXRhRmllbGROYW1lID0gYmluZFRhcmdldFBhcnRzWzFdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRCaW5kVGFyZ2V0RXJyb3IoXCJiaW5kIHRhcmdldCBtYXkgb25seSBjb250YWluIG9uZSAnIycgdG8gc3BlY2lmeSB0aGUgbWV0YWRhdGEgZmllbGRcIik7XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdHZhbGlkYXRlT2JqZWN0UGF0aChiaW5kVGFyZ2V0TWV0YWRhdGFGaWVsZE5hbWUpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGlmIChlIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kQmluZFRhcmdldEVycm9yKGBiaW5kIHRhcmdldCBwYXJzaW5nIGVycm9yOiAke2U/Lm1lc3NhZ2V9YCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy5iaW5kVGFyZ2V0TWV0YWRhdGFGaWVsZCA9IGJpbmRUYXJnZXRNZXRhZGF0YUZpZWxkTmFtZTtcblxuXHRcdGNvbnN0IGZpbGVzOiBURmlsZVtdID0gdGhpcy5wbHVnaW4uZ2V0RmlsZXNCeU5hbWUoYmluZFRhcmdldEZpbGVOYW1lKTtcblx0XHRpZiAoZmlsZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRCaW5kVGFyZ2V0RXJyb3IoJ2JpbmQgdGFyZ2V0IGZpbGUgbm90IGZvdW5kJyk7XG5cdFx0fSBlbHNlIGlmIChmaWxlcy5sZW5ndGggPT09IDEpIHtcblx0XHRcdHRoaXMuYmluZFRhcmdldEZpbGUgPSBmaWxlc1swXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kQmluZFRhcmdldEVycm9yKCdiaW5kIHRhcmdldCByZXNvbHZlcyB0byBtdWx0aXBsZSBmaWxlcywgcGxlYXNlIGFsc28gc3BlY2lmeSB0aGUgZmlsZSBwYXRoJyk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gdXNlIHRoaXMgaW50ZXJ2YWwgdG8gcmVkdWNlIHdyaXRpbmcgb3BlcmF0aW9uc1xuXHRhc3luYyBhcHBseVZhbHVlVXBkYXRlUXVldWVzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICh0aGlzLm1ldGFkYXRhVmFsdWVVcGRhdGVRdWV1ZS5sZW5ndGggIT09IDApIHtcblx0XHRcdGF3YWl0IHRoaXMuYXBwbHlNZXRhZGF0YVZhbHVlVXBkYXRlUXVldWUoKTtcblx0XHRcdHRoaXMuY2xlYW5VcFVwZGF0ZVF1ZXVlcygpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLmlucHV0RmllbGRWYWx1ZVVwZGF0ZVF1ZXVlLmxlbmd0aCAhPT0gMCkge1xuXHRcdFx0YXdhaXQgdGhpcy5hcHBseUlucHV0RmllbGRWYWx1ZVVwZGF0ZVF1ZXVlKCk7XG5cdFx0XHR0aGlzLmNsZWFuVXBVcGRhdGVRdWV1ZXMoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBhcHBseU1ldGFkYXRhVmFsdWVVcGRhdGVRdWV1ZSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpZiAoIXRoaXMuaW5wdXRGaWVsZERlY2xhcmF0aW9uKSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdpbnB1dEZpZWxkRGVjbGFyYXRpb24gaXMgdW5kZWZpbmVkLCBjYW4gbm90IHVwZGF0ZSBtZXRhZGF0YScpO1xuXHRcdH1cblx0XHRpZiAoIXRoaXMuaW5wdXRGaWVsZERlY2xhcmF0aW9uLmlzQm91bmQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKCF0aGlzLmJpbmRUYXJnZXRNZXRhZGF0YUZpZWxkIHx8ICF0aGlzLmJpbmRUYXJnZXRGaWxlKSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdiaW5kVGFyZ2V0TWV0YWRhdGFGaWVsZCBvciBiaW5kVGFyZ2V0RmlsZSBpcyB1bmRlZmluZWQsIGNhbiBub3QgdXBkYXRlIG1ldGFkYXRhJyk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMubWV0YWRhdGFWYWx1ZVVwZGF0ZVF1ZXVlLmxlbmd0aCA+IDApIHtcblx0XHRcdGF3YWl0IHVwZGF0ZU9ySW5zZXJ0RmllbGRJblRGaWxlKHRoaXMuYmluZFRhcmdldE1ldGFkYXRhRmllbGQsIHRoaXMubWV0YWRhdGFWYWx1ZVVwZGF0ZVF1ZXVlLmF0KC0xKSwgdGhpcy5iaW5kVGFyZ2V0RmlsZSwgdGhpcy5wbHVnaW4pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKGBjYW5ub3QgYXBwbHkgbWV0YWRhdGFWYWx1ZVVwZGF0ZVF1ZXVlIHRvIGlucHV0RmllbGQgJHt0aGlzLnVpZH0sIG1ldGFkYXRhVmFsdWVVcGRhdGVRdWV1ZSBpcyBlbXB0eWApO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGFwcGx5SW5wdXRGaWVsZFZhbHVlVXBkYXRlUXVldWUoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCF0aGlzLmlucHV0RmllbGREZWNsYXJhdGlvbikge1xuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignaW5wdXRGaWVsZERlY2xhcmF0aW9uIGlzIHVuZGVmaW5lZCwgY2FuIG5vdCB1cGRhdGUgaW5wdXRGaWVsZCcpO1xuXHRcdH1cblx0XHRpZiAoIXRoaXMuaW5wdXRGaWVsZCkge1xuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignaW5wdXRGaWVsZCBpcyB1bmRlZmluZWQsIGNhbiBub3QgdXBkYXRlIGlucHV0RmllbGQnKTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5pbnB1dEZpZWxkVmFsdWVVcGRhdGVRdWV1ZS5sZW5ndGggPiAwKSB7XG5cdFx0XHRsZXQgdmFsdWUgPSB0aGlzLmlucHV0RmllbGRWYWx1ZVVwZGF0ZVF1ZXVlLmF0KC0xKTtcblxuXHRcdFx0aWYgKHZhbHVlID09IG51bGwpIHtcblx0XHRcdFx0dmFsdWUgPSB0aGlzLmlucHV0RmllbGQuZ2V0RGVmYXVsdFZhbHVlKCk7XG5cdFx0XHR9XG5cblx0XHRcdExvZ2dlci5sb2dEZWJ1ZyhgdXBkYXRpbmcgaW5wdXQgZmllbGQgJHt0aGlzLnVpZH0gdG9gLCB2YWx1ZSk7XG5cdFx0XHR0aGlzLmlucHV0RmllbGQuc2V0VmFsdWUodmFsdWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKGBjYW5ub3QgYXBwbHkgaW5wdXRGaWVsZFZhbHVlVXBkYXRlUXVldWUgdG8gaW5wdXRGaWVsZCAke3RoaXMudWlkfSwgaW5wdXRGaWVsZFZhbHVlVXBkYXRlUXVldWUgaXMgZW1wdHlgKTtcblx0XHR9XG5cdH1cblxuXHRjbGVhblVwVXBkYXRlUXVldWVzKCk6IHZvaWQge1xuXHRcdHRoaXMubWV0YWRhdGFWYWx1ZVVwZGF0ZVF1ZXVlID0gW107XG5cdFx0dGhpcy5pbnB1dEZpZWxkVmFsdWVVcGRhdGVRdWV1ZSA9IFtdO1xuXHR9XG5cblx0cHVzaFRvTWV0YWRhdGFWYWx1ZVVwZGF0ZVF1ZXVlKHZhbHVlOiBhbnkpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5pbnB1dEZpZWxkRGVjbGFyYXRpb24/LmlzQm91bmQpIHtcblx0XHRcdHRoaXMubWV0YWRhdGFWYWx1ZVVwZGF0ZVF1ZXVlLnB1c2godmFsdWUpO1xuXHRcdH1cblx0fVxuXG5cdHB1c2hUb0lucHV0RmllbGRWYWx1ZVVwZGF0ZVF1ZXVlKHZhbHVlOiBhbnkpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMuaW5wdXRGaWVsZD8uaXNFcXVhbFZhbHVlKHZhbHVlKSkge1xuXHRcdFx0dGhpcy5pbnB1dEZpZWxkVmFsdWVVcGRhdGVRdWV1ZS5wdXNoKHZhbHVlKTtcblx0XHR9XG5cdH1cblxuXHRnZXRJbml0aWFsVmFsdWUoKTogYW55IHwgdW5kZWZpbmVkIHtcblx0XHRpZiAodGhpcy5pbnB1dEZpZWxkRGVjbGFyYXRpb24/LmlzQm91bmQgJiYgdGhpcy5iaW5kVGFyZ2V0TWV0YWRhdGFGaWVsZCkge1xuXHRcdFx0cmV0dXJuIHRyYXZlcnNlT2JqZWN0KHRoaXMuYmluZFRhcmdldE1ldGFkYXRhRmllbGQsIHRoaXMubWV0YURhdGEpID8/IHRoaXMuaW5wdXRGaWVsZD8uZ2V0RGVmYXVsdFZhbHVlKCk7XG5cdFx0fVxuXHR9XG5cblx0Z2V0QXJndW1lbnRzKG5hbWU6IElucHV0RmllbGRBcmd1bWVudFR5cGUpOiBBYnN0cmFjdElucHV0RmllbGRBcmd1bWVudFtdIHtcblx0XHRpZiAoIXRoaXMuaW5wdXRGaWVsZERlY2xhcmF0aW9uKSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdpbnB1dEZpZWxkRGVjbGFyYXRpb24gaXMgdW5kZWZpbmVkLCBjYW4gbm90IHJldHJpZXZlIGFyZ3VtZW50cycpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmlucHV0RmllbGREZWNsYXJhdGlvbi5hcmd1bWVudENvbnRhaW5lci5hcmd1bWVudHMuZmlsdGVyKHggPT4geC5pZGVudGlmaWVyID09PSBuYW1lKTtcblx0fVxuXG5cdGdldEFyZ3VtZW50KG5hbWU6IElucHV0RmllbGRBcmd1bWVudFR5cGUpOiBBYnN0cmFjdElucHV0RmllbGRBcmd1bWVudCB8IHVuZGVmaW5lZCB7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0QXJndW1lbnRzKG5hbWUpLmF0KDApO1xuXHR9XG5cblx0YXN5bmMgb25sb2FkKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdExvZ2dlci5sb2dEZWJ1ZygnbG9hZCcsIHRoaXMpO1xuXG5cdFx0dGhpcy5tZXRhRGF0YSA9IGF3YWl0IHRoaXMubWV0YURhdGE7XG5cblx0XHRjb25zdCBjb250YWluZXI6IEhUTUxEaXZFbGVtZW50ID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoKTtcblx0XHRjb250YWluZXIuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4taW5wdXQtd3JhcHBlcicpO1xuXHRcdHRoaXMuY29udGFpbmVyRWwuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4taW5wdXQnKTtcblxuXHRcdGlmICh0aGlzLmVycm9yKSB7XG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLmVtcHR5KCk7XG5cdFx0XHRjb25zdCBvcmlnaW5hbFRleHQgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiB0aGlzLmZ1bGxEZWNsYXJhdGlvbiwgY2xzOiAnbWV0YS1iaW5kLWNvZGUnIH0pO1xuXHRcdFx0Y29udGFpbmVyLmlubmVyVGV4dCA9IGAgLT4gRVJST1I6ICR7dGhpcy5lcnJvcn1gO1xuXHRcdFx0Y29udGFpbmVyLmFkZENsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLWVycm9yJyk7XG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCF0aGlzLmlucHV0RmllbGQpIHtcblx0XHRcdHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcblx0XHRcdGNvbnN0IG9yaWdpbmFsVGV4dCA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IHRoaXMuZnVsbERlY2xhcmF0aW9uLCBjbHM6ICdtZXRhLWJpbmQtY29kZScgfSk7XG5cdFx0XHRjb250YWluZXIuaW5uZXJUZXh0ID0gYCAtPiBFUlJPUjogJHtuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdpbnB1dCBmaWVsZCBpcyB1bmRlZmluZWQgYW5kIGVycm9yIGlzIGVtcHR5JykubWVzc2FnZX1gO1xuXHRcdFx0Y29udGFpbmVyLmFkZENsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLWVycm9yJyk7XG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCh0aGlzKTtcblxuXHRcdHRoaXMuaW5wdXRGaWVsZC5yZW5kZXIoY29udGFpbmVyKTtcblxuXHRcdGNvbnN0IGNsYXNzQXJndW1lbnRzOiBDbGFzc0lucHV0RmllbGRBcmd1bWVudFtdID0gdGhpcy5nZXRBcmd1bWVudHMoSW5wdXRGaWVsZEFyZ3VtZW50VHlwZS5DTEFTUyk7XG5cdFx0aWYgKGNsYXNzQXJndW1lbnRzKSB7XG5cdFx0XHR0aGlzLmlucHV0RmllbGQuZ2V0SHRtbEVsZW1lbnQoKS5hZGRDbGFzc2VzKGNsYXNzQXJndW1lbnRzLm1hcCh4ID0+IHgudmFsdWUpLmZsYXQoKSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5jb250YWluZXJFbC5lbXB0eSgpO1xuXHRcdHRoaXMuY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblx0fVxuXG5cdG9udW5sb2FkKCk6IHZvaWQge1xuXHRcdExvZ2dlci5sb2dEZWJ1ZygndW5sb2FkJywgdGhpcyk7XG5cblx0XHR0aGlzLnBsdWdpbi51bnJlZ2lzdGVySW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQodGhpcyk7XG5cblx0XHRzdXBlci5vbnVubG9hZCgpO1xuXG5cdFx0Ly9jb25zb2xlLmxvZygndW5sb2FkJywgdGhpcyk7XG5cdFx0d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5saW1pdEludGVydmFsKTtcblx0fVxufVxuIiwgImV4cG9ydCBjbGFzcyBMb2dnZXIge1xuXHRzdGF0aWMgZGV2TW9kZTogYm9vbGVhbjtcblx0c3RhdGljIHByZWZpeDogc3RyaW5nID0gJ21ldGEtYmluZCB8JztcblxuXHQvKipcblx0ICogTG9ncyB0byB0aGUgY29uc29sZSB3aXRoIHRoZSBwbHVnaW4gcHJlZml4XG5cdCAqXG5cdCAqIEBwYXJhbSBkYXRhXG5cdCAqL1xuXHRzdGF0aWMgbG9nKC4uLmRhdGE6IGFueSk6IHZvaWQge1xuXHRcdGNvbnNvbGUubG9nKHRoaXMucHJlZml4LCAuLi5kYXRhKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBMb2dzIHRvIHRoZSBjb25zb2xlIHdpdGggdGhlIHBsdWdpbiBwcmVmaXgsIGlmIGRldiBtb2RlIGlzIHR1cm5lZCBvbiBpbiB0aGUgcGx1Z2luIHNldHRpbmdzXG5cdCAqXG5cdCAqIEBwYXJhbSBkYXRhXG5cdCAqL1xuXHRzdGF0aWMgbG9nRGVidWcoLi4uZGF0YTogYW55KTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuZGV2TW9kZSkge1xuXHRcdFx0TG9nZ2VyLmxvZyguLi5kYXRhKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogTG9ncyBhIHdhcm5pbmcgdG8gdGhlIGNvbnNvbGUgd2l0aCB0aGUgcGx1Z2luIHByZWZpeFxuXHQgKlxuXHQgKiBAcGFyYW0gZGF0YVxuXHQgKi9cblx0c3RhdGljIGxvZ1dhcm5pbmcoLi4uZGF0YTogYW55KTogdm9pZCB7XG5cdFx0Y29uc29sZS53YXJuKHRoaXMucHJlZml4LCBkYXRhKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBMb2dzIGEgd2FybmluZyB0byB0aGUgY29uc29sZSB3aXRob3V0IHRoZSBwbHVnaW4gcHJlZml4XG5cdCAqXG5cdCAqIEBwYXJhbSBkYXRhXG5cdCAqL1xuXHRzdGF0aWMgd2FybiguLi5kYXRhOiBhbnkpOiB2b2lkIHtcblx0XHRjb25zb2xlLndhcm4oZGF0YSk7XG5cdH1cblxuXHQvKipcblx0ICogTG9ncyBhbiBlcnJvciB0byB0aGUgY29uc29sZSB3aXRoIHRoZSBwbHVnaW4gcHJlZml4XG5cdCAqXG5cdCAqIEBwYXJhbSBkYXRhXG5cdCAqL1xuXHRzdGF0aWMgbG9nRXJyb3IoLi4uZGF0YTogYW55KTogdm9pZCB7XG5cdFx0Y29uc29sZS5lcnJvcih0aGlzLnByZWZpeCwgZGF0YSk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCB9IGZyb20gJy4uL0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkJztcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdElucHV0RmllbGQge1xyXG5cdHN0YXRpYyBhbGxvd0NvZGVCbG9jazogYm9vbGVhbiA9IHRydWU7XHJcblx0c3RhdGljIGFsbG93SW5saW5lQ29kZUJsb2NrOiBib29sZWFuID0gdHJ1ZTtcclxuXHRpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ7XHJcblx0b25WYWx1ZUNoYW5nZTogKHZhbHVlOiBhbnkpID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIG9uVmFsdWVDaGFuZ2U6ICh2YWx1ZTogYW55KSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPikge1xyXG5cdFx0dGhpcy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCA9IGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkO1xyXG5cdFx0dGhpcy5vblZhbHVlQ2hhbmdlID0gb25WYWx1ZUNoYW5nZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgdGhlIGN1cnJlbnQgY29udGVudCBvZiB0aGUgaW5wdXQgZmllbGRcclxuXHQgKi9cclxuXHRhYnN0cmFjdCBnZXRWYWx1ZSgpOiBhbnk7XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldHMgdGhlIHZhbHVlIG9uIHRoaXMgaW5wdXQgZmllbGQsIG92ZXJyaWRpbmcgdGhlIGN1cnJlbnQgY29udGVudFxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHZhbHVlXHJcblx0ICovXHJcblx0YWJzdHJhY3Qgc2V0VmFsdWUodmFsdWU6IGFueSk6IHZvaWQ7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrcyBpZiB0aGUgdmFsdWUgaXMgdGhlIHNhbWUgYXMgdGhlIHZhbHVlIG9mIHRoaXMgaW5wdXQgZmllbGRcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB2YWx1ZVxyXG5cdCAqL1xyXG5cdGFic3RyYWN0IGlzRXF1YWxWYWx1ZSh2YWx1ZTogYW55KTogYm9vbGVhbjtcclxuXHJcblx0LyoqXHJcblx0ICogUmV0dXJucyB0aGUgZGVmYXVsdCB2YWx1ZSBvZiB0aGlzIGlucHV0IGZpZWxkXHJcblx0ICovXHJcblx0YWJzdHJhY3QgZ2V0RGVmYXVsdFZhbHVlKCk6IGFueTtcclxuXHJcblx0LyoqXHJcblx0ICogUmV0dXJucyB0aGUgSFRNTCBlbGVtZW50IHRoaXMgaW5wdXQgZmllbGQgaXMgd3JhcHBlZCBpblxyXG5cdCAqL1xyXG5cdGFic3RyYWN0IGdldEh0bWxFbGVtZW50KCk6IEhUTUxFbGVtZW50O1xyXG5cclxuXHQvKipcclxuXHQgKiBSZW5kZXJzIHRoZSBpbnB1dCBmaWVsZCBhcyBhIGNoaWxkIG9mIHRoZSBjb250YWluZXJcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBjb250YWluZXJcclxuXHQgKi9cclxuXHRhYnN0cmFjdCByZW5kZXIoY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCk6IHZvaWQ7XHJcbn1cclxuIiwgImltcG9ydCB7IEFic3RyYWN0SW5wdXRGaWVsZCB9IGZyb20gJy4vQWJzdHJhY3RJbnB1dEZpZWxkJztcclxuaW1wb3J0IHsgVG9nZ2xlQ29tcG9uZW50IH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuLi91dGlscy9Mb2dnZXInO1xyXG5pbXBvcnQgeyBNZXRhQmluZEludGVybmFsRXJyb3IgfSBmcm9tICcuLi91dGlscy9VdGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgVG9nZ2xlSW5wdXRGaWVsZCBleHRlbmRzIEFic3RyYWN0SW5wdXRGaWVsZCB7XHJcblx0dG9nZ2xlQ29tcG9uZW50OiBUb2dnbGVDb21wb25lbnQgfCB1bmRlZmluZWQ7XHJcblxyXG5cdGdldFZhbHVlKCk6IGFueSB7XHJcblx0XHRpZiAoIXRoaXMudG9nZ2xlQ29tcG9uZW50KSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3RvZ2dsZSBpbnB1dCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gdGhpcy50b2dnbGVDb21wb25lbnQuZ2V0VmFsdWUoKTtcclxuXHR9XHJcblxyXG5cdHNldFZhbHVlKHZhbHVlOiBhbnkpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy50b2dnbGVDb21wb25lbnQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndG9nZ2xlIGlucHV0IGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT0gJ2Jvb2xlYW4nKSB7XHJcblx0XHRcdHRoaXMudG9nZ2xlQ29tcG9uZW50LnNldFZhbHVlKHZhbHVlKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdExvZ2dlci5sb2dXYXJuaW5nKGBjYW4gbm90IHNldCB2YWx1ZSBvZiB0b2dnbGUgdG8gXFwnJHt2YWx1ZX1cXCdgKTtcclxuXHRcdFx0dGhpcy50b2dnbGVDb21wb25lbnQuc2V0VmFsdWUoZmFsc2UpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aXNFcXVhbFZhbHVlKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmdldFZhbHVlKCkgPT0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHRnZXREZWZhdWx0VmFsdWUoKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRnZXRIdG1sRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcblx0XHRpZiAoIXRoaXMudG9nZ2xlQ29tcG9uZW50KSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3RvZ2dsZSBpbnB1dCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMudG9nZ2xlQ29tcG9uZW50LnRvZ2dsZUVsO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyKGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGNvbXBvbmVudCA9IG5ldyBUb2dnbGVDb21wb25lbnQoY29udGFpbmVyKTtcclxuXHRcdGNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEluaXRpYWxWYWx1ZSgpKTtcclxuXHRcdGNvbXBvbmVudC5vbkNoYW5nZSh0aGlzLm9uVmFsdWVDaGFuZ2UpO1xyXG5cdFx0dGhpcy50b2dnbGVDb21wb25lbnQgPSBjb21wb25lbnQ7XHJcblx0fVxyXG59XHJcbiIsICJleHBvcnQgY2xhc3MgTWV0YUJpbmRJbnRlcm5hbEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcpIHtcblx0XHRzdXBlcihgW01CX0lOVEVSTkFMX0VSUk9SIC0gcGxlYXNlIHJlcG9ydCB0aGlzIGVycm9yIGhlcmUgaHR0cHM6Ly9naXRodWIuY29tL21Qcm9qZWN0c0NvZGUvb2JzaWRpYW4tbWV0YS1iaW5kLXBsdWdpbi9pc3N1ZXNdICR7bWVzc2FnZX1gKTtcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgTWV0YUJpbmRQYXJzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG5cdGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZykge1xuXHRcdHN1cGVyKGBbTUJfUEFSU0lOR19FUlJPUl0gJHttZXNzYWdlfWApO1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBNZXRhQmluZEJpbmRUYXJnZXRFcnJvciBleHRlbmRzIEVycm9yIHtcblx0Y29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG5cdFx0c3VwZXIoYFtNQl9CSU5EX1RBUkdFVF9FUlJPUl0gJHttZXNzYWdlfWApO1xuXHR9XG59XG5cbi8qKlxuICogR2V0cyB0aGUgZmlsZSBuYW1lIGZyb20gYSBwYXRoXG4gKlxuICogQHBhcmFtIHBhdGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVOYW1lKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG5cdHJldHVybiBwYXRoLnNwbGl0KCcvJykuYXQoLTEpID8/IHBhdGg7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgcGF0aCBpcyBhIHBhdGggb3IgYSBmaWxlIG5hbWVcbiAqXG4gKiBAcGFyYW0gcGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQYXRoKHBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gcGF0aC5zcGxpdCgnLycpLmxlbmd0aCA+IDE7XG59XG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgZmlsZSBlbmRpbmcgb2YgYSBmaWxlIG5hbWVcbiAqXG4gKiBAcGFyYW0gZmlsZU5hbWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUZpbGVFbmRpbmcoZmlsZU5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG5cdGNvbnN0IGZpbGVOYW1lUGFydHMgPSBmaWxlTmFtZS5zcGxpdCgnLicpO1xuXHRpZiAoZmlsZU5hbWVQYXJ0cy5sZW5ndGggPT09IDEpIHtcblx0XHRyZXR1cm4gZmlsZU5hbWU7XG5cdH0gZWxzZSB7XG5cdFx0bGV0IG5ld0ZpbGVOYW1lID0gZmlsZU5hbWVQYXJ0c1swXTtcblx0XHRmb3IgKGxldCBpID0gMTsgaSA8IGZpbGVOYW1lUGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG5cdFx0XHRuZXdGaWxlTmFtZSArPSAnLicgKyBmaWxlTmFtZVBhcnRzW2ldO1xuXHRcdH1cblx0XHRyZXR1cm4gbmV3RmlsZU5hbWU7XG5cdH1cbn1cblxuLyoqXG4gKiBDbGFtcCwgdW51c2VkXG4gKlxuICogQHBhcmFtIG51bVxuICogQHBhcmFtIG1pblxuICogQHBhcmFtIG1heFxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAobnVtOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XG5cdHJldHVybiBNYXRoLm1pbihNYXRoLm1heChudW0sIG1pbiksIG1heCk7XG59XG5cbi8qKlxuICoganMgY2FuJ3QgZXZlbiBpbXBsZW1lbnQgbW9kdWxvIGNvcnJlY3RseS4uLlxuICpcbiAqIEBwYXJhbSBuXG4gKiBAcGFyYW0gbVxuICovXG5leHBvcnQgZnVuY3Rpb24gbW9kKG46IG51bWJlciwgbTogbnVtYmVyKTogbnVtYmVyIHtcblx0cmV0dXJuICgobiAlIG0pICsgbSkgJSBtO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiAyIGFycmF5cyBhcmUgZXF1YWwsIHRoZSBhcnJheXMgc2hvdWxkIGhhdmUgdGhlIHNhbWUgZGF0YXR5cGVcbiAqXG4gKiBAcGFyYW0gYXJyMVxuICogQHBhcmFtIGFycjJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFycmF5RXF1YWxzKGFycjE6IGFueVtdLCBhcnIyOiBhbnlbXSk6IGJvb2xlYW4ge1xuXHRpZiAoYXJyMS5sZW5ndGggIT09IGFycjIubGVuZ3RoKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Zm9yIChjb25zdCBhcnIxRWxlbWVudCBvZiBhcnIxKSB7XG5cdFx0aWYgKCFhcnIyLmNvbnRhaW5zKGFycjFFbGVtZW50KSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIFRlbXBsYXRlIFwiZW5naW5lXCIgZnJvbSBteSBtZWRpYSBkYiBwbHVnaW5cbiAqXG4gKiBAcGFyYW0gdGVtcGxhdGVcbiAqIEBwYXJhbSBkYXRhTW9kZWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VUYWdzKHRlbXBsYXRlOiBzdHJpbmcsIGRhdGFNb2RlbDogYW55KTogc3RyaW5nIHtcblx0Y29uc3QgcmVzb2x2ZWRUZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UobmV3IFJlZ0V4cCgne3suKj99fScsICdnJyksIChtYXRjaDogc3RyaW5nKSA9PiByZXBsYWNlVGFnKG1hdGNoLCBkYXRhTW9kZWwpKTtcblxuXHRyZXR1cm4gcmVzb2x2ZWRUZW1wbGF0ZTtcbn1cblxuLyoqXG4gKiBUYWtlcyBpbiBhIHRlbXBsYXRlIG1hdGNoIGFuZCByZXR1cm5zIHRoZSByZXBsYWNlbWVudCBkYXRhXG4gKlxuICogQHBhcmFtIG1hdGNoXG4gKiBAcGFyYW0gZGF0YU1vZGVsXG4gKi9cbmZ1bmN0aW9uIHJlcGxhY2VUYWcobWF0Y2g6IHN0cmluZywgZGF0YU1vZGVsOiBhbnkpOiBzdHJpbmcge1xuXHRsZXQgdGFnID0gbWF0Y2g7XG5cdHRhZyA9IHRhZy5zdWJzdHJpbmcoMik7XG5cdHRhZyA9IHRhZy5zdWJzdHJpbmcoMCwgdGFnLmxlbmd0aCAtIDIpO1xuXHR0YWcgPSB0YWcudHJpbSgpO1xuXG5cdGNvbnN0IHBhcnRzID0gdGFnLnNwbGl0KCc6Jyk7XG5cdGlmIChwYXJ0cy5sZW5ndGggPT09IDEpIHtcblx0XHRjb25zdCBwYXRoID0gcGFydHNbMF0uc3BsaXQoJy4nKTtcblxuXHRcdGNvbnN0IG9iaiA9IHRyYXZlcnNlT2JqZWN0KHBhdGgsIGRhdGFNb2RlbCk7XG5cblx0XHRpZiAob2JqID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiAne3sgSU5WQUxJRCBURU1QTEFURSBUQUcgLSBvYmplY3QgdW5kZWZpbmVkIH19Jztcblx0XHR9XG5cblx0XHRyZXR1cm4gb2JqO1xuXHR9IGVsc2UgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikge1xuXHRcdGNvbnN0IG9wZXJhdG9yID0gcGFydHNbMF07XG5cblx0XHRjb25zdCBwYXRoID0gcGFydHNbMV0uc3BsaXQoJy4nKTtcblxuXHRcdGNvbnN0IG9iaiA9IHRyYXZlcnNlT2JqZWN0KHBhdGgsIGRhdGFNb2RlbCk7XG5cblx0XHRpZiAob2JqID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiAne3sgSU5WQUxJRCBURU1QTEFURSBUQUcgLSBvYmplY3QgdW5kZWZpbmVkIH19Jztcblx0XHR9XG5cblx0XHRpZiAob3BlcmF0b3IgPT09ICdMSVNUJykge1xuXHRcdFx0aWYgKCFBcnJheS5pc0FycmF5KG9iaikpIHtcblx0XHRcdFx0cmV0dXJuICd7eyBJTlZBTElEIFRFTVBMQVRFIFRBRyAtIG9wZXJhdG9yIExJU1QgaXMgb25seSBhcHBsaWNhYmxlIG9uIGFuIGFycmF5IH19Jztcblx0XHRcdH1cblx0XHRcdHJldHVybiBvYmoubWFwKChlOiBhbnkpID0+IGAtICR7ZX1gKS5qb2luKCdcXG4nKTtcblx0XHR9IGVsc2UgaWYgKG9wZXJhdG9yID09PSAnRU5VTScpIHtcblx0XHRcdGlmICghQXJyYXkuaXNBcnJheShvYmopKSB7XG5cdFx0XHRcdHJldHVybiAne3sgSU5WQUxJRCBURU1QTEFURSBUQUcgLSBvcGVyYXRvciBFTlVNIGlzIG9ubHkgYXBwbGljYWJsZSBvbiBhbiBhcnJheSB9fSc7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gb2JqLmpvaW4oJywgJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGB7eyBJTlZBTElEIFRFTVBMQVRFIFRBRyAtIHVua25vd24gb3BlcmF0b3IgJHtvcGVyYXRvcn0gfX1gO1xuXHR9XG5cblx0cmV0dXJuICd7eyBJTlZBTElEIFRFTVBMQVRFIFRBRyB9fSc7XG59XG5cbi8qKlxuICogVHJhdmVyc2VzIHRoZSBvYmplY3QgYWxvbmcgYSBwcm9wZXJ0eSBwYXRoXG4gKlxuICogQHBhcmFtIHBhdGhcbiAqIEBwYXJhbSBvYmpcbiAqL1xuZnVuY3Rpb24gdHJhdmVyc2VPYmplY3QocGF0aDogQXJyYXk8c3RyaW5nPiwgb2JqOiBhbnkpOiBhbnkge1xuXHRmb3IgKGNvbnN0IHBhcnQgb2YgcGF0aCkge1xuXHRcdGlmIChvYmogIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0b2JqID0gb2JqW3BhcnRdO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBvYmo7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1RydXRoeSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG5cdHJldHVybiAhIXZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGYWxzeSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG5cdHJldHVybiAhdmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbE9ySW5jbHVkZXMoc3RyMTogc3RyaW5nLCBzdHIyOiBzdHJpbmcpOiBib29sZWFuIHtcblx0cmV0dXJuIHN0cjEgPT09IHN0cjIgfHwgc3RyMS5pbmNsdWRlcyhzdHIyKSB8fCBzdHIyLmluY2x1ZGVzKHN0cjEpO1xufVxuIiwgImltcG9ydCB7IEFic3RyYWN0SW5wdXRGaWVsZCB9IGZyb20gJy4vQWJzdHJhY3RJbnB1dEZpZWxkJztcclxuaW1wb3J0IHsgVGV4dENvbXBvbmVudCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvTG9nZ2VyJztcclxuaW1wb3J0IHsgTWV0YUJpbmRJbnRlcm5hbEVycm9yIH0gZnJvbSAnLi4vdXRpbHMvVXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRleHRJbnB1dEZpZWxkIGV4dGVuZHMgQWJzdHJhY3RJbnB1dEZpZWxkIHtcclxuXHR0ZXh0Q29tcG9uZW50OiBUZXh0Q29tcG9uZW50IHwgdW5kZWZpbmVkO1xyXG5cclxuXHRnZXRWYWx1ZSgpOiBhbnkge1xyXG5cdFx0aWYgKCF0aGlzLnRleHRDb21wb25lbnQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndGV4dCBpbnB1dCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMudGV4dENvbXBvbmVudC5nZXRWYWx1ZSgpO1xyXG5cdH1cclxuXHJcblx0c2V0VmFsdWUodmFsdWU6IGFueSk6IHZvaWQge1xyXG5cdFx0aWYgKCF0aGlzLnRleHRDb21wb25lbnQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndGV4dCBpbnB1dCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XHJcblx0XHRcdHRoaXMudGV4dENvbXBvbmVudC5zZXRWYWx1ZSh2YWx1ZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRMb2dnZXIubG9nV2FybmluZyhgY2FuIG5vdCBzZXQgdmFsdWUgb2YgdGV4dCBpbnB1dCB0byBcXCcke3ZhbHVlfVxcJ2ApO1xyXG5cdFx0XHR0aGlzLnRleHRDb21wb25lbnQuc2V0VmFsdWUoJycpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aXNFcXVhbFZhbHVlKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmdldFZhbHVlKCkgPT0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHRnZXREZWZhdWx0VmFsdWUoKTogYW55IHtcclxuXHRcdHJldHVybiAnJztcclxuXHR9XHJcblxyXG5cdGdldEh0bWxFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcclxuXHRcdGlmICghdGhpcy50ZXh0Q29tcG9uZW50KSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3RleHQgaW5wdXQgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLnRleHRDb21wb25lbnQuaW5wdXRFbDtcclxuXHR9XHJcblxyXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBjb21wb25lbnQgPSBuZXcgVGV4dENvbXBvbmVudChjb250YWluZXIpO1xyXG5cdFx0Y29tcG9uZW50LnNldFZhbHVlKHRoaXMuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0SW5pdGlhbFZhbHVlKCkpO1xyXG5cdFx0Y29tcG9uZW50Lm9uQ2hhbmdlKHRoaXMub25WYWx1ZUNoYW5nZSk7XHJcblx0XHR0aGlzLnRleHRDb21wb25lbnQgPSBjb21wb25lbnQ7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBBYnN0cmFjdElucHV0RmllbGQgfSBmcm9tICcuL0Fic3RyYWN0SW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7IFNsaWRlckNvbXBvbmVudCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvTG9nZ2VyJztcclxuaW1wb3J0IHsgSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQgfSBmcm9tICcuLi9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCc7XHJcbmltcG9ydCB7IE1ldGFCaW5kSW50ZXJuYWxFcnJvciB9IGZyb20gJy4uL3V0aWxzL1V0aWxzJztcclxuaW1wb3J0IHsgSW5wdXRGaWVsZEFyZ3VtZW50VHlwZSB9IGZyb20gJy4uL3BhcnNlcnMvSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTbGlkZXJJbnB1dEZpZWxkIGV4dGVuZHMgQWJzdHJhY3RJbnB1dEZpZWxkIHtcclxuXHRzbGlkZXJDb21wb25lbnQ6IFNsaWRlckNvbXBvbmVudCB8IHVuZGVmaW5lZDtcclxuXHRtaW5WYWx1ZTogbnVtYmVyO1xyXG5cdG1heFZhbHVlOiBudW1iZXI7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgb25WYWx1ZUNoYW5nZTogKHZhbHVlOiBhbnkpID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+KSB7XHJcblx0XHRzdXBlcihpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgb25WYWx1ZUNoYW5nZSk7XHJcblx0XHR0aGlzLm1pblZhbHVlID0gaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0QXJndW1lbnQoSW5wdXRGaWVsZEFyZ3VtZW50VHlwZS5NSU5fVkFMVUUpPy52YWx1ZSA/PyAwO1xyXG5cdFx0dGhpcy5tYXhWYWx1ZSA9IGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEFyZ3VtZW50KElucHV0RmllbGRBcmd1bWVudFR5cGUuTUFYX1ZBTFVFKT8udmFsdWUgPz8gMTAwO1xyXG5cdH1cclxuXHJcblx0Z2V0VmFsdWUoKTogYW55IHtcclxuXHRcdGlmICghdGhpcy5zbGlkZXJDb21wb25lbnQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignc2xpZGVyIGlucHV0IGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy5zbGlkZXJDb21wb25lbnQuZ2V0VmFsdWUoKTtcclxuXHR9XHJcblxyXG5cdHNldFZhbHVlKHZhbHVlOiBhbnkpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy5zbGlkZXJDb21wb25lbnQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignc2xpZGVyIGlucHV0IGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcclxuXHRcdFx0aWYgKHZhbHVlID49IHRoaXMubWluVmFsdWUgJiYgdmFsdWUgPD0gdGhpcy5tYXhWYWx1ZSkge1xyXG5cdFx0XHRcdHRoaXMuc2xpZGVyQ29tcG9uZW50LnNldFZhbHVlKHZhbHVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0TG9nZ2VyLmxvZ1dhcm5pbmcoYGNhbiBub3Qgc2V0IHZhbHVlIG9mIHNsaWRlciB0byBcXCcke3ZhbHVlfVxcJ2ApO1xyXG5cdFx0XHR0aGlzLnNsaWRlckNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmdldERlZmF1bHRWYWx1ZSgpKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlzRXF1YWxWYWx1ZSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdGhpcy5nZXRWYWx1ZSgpID09IHZhbHVlO1xyXG5cdH1cclxuXHJcblx0Z2V0RGVmYXVsdFZhbHVlKCk6IGFueSB7XHJcblx0XHRyZXR1cm4gdGhpcy5taW5WYWx1ZTtcclxuXHR9XHJcblxyXG5cdGdldEh0bWxFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcclxuXHRcdGlmICghdGhpcy5zbGlkZXJDb21wb25lbnQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignc2xpZGVyIGlucHV0IGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy5zbGlkZXJDb21wb25lbnQuc2xpZGVyRWw7XHJcblx0fVxyXG5cclxuXHRyZW5kZXIoY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCk6IHZvaWQge1xyXG5cdFx0Y29udGFpbmVyLnJlbW92ZUNsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLWlucHV0LXdyYXBwZXInKTtcclxuXHRcdGNvbnRhaW5lci5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1mbGV4LWlucHV0LXdyYXBwZXInKTtcclxuXHJcblx0XHRjb25zdCBsYWJlbEFyZ3VtZW50ID0gdGhpcy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZC5nZXRBcmd1bWVudChJbnB1dEZpZWxkQXJndW1lbnRUeXBlLkFERF9MQUJFTFMpO1xyXG5cdFx0aWYgKGxhYmVsQXJndW1lbnQgJiYgbGFiZWxBcmd1bWVudC52YWx1ZSA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRjb250YWluZXIuY3JlYXRlU3Bhbih7IHRleHQ6IHRoaXMubWluVmFsdWUudG9TdHJpbmcoKSwgY2xzOiAnbWV0YS1iaW5kLXBsdWdpbi1zbGlkZXItaW5wdXQtbGFiZWwnIH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGNvbXBvbmVudCA9IG5ldyBTbGlkZXJDb21wb25lbnQoY29udGFpbmVyKTtcclxuXHRcdGNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEluaXRpYWxWYWx1ZSgpKTtcclxuXHRcdGNvbXBvbmVudC5vbkNoYW5nZSh0aGlzLm9uVmFsdWVDaGFuZ2UpO1xyXG5cdFx0Y29tcG9uZW50LnNldER5bmFtaWNUb29sdGlwKCk7XHJcblx0XHRjb21wb25lbnQuc2V0TGltaXRzKHRoaXMubWluVmFsdWUsIHRoaXMubWF4VmFsdWUsIDEpO1xyXG5cdFx0Y29tcG9uZW50LnNsaWRlckVsLmFkZENsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLXNsaWRlci1pbnB1dCcpO1xyXG5cclxuXHRcdGlmIChsYWJlbEFyZ3VtZW50ICYmIGxhYmVsQXJndW1lbnQudmFsdWUgPT09IHRydWUpIHtcclxuXHRcdFx0Y29udGFpbmVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiB0aGlzLm1heFZhbHVlLnRvU3RyaW5nKCksIGNsczogJ21ldGEtYmluZC1wbHVnaW4tc2xpZGVyLWlucHV0LWxhYmVsJyB9KTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnNsaWRlckNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IGVxdWFsT3JJbmNsdWRlcywgaXNGYWxzeSwgTWV0YUJpbmRJbnRlcm5hbEVycm9yIH0gZnJvbSAnLi9VdGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgRW5jbG9zaW5nUGFpciB7XHJcblx0cmVhZG9ubHkgb3BlbmluZ0VxdWFsc0Nsb3Npbmc6IGJvb2xlYW47XHJcblx0cHJpdmF0ZSByZWFkb25seSBfb3BlbmluZ1N0cmluZzogc3RyaW5nO1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgX2Nsb3NpbmdTdHJpbmc6IHN0cmluZztcclxuXHJcblx0Y29uc3RydWN0b3Iob3BlbmluZ1N0cmluZzogc3RyaW5nLCBjbG9zaW5nU3RyaW5nPzogc3RyaW5nKSB7XHJcblx0XHRpZiAoaXNGYWxzeShvcGVuaW5nU3RyaW5nKSkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdvcGVuaW5nIHN0cmluZyBtdXN0IG5vdCBiZSBlbXB0eScpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMub3BlbmluZ0VxdWFsc0Nsb3NpbmcgPSBpc0ZhbHN5KGNsb3NpbmdTdHJpbmcpIHx8IG9wZW5pbmdTdHJpbmcgPT09IGNsb3NpbmdTdHJpbmc7XHJcblxyXG5cdFx0aWYgKHRoaXMub3BlbmluZ0VxdWFsc0Nsb3NpbmcpIHtcclxuXHRcdFx0dGhpcy5fb3BlbmluZ1N0cmluZyA9IG9wZW5pbmdTdHJpbmc7XHJcblx0XHRcdHRoaXMuX2Nsb3NpbmdTdHJpbmcgPSBvcGVuaW5nU3RyaW5nO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fb3BlbmluZ1N0cmluZyA9IG9wZW5pbmdTdHJpbmc7XHJcblx0XHRcdC8vIEB0cy1pZ25vcmUgdGhpcyBjYW4gbm90IGJlIHVuZGVmaW5lZCBoZXJlXHJcblx0XHRcdHRoaXMuX2Nsb3NpbmdTdHJpbmcgPSBjbG9zaW5nU3RyaW5nO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHVibGljIGdldCBvcGVuaW5nU3RyaW5nKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gdGhpcy5fb3BlbmluZ1N0cmluZztcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXQgY2xvc2luZ1N0cmluZygpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHRoaXMub3BlbmluZ0VxdWFsc0Nsb3NpbmcgPyB0aGlzLl9vcGVuaW5nU3RyaW5nIDogdGhpcy5fY2xvc2luZ1N0cmluZztcclxuXHR9XHJcblxyXG5cdG92ZXJsYXBzKG90aGVyOiBFbmNsb3NpbmdQYWlyKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gKFxyXG5cdFx0XHRlcXVhbE9ySW5jbHVkZXModGhpcy5vcGVuaW5nU3RyaW5nLCBvdGhlci5vcGVuaW5nU3RyaW5nKSB8fFxyXG5cdFx0XHRlcXVhbE9ySW5jbHVkZXModGhpcy5vcGVuaW5nU3RyaW5nLCBvdGhlci5jbG9zaW5nU3RyaW5nKSB8fFxyXG5cdFx0XHRlcXVhbE9ySW5jbHVkZXModGhpcy5jbG9zaW5nU3RyaW5nLCBvdGhlci5vcGVuaW5nU3RyaW5nKSB8fFxyXG5cdFx0XHRlcXVhbE9ySW5jbHVkZXModGhpcy5jbG9zaW5nU3RyaW5nLCBvdGhlci5jbG9zaW5nU3RyaW5nKVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdGVxdWFscyhvdGhlcjogRW5jbG9zaW5nUGFpcik6IGJvb2xlYW4ge1xyXG5cdFx0aWYgKGlzRmFsc3kob3RoZXIpKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdHJldHVybiB0aGlzLm9wZW5pbmdTdHJpbmcgPT09IG90aGVyLm9wZW5pbmdTdHJpbmcgJiYgdGhpcy5jbG9zaW5nU3RyaW5nID09PSBvdGhlci5jbG9zaW5nU3RyaW5nO1xyXG5cdH1cclxuXHJcblx0dG9TdHJpbmcoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQYXJzZXJVdGlscyB7XHJcblx0Ly8gVE9ETzogcmVuYW1lIHN0dWZmXHJcblx0c3RhdGljIHNwbGl0KHN0cjogc3RyaW5nLCBzZXBhcmF0b3I6IHN0cmluZywgaWdub3JlPzogRW5jbG9zaW5nUGFpcik6IHN0cmluZ1tdIHtcclxuXHRcdGlmICghc3RyKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3N0cmluZyBtdXN0IG5vdCBiZSBlbXB0eScpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCFzZXBhcmF0b3IpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignc2VwYXJhdG9yIG11c3Qgbm90IGJlIGVtcHR5Jyk7XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IHN1YlN0cjogc3RyaW5nID0gJyc7XHJcblx0XHRjb25zdCBzdWJTdHJpbmdzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuXHRcdGlmIChpZ25vcmUpIHtcclxuXHRcdFx0bGV0IHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCA9IFBhcnNlclV0aWxzLm51bWJlck9mT2NjdXJyZW5jZXMoc3RyLCBpZ25vcmUub3BlbmluZ1N0cmluZyk7XHJcblx0XHRcdGxldCByZW1haW5pbmdDbG9zaW5nU3RyaW5nQ291bnQgPSBQYXJzZXJVdGlscy5udW1iZXJPZk9jY3VycmVuY2VzKHN0ciwgaWdub3JlLmNsb3NpbmdTdHJpbmcpO1xyXG5cclxuXHRcdFx0bGV0IGVuY2xvc2luZ0xldmVsOiBudW1iZXIgPSAwO1xyXG5cclxuXHRcdFx0c3RyTG9vcDogZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHQvLyBpZ25vcmUgc3BlY2lmaWVkXHJcblx0XHRcdFx0aWYgKGVuY2xvc2luZ0xldmVsID09PSAwICYmIFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBzZXBhcmF0b3IsIGkpKSB7XHJcblx0XHRcdFx0XHRzdWJTdHJpbmdzLnB1c2goc3ViU3RyKTtcclxuXHRcdFx0XHRcdHN1YlN0ciA9ICcnO1xyXG5cdFx0XHRcdFx0aSArPSBzZXBhcmF0b3IubGVuZ3RoIC0gMTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmIChpZ25vcmUub3BlbmluZ0VxdWFsc0Nsb3NpbmcpIHtcclxuXHRcdFx0XHRcdGlmIChQYXJzZXJVdGlscy5pc1N0cmluZ0F0KHN0ciwgaWdub3JlLm9wZW5pbmdTdHJpbmcsIGkpKSB7XHJcblx0XHRcdFx0XHRcdGlmIChlbmNsb3NpbmdMZXZlbCAlIDIgPT09IDAgJiYgcmVtYWluaW5nT3BlbmluZ1N0cmluZ0NvdW50ID09PSAxKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gbm90IGluIGEgcGFydCB0aGF0IHNob3VsZCBiZSByZW1vdmVkIGFuZCB0aGVyZSBpcyBzdGlsbCBhbiBvcGVuaW5nIHN0cmluZyBsZWZ0LCBzbyB3ZSBpZ25vcmUgaXRcclxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChlbmNsb3NpbmdMZXZlbCAlIDIgPT09IDApIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBvcGVuaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRcdGVuY2xvc2luZ0xldmVsICs9IDE7XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIGNvcHkgdGhlIG9wZW5pbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdFx0Zm9yIChsZXQgaiA9IDE7IGogPCBpZ25vcmUub3BlbmluZ1N0cmluZy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdFx0XHRcdFx0aSArPSAxO1xyXG5cdFx0XHRcdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoaSA+PSBzdHIubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrIHN0ckxvb3A7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdC8vIGNsb3Npbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdFx0ZW5jbG9zaW5nTGV2ZWwgLT0gMTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly8gY29weSB0aGUgY2xvc2luZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0XHRmb3IgKGxldCBqID0gMTsgaiA8IGlnbm9yZS5jbG9zaW5nU3RyaW5nLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyAob3BlbmluZyBhbmQgY2xvc2luZyBzdHJpbmcgYXJlIHRoZSBzYW1lKVxyXG5cdFx0XHRcdFx0XHRcdFx0aSArPSAxO1xyXG5cdFx0XHRcdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoaSA+PSBzdHIubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrIHN0ckxvb3A7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCAtPSAxO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRpZiAoUGFyc2VyVXRpbHMuaXNTdHJpbmdBdChzdHIsIGlnbm9yZS5vcGVuaW5nU3RyaW5nLCBpKSkge1xyXG5cdFx0XHRcdFx0XHQvLyBvcGVuaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRpZiAocmVtYWluaW5nT3BlbmluZ1N0cmluZ0NvdW50IDw9IHJlbWFpbmluZ0Nsb3NpbmdTdHJpbmdDb3VudCkge1xyXG5cdFx0XHRcdFx0XHRcdC8vIHN0ciBzdGlsbCBoYXMgc3VmZmljaWVudCBjbG9zaW5nIHN0cmluZyB0byBmaW5kIHRoaXMgYSBwYXJ0bmVyXHJcblx0XHRcdFx0XHRcdFx0ZW5jbG9zaW5nTGV2ZWwgKz0gMTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly8gY29weSB0aGUgb3BlbmluZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0XHRmb3IgKGxldCBqID0gMTsgaiA8IGlnbm9yZS5vcGVuaW5nU3RyaW5nLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRpICs9IDE7XHJcblx0XHRcdFx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdGlmIChpID49IHN0ci5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWsgc3RyTG9vcDtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0cmVtYWluaW5nT3BlbmluZ1N0cmluZ0NvdW50IC09IDE7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBpZ25vcmUuY2xvc2luZ1N0cmluZywgaSkpIHtcclxuXHRcdFx0XHRcdFx0Ly8gY2xvc2luZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0aWYgKGVuY2xvc2luZ0xldmVsID4gMCkge1xyXG5cdFx0XHRcdFx0XHRcdC8vIHRoZXJlIHdhcyBhbiBvcGVuaW5nIHN0cmluZyBiZWZvcmUgdGhpc1xyXG5cdFx0XHRcdFx0XHRcdGVuY2xvc2luZ0xldmVsIC09IDE7XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIGNvcHkgdGhlIGNsb3Npbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdFx0Zm9yIChsZXQgaiA9IDE7IGogPCBpZ25vcmUuY2xvc2luZ1N0cmluZy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdFx0XHRcdFx0aSArPSAxO1xyXG5cdFx0XHRcdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoaSA+PSBzdHIubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrIHN0ckxvb3A7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHJlbWFpbmluZ0Nsb3NpbmdTdHJpbmdDb3VudCAtPSAxO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gbm8gaWdub3JlIHNwZWNpZmllZFxyXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGlmIChQYXJzZXJVdGlscy5pc1N0cmluZ0F0KHN0ciwgc2VwYXJhdG9yLCBpKSkge1xyXG5cdFx0XHRcdFx0c3ViU3RyaW5ncy5wdXNoKHN1YlN0cik7XHJcblx0XHRcdFx0XHRzdWJTdHIgPSAnJztcclxuXHRcdFx0XHRcdGkgKz0gc2VwYXJhdG9yLmxlbmd0aCAtIDE7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0c3ViU3RyaW5ncy5wdXNoKHN1YlN0cik7XHJcblxyXG5cdFx0cmV0dXJuIHN1YlN0cmluZ3M7XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgcmVtb3ZlSW5CZXR3ZWVuKHN0cjogc3RyaW5nLCBlbmNsb3NpbmdQYWlyOiBFbmNsb3NpbmdQYWlyKTogc3RyaW5nIHtcclxuXHRcdGlmICghc3RyKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3N0cmluZyBtdXN0IG5vdCBiZSBlbXB0eScpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxldCByZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgPSBQYXJzZXJVdGlscy5udW1iZXJPZk9jY3VycmVuY2VzKHN0ciwgZW5jbG9zaW5nUGFpci5vcGVuaW5nU3RyaW5nKTtcclxuXHRcdGxldCByZW1haW5pbmdDbG9zaW5nU3RyaW5nQ291bnQgPSBQYXJzZXJVdGlscy5udW1iZXJPZk9jY3VycmVuY2VzKHN0ciwgZW5jbG9zaW5nUGFpci5jbG9zaW5nU3RyaW5nKTtcclxuXHJcblx0XHRsZXQgZW5jbG9zaW5nTGV2ZWw6IG51bWJlciA9IDA7XHJcblxyXG5cdFx0bGV0IHN1YlN0cjogc3RyaW5nID0gJyc7XHJcblxyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0aWYgKGVuY2xvc2luZ1BhaXIub3BlbmluZ0VxdWFsc0Nsb3NpbmcpIHtcclxuXHRcdFx0XHRpZiAoUGFyc2VyVXRpbHMuaXNTdHJpbmdBdChzdHIsIGVuY2xvc2luZ1BhaXIub3BlbmluZ1N0cmluZywgaSkpIHtcclxuXHRcdFx0XHRcdGlmIChlbmNsb3NpbmdMZXZlbCAlIDIgPT09IDAgJiYgcmVtYWluaW5nT3BlbmluZ1N0cmluZ0NvdW50ID09PSAxKSB7XHJcblx0XHRcdFx0XHRcdC8vIG5vdCBpbiBhIHBhcnQgdGhhdCBzaG91bGQgYmUgcmVtb3ZlZCBhbmQgdGhlcmUgaXMgc3RpbGwgYW4gb3BlbmluZyBzdHJpbmcgbGVmdCwgc28gd2UgaWdub3JlIGl0XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGVuY2xvc2luZ0xldmVsICUgMiA9PT0gMCkge1xyXG5cdFx0XHRcdFx0XHQvLyBvcGVuaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRlbmNsb3NpbmdMZXZlbCArPSAxO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gc2tpcCB0aGUgb3BlbmluZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0aSArPSBlbmNsb3NpbmdQYWlyLm9wZW5pbmdTdHJpbmcubGVuZ3RoO1xyXG5cdFx0XHRcdFx0XHRpZiAoaSA+PSBzdHIubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdC8vIGNsb3Npbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdGVuY2xvc2luZ0xldmVsIC09IDE7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBza2lwIHRoZSBjbG9zaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRpICs9IGVuY2xvc2luZ1BhaXIuY2xvc2luZ1N0cmluZy5sZW5ndGg7IC8vIChvcGVuaW5nIGFuZCBjbG9zaW5nIHN0cmluZyBhcmUgdGhlIHNhbWUpXHJcblx0XHRcdFx0XHRcdGlmIChpID49IHN0ci5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmVtYWluaW5nT3BlbmluZ1N0cmluZ0NvdW50IC09IDE7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGlmIChQYXJzZXJVdGlscy5pc1N0cmluZ0F0KHN0ciwgZW5jbG9zaW5nUGFpci5vcGVuaW5nU3RyaW5nLCBpKSkge1xyXG5cdFx0XHRcdFx0Ly8gb3BlbmluZyBzdHJpbmdcclxuXHRcdFx0XHRcdGlmIChyZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgPD0gcmVtYWluaW5nQ2xvc2luZ1N0cmluZ0NvdW50KSB7XHJcblx0XHRcdFx0XHRcdC8vIHN0ciBzdGlsbCBoYXMgc3VmZmljaWVudCBjbG9zaW5nIHN0cmluZyB0byBmaW5kIHRoaXMgYSBwYXJ0bmVyXHJcblx0XHRcdFx0XHRcdGVuY2xvc2luZ0xldmVsICs9IDE7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBza2lwIHRoZSBvcGVuaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRpICs9IGVuY2xvc2luZ1BhaXIub3BlbmluZ1N0cmluZy5sZW5ndGg7XHJcblx0XHRcdFx0XHRcdGlmIChpID49IHN0ci5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmVtYWluaW5nT3BlbmluZ1N0cmluZ0NvdW50IC09IDE7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChQYXJzZXJVdGlscy5pc1N0cmluZ0F0KHN0ciwgZW5jbG9zaW5nUGFpci5jbG9zaW5nU3RyaW5nLCBpKSkge1xyXG5cdFx0XHRcdFx0Ly8gY2xvc2luZyBzdHJpbmdcclxuXHRcdFx0XHRcdGlmIChlbmNsb3NpbmdMZXZlbCA+IDApIHtcclxuXHRcdFx0XHRcdFx0Ly8gdGhlcmUgd2FzIGFuIG9wZW5pbmcgc3RyaW5nIGJlZm9yZSB0aGlzXHJcblx0XHRcdFx0XHRcdGVuY2xvc2luZ0xldmVsIC09IDE7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBza2lwIHRoZSBjbG9zaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRpICs9IGVuY2xvc2luZ1BhaXIuY2xvc2luZ1N0cmluZy5sZW5ndGg7XHJcblx0XHRcdFx0XHRcdGlmIChpID49IHN0ci5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmVtYWluaW5nQ2xvc2luZ1N0cmluZ0NvdW50IC09IDE7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoZW5jbG9zaW5nTGV2ZWwgPT09IDApIHtcclxuXHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHN1YlN0cjtcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBnZXRJbkJldHdlZW4oc3RyOiBzdHJpbmcsIGVuY2xvc2luZ1BhaXI6IEVuY2xvc2luZ1BhaXIpOiBzdHJpbmcgfCBzdHJpbmdbXSB7XHJcblx0XHRpZiAoIXN0cikge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdzdHJpbmcgbXVzdCBub3QgYmUgZW1wdHknKTtcclxuXHRcdH1cclxuXHJcblx0XHRsZXQgcmVtYWluaW5nT3BlbmluZ1N0cmluZ0NvdW50ID0gUGFyc2VyVXRpbHMubnVtYmVyT2ZPY2N1cnJlbmNlcyhzdHIsIGVuY2xvc2luZ1BhaXIub3BlbmluZ1N0cmluZyk7XHJcblx0XHRsZXQgcmVtYWluaW5nQ2xvc2luZ1N0cmluZ0NvdW50ID0gUGFyc2VyVXRpbHMubnVtYmVyT2ZPY2N1cnJlbmNlcyhzdHIsIGVuY2xvc2luZ1BhaXIuY2xvc2luZ1N0cmluZyk7XHJcblxyXG5cdFx0bGV0IGVuY2xvc2luZ0xldmVsOiBudW1iZXIgPSAwO1xyXG5cclxuXHRcdGxldCBzdWJTdHI6IHN0cmluZyA9ICcnO1xyXG5cdFx0Y29uc3Qgc3ViU3RyaW5nczogc3RyaW5nW10gPSBbXTtcclxuXHJcblx0XHRzdHJMb29wOiBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRpZiAoZW5jbG9zaW5nUGFpci5vcGVuaW5nRXF1YWxzQ2xvc2luZykge1xyXG5cdFx0XHRcdGlmIChQYXJzZXJVdGlscy5pc1N0cmluZ0F0KHN0ciwgZW5jbG9zaW5nUGFpci5vcGVuaW5nU3RyaW5nLCBpKSkge1xyXG5cdFx0XHRcdFx0aWYgKGVuY2xvc2luZ0xldmVsICUgMiA9PT0gMCAmJiByZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgPT09IDEpIHtcclxuXHRcdFx0XHRcdFx0Ly8gbm90IGluIGEgcGFydCB0aGF0IHNob3VsZCBiZSByZW1vdmVkIGFuZCB0aGVyZSBpcyBzdGlsbCBhbiBvcGVuaW5nIHN0cmluZyBsZWZ0LCBzbyB3ZSBpZ25vcmUgaXRcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoZW5jbG9zaW5nTGV2ZWwgJSAyID09PSAwKSB7XHJcblx0XHRcdFx0XHRcdC8vIG9wZW5pbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdGVuY2xvc2luZ0xldmVsICs9IDE7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBza2lwIHRoZSBvcGVuaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xyXG5cdFx0XHRcdFx0XHRmb3IgKGxldCBqID0gMTsgaiA8IGVuY2xvc2luZ1BhaXIub3BlbmluZ1N0cmluZy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdFx0XHRcdGkgKz0gMTtcclxuXHRcdFx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRpZiAoaSA+PSBzdHIubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRicmVhayBzdHJMb29wO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0Ly8gY2xvc2luZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0ZW5jbG9zaW5nTGV2ZWwgLT0gMTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIHNraXAgdGhlIGNsb3Npbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblx0XHRcdFx0XHRcdGZvciAobGV0IGogPSAxOyBqIDwgZW5jbG9zaW5nUGFpci5jbG9zaW5nU3RyaW5nLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gKG9wZW5pbmcgYW5kIGNsb3Npbmcgc3RyaW5nIGFyZSB0aGUgc2FtZSlcclxuXHRcdFx0XHRcdFx0XHRpICs9IDE7XHJcblx0XHRcdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcclxuXHJcblx0XHRcdFx0XHRcdFx0aWYgKGkgPiBzdHIubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRicmVhayBzdHJMb29wO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRzdWJTdHJpbmdzLnB1c2goc3ViU3RyKTtcclxuXHRcdFx0XHRcdFx0c3ViU3RyID0gJyc7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgLT0gMTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0aWYgKGVuY2xvc2luZ0xldmVsID49IDEpIHtcclxuXHRcdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBlbmNsb3NpbmdQYWlyLm9wZW5pbmdTdHJpbmcsIGkpKSB7XHJcblx0XHRcdFx0XHQvLyBvcGVuaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0aWYgKHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCA8PSByZW1haW5pbmdDbG9zaW5nU3RyaW5nQ291bnQpIHtcclxuXHRcdFx0XHRcdFx0Ly8gc3RyIHN0aWxsIGhhcyBzdWZmaWNpZW50IGNsb3Npbmcgc3RyaW5nIHRvIGZpbmQgdGhpcyBhIHBhcnRuZXJcclxuXHRcdFx0XHRcdFx0ZW5jbG9zaW5nTGV2ZWwgKz0gMTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIGNvcHkgdGhlIG9wZW5pbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblx0XHRcdFx0XHRcdGZvciAobGV0IGogPSAxOyBqIDwgZW5jbG9zaW5nUGFpci5vcGVuaW5nU3RyaW5nLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRcdFx0aSArPSAxO1xyXG5cdFx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmIChpID49IHN0ci5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrIHN0ckxvb3A7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgLT0gMTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBlbmNsb3NpbmdQYWlyLmNsb3NpbmdTdHJpbmcsIGkpKSB7XHJcblx0XHRcdFx0XHQvLyBjbG9zaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0aWYgKGVuY2xvc2luZ0xldmVsID4gMCkge1xyXG5cdFx0XHRcdFx0XHQvLyB0aGVyZSB3YXMgYW4gb3BlbmluZyBzdHJpbmcgYmVmb3JlIHRoaXNcclxuXHRcdFx0XHRcdFx0ZW5jbG9zaW5nTGV2ZWwgLT0gMTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIGNvcHkgdGhlIGNsb3Npbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblx0XHRcdFx0XHRcdGZvciAobGV0IGogPSAxOyBqIDwgZW5jbG9zaW5nUGFpci5jbG9zaW5nU3RyaW5nLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRcdFx0aSArPSAxO1xyXG5cdFx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmIChpID4gc3RyLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0YnJlYWsgc3RyTG9vcDtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdGlmIChlbmNsb3NpbmdMZXZlbCA9PT0gMCkge1xyXG5cdFx0XHRcdFx0XHRcdHN1YlN0cmluZ3MucHVzaChzdWJTdHIpO1xyXG5cdFx0XHRcdFx0XHRcdHN1YlN0ciA9ICcnO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZW1haW5pbmdDbG9zaW5nU3RyaW5nQ291bnQgLT0gMTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0aWYgKGVuY2xvc2luZ0xldmVsID49IDEpIHtcclxuXHRcdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoc3ViU3RyaW5ncy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0cmV0dXJuICcnO1xyXG5cdFx0fSBlbHNlIGlmIChzdWJTdHJpbmdzLmxlbmd0aCA9PT0gMSkge1xyXG5cdFx0XHRyZXR1cm4gc3ViU3RyaW5nc1swXS5zdWJzdHJpbmcoZW5jbG9zaW5nUGFpci5vcGVuaW5nU3RyaW5nLmxlbmd0aCwgc3ViU3RyaW5nc1swXS5sZW5ndGggLSBlbmNsb3NpbmdQYWlyLmNsb3NpbmdTdHJpbmcubGVuZ3RoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJldHVybiBzdWJTdHJpbmdzLm1hcCh4ID0+IHguc3Vic3RyaW5nKGVuY2xvc2luZ1BhaXIub3BlbmluZ1N0cmluZy5sZW5ndGgsIHgubGVuZ3RoIC0gZW5jbG9zaW5nUGFpci5jbG9zaW5nU3RyaW5nLmxlbmd0aCkpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c3RhdGljIGlzU3RyaW5nQXQoc3RyOiBzdHJpbmcsIHN1YlN0cjogc3RyaW5nLCBpbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XHJcblx0XHRpZiAoaW5kZXggPCAwKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ2luZGV4IG11c3QgYmUgZ3JlYXRlciB0aGFuIDAnKTtcclxuXHRcdH1cclxuXHRcdGlmIChpbmRleCA+PSBzdHIubGVuZ3RoKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ2luZGV4IG91dCBvZiBib3VuZHMgb2Ygc3RyaW5nJyk7XHJcblx0XHR9XHJcblx0XHRpZiAoIXN0cikge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdzdHJpbmcgbXVzdCBub3QgYmUgZW1wdHknKTtcclxuXHRcdH1cclxuXHRcdGlmICghc3ViU3RyKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3N1YiBzdHJpbmcgbXVzdCBub3QgYmUgZW1wdHknKTtcclxuXHRcdH1cclxuXHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHN1YlN0ci5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRpZiAoc3RyW2kgKyBpbmRleF0gIT09IHN1YlN0cltpXSkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGNvbnRhaW5zKHN0cjogc3RyaW5nLCBzdWJTdHI6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIFBhcnNlclV0aWxzLm51bWJlck9mT2NjdXJyZW5jZXMoc3RyLCBzdWJTdHIpID4gMDtcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBudW1iZXJPZk9jY3VycmVuY2VzKHN0cjogc3RyaW5nLCBzdWJTdHI6IHN0cmluZyk6IG51bWJlciB7XHJcblx0XHRpZiAoIXN0cikge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdzdHJpbmcgbXVzdCBub3QgYmUgZW1wdHknKTtcclxuXHRcdH1cclxuXHRcdGlmICghc3ViU3RyKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3N1YiBzdHJpbmcgbXVzdCBub3QgYmUgZW1wdHknKTtcclxuXHRcdH1cclxuXHJcblx0XHRsZXQgb2NjdXJyZW5jZXMgPSAwO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0aWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBzdWJTdHIsIGkpKSB7XHJcblx0XHRcdFx0b2NjdXJyZW5jZXMgKz0gMTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBvY2N1cnJlbmNlcztcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IElucHV0RmllbGRBcmd1bWVudFR5cGUsIElucHV0RmllbGRUeXBlIH0gZnJvbSAnLi4vcGFyc2Vycy9JbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXInO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0SW5wdXRGaWVsZEFyZ3VtZW50IHtcclxuXHRpZGVudGlmaWVyOiBJbnB1dEZpZWxkQXJndW1lbnRUeXBlID0gSW5wdXRGaWVsZEFyZ3VtZW50VHlwZS5JTlZBTElEO1xyXG5cdGFsbG93ZWRJbnB1dEZpZWxkczogSW5wdXRGaWVsZFR5cGVbXSA9IFtdO1xyXG5cdHZhbHVlOiBhbnk7XHJcblx0cmVxdWlyZXNWYWx1ZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdGFsbG93TXVsdGlwbGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcblx0YWJzdHJhY3QgcGFyc2VWYWx1ZSh2YWx1ZVN0cjogc3RyaW5nKTogdm9pZDtcclxuXHJcblx0aXNBbGxvd2VkKGlucHV0RmllbGRUeXBlOiBJbnB1dEZpZWxkVHlwZSk6IGJvb2xlYW4ge1xyXG5cdFx0aWYgKHRoaXMuYWxsb3dlZElucHV0RmllbGRzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy5hbGxvd2VkSW5wdXRGaWVsZHMuY29udGFpbnMoaW5wdXRGaWVsZFR5cGUpO1xyXG5cdH1cclxuXHJcblx0Z2V0QWxsb3dlZElucHV0RmllbGRzQXNTdHJpbmcoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5hbGxvd2VkSW5wdXRGaWVsZHMubGVuZ3RoID09PSAwID8gJ2FsbCcgOiB0aGlzLmFsbG93ZWRJbnB1dEZpZWxkcy5qb2luKCcsICcpO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQWJzdHJhY3RJbnB1dEZpZWxkQXJndW1lbnQgfSBmcm9tICcuL0Fic3RyYWN0SW5wdXRGaWVsZEFyZ3VtZW50JztcclxuaW1wb3J0IHsgSW5wdXRGaWVsZEFyZ3VtZW50VHlwZSwgSW5wdXRGaWVsZFR5cGUgfSBmcm9tICcuLi9wYXJzZXJzL0lucHV0RmllbGREZWNsYXJhdGlvblBhcnNlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2xhc3NJbnB1dEZpZWxkQXJndW1lbnQgZXh0ZW5kcyBBYnN0cmFjdElucHV0RmllbGRBcmd1bWVudCB7XHJcblx0aWRlbnRpZmllcjogSW5wdXRGaWVsZEFyZ3VtZW50VHlwZSA9IElucHV0RmllbGRBcmd1bWVudFR5cGUuQ0xBU1M7XHJcblx0YWxsb3dlZElucHV0RmllbGRzOiBJbnB1dEZpZWxkVHlwZVtdID0gW107XHJcblx0dmFsdWU6IHN0cmluZ1tdID0gW107XHJcblx0cmVxdWlyZXNWYWx1ZTogYm9vbGVhbiA9IHRydWU7XHJcblx0YWxsb3dNdWx0aXBsZTogYm9vbGVhbiA9IHRydWU7XHJcblxyXG5cdHBhcnNlVmFsdWUodmFsdWVTdHI6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0dGhpcy52YWx1ZSA9IHZhbHVlU3RyLnNwbGl0KCcgJyk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBBYnN0cmFjdElucHV0RmllbGRBcmd1bWVudCB9IGZyb20gJy4vQWJzdHJhY3RJbnB1dEZpZWxkQXJndW1lbnQnO1xyXG5pbXBvcnQgeyBJbnB1dEZpZWxkQXJndW1lbnRUeXBlLCBJbnB1dEZpZWxkVHlwZSB9IGZyb20gJy4uL3BhcnNlcnMvSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBBZGRMYWJlbHNJbnB1dEZpZWxkQXJndW1lbnQgZXh0ZW5kcyBBYnN0cmFjdElucHV0RmllbGRBcmd1bWVudCB7XHJcblx0aWRlbnRpZmllcjogSW5wdXRGaWVsZEFyZ3VtZW50VHlwZSA9IElucHV0RmllbGRBcmd1bWVudFR5cGUuQUREX0xBQkVMUztcclxuXHRhbGxvd2VkSW5wdXRGaWVsZHM6IElucHV0RmllbGRUeXBlW10gPSBbSW5wdXRGaWVsZFR5cGUuU0xJREVSXTtcclxuXHR2YWx1ZTogYm9vbGVhbiA9IHRydWU7XHJcblx0cmVxdWlyZXNWYWx1ZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdGFsbG93TXVsdGlwbGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcblx0cGFyc2VWYWx1ZSh2YWx1ZVN0cjogc3RyaW5nKTogdm9pZCB7XHJcblx0XHR0aGlzLnZhbHVlID0gdmFsdWVTdHIudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQWJzdHJhY3RJbnB1dEZpZWxkQXJndW1lbnQgfSBmcm9tICcuL0Fic3RyYWN0SW5wdXRGaWVsZEFyZ3VtZW50JztcclxuaW1wb3J0IHsgSW5wdXRGaWVsZEFyZ3VtZW50VHlwZSwgSW5wdXRGaWVsZFR5cGUgfSBmcm9tICcuLi9wYXJzZXJzL0lucHV0RmllbGREZWNsYXJhdGlvblBhcnNlcic7XHJcbmltcG9ydCB7IE1ldGFCaW5kUGFyc2luZ0Vycm9yIH0gZnJvbSAnLi4vdXRpbHMvVXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1pblZhbHVlSW5wdXRGaWVsZEFyZ3VtZW50IGV4dGVuZHMgQWJzdHJhY3RJbnB1dEZpZWxkQXJndW1lbnQge1xyXG5cdGlkZW50aWZpZXI6IElucHV0RmllbGRBcmd1bWVudFR5cGUgPSBJbnB1dEZpZWxkQXJndW1lbnRUeXBlLk1JTl9WQUxVRTtcclxuXHRhbGxvd2VkSW5wdXRGaWVsZHM6IElucHV0RmllbGRUeXBlW10gPSBbSW5wdXRGaWVsZFR5cGUuU0xJREVSXTtcclxuXHR2YWx1ZTogbnVtYmVyID0gMDtcclxuXHRyZXF1aXJlc1ZhbHVlOiBib29sZWFuID0gdHJ1ZTtcclxuXHRhbGxvd011bHRpcGxlOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG5cdHBhcnNlVmFsdWUodmFsdWVTdHI6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0dGhpcy52YWx1ZSA9IE51bWJlci5wYXJzZUludCh2YWx1ZVN0cik7XHJcblx0XHRpZiAoTnVtYmVyLmlzTmFOKHRoaXMudmFsdWUpKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcihcInZhbHVlIG9mIGFyZ3VtZW50ICdtaW5WYWx1ZScgbXVzdCBiZSBvZiB0eXBlIG51bWJlclwiKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IEFic3RyYWN0SW5wdXRGaWVsZEFyZ3VtZW50IH0gZnJvbSAnLi9BYnN0cmFjdElucHV0RmllbGRBcmd1bWVudCc7XHJcbmltcG9ydCB7IElucHV0RmllbGRBcmd1bWVudFR5cGUsIElucHV0RmllbGRUeXBlIH0gZnJvbSAnLi4vcGFyc2Vycy9JbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXInO1xyXG5pbXBvcnQgeyBNZXRhQmluZFBhcnNpbmdFcnJvciB9IGZyb20gJy4uL3V0aWxzL1V0aWxzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBNYXhWYWx1ZUlucHV0RmllbGRBcmd1bWVudCBleHRlbmRzIEFic3RyYWN0SW5wdXRGaWVsZEFyZ3VtZW50IHtcclxuXHRpZGVudGlmaWVyOiBJbnB1dEZpZWxkQXJndW1lbnRUeXBlID0gSW5wdXRGaWVsZEFyZ3VtZW50VHlwZS5NQVhfVkFMVUU7XHJcblx0YWxsb3dlZElucHV0RmllbGRzOiBJbnB1dEZpZWxkVHlwZVtdID0gW0lucHV0RmllbGRUeXBlLlNMSURFUl07XHJcblx0dmFsdWU6IG51bWJlciA9IDEwMDtcclxuXHRyZXF1aXJlc1ZhbHVlOiBib29sZWFuID0gdHJ1ZTtcclxuXHRhbGxvd011bHRpcGxlOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG5cdHBhcnNlVmFsdWUodmFsdWVTdHI6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0dGhpcy52YWx1ZSA9IE51bWJlci5wYXJzZUludCh2YWx1ZVN0cik7XHJcblx0XHRpZiAoTnVtYmVyLmlzTmFOKHRoaXMudmFsdWUpKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcihcInZhbHVlIG9mIGFyZ3VtZW50ICdtYXhWYWx1ZScgbXVzdCBiZSBvZiB0eXBlIG51bWJlclwiKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IEFic3RyYWN0SW5wdXRGaWVsZEFyZ3VtZW50IH0gZnJvbSAnLi9BYnN0cmFjdElucHV0RmllbGRBcmd1bWVudCc7XHJcbmltcG9ydCB7IElucHV0RmllbGRBcmd1bWVudFR5cGUsIElucHV0RmllbGRUeXBlIH0gZnJvbSAnLi4vcGFyc2Vycy9JbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXInO1xyXG5pbXBvcnQgeyBNZXRhQmluZFBhcnNpbmdFcnJvciB9IGZyb20gJy4uL3V0aWxzL1V0aWxzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBPcHRpb25JbnB1dEZpZWxkQXJndW1lbnQgZXh0ZW5kcyBBYnN0cmFjdElucHV0RmllbGRBcmd1bWVudCB7XHJcblx0aWRlbnRpZmllcjogSW5wdXRGaWVsZEFyZ3VtZW50VHlwZSA9IElucHV0RmllbGRBcmd1bWVudFR5cGUuT1BUSU9OO1xyXG5cdGFsbG93ZWRJbnB1dEZpZWxkczogSW5wdXRGaWVsZFR5cGVbXSA9IFtJbnB1dEZpZWxkVHlwZS5TRUxFQ1QsIElucHV0RmllbGRUeXBlLk1VTFRJX1NFTEVDVF07XHJcblx0dmFsdWU6IHN0cmluZyA9ICcnO1xyXG5cdHJlcXVpcmVzVmFsdWU6IGJvb2xlYW4gPSB0cnVlO1xyXG5cdGFsbG93TXVsdGlwbGU6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuXHRwYXJzZVZhbHVlKHZhbHVlU3RyOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdHRoaXMudmFsdWUgPSB2YWx1ZVN0cjtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IEFic3RyYWN0SW5wdXRGaWVsZEFyZ3VtZW50IH0gZnJvbSAnLi9BYnN0cmFjdElucHV0RmllbGRBcmd1bWVudCc7XHJcbmltcG9ydCB7IElucHV0RmllbGRBcmd1bWVudFR5cGUsIElucHV0RmllbGRUeXBlIH0gZnJvbSAnLi4vcGFyc2Vycy9JbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXInO1xyXG5pbXBvcnQgeyBNZXRhQmluZFBhcnNpbmdFcnJvciB9IGZyb20gJy4uL3V0aWxzL1V0aWxzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUaXRsZUlucHV0RmllbGRBcmd1bWVudCBleHRlbmRzIEFic3RyYWN0SW5wdXRGaWVsZEFyZ3VtZW50IHtcclxuXHRpZGVudGlmaWVyOiBJbnB1dEZpZWxkQXJndW1lbnRUeXBlID0gSW5wdXRGaWVsZEFyZ3VtZW50VHlwZS5USVRMRTtcclxuXHRhbGxvd2VkSW5wdXRGaWVsZHM6IElucHV0RmllbGRUeXBlW10gPSBbSW5wdXRGaWVsZFR5cGUuU0VMRUNULCBJbnB1dEZpZWxkVHlwZS5NVUxUSV9TRUxFQ1RdO1xyXG5cdHZhbHVlOiBzdHJpbmcgPSAnJztcclxuXHRyZXF1aXJlc1ZhbHVlOiBib29sZWFuID0gdHJ1ZTtcclxuXHRhbGxvd011bHRpcGxlOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG5cdHBhcnNlVmFsdWUodmFsdWVTdHI6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0dGhpcy52YWx1ZSA9IHZhbHVlU3RyO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQWJzdHJhY3RJbnB1dEZpZWxkQXJndW1lbnQgfSBmcm9tICcuL0Fic3RyYWN0SW5wdXRGaWVsZEFyZ3VtZW50JztcclxuaW1wb3J0IHsgSW5wdXRGaWVsZEFyZ3VtZW50VHlwZSwgSW5wdXRGaWVsZFR5cGUgfSBmcm9tICcuLi9wYXJzZXJzL0lucHV0RmllbGREZWNsYXJhdGlvblBhcnNlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgQWxpZ25SaWdodElucHV0RmllbGRBcmd1bWVudCBleHRlbmRzIEFic3RyYWN0SW5wdXRGaWVsZEFyZ3VtZW50IHtcclxuXHRpZGVudGlmaWVyOiBJbnB1dEZpZWxkQXJndW1lbnRUeXBlID0gSW5wdXRGaWVsZEFyZ3VtZW50VHlwZS5BTElHTl9SSUdIVDtcclxuXHRhbGxvd2VkSW5wdXRGaWVsZHM6IElucHV0RmllbGRUeXBlW10gPSBbSW5wdXRGaWVsZFR5cGUuREFURV9QSUNLRVJdO1xyXG5cdHZhbHVlOiBib29sZWFuID0gdHJ1ZTtcclxuXHRyZXF1aXJlc1ZhbHVlOiBib29sZWFuID0gZmFsc2U7XHJcblx0YWxsb3dNdWx0aXBsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuXHRwYXJzZVZhbHVlKHZhbHVlU3RyOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdHRoaXMudmFsdWUgPSB2YWx1ZVN0ci50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSc7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBDbGFzc0lucHV0RmllbGRBcmd1bWVudCB9IGZyb20gJy4vQ2xhc3NJbnB1dEZpZWxkQXJndW1lbnQnO1xyXG5pbXBvcnQgeyBNZXRhQmluZFBhcnNpbmdFcnJvciB9IGZyb20gJy4uL3V0aWxzL1V0aWxzJztcclxuaW1wb3J0IHsgSW5wdXRGaWVsZEFyZ3VtZW50VHlwZSB9IGZyb20gJy4uL3BhcnNlcnMvSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyJztcclxuaW1wb3J0IHsgQWRkTGFiZWxzSW5wdXRGaWVsZEFyZ3VtZW50IH0gZnJvbSAnLi9BZGRMYWJlbHNJbnB1dEZpZWxkQXJndW1lbnQnO1xyXG5pbXBvcnQgeyBNaW5WYWx1ZUlucHV0RmllbGRBcmd1bWVudCB9IGZyb20gJy4vTWluVmFsdWVJbnB1dEZpZWxkQXJndW1lbnQnO1xyXG5pbXBvcnQgeyBNYXhWYWx1ZUlucHV0RmllbGRBcmd1bWVudCB9IGZyb20gJy4vTWF4VmFsdWVJbnB1dEZpZWxkQXJndW1lbnQnO1xyXG5pbXBvcnQgeyBPcHRpb25JbnB1dEZpZWxkQXJndW1lbnQgfSBmcm9tICcuL09wdGlvbklucHV0RmllbGRBcmd1bWVudCc7XHJcbmltcG9ydCB7IFRpdGxlSW5wdXRGaWVsZEFyZ3VtZW50IH0gZnJvbSAnLi9UaXRsZUlucHV0RmllbGRBcmd1bWVudCc7XHJcbmltcG9ydCB7IEFsaWduUmlnaHRJbnB1dEZpZWxkQXJndW1lbnQgfSBmcm9tICcuL0FsaWduUmlnaHRJbnB1dEZpZWxkQXJndW1lbnQnO1xyXG5cclxuZXhwb3J0IGNsYXNzIElucHV0RmllbGRBcmd1bWVudEZhY3Rvcnkge1xyXG5cdHN0YXRpYyBjcmVhdGVJbnB1dEZpZWxkQXJndW1lbnQoYXJndW1lbnRJZGVudGlmaWVyOiBzdHJpbmcpIHtcclxuXHRcdGlmIChhcmd1bWVudElkZW50aWZpZXIgPT09IElucHV0RmllbGRBcmd1bWVudFR5cGUuQ0xBU1MpIHtcclxuXHRcdFx0cmV0dXJuIG5ldyBDbGFzc0lucHV0RmllbGRBcmd1bWVudCgpO1xyXG5cdFx0fSBlbHNlIGlmIChhcmd1bWVudElkZW50aWZpZXIgPT09IElucHV0RmllbGRBcmd1bWVudFR5cGUuQUREX0xBQkVMUykge1xyXG5cdFx0XHRyZXR1cm4gbmV3IEFkZExhYmVsc0lucHV0RmllbGRBcmd1bWVudCgpO1xyXG5cdFx0fSBlbHNlIGlmIChhcmd1bWVudElkZW50aWZpZXIgPT09IElucHV0RmllbGRBcmd1bWVudFR5cGUuTUlOX1ZBTFVFKSB7XHJcblx0XHRcdHJldHVybiBuZXcgTWluVmFsdWVJbnB1dEZpZWxkQXJndW1lbnQoKTtcclxuXHRcdH0gZWxzZSBpZiAoYXJndW1lbnRJZGVudGlmaWVyID09PSBJbnB1dEZpZWxkQXJndW1lbnRUeXBlLk1BWF9WQUxVRSkge1xyXG5cdFx0XHRyZXR1cm4gbmV3IE1heFZhbHVlSW5wdXRGaWVsZEFyZ3VtZW50KCk7XHJcblx0XHR9IGVsc2UgaWYgKGFyZ3VtZW50SWRlbnRpZmllciA9PT0gSW5wdXRGaWVsZEFyZ3VtZW50VHlwZS5PUFRJT04pIHtcclxuXHRcdFx0cmV0dXJuIG5ldyBPcHRpb25JbnB1dEZpZWxkQXJndW1lbnQoKTtcclxuXHRcdH0gZWxzZSBpZiAoYXJndW1lbnRJZGVudGlmaWVyID09PSBJbnB1dEZpZWxkQXJndW1lbnRUeXBlLlRJVExFKSB7XHJcblx0XHRcdHJldHVybiBuZXcgVGl0bGVJbnB1dEZpZWxkQXJndW1lbnQoKTtcclxuXHRcdH0gZWxzZSBpZiAoYXJndW1lbnRJZGVudGlmaWVyID09PSBJbnB1dEZpZWxkQXJndW1lbnRUeXBlLkFMSUdOX1JJR0hUKSB7XHJcblx0XHRcdHJldHVybiBuZXcgQWxpZ25SaWdodElucHV0RmllbGRBcmd1bWVudCgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kUGFyc2luZ0Vycm9yKGB1bmtub3duIGFyZ3VtZW50IFxcJyR7YXJndW1lbnRJZGVudGlmaWVyfVxcJ2ApO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQWJzdHJhY3RJbnB1dEZpZWxkQXJndW1lbnQgfSBmcm9tICcuL0Fic3RyYWN0SW5wdXRGaWVsZEFyZ3VtZW50JztcclxuaW1wb3J0IHsgSW5wdXRGaWVsZEFyZ3VtZW50VHlwZSB9IGZyb20gJy4uL3BhcnNlcnMvSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyJztcclxuaW1wb3J0IHsgTWV0YUJpbmRQYXJzaW5nRXJyb3IgfSBmcm9tICcuLi91dGlscy9VdGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgSW5wdXRGaWVsZEFyZ3VtZW50Q29udGFpbmVyIHtcclxuXHRhcmd1bWVudHM6IEFic3RyYWN0SW5wdXRGaWVsZEFyZ3VtZW50W10gPSBbXTtcclxuXHJcblx0YWRkKGFyZ3VtZW50OiBBYnN0cmFjdElucHV0RmllbGRBcmd1bWVudCk6IHZvaWQge1xyXG5cdFx0dGhpcy5hcmd1bWVudHMucHVzaChhcmd1bWVudCk7XHJcblx0fVxyXG5cclxuXHR2YWxpZGF0ZSgpOiB2b2lkIHtcclxuXHRcdGxldCBtYXA6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcclxuXHRcdGZvciAoY29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50VHlwZSBvZiBPYmplY3QudmFsdWVzKElucHV0RmllbGRBcmd1bWVudFR5cGUpKSB7XHJcblx0XHRcdG1hcFtpbnB1dEZpZWxkQXJndW1lbnRUeXBlXSA9IDA7XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yIChjb25zdCBhcmd1bWVudCBvZiB0aGlzLmFyZ3VtZW50cykge1xyXG5cdFx0XHRtYXBbYXJndW1lbnQuaWRlbnRpZmllcl0gKz0gMTtcclxuXHRcdFx0aWYgKG1hcFthcmd1bWVudC5pZGVudGlmaWVyXSA+IDEgJiYgIWFyZ3VtZW50LmFsbG93TXVsdGlwbGUpIHtcclxuXHRcdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRQYXJzaW5nRXJyb3IoYGFyZ3VtZW50IFxcJyR7YXJndW1lbnQuaWRlbnRpZmllcn1cXCcgZG9lcyBub3QgYWxsb3cgZHVwbGljYXRlc2ApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBNZXJnZXMgdHdvIElucHV0RmllbGRBcmd1bWVudENvbnRhaW5lcnMgYnkgb3ZlcnJpZGluZy5cclxuXHQgKiBUaGUgYXJndW1lbnRzIGZvcm0gdGhlIG90aGVyIGNvbnRhaW5lciB0YWtlIHByaW9yaXR5LlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIG90aGVyXHJcblx0ICovXHJcblx0bWVyZ2VCeU92ZXJyaWRlKG90aGVyOiBJbnB1dEZpZWxkQXJndW1lbnRDb250YWluZXIpOiBJbnB1dEZpZWxkQXJndW1lbnRDb250YWluZXIge1xyXG5cdFx0Zm9yIChjb25zdCBhcmd1bWVudCBvZiBvdGhlci5hcmd1bWVudHMpIHtcclxuXHRcdFx0aWYgKCFhcmd1bWVudC5hbGxvd011bHRpcGxlKSB7XHJcblx0XHRcdFx0dGhpcy5hcmd1bWVudHMgPSB0aGlzLmFyZ3VtZW50cy5maWx0ZXIoeCA9PiB4LmlkZW50aWZpZXIgIT09IGFyZ3VtZW50LmlkZW50aWZpZXIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuYXJndW1lbnRzLnB1c2goYXJndW1lbnQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHNob3VsZCBub3QgYmUgbmVjZXNzYXJ5IGJ1dCBpdCBpcyBiZXR0ZXIgdG8gY2hlY2tcclxuXHRcdHRoaXMudmFsaWRhdGUoKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE1lcmdlcyB0d28gSW5wdXRGaWVsZEFyZ3VtZW50Q29udGFpbmVycy5cclxuXHQgKiBJZiB0aGVyZSBpcyBhbiBhcmd1bWVudCB0aGF0IGRvZXMgbm90IGFsbG93IGR1cGxpY2F0ZXMgaW4gYm90aCBjb250YWluZXJzIHRoaXMgd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBvdGhlclxyXG5cdCAqL1xyXG5cdG1lcmdlQnlUaHJvdyhvdGhlcjogSW5wdXRGaWVsZEFyZ3VtZW50Q29udGFpbmVyKTogSW5wdXRGaWVsZEFyZ3VtZW50Q29udGFpbmVyIHtcclxuXHRcdGZvciAoY29uc3QgYXJndW1lbnQgb2Ygb3RoZXIuYXJndW1lbnRzKSB7XHJcblx0XHRcdGlmICghYXJndW1lbnQuYWxsb3dNdWx0aXBsZSkge1xyXG5cdFx0XHRcdGlmICh0aGlzLmFyZ3VtZW50cy5maWx0ZXIoeCA9PiB4LmlkZW50aWZpZXIgPT09IGFyZ3VtZW50LmlkZW50aWZpZXIpLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcignY2FuIG5vdCBtZXJnZSBJbnB1dEZpZWxkQXJndW1lbnRDb250YWluZXJzLCBzaW5jZSBhcmd1bWVudHMgb3ZlcmxhcCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmFyZ3VtZW50cy5wdXNoKGFyZ3VtZW50KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBzaG91bGQgbm90IGJlIG5lY2Vzc2FyeSBidXQgaXQgaXMgYmV0dGVyIHRvIGNoZWNrXHJcblx0XHR0aGlzLnZhbGlkYXRlKCk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBFbmNsb3NpbmdQYWlyLCBQYXJzZXJVdGlscyB9IGZyb20gJy4uL3V0aWxzL1BhcnNlclV0aWxzJztcclxuaW1wb3J0IHsgaXNUcnV0aHksIE1ldGFCaW5kUGFyc2luZ0Vycm9yIH0gZnJvbSAnLi4vdXRpbHMvVXRpbHMnO1xyXG5pbXBvcnQgeyBBYnN0cmFjdElucHV0RmllbGRBcmd1bWVudCB9IGZyb20gJy4uL2lucHV0RmllbGRBcmd1bWVudHMvQWJzdHJhY3RJbnB1dEZpZWxkQXJndW1lbnQnO1xyXG5pbXBvcnQgeyBJbnB1dEZpZWxkQXJndW1lbnRGYWN0b3J5IH0gZnJvbSAnLi4vaW5wdXRGaWVsZEFyZ3VtZW50cy9JbnB1dEZpZWxkQXJndW1lbnRGYWN0b3J5JztcclxuaW1wb3J0IHsgSW5wdXRGaWVsZEFyZ3VtZW50Q29udGFpbmVyIH0gZnJvbSAnLi4vaW5wdXRGaWVsZEFyZ3VtZW50cy9JbnB1dEZpZWxkQXJndW1lbnRDb250YWluZXInO1xyXG5cclxuZXhwb3J0IGVudW0gSW5wdXRGaWVsZFR5cGUge1xyXG5cdFRPR0dMRSA9ICd0b2dnbGUnLFxyXG5cdFNMSURFUiA9ICdzbGlkZXInLFxyXG5cdFRFWFQgPSAndGV4dCcsXHJcblx0VEVYVF9BUkVBID0gJ3RleHRfYXJlYScsXHJcblx0U0VMRUNUID0gJ3NlbGVjdCcsXHJcblx0TVVMVElfU0VMRUNUID0gJ211bHRpX3NlbGVjdCcsXHJcblx0REFURSA9ICdkYXRlJyxcclxuXHRUSU1FID0gJ3RpbWUnLFxyXG5cdERBVEVfUElDS0VSID0gJ2RhdGVfcGlja2VyJyxcclxuXHRJTlZBTElEID0gJ2ludmFsaWQnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBJbnB1dEZpZWxkQXJndW1lbnRUeXBlIHtcclxuXHRDTEFTUyA9ICdjbGFzcycsXHJcblx0QUREX0xBQkVMUyA9ICdhZGRMYWJlbHMnLFxyXG5cdE1JTl9WQUxVRSA9ICdtaW5WYWx1ZScsXHJcblx0TUFYX1ZBTFVFID0gJ21heFZhbHVlJyxcclxuXHRPUFRJT04gPSAnb3B0aW9uJyxcclxuXHRUSVRMRSA9ICd0aXRsZScsXHJcblx0QUxJR05fUklHSFQgPSAnYWxpZ25SaWdodCcsXHJcblxyXG5cdElOVkFMSUQgPSAnaW52YWxpZCcsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW5wdXRGaWVsZERlY2xhcmF0aW9uIHtcclxuXHRmdWxsRGVjbGFyYXRpb246IHN0cmluZztcclxuXHRkZWNsYXJhdGlvbjogc3RyaW5nO1xyXG5cdGlucHV0RmllbGRUeXBlOiBJbnB1dEZpZWxkVHlwZTtcclxuXHRpc0JvdW5kOiBib29sZWFuO1xyXG5cdGJpbmRUYXJnZXQ6IHN0cmluZztcclxuXHJcblx0YXJndW1lbnRDb250YWluZXI6IElucHV0RmllbGRBcmd1bWVudENvbnRhaW5lcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUZW1wbGF0ZSB7XHJcblx0aWRlbnRpZmllcjogc3RyaW5nO1xyXG5cdHRlbXBsYXRlOiBJbnB1dEZpZWxkRGVjbGFyYXRpb247XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIge1xyXG5cdHN0YXRpYyByb3VuZEJyYWNlc1BhaXI6IEVuY2xvc2luZ1BhaXIgPSBuZXcgRW5jbG9zaW5nUGFpcignKCcsICcpJyk7XHJcblx0c3RhdGljIHNxdWFyZUJyYWNlc1BhaXI6IEVuY2xvc2luZ1BhaXIgPSBuZXcgRW5jbG9zaW5nUGFpcignWycsICddJyk7XHJcblx0c3RhdGljIGN1cmx5QnJhY2VzUGFpcjogRW5jbG9zaW5nUGFpciA9IG5ldyBFbmNsb3NpbmdQYWlyKCd7JywgJ30nKTtcclxuXHRzdGF0aWMgYWxsQnJhY2VzUGFpcnM6IEVuY2xvc2luZ1BhaXJbXSA9IFtcclxuXHRcdElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5yb3VuZEJyYWNlc1BhaXIsXHJcblx0XHRJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIuc3F1YXJlQnJhY2VzUGFpcixcclxuXHRcdElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5jdXJseUJyYWNlc1BhaXIsXHJcblx0XTtcclxuXHJcblx0c3RhdGljIHRlbXBsYXRlczogVGVtcGxhdGVbXSA9IFtdO1xyXG5cclxuXHRzdGF0aWMgcGFyc2UoZnVsbERlY2xhcmF0aW9uOiBzdHJpbmcpOiBJbnB1dEZpZWxkRGVjbGFyYXRpb24ge1xyXG5cdFx0bGV0IGlucHV0RmllbGREZWNsYXJhdGlvbjogSW5wdXRGaWVsZERlY2xhcmF0aW9uID0ge30gYXMgSW5wdXRGaWVsZERlY2xhcmF0aW9uO1xyXG5cclxuXHRcdGxldCB1c2VUZW1wbGF0ZSA9IGZhbHNlO1xyXG5cdFx0bGV0IHRlbXBsYXRlTmFtZSA9ICcnO1xyXG5cclxuXHRcdC8vIGRlY2xhcmF0aW9uXHJcblx0XHRpbnB1dEZpZWxkRGVjbGFyYXRpb24uZnVsbERlY2xhcmF0aW9uID0gZnVsbERlY2xhcmF0aW9uO1xyXG5cdFx0Y29uc3QgdGVtcCA9IFBhcnNlclV0aWxzLmdldEluQmV0d2VlbihmdWxsRGVjbGFyYXRpb24sIElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5zcXVhcmVCcmFjZXNQYWlyKTtcclxuXHRcdGlmIChBcnJheS5pc0FycmF5KHRlbXApKSB7XHJcblx0XHRcdGlmICh0ZW1wLmxlbmd0aCA9PT0gMikge1xyXG5cdFx0XHRcdHVzZVRlbXBsYXRlID0gdHJ1ZTtcclxuXHRcdFx0XHR0ZW1wbGF0ZU5hbWUgPSB0ZW1wWzBdO1xyXG5cdFx0XHRcdGlucHV0RmllbGREZWNsYXJhdGlvbi5kZWNsYXJhdGlvbiA9IHRlbXBbMV07XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kUGFyc2luZ0Vycm9yKCdpbnZhbGlkIGlucHV0IGZpZWxkIGRlY2xhcmF0aW9uJyk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlucHV0RmllbGREZWNsYXJhdGlvbi5kZWNsYXJhdGlvbiA9IHRlbXA7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gZGVjbGFyYXRpb24gcGFydHNcclxuXHRcdGNvbnN0IGRlY2xhcmF0aW9uUGFydHM6IHN0cmluZ1tdID0gUGFyc2VyVXRpbHMuc3BsaXQoaW5wdXRGaWVsZERlY2xhcmF0aW9uLmRlY2xhcmF0aW9uLCAnOicsIElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5zcXVhcmVCcmFjZXNQYWlyKTtcclxuXHJcblx0XHQvLyBiaW5kIHRhcmdldFxyXG5cdFx0aW5wdXRGaWVsZERlY2xhcmF0aW9uLmJpbmRUYXJnZXQgPSBkZWNsYXJhdGlvblBhcnRzWzFdID8/ICcnO1xyXG5cdFx0aW5wdXRGaWVsZERlY2xhcmF0aW9uLmlzQm91bmQgPSBpc1RydXRoeShpbnB1dEZpZWxkRGVjbGFyYXRpb24uYmluZFRhcmdldCk7XHJcblxyXG5cdFx0Ly8gaW5wdXQgZmllbGQgdHlwZSBhbmQgYXJndW1lbnRzXHJcblx0XHRjb25zdCBpbnB1dEZpZWxkVHlwZVdpdGhBcmd1bWVudHM6IHN0cmluZyA9IGRlY2xhcmF0aW9uUGFydHNbMF07XHJcblx0XHRpZiAoaW5wdXRGaWVsZFR5cGVXaXRoQXJndW1lbnRzKSB7XHJcblx0XHRcdC8vIGlucHV0IGZpZWxkIHR5cGVcclxuXHRcdFx0Y29uc3QgaW5wdXRGaWVsZFR5cGVTdHJpbmcgPSBQYXJzZXJVdGlscy5yZW1vdmVJbkJldHdlZW4oaW5wdXRGaWVsZFR5cGVXaXRoQXJndW1lbnRzLCBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIucm91bmRCcmFjZXNQYWlyKTtcclxuXHRcdFx0aW5wdXRGaWVsZERlY2xhcmF0aW9uLmlucHV0RmllbGRUeXBlID0gSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLmdldElucHV0RmllbGRUeXBlKGlucHV0RmllbGRUeXBlU3RyaW5nKTtcclxuXHJcblx0XHRcdC8vIGFyZ3VtZW50c1xyXG5cdFx0XHRjb25zdCBpbnB1dEZpZWxkQXJndW1lbnRzU3RyaW5nOiBzdHJpbmcgPSBQYXJzZXJVdGlscy5nZXRJbkJldHdlZW4oaW5wdXRGaWVsZFR5cGVXaXRoQXJndW1lbnRzLCBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIucm91bmRCcmFjZXNQYWlyKSBhcyBzdHJpbmc7XHJcblx0XHRcdC8vIGNvbnNvbGUubG9nKGlucHV0RmllbGRBcmd1bWVudHNTdHJpbmcpO1xyXG5cdFx0XHRpZiAoaW5wdXRGaWVsZEFyZ3VtZW50c1N0cmluZykge1xyXG5cdFx0XHRcdGlucHV0RmllbGREZWNsYXJhdGlvbi5hcmd1bWVudENvbnRhaW5lciA9IElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5wYXJzZUFyZ3VtZW50cyhpbnB1dEZpZWxkQXJndW1lbnRzU3RyaW5nLCBpbnB1dEZpZWxkRGVjbGFyYXRpb24uaW5wdXRGaWVsZFR5cGUpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGlucHV0RmllbGREZWNsYXJhdGlvbi5hcmd1bWVudENvbnRhaW5lciA9IG5ldyBJbnB1dEZpZWxkQXJndW1lbnRDb250YWluZXIoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aW5wdXRGaWVsZERlY2xhcmF0aW9uLmlucHV0RmllbGRUeXBlID0gSW5wdXRGaWVsZFR5cGUuSU5WQUxJRDtcclxuXHRcdFx0aW5wdXRGaWVsZERlY2xhcmF0aW9uLmFyZ3VtZW50Q29udGFpbmVyID0gbmV3IElucHV0RmllbGRBcmd1bWVudENvbnRhaW5lcigpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh1c2VUZW1wbGF0ZSkge1xyXG5cdFx0XHQvLyBjb25zb2xlLmxvZyh0ZW1wbGF0ZU5hbWUpO1xyXG5cdFx0XHRjb25zdCB0ZW1wbGF0ZSA9IElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci50ZW1wbGF0ZXMuZmlsdGVyKHggPT4geC5pZGVudGlmaWVyID09PSB0ZW1wbGF0ZU5hbWUpLmZpcnN0KCk/LnRlbXBsYXRlO1xyXG5cdFx0XHQvLyBjb25zb2xlLmxvZyh0ZW1wbGF0ZSk7XHJcblx0XHRcdGlmICh0ZW1wbGF0ZSkge1xyXG5cdFx0XHRcdGlucHV0RmllbGREZWNsYXJhdGlvbi5iaW5kVGFyZ2V0ID0gaW5wdXRGaWVsZERlY2xhcmF0aW9uLmJpbmRUYXJnZXQgfHwgdGVtcGxhdGUuYmluZFRhcmdldDtcclxuXHRcdFx0XHRpbnB1dEZpZWxkRGVjbGFyYXRpb24uaXNCb3VuZCA9IGlucHV0RmllbGREZWNsYXJhdGlvbi5pc0JvdW5kIHx8IHRlbXBsYXRlLmlzQm91bmQ7XHJcblx0XHRcdFx0aW5wdXRGaWVsZERlY2xhcmF0aW9uLmlucHV0RmllbGRUeXBlID1cclxuXHRcdFx0XHRcdGlucHV0RmllbGREZWNsYXJhdGlvbi5pbnB1dEZpZWxkVHlwZSA9PT0gSW5wdXRGaWVsZFR5cGUuSU5WQUxJRCA/IHRlbXBsYXRlLmlucHV0RmllbGRUeXBlIDogaW5wdXRGaWVsZERlY2xhcmF0aW9uLmlucHV0RmllbGRUeXBlIHx8IHRlbXBsYXRlLmlucHV0RmllbGRUeXBlO1xyXG5cdFx0XHRcdGlucHV0RmllbGREZWNsYXJhdGlvbi5hcmd1bWVudENvbnRhaW5lciA9IHRlbXBsYXRlLmFyZ3VtZW50Q29udGFpbmVyLm1lcmdlQnlPdmVycmlkZShpbnB1dEZpZWxkRGVjbGFyYXRpb24uYXJndW1lbnRDb250YWluZXIpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcihgdW5rbm93biB0ZW1wbGF0ZSBuYW1lIFxcJyR7dGVtcGxhdGVOYW1lfVxcJ2ApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGlucHV0RmllbGREZWNsYXJhdGlvbi5pbnB1dEZpZWxkVHlwZSA9PT0gSW5wdXRGaWVsZFR5cGUuSU5WQUxJRCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRQYXJzaW5nRXJyb3IoYHVua25vd24gaW5wdXQgZmllbGQgdHlwZWApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBpbnB1dEZpZWxkRGVjbGFyYXRpb247XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgcGFyc2VUZW1wbGF0ZXModGVtcGxhdGVzOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdGxldCB0ZW1wbGF0ZURlY2xhcmF0aW9ucyA9IHRlbXBsYXRlcyA/IFBhcnNlclV0aWxzLnNwbGl0KHRlbXBsYXRlcywgJ1xcbicsIElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5zcXVhcmVCcmFjZXNQYWlyKSA6IFtdO1xyXG5cdFx0dGVtcGxhdGVEZWNsYXJhdGlvbnMgPSB0ZW1wbGF0ZURlY2xhcmF0aW9ucy5tYXAoeCA9PiB4LnRyaW0oKSkuZmlsdGVyKHggPT4geC5sZW5ndGggPiAwKTtcclxuXHJcblx0XHRmb3IgKGNvbnN0IHRlbXBsYXRlRGVjbGFyYXRpb24gb2YgdGVtcGxhdGVEZWNsYXJhdGlvbnMpIHtcclxuXHRcdFx0bGV0IHRlbXBsYXRlRGVjbGFyYXRpb25QYXJ0czogc3RyaW5nW10gPSBQYXJzZXJVdGlscy5zcGxpdCh0ZW1wbGF0ZURlY2xhcmF0aW9uLCAnLT4nLCBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIuc3F1YXJlQnJhY2VzUGFpcik7XHJcblx0XHRcdHRlbXBsYXRlRGVjbGFyYXRpb25QYXJ0cyA9IHRlbXBsYXRlRGVjbGFyYXRpb25QYXJ0cy5tYXAoeCA9PiB4LnRyaW0oKSk7XHJcblxyXG5cdFx0XHRpZiAodGVtcGxhdGVEZWNsYXJhdGlvblBhcnRzLmxlbmd0aCA9PT0gMSkge1xyXG5cdFx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcignSW52YWxpZCB0ZW1wbGF0ZSBzeW50YXgnKTtcclxuXHRcdFx0fSBlbHNlIGlmICh0ZW1wbGF0ZURlY2xhcmF0aW9uUGFydHMubGVuZ3RoID09PSAyKSB7XHJcblx0XHRcdFx0SW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLnRlbXBsYXRlcy5wdXNoKHtcclxuXHRcdFx0XHRcdGlkZW50aWZpZXI6IHRlbXBsYXRlRGVjbGFyYXRpb25QYXJ0c1swXSxcclxuXHRcdFx0XHRcdHRlbXBsYXRlOiBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIucGFyc2UodGVtcGxhdGVEZWNsYXJhdGlvblBhcnRzWzFdKSxcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnNvbGUubG9nKElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci50ZW1wbGF0ZXMpO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIHBhcnNlQXJndW1lbnRzKGlucHV0RmllbGRBcmd1bWVudHNTdHJpbmc6IHN0cmluZywgaW5wdXRGaWVsZFR5cGU6IElucHV0RmllbGRUeXBlKTogSW5wdXRGaWVsZEFyZ3VtZW50Q29udGFpbmVyIHtcclxuXHRcdC8vIGNvbnNvbGUubG9nKCdpbnB1dEZpZWxkQXJndW1lbnRzU3RyaW5nJywgaW5wdXRGaWVsZEFyZ3VtZW50c1N0cmluZyk7XHJcblx0XHRsZXQgaW5wdXRGaWVsZEFyZ3VtZW50U3RyaW5nczogc3RyaW5nW10gPSBQYXJzZXJVdGlscy5zcGxpdChpbnB1dEZpZWxkQXJndW1lbnRzU3RyaW5nLCAnLCcsIElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5yb3VuZEJyYWNlc1BhaXIpO1xyXG5cdFx0aW5wdXRGaWVsZEFyZ3VtZW50U3RyaW5ncyA9IGlucHV0RmllbGRBcmd1bWVudFN0cmluZ3MubWFwKHggPT4geC50cmltKCkpO1xyXG5cclxuXHRcdGNvbnN0IGlucHV0RmllbGRBcmd1bWVudENvbnRhaW5lcjogSW5wdXRGaWVsZEFyZ3VtZW50Q29udGFpbmVyID0gbmV3IElucHV0RmllbGRBcmd1bWVudENvbnRhaW5lcigpO1xyXG5cclxuXHRcdGZvciAoY29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50U3RyaW5nIG9mIGlucHV0RmllbGRBcmd1bWVudFN0cmluZ3MpIHtcclxuXHRcdFx0Y29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50SWRlbnRpZmllcjogc3RyaW5nID0gSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLmV4dHJhY3RJbnB1dEZpZWxkQXJndW1lbnRJZGVudGlmaWVyKGlucHV0RmllbGRBcmd1bWVudFN0cmluZyk7XHJcblx0XHRcdC8vIGNvbnNvbGUubG9nKGlucHV0RmllbGRBcmd1bWVudElkZW50aWZpZXIpO1xyXG5cclxuXHRcdFx0Y29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50ID0gSW5wdXRGaWVsZEFyZ3VtZW50RmFjdG9yeS5jcmVhdGVJbnB1dEZpZWxkQXJndW1lbnQoaW5wdXRGaWVsZEFyZ3VtZW50SWRlbnRpZmllcik7XHJcblxyXG5cdFx0XHRpZiAoIWlucHV0RmllbGRBcmd1bWVudC5pc0FsbG93ZWQoaW5wdXRGaWVsZFR5cGUpKSB7XHJcblx0XHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kUGFyc2luZ0Vycm9yKFxyXG5cdFx0XHRcdFx0YGFyZ3VtZW50IFxcJyR7aW5wdXRGaWVsZEFyZ3VtZW50SWRlbnRpZmllcn1cXCcgaXMgb25seSBhcHBsaWNhYmxlIHRvICR7aW5wdXRGaWVsZEFyZ3VtZW50LmdldEFsbG93ZWRJbnB1dEZpZWxkc0FzU3RyaW5nKCl9IGlucHV0IGZpZWxkc2BcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoaW5wdXRGaWVsZEFyZ3VtZW50LnJlcXVpcmVzVmFsdWUpIHtcclxuXHRcdFx0XHRpbnB1dEZpZWxkQXJndW1lbnQucGFyc2VWYWx1ZShJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIuZXh0cmFjdElucHV0RmllbGRBcmd1bWVudFZhbHVlKGlucHV0RmllbGRBcmd1bWVudFN0cmluZykpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpbnB1dEZpZWxkQXJndW1lbnRDb250YWluZXIuYWRkKGlucHV0RmllbGRBcmd1bWVudCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aW5wdXRGaWVsZEFyZ3VtZW50Q29udGFpbmVyLnZhbGlkYXRlKCk7XHJcblxyXG5cdFx0cmV0dXJuIGlucHV0RmllbGRBcmd1bWVudENvbnRhaW5lcjtcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBleHRyYWN0SW5wdXRGaWVsZEFyZ3VtZW50SWRlbnRpZmllcihhcmd1bWVudFN0cmluZzogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBQYXJzZXJVdGlscy5yZW1vdmVJbkJldHdlZW4oYXJndW1lbnRTdHJpbmcsIElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5yb3VuZEJyYWNlc1BhaXIpO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGV4dHJhY3RJbnB1dEZpZWxkQXJndW1lbnRWYWx1ZShhcmd1bWVudFN0cmluZzogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdGNvbnN0IGFyZ3VtZW50TmFtZSA9IHRoaXMuZXh0cmFjdElucHV0RmllbGRBcmd1bWVudElkZW50aWZpZXIoYXJndW1lbnRTdHJpbmcpO1xyXG5cclxuXHRcdGNvbnN0IGFyZ3VtZW50VmFsdWUgPSBQYXJzZXJVdGlscy5nZXRJbkJldHdlZW4oYXJndW1lbnRTdHJpbmcsIElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5yb3VuZEJyYWNlc1BhaXIpIGFzIHN0cmluZztcclxuXHRcdGlmICghYXJndW1lbnRWYWx1ZSkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRQYXJzaW5nRXJyb3IoYGFyZ3VtZW50IFxcJyR7YXJndW1lbnROYW1lfVxcJyByZXF1aXJlcyBhIG5vbiBlbXB0eSB2YWx1ZWApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBhcmd1bWVudFZhbHVlO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGdldElucHV0RmllbGRUeXBlKHN0cjogc3RyaW5nKTogSW5wdXRGaWVsZFR5cGUge1xyXG5cdFx0Zm9yIChjb25zdCBlbnRyeSBvZiBPYmplY3QuZW50cmllcyhJbnB1dEZpZWxkVHlwZSkpIHtcclxuXHRcdFx0aWYgKGVudHJ5WzFdID09PSBzdHIpIHtcclxuXHRcdFx0XHRyZXR1cm4gZW50cnlbMV07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gSW5wdXRGaWVsZFR5cGUuSU5WQUxJRDtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IEFic3RyYWN0SW5wdXRGaWVsZCB9IGZyb20gJy4vQWJzdHJhY3RJbnB1dEZpZWxkJztcclxuaW1wb3J0IHsgVGV4dEFyZWFDb21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4uL3V0aWxzL0xvZ2dlcic7XHJcbmltcG9ydCB7IE1ldGFCaW5kSW50ZXJuYWxFcnJvciB9IGZyb20gJy4uL3V0aWxzL1V0aWxzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUZXh0QXJlYUlucHV0RmllbGQgZXh0ZW5kcyBBYnN0cmFjdElucHV0RmllbGQge1xyXG5cdHRleHRBcmVhQ29tcG9uZW50OiBUZXh0QXJlYUNvbXBvbmVudCB8IHVuZGVmaW5lZDtcclxuXHJcblx0Z2V0VmFsdWUoKTogYW55IHtcclxuXHRcdGlmICghdGhpcy50ZXh0QXJlYUNvbXBvbmVudCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCd0ZXh0IGFyZWEgaW5wdXQgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLnRleHRBcmVhQ29tcG9uZW50LmdldFZhbHVlKCk7XHJcblx0fVxyXG5cclxuXHRzZXRWYWx1ZSh2YWx1ZTogYW55KTogdm9pZCB7XHJcblx0XHRpZiAoIXRoaXMudGV4dEFyZWFDb21wb25lbnQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndGV4dCBhcmVhIGlucHV0IGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcclxuXHRcdFx0dGhpcy50ZXh0QXJlYUNvbXBvbmVudC5zZXRWYWx1ZSh2YWx1ZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRMb2dnZXIubG9nV2FybmluZyhgY2FuIG5vdCBzZXQgdmFsdWUgb2YgdGV4dCBhcmVhIGlucHV0IHRvIFxcJyR7dmFsdWV9XFwnYCk7XHJcblx0XHRcdHRoaXMudGV4dEFyZWFDb21wb25lbnQuc2V0VmFsdWUoJycpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aXNFcXVhbFZhbHVlKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmdldFZhbHVlKCkgPT0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHRnZXREZWZhdWx0VmFsdWUoKTogYW55IHtcclxuXHRcdHJldHVybiAnJztcclxuXHR9XHJcblxyXG5cdGdldEh0bWxFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcclxuXHRcdGlmICghdGhpcy50ZXh0QXJlYUNvbXBvbmVudCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCd0ZXh0IGFyZWEgaW5wdXQgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLnRleHRBcmVhQ29tcG9uZW50LmlucHV0RWw7XHJcblx0fVxyXG5cclxuXHRyZW5kZXIoY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgY29tcG9uZW50ID0gbmV3IFRleHRBcmVhQ29tcG9uZW50KGNvbnRhaW5lcik7XHJcblx0XHRjb21wb25lbnQuc2V0VmFsdWUodGhpcy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZC5nZXRJbml0aWFsVmFsdWUoKSk7XHJcblx0XHRjb21wb25lbnQub25DaGFuZ2UodGhpcy5vblZhbHVlQ2hhbmdlKTtcclxuXHRcdHRoaXMudGV4dEFyZWFDb21wb25lbnQgPSBjb21wb25lbnQ7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBTZWxlY3RJbnB1dEZpZWxkIH0gZnJvbSAnLi9TZWxlY3RJbnB1dEZpZWxkJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTZWxlY3RJbnB1dEZpZWxkRWxlbWVudCB7XHJcblx0dmFsdWU6IHN0cmluZztcclxuXHRzZWxlY3RJbnB1dEZpZWxkOiBTZWxlY3RJbnB1dEZpZWxkO1xyXG5cdHJlYWRvbmx5IGlkOiBudW1iZXI7XHJcblx0ZWxlbWVudDogSFRNTERpdkVsZW1lbnQ7XHJcblxyXG5cdGNzc0NsYXNzOiBzdHJpbmc7XHJcblx0YWN0aXZlQ2xhc3M6IHN0cmluZztcclxuXHRob3ZlckNsYXNzOiBzdHJpbmc7XHJcblxyXG5cdHByaXZhdGUgYWN0aXZlOiBib29sZWFuO1xyXG5cdHByaXZhdGUgaGlnaGxpZ2h0ZWQ6IGJvb2xlYW47XHJcblxyXG5cdGNvbnN0cnVjdG9yKHZhbHVlOiBzdHJpbmcsIHBhcmVudEVsZW1lbnQ6IEhUTUxFbGVtZW50LCBpZDogbnVtYmVyLCBtdWx0aVNlbGVjdElucHV0RmllbGQ6IFNlbGVjdElucHV0RmllbGQsIGFjdGl2ZTogYm9vbGVhbiA9IGZhbHNlKSB7XHJcblx0XHR0aGlzLnZhbHVlID0gdmFsdWU7XHJcblx0XHR0aGlzLmlkID0gaWQ7XHJcblx0XHR0aGlzLmFjdGl2ZSA9IGFjdGl2ZTtcclxuXHRcdHRoaXMuaGlnaGxpZ2h0ZWQgPSBmYWxzZTtcclxuXHRcdHRoaXMuc2VsZWN0SW5wdXRGaWVsZCA9IG11bHRpU2VsZWN0SW5wdXRGaWVsZDtcclxuXHJcblx0XHR0aGlzLmNzc0NsYXNzID0gJ21ldGEtYmluZC1wbHVnaW4tc2VsZWN0LWlucHV0LWVsZW1lbnQnO1xyXG5cdFx0dGhpcy5hY3RpdmVDbGFzcyA9ICdtZXRhLWJpbmQtcGx1Z2luLXNlbGVjdC1pbnB1dC1lbGVtZW50LXNlbGVjdGVkJztcclxuXHRcdHRoaXMuaG92ZXJDbGFzcyA9ICdtZXRhLWJpbmQtcGx1Z2luLXNlbGVjdC1pbnB1dC1lbGVtZW50LWhvdmVyJztcclxuXHJcblx0XHR0aGlzLmVsZW1lbnQgPSBwYXJlbnRFbGVtZW50LmNyZWF0ZURpdih7IGNsczogdGhpcy5jc3NDbGFzcyB9KTtcclxuXHRcdHRoaXMuZWxlbWVudC5pZCA9IHRoaXMuZ2V0SFRNTElkKCk7XHJcblx0XHR0aGlzLmVsZW1lbnQub24oJ2NsaWNrJywgJyMnICsgdGhpcy5nZXRIVE1MSWQoKSwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnNldEFjdGl2ZSghdGhpcy5hY3RpdmUpO1xyXG5cdFx0XHRpZiAoIXRoaXMuc2VsZWN0SW5wdXRGaWVsZC5hbGxvd011bHRpU2VsZWN0KSB7XHJcblx0XHRcdFx0dGhpcy5zZWxlY3RJbnB1dEZpZWxkLmRpc2FibGVBbGxPdGhlckVsZW1lbnRzKHRoaXMuaWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHRoaXMuZWxlbWVudC5vbignbW91c2VlbnRlcicsICcjJyArIHRoaXMuZ2V0SFRNTElkKCksICgpID0+IHtcclxuXHRcdFx0dGhpcy5zZXRIaWdobGlnaHRlZCh0cnVlKTtcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5lbGVtZW50Lm9uKCdtb3VzZWxlYXZlJywgJyMnICsgdGhpcy5nZXRIVE1MSWQoKSwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnNldEhpZ2hsaWdodGVkKGZhbHNlKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Z2V0SFRNTElkKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gYG1ldGEtYmluZC1zZWxlY3QtaW5wdXQtZWxlbWVudC0ke3RoaXMuc2VsZWN0SW5wdXRGaWVsZC5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZC51aWR9LSR7dGhpcy5pZH1gO1xyXG5cdH1cclxuXHJcblx0aXNIaWdobGlnaHRlZCgpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmhpZ2hsaWdodGVkO1xyXG5cdH1cclxuXHJcblx0c2V0SGlnaGxpZ2h0ZWQodmFsdWU6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdHRoaXMuaGlnaGxpZ2h0ZWQgPSB2YWx1ZTtcclxuXHRcdGlmICh0aGlzLmhpZ2hsaWdodGVkKSB7XHJcblx0XHRcdHRoaXMuYWRkQ2xhc3ModGhpcy5ob3ZlckNsYXNzKTtcclxuXHRcdFx0dGhpcy5zZWxlY3RJbnB1dEZpZWxkLmRlSGlnaGxpZ2h0QWxsT3RoZXJFbGVtZW50cyh0aGlzLmlkKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMucmVtb3ZlQ2xhc3ModGhpcy5ob3ZlckNsYXNzKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlzQWN0aXZlKCk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuYWN0aXZlO1xyXG5cdH1cclxuXHJcblx0c2V0QWN0aXZlKGFjdGl2ZTogYm9vbGVhbiwgdXBkYXRlUGFyZW50OiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xyXG5cdFx0dGhpcy5hY3RpdmUgPSBhY3RpdmU7XHJcblx0XHR0aGlzLnVwZGF0ZSh1cGRhdGVQYXJlbnQpO1xyXG5cdH1cclxuXHJcblx0dXBkYXRlKHVwZGF0ZVBhcmVudDogYm9vbGVhbik6IHZvaWQge1xyXG5cdFx0aWYgKHRoaXMuYWN0aXZlKSB7XHJcblx0XHRcdHRoaXMuYWRkQ2xhc3ModGhpcy5hY3RpdmVDbGFzcyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnJlbW92ZUNsYXNzKHRoaXMuYWN0aXZlQ2xhc3MpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHVwZGF0ZVBhcmVudCkge1xyXG5cdFx0XHR0aGlzLnNlbGVjdElucHV0RmllbGQub25DaGFuZ2UoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFkZENsYXNzKGNzc0NsYXNzOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy5lbGVtZW50Lmhhc0NsYXNzKGNzc0NsYXNzKSkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoY3NzQ2xhc3MpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmVtb3ZlQ2xhc3MoY3NzQ2xhc3M6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0aWYgKHRoaXMuZWxlbWVudC5oYXNDbGFzcyhjc3NDbGFzcykpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKGNzc0NsYXNzKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJlbmRlcigpOiB2b2lkIHtcclxuXHRcdHRoaXMuZWxlbWVudC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiB0aGlzLnZhbHVlIH0pO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQWJzdHJhY3RJbnB1dEZpZWxkIH0gZnJvbSAnLi9BYnN0cmFjdElucHV0RmllbGQnO1xyXG5pbXBvcnQgeyBTZWxlY3RJbnB1dEZpZWxkRWxlbWVudCB9IGZyb20gJy4vU2VsZWN0SW5wdXRGaWVsZEVsZW1lbnQnO1xyXG5pbXBvcnQgeyBNZXRhQmluZEludGVybmFsRXJyb3IsIG1vZCB9IGZyb20gJy4uL3V0aWxzL1V0aWxzJztcclxuaW1wb3J0IHsgSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQgfSBmcm9tICcuLi9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCc7XHJcbmltcG9ydCB7IElucHV0RmllbGRBcmd1bWVudFR5cGUgfSBmcm9tICcuLi9wYXJzZXJzL0lucHV0RmllbGREZWNsYXJhdGlvblBhcnNlcic7XHJcbmltcG9ydCB7IEFic3RyYWN0SW5wdXRGaWVsZEFyZ3VtZW50IH0gZnJvbSAnLi4vaW5wdXRGaWVsZEFyZ3VtZW50cy9BYnN0cmFjdElucHV0RmllbGRBcmd1bWVudCc7XHJcblxyXG5leHBvcnQgY2xhc3MgU2VsZWN0SW5wdXRGaWVsZCBleHRlbmRzIEFic3RyYWN0SW5wdXRGaWVsZCB7XHJcblx0c3RhdGljIGFsbG93SW5saW5lQ29kZUJsb2NrOiBib29sZWFuID0gZmFsc2U7XHJcblx0ZWxlbWVudHM6IFNlbGVjdElucHV0RmllbGRFbGVtZW50W107XHJcblx0YWxsb3dNdWx0aVNlbGVjdDogYm9vbGVhbjtcclxuXHRjb250YWluZXI6IEhUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIG9uVmFsdWVDaGFuZ2U6ICh2YWx1ZTogYW55KSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPikge1xyXG5cdFx0c3VwZXIoaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIG9uVmFsdWVDaGFuZ2UpO1xyXG5cdFx0dGhpcy5lbGVtZW50cyA9IFtdO1xyXG5cdFx0dGhpcy5hbGxvd011bHRpU2VsZWN0ID0gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRnZXRIdG1sRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcblx0XHRpZiAoIXRoaXMuY29udGFpbmVyKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3NlbGVjdCBpbnB1dCBjb250YWluZXIgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuY29udGFpbmVyO1xyXG5cdH1cclxuXHJcblx0Z2V0VmFsdWUoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiB0aGlzLmVsZW1lbnRzLmZpbHRlcih4ID0+IHguaXNBY3RpdmUoKSkuZmlyc3QoKT8udmFsdWUgPz8gJyc7XHJcblx0fVxyXG5cclxuXHRzZXRWYWx1ZSh2YWx1ZTogYW55KTogdm9pZCB7XHJcblx0XHRmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy5lbGVtZW50cykge1xyXG5cdFx0XHRpZiAodmFsdWUgPT09IGVsZW1lbnQudmFsdWUpIHtcclxuXHRcdFx0XHRlbGVtZW50LnNldEFjdGl2ZSh0cnVlLCBmYWxzZSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZWxlbWVudC5zZXRBY3RpdmUoZmFsc2UsIGZhbHNlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aXNFcXVhbFZhbHVlKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmdldFZhbHVlKCkgPT0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHRnZXREZWZhdWx0VmFsdWUoKTogYW55IHtcclxuXHRcdHJldHVybiAnJztcclxuXHR9XHJcblxyXG5cdG9uQ2hhbmdlKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5vblZhbHVlQ2hhbmdlKHRoaXMuZ2V0VmFsdWUoKSk7XHJcblx0fVxyXG5cclxuXHRyZW5kZXIoY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCk6IHZvaWQge1xyXG5cdFx0Y29udGFpbmVyLmFkZENsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLXNlbGVjdC1pbnB1dC1iZycpO1xyXG5cdFx0dGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcblxyXG5cdFx0Y29uc3QgZWxlbWVudFdyYXBwZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbWV0YS1iaW5kLXBsdWdpbi1zZWxlY3QtaW5wdXQtd3JhcHBlcicgfSk7XHJcblxyXG5cdFx0Y29uc3QgdGl0bGVBcmd1bWVudCA9IHRoaXMuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0QXJndW1lbnQoSW5wdXRGaWVsZEFyZ3VtZW50VHlwZS5USVRMRSk7XHJcblx0XHRpZiAodGl0bGVBcmd1bWVudCkge1xyXG5cdFx0XHRlbGVtZW50V3JhcHBlci5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiB0aXRsZUFyZ3VtZW50LnZhbHVlLCBjbHM6ICdtZXRhLWJpbmQtcGx1Z2luLXNlbGVjdC1pbnB1dC1oZWFkZXInIH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGVsZW1lbnRBcmd1bWVudHM6IEFic3RyYWN0SW5wdXRGaWVsZEFyZ3VtZW50W10gPSB0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEFyZ3VtZW50cyhJbnB1dEZpZWxkQXJndW1lbnRUeXBlLk9QVElPTik7XHJcblxyXG5cdFx0bGV0IGkgPSAwO1xyXG5cdFx0Zm9yIChjb25zdCBlbGVtZW50QXJndW1lbnQgb2YgZWxlbWVudEFyZ3VtZW50cykge1xyXG5cdFx0XHRjb25zdCBzZWxlY3RJbnB1dEZpZWxkRWxlbWVudCA9IG5ldyBTZWxlY3RJbnB1dEZpZWxkRWxlbWVudChlbGVtZW50QXJndW1lbnQudmFsdWUsIGVsZW1lbnRXcmFwcGVyLCBpLCB0aGlzLCBmYWxzZSk7XHJcblxyXG5cdFx0XHR0aGlzLmVsZW1lbnRzLnB1c2goc2VsZWN0SW5wdXRGaWVsZEVsZW1lbnQpO1xyXG5cclxuXHRcdFx0c2VsZWN0SW5wdXRGaWVsZEVsZW1lbnQucmVuZGVyKCk7XHJcblxyXG5cdFx0XHRpICs9IDE7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5zZXRWYWx1ZSh0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEluaXRpYWxWYWx1ZSgpKTtcclxuXHR9XHJcblxyXG5cdGRpc2FibGVBbGxPdGhlckVsZW1lbnRzKGVsZW1lbnRJZDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRmb3IgKGNvbnN0IHNlbGVjdE1vZGFsRWxlbWVudCBvZiB0aGlzLmVsZW1lbnRzKSB7XHJcblx0XHRcdGlmIChzZWxlY3RNb2RhbEVsZW1lbnQuaWQgIT09IGVsZW1lbnRJZCkge1xyXG5cdFx0XHRcdHNlbGVjdE1vZGFsRWxlbWVudC5zZXRBY3RpdmUoZmFsc2UpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRkZUhpZ2hsaWdodEFsbE90aGVyRWxlbWVudHMoZWxlbWVudElkOiBudW1iZXIpOiB2b2lkIHtcclxuXHRcdGZvciAoY29uc3Qgc2VsZWN0TW9kYWxFbGVtZW50IG9mIHRoaXMuZWxlbWVudHMpIHtcclxuXHRcdFx0aWYgKHNlbGVjdE1vZGFsRWxlbWVudC5pZCAhPT0gZWxlbWVudElkKSB7XHJcblx0XHRcdFx0c2VsZWN0TW9kYWxFbGVtZW50LnNldEhpZ2hsaWdodGVkKGZhbHNlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YWN0aXZhdGVIaWdobGlnaHRlZCgpOiB2b2lkIHtcclxuXHRcdGZvciAoY29uc3Qgc2VsZWN0TW9kYWxFbGVtZW50IG9mIHRoaXMuZWxlbWVudHMpIHtcclxuXHRcdFx0aWYgKHNlbGVjdE1vZGFsRWxlbWVudC5pc0hpZ2hsaWdodGVkKCkpIHtcclxuXHRcdFx0XHRzZWxlY3RNb2RhbEVsZW1lbnQuc2V0QWN0aXZlKCFzZWxlY3RNb2RhbEVsZW1lbnQuaXNBY3RpdmUoKSk7XHJcblx0XHRcdFx0aWYgKCF0aGlzLmFsbG93TXVsdGlTZWxlY3QpIHtcclxuXHRcdFx0XHRcdHRoaXMuZGlzYWJsZUFsbE90aGVyRWxlbWVudHMoc2VsZWN0TW9kYWxFbGVtZW50LmlkKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGhpZ2hsaWdodFVwKCk6IHZvaWQge1xyXG5cdFx0Zm9yIChjb25zdCBzZWxlY3RNb2RhbEVsZW1lbnQgb2YgdGhpcy5lbGVtZW50cykge1xyXG5cdFx0XHRpZiAoc2VsZWN0TW9kYWxFbGVtZW50LmlzSGlnaGxpZ2h0ZWQoKSkge1xyXG5cdFx0XHRcdHRoaXMuZ2V0UHJldmlvdXNTZWxlY3RNb2RhbEVsZW1lbnQoc2VsZWN0TW9kYWxFbGVtZW50KT8uc2V0SGlnaGxpZ2h0ZWQodHJ1ZSk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gbm90aGluZyBpcyBoaWdobGlnaHRlZFxyXG5cdFx0dGhpcy5lbGVtZW50cy5hdCgtMSk/LnNldEhpZ2hsaWdodGVkKHRydWUpO1xyXG5cdH1cclxuXHJcblx0aGlnaGxpZ2h0RG93bigpOiB2b2lkIHtcclxuXHRcdGZvciAoY29uc3Qgc2VsZWN0TW9kYWxFbGVtZW50IG9mIHRoaXMuZWxlbWVudHMpIHtcclxuXHRcdFx0aWYgKHNlbGVjdE1vZGFsRWxlbWVudC5pc0hpZ2hsaWdodGVkKCkpIHtcclxuXHRcdFx0XHR0aGlzLmdldE5leHRTZWxlY3RNb2RhbEVsZW1lbnQoc2VsZWN0TW9kYWxFbGVtZW50KT8uc2V0SGlnaGxpZ2h0ZWQodHJ1ZSk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gbm90aGluZyBpcyBoaWdobGlnaHRlZFxyXG5cdFx0dGhpcy5lbGVtZW50cy5hdCgwKT8uc2V0SGlnaGxpZ2h0ZWQodHJ1ZSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGdldE5leHRTZWxlY3RNb2RhbEVsZW1lbnQoZWxlbWVudDogU2VsZWN0SW5wdXRGaWVsZEVsZW1lbnQpOiBTZWxlY3RJbnB1dEZpZWxkRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcblx0XHRsZXQgbmV4dElkID0gZWxlbWVudC5pZCArIDE7XHJcblx0XHRuZXh0SWQgPSBtb2QobmV4dElkLCB0aGlzLmVsZW1lbnRzLmxlbmd0aCk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuZWxlbWVudHMuZmlsdGVyKHggPT4geC5pZCA9PT0gbmV4dElkKS5hdCgwKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2V0UHJldmlvdXNTZWxlY3RNb2RhbEVsZW1lbnQoZWxlbWVudDogU2VsZWN0SW5wdXRGaWVsZEVsZW1lbnQpOiBTZWxlY3RJbnB1dEZpZWxkRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcblx0XHRsZXQgbmV4dElkID0gZWxlbWVudC5pZCAtIDE7XHJcblx0XHRuZXh0SWQgPSBtb2QobmV4dElkLCB0aGlzLmVsZW1lbnRzLmxlbmd0aCk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuZWxlbWVudHMuZmlsdGVyKHggPT4geC5pZCA9PT0gbmV4dElkKS5hdCgwKTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IFNlbGVjdElucHV0RmllbGQgfSBmcm9tICcuL1NlbGVjdElucHV0RmllbGQnO1xyXG5pbXBvcnQgeyBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCB9IGZyb20gJy4uL0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkJztcclxuaW1wb3J0IHsgYXJyYXlFcXVhbHMgfSBmcm9tICcuLi91dGlscy9VdGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgTXVsdGlTZWxlY3RJbnB1dEZpZWxkIGV4dGVuZHMgU2VsZWN0SW5wdXRGaWVsZCB7XHJcblx0Y29uc3RydWN0b3IoaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBvblZhbHVlQ2hhbmdlOiAodmFsdWU6IGFueSkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4pIHtcclxuXHRcdHN1cGVyKGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBvblZhbHVlQ2hhbmdlKTtcclxuXHRcdHRoaXMuYWxsb3dNdWx0aVNlbGVjdCA9IHRydWU7XHJcblx0fVxyXG5cclxuXHRnZXRWYWx1ZSgpOiBhbnkge1xyXG5cdFx0cmV0dXJuIHRoaXMuZWxlbWVudHMuZmlsdGVyKHggPT4geC5pc0FjdGl2ZSgpKS5tYXAoeCA9PiB4LnZhbHVlKTtcclxuXHR9XHJcblxyXG5cdHNldFZhbHVlKHZhbHVlOiBzdHJpbmdbXSk6IHZvaWQge1xyXG5cdFx0aWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy5lbGVtZW50cykge1xyXG5cdFx0XHRcdGVsZW1lbnQuc2V0QWN0aXZlKGZhbHNlLCBmYWxzZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGVsZW1lbnRMb29wOiBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy5lbGVtZW50cykge1xyXG5cdFx0XHRmb3IgKGNvbnN0IHZhbHVlRWxlbWVudCBvZiB2YWx1ZSkge1xyXG5cdFx0XHRcdGlmICh2YWx1ZUVsZW1lbnQgPT09IGVsZW1lbnQudmFsdWUpIHtcclxuXHRcdFx0XHRcdGVsZW1lbnQuc2V0QWN0aXZlKHRydWUsIGZhbHNlKTtcclxuXHRcdFx0XHRcdGNvbnRpbnVlIGVsZW1lbnRMb29wO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRlbGVtZW50LnNldEFjdGl2ZShmYWxzZSwgZmFsc2UpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aXNFcXVhbFZhbHVlKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcclxuXHRcdGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBhcnJheUVxdWFscyh0aGlzLmdldFZhbHVlKCksIHZhbHVlKTtcclxuXHR9XHJcblxyXG5cdGdldERlZmF1bHRWYWx1ZSgpOiBzdHJpbmdbXSB7XHJcblx0XHRyZXR1cm4gW107XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBBYnN0cmFjdElucHV0RmllbGQgfSBmcm9tICcuL0Fic3RyYWN0SW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7IERyb3Bkb3duQ29tcG9uZW50LCBtb21lbnQsIFRleHRDb21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkIH0gZnJvbSAnLi4vSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQnO1xyXG5pbXBvcnQgeyBEYXRlUGFyc2VyIH0gZnJvbSAnLi4vcGFyc2Vycy9EYXRlUGFyc2VyJztcclxuaW1wb3J0IHsgTWV0YUJpbmRJbnRlcm5hbEVycm9yIH0gZnJvbSAnLi4vdXRpbHMvVXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIERhdGVJbnB1dEZpZWxkIGV4dGVuZHMgQWJzdHJhY3RJbnB1dEZpZWxkIHtcclxuXHRjb250YWluZXI6IEhUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkO1xyXG5cdGRhdGU6IG1vbWVudC5Nb21lbnQ7XHJcblxyXG5cdG1vbnRoczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcclxuXHRcdCcwJzogJ0phbnVhcnknLFxyXG5cdFx0JzEnOiAnRmVicnVhcnknLFxyXG5cdFx0JzInOiAnTWFyY2gnLFxyXG5cdFx0JzMnOiAnQXByaWwnLFxyXG5cdFx0JzQnOiAnTWF5JyxcclxuXHRcdCc1JzogJ0p1bmUnLFxyXG5cdFx0JzYnOiAnSnVseScsXHJcblx0XHQnNyc6ICdBdWd1c3QnLFxyXG5cdFx0JzgnOiAnU2VwdGVtYmVyJyxcclxuXHRcdCc5JzogJ09jdG9iZXInLFxyXG5cdFx0JzEwJzogJ05vdmVtYmVyJyxcclxuXHRcdCcxMSc6ICdEZWNlbWJlcicsXHJcblx0fTtcclxuXHRkYXlzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xyXG5cclxuXHRtb250aENvbXBvbmVudDogRHJvcGRvd25Db21wb25lbnQgfCB1bmRlZmluZWQ7XHJcblx0ZGF5Q29tcG9uZW50OiBEcm9wZG93bkNvbXBvbmVudCB8IHVuZGVmaW5lZDtcclxuXHR5ZWFyQ29tcG9uZW50OiBUZXh0Q29tcG9uZW50IHwgdW5kZWZpbmVkO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIG9uVmFsdWVDaGFuZ2U6ICh2YWx1ZTogYW55KSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPikge1xyXG5cdFx0c3VwZXIoaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIG9uVmFsdWVDaGFuZ2UpO1xyXG5cclxuXHRcdHRoaXMuZGF0ZSA9IERhdGVQYXJzZXIuZ2V0RGVmYXVsdERhdGUoKTtcclxuXHJcblx0XHR0aGlzLmRheXMgPSB7fTtcclxuXHRcdGZvciAobGV0IGkgPSAxOyBpIDw9IDMxOyBpKyspIHtcclxuXHRcdFx0dGhpcy5kYXlzW2kudG9TdHJpbmcoKV0gPSBpLnRvU3RyaW5nKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0SHRtbEVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xyXG5cdFx0aWYgKCF0aGlzLmNvbnRhaW5lcikge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCd0b2dnbGUgaW5wdXQgY29udGFpbmVyIGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLmNvbnRhaW5lcjtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXRWYWx1ZSgpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIERhdGVQYXJzZXIuc3RyaW5naWZ5KHRoaXMuZGF0ZSk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0VmFsdWUodmFsdWU6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0aWYgKCF0aGlzLm1vbnRoQ29tcG9uZW50KSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ2RhdGUgaW5wdXQgbW9udGggY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCF0aGlzLmRheUNvbXBvbmVudCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdkYXRlIGlucHV0IGRheSBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblx0XHRpZiAoIXRoaXMueWVhckNvbXBvbmVudCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdkYXRlIGlucHV0IGhvdXIgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZGF0ZSA9IERhdGVQYXJzZXIucGFyc2UodmFsdWUpID8/IERhdGVQYXJzZXIuZ2V0RGVmYXVsdERhdGUoKTtcclxuXHJcblx0XHRpZiAoIXRoaXMuZGF0ZS5pc1ZhbGlkKCkpIHtcclxuXHRcdFx0dGhpcy5kYXRlID0gRGF0ZVBhcnNlci5nZXREZWZhdWx0RGF0ZSgpO1xyXG5cdFx0XHR0aGlzLm9uVmFsdWVDaGFuZ2UodGhpcy5nZXRWYWx1ZSgpKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBjb25zb2xlLmxvZyh0aGlzLmRhdGUpO1xyXG5cdFx0dGhpcy5tb250aENvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmRhdGUubW9udGgoKS50b1N0cmluZygpKTtcclxuXHRcdHRoaXMuZGF5Q29tcG9uZW50LnNldFZhbHVlKHRoaXMuZGF0ZS5kYXRlKCkudG9TdHJpbmcoKSk7XHJcblx0XHR0aGlzLnllYXJDb21wb25lbnQuc2V0VmFsdWUodGhpcy5kYXRlLnllYXIoKS50b1N0cmluZygpKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBpc0VxdWFsVmFsdWUodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHZhbHVlID09IHRoaXMuZ2V0VmFsdWUoKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXREZWZhdWx0VmFsdWUoKTogYW55IHtcclxuXHRcdHJldHVybiBEYXRlUGFyc2VyLnN0cmluZ2lmeShEYXRlUGFyc2VyLmdldERlZmF1bHREYXRlKCkpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHJlbmRlcihjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XHJcblx0XHR0aGlzLmRhdGUgPSBEYXRlUGFyc2VyLnBhcnNlKHRoaXMuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0SW5pdGlhbFZhbHVlKCkpID8/IERhdGVQYXJzZXIuZ2V0RGVmYXVsdERhdGUoKTtcclxuXHRcdGlmICghdGhpcy5kYXRlLmlzVmFsaWQoKSkge1xyXG5cdFx0XHR0aGlzLmRhdGUgPSBEYXRlUGFyc2VyLmdldERlZmF1bHREYXRlKCk7XHJcblx0XHRcdHRoaXMub25WYWx1ZUNoYW5nZSh0aGlzLmdldFZhbHVlKCkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxldCB1c2VVc0lucHV0T3JkZXIgPSB0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLnBsdWdpbi5zZXR0aW5ncy51c2VVc0RhdGVJbnB1dE9yZGVyO1xyXG5cclxuXHRcdGNvbnRhaW5lci5yZW1vdmVDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC13cmFwcGVyJyk7XHJcblx0XHRjb250YWluZXIuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4tZmxleC1pbnB1dC13cmFwcGVyJywgJ21ldGEtYmluZC1wbHVnaW4taW5wdXQtZWxlbWVudC1ncm91cCcpO1xyXG5cclxuXHRcdGlmICghdXNlVXNJbnB1dE9yZGVyKSB7XHJcblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50ID0gbmV3IERyb3Bkb3duQ29tcG9uZW50KGNvbnRhaW5lcik7XHJcblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50LmFkZE9wdGlvbnModGhpcy5kYXlzKTtcclxuXHRcdFx0dGhpcy5kYXlDb21wb25lbnQuc2V0VmFsdWUodGhpcy5kYXRlLmRhdGUoKS50b1N0cmluZygpKTtcclxuXHRcdFx0dGhpcy5kYXlDb21wb25lbnQub25DaGFuZ2UodGhpcy5vbkRheUNoYW5nZS5iaW5kKHRoaXMpKTtcclxuXHJcblx0XHRcdHRoaXMubW9udGhDb21wb25lbnQgPSBuZXcgRHJvcGRvd25Db21wb25lbnQoY29udGFpbmVyKTtcclxuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5hZGRPcHRpb25zKHRoaXMubW9udGhzKTtcclxuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmRhdGUubW9udGgoKS50b1N0cmluZygpKTtcclxuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5vbkNoYW5nZSh0aGlzLm9uTW9udGhDaGFuZ2UuYmluZCh0aGlzKSk7XHJcblxyXG5cdFx0XHR0aGlzLmRheUNvbXBvbmVudC5zZWxlY3RFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC1lbGVtZW50LWdyb3VwLWVsZW1lbnQnKTtcclxuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5zZWxlY3RFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC1lbGVtZW50LWdyb3VwLWVsZW1lbnQnKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMubW9udGhDb21wb25lbnQgPSBuZXcgRHJvcGRvd25Db21wb25lbnQoY29udGFpbmVyKTtcclxuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5hZGRPcHRpb25zKHRoaXMubW9udGhzKTtcclxuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmRhdGUubW9udGgoKS50b1N0cmluZygpKTtcclxuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5vbkNoYW5nZSh0aGlzLm9uTW9udGhDaGFuZ2UuYmluZCh0aGlzKSk7XHJcblxyXG5cdFx0XHR0aGlzLmRheUNvbXBvbmVudCA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250YWluZXIpO1xyXG5cdFx0XHR0aGlzLmRheUNvbXBvbmVudC5hZGRPcHRpb25zKHRoaXMuZGF5cyk7XHJcblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50LnNldFZhbHVlKHRoaXMuZGF0ZS5kYXRlKCkudG9TdHJpbmcoKSk7XHJcblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50Lm9uQ2hhbmdlKHRoaXMub25EYXlDaGFuZ2UuYmluZCh0aGlzKSk7XHJcblxyXG5cdFx0XHR0aGlzLmRheUNvbXBvbmVudC5zZWxlY3RFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC1lbGVtZW50LWdyb3VwLWVsZW1lbnQnKTtcclxuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5zZWxlY3RFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC1lbGVtZW50LWdyb3VwLWVsZW1lbnQnKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnllYXJDb21wb25lbnQgPSBuZXcgVGV4dENvbXBvbmVudChjb250YWluZXIpO1xyXG5cdFx0dGhpcy55ZWFyQ29tcG9uZW50LnNldFZhbHVlKHRoaXMuZGF0ZS55ZWFyKCkudG9TdHJpbmcoKSk7XHJcblx0XHR0aGlzLnllYXJDb21wb25lbnQub25DaGFuZ2UodGhpcy5vblllYXJDaGFuZ2UuYmluZCh0aGlzKSk7XHJcblxyXG5cdFx0dGhpcy55ZWFyQ29tcG9uZW50LmlucHV0RWwuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4tZGF0ZS1pbnB1dC15ZWFyLWlucHV0Jyk7XHJcblx0XHR0aGlzLnllYXJDb21wb25lbnQuaW5wdXRFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC1lbGVtZW50LWdyb3VwLWVsZW1lbnQnKTtcclxuXHRcdHRoaXMueWVhckNvbXBvbmVudC5pbnB1dEVsLnR5cGUgPSAnbnVtYmVyJztcclxuXHRcdHRoaXMueWVhckNvbXBvbmVudC5pbnB1dEVsLm1heCA9ICc5OTk5JztcclxuXHJcblx0XHR0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgb25Nb250aENoYW5nZSh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHR0aGlzLmRhdGUubW9udGgodmFsdWUpO1xyXG5cclxuXHRcdGNvbnN0IGNsYW1wZWREYXkgPSB0aGlzLmNsYW1wRGF5KHRoaXMuZGF0ZS5kYXRlKCkpO1xyXG5cdFx0dGhpcy5kYXlDb21wb25lbnQ/LnNldFZhbHVlKGNsYW1wZWREYXkudG9TdHJpbmcoKSk7XHJcblx0XHR0aGlzLmRhdGUuZGF0ZShjbGFtcGVkRGF5KTtcclxuXHJcblx0XHR0aGlzLm9uVmFsdWVDaGFuZ2UodGhpcy5nZXRWYWx1ZSgpKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgb25EYXlDaGFuZ2UodmFsdWU6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0Y29uc3QgZGF5ID0gTnVtYmVyLnBhcnNlSW50KHZhbHVlKTtcclxuXHRcdGNvbnN0IGNsYW1wZWREYXkgPSB0aGlzLmNsYW1wRGF5KGRheSk7XHJcblx0XHRpZiAoY2xhbXBlZERheSAhPT0gZGF5KSB7XHJcblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50Py5zZXRWYWx1ZShjbGFtcGVkRGF5LnRvU3RyaW5nKCkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZGF0ZS5kYXRlKGNsYW1wZWREYXkpO1xyXG5cdFx0dGhpcy5vblZhbHVlQ2hhbmdlKHRoaXMuZ2V0VmFsdWUoKSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIG9uWWVhckNoYW5nZSh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRjb25zdCB5ZWFyID0gTnVtYmVyLnBhcnNlSW50KHZhbHVlKTtcclxuXHRcdHRoaXMuZGF0ZS55ZWFyKE51bWJlci5pc05hTih5ZWFyKSA/IERhdGVQYXJzZXIuZ2V0RGVmYXVsdFllYXIoKSA6IHllYXIpO1xyXG5cdFx0dGhpcy5vblZhbHVlQ2hhbmdlKHRoaXMuZ2V0VmFsdWUoKSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNsYW1wRGF5KGRheTogbnVtYmVyKTogbnVtYmVyIHtcclxuXHRcdGlmIChOdW1iZXIuaXNOYU4oZGF5KSkge1xyXG5cdFx0XHRyZXR1cm4gRGF0ZVBhcnNlci5nZXREZWZhdWx0RGF5KCk7XHJcblx0XHR9IGVsc2UgaWYgKGRheSA8IDEpIHtcclxuXHRcdFx0cmV0dXJuIDE7XHJcblx0XHR9IGVsc2UgaWYgKGRheSA+IHRoaXMuZGF0ZS5kYXlzSW5Nb250aCgpKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLmRhdGUuZGF5c0luTW9udGgoKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBkYXk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBtb21lbnQgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgY2xhc3MgRGF0ZVBhcnNlciB7XHJcblx0cHVibGljIHN0YXRpYyBkYXRlRm9ybWF0OiBzdHJpbmc7XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgc3RyaW5naWZ5KGRhdGU6IG1vbWVudC5Nb21lbnQpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIGRhdGUuZm9ybWF0KHRoaXMuZGF0ZUZvcm1hdCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIHBhcnNlKGRhdGVTdHJpbmc6IHN0cmluZyk6IG1vbWVudC5Nb21lbnQge1xyXG5cdFx0cmV0dXJuIG1vbWVudChkYXRlU3RyaW5nLCBEYXRlUGFyc2VyLmRhdGVGb3JtYXQpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBnZXREZWZhdWx0RGF0ZSgpOiBtb21lbnQuTW9tZW50IHtcclxuXHRcdHJldHVybiBtb21lbnQobmV3IERhdGUoRGF0ZVBhcnNlci5nZXREZWZhdWx0WWVhcigpLCBEYXRlUGFyc2VyLmdldERlZmF1bHRNb250aCgpLCBEYXRlUGFyc2VyLmdldERlZmF1bHREYXkoKSkpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBnZXREZWZhdWx0RGF5KCk6IG51bWJlciB7XHJcblx0XHRyZXR1cm4gMTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgZ2V0RGVmYXVsdE1vbnRoKCk6IG51bWJlciB7XHJcblx0XHRyZXR1cm4gMTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgZ2V0RGVmYXVsdFllYXIoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiAyMDIyO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQWJzdHJhY3RJbnB1dEZpZWxkIH0gZnJvbSAnLi9BYnN0cmFjdElucHV0RmllbGQnO1xyXG5pbXBvcnQgeyBEcm9wZG93bkNvbXBvbmVudCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQgfSBmcm9tICcuLi9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCc7XHJcbmltcG9ydCB7IFRpbWUsIFRpbWVQYXJzZXIgfSBmcm9tICcuLi9wYXJzZXJzL1RpbWVQYXJzZXInO1xyXG5pbXBvcnQgeyBNZXRhQmluZEludGVybmFsRXJyb3IgfSBmcm9tICcuLi91dGlscy9VdGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgVGltZUlucHV0RmllbGQgZXh0ZW5kcyBBYnN0cmFjdElucHV0RmllbGQge1xyXG5cdGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQgfCB1bmRlZmluZWQ7XHJcblx0dGltZTogVGltZTtcclxuXHJcblx0aG91cnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XHJcblx0bWludXRlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcclxuXHJcblx0aG91ckNvbXBvbmVudDogRHJvcGRvd25Db21wb25lbnQgfCB1bmRlZmluZWQ7XHJcblx0bWludXRlQ29tcG9uZW50OiBEcm9wZG93bkNvbXBvbmVudCB8IHVuZGVmaW5lZDtcclxuXHJcblx0Y29uc3RydWN0b3IoaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBvblZhbHVlQ2hhbmdlOiAodmFsdWU6IGFueSkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4pIHtcclxuXHRcdHN1cGVyKGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBvblZhbHVlQ2hhbmdlKTtcclxuXHJcblx0XHR0aGlzLnRpbWUgPSBUaW1lUGFyc2VyLmdldERlZmF1bHRUaW1lKCk7XHJcblxyXG5cdFx0dGhpcy5ob3VycyA9IHt9O1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPD0gMjQ7IGkrKykge1xyXG5cdFx0XHR0aGlzLmhvdXJzW2kudG9TdHJpbmcoKV0gPSBpLnRvU3RyaW5nKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5taW51dGVzID0ge307XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8PSA1OTsgaSsrKSB7XHJcblx0XHRcdHRoaXMubWludXRlc1tpLnRvU3RyaW5nKCldID0gaS50b1N0cmluZygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHVibGljIGdldEh0bWxFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcclxuXHRcdGlmICghdGhpcy5jb250YWluZXIpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndGltZSBpbnB1dCBjb250YWluZXIgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuY29udGFpbmVyO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldFZhbHVlKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gVGltZVBhcnNlci5zdHJpbmdpZnkodGhpcy50aW1lKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXRWYWx1ZSh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRpZiAoIXRoaXMuaG91ckNvbXBvbmVudCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCd0aW1lIGlucHV0IGhvdXIgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCF0aGlzLm1pbnV0ZUNvbXBvbmVudCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCd0aW1lIGlucHV0IG1pbnV0ZSBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy50aW1lID0gVGltZVBhcnNlci5wYXJzZSh2YWx1ZSkgPz8gVGltZVBhcnNlci5nZXREZWZhdWx0VGltZSgpO1xyXG5cdFx0Ly8gY29uc29sZS5sb2codGhpcy50aW1lKTtcclxuXHRcdHRoaXMuaG91ckNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLnRpbWUuZ2V0SG91cigpLnRvU3RyaW5nKCkpO1xyXG5cdFx0dGhpcy5taW51dGVDb21wb25lbnQuc2V0VmFsdWUodGhpcy50aW1lLmdldE1pbnV0ZSgpLnRvU3RyaW5nKCkpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGlzRXF1YWxWYWx1ZSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdmFsdWUgPT0gdGhpcy5nZXRWYWx1ZSgpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldERlZmF1bHRWYWx1ZSgpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIFRpbWVQYXJzZXIuc3RyaW5naWZ5KFRpbWVQYXJzZXIuZ2V0RGVmYXVsdFRpbWUoKSk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgcmVuZGVyKGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMudGltZSA9IFRpbWVQYXJzZXIucGFyc2UodGhpcy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZC5nZXRJbml0aWFsVmFsdWUoKSkgPz8gVGltZVBhcnNlci5nZXREZWZhdWx0VGltZSgpO1xyXG5cclxuXHRcdGNvbnRhaW5lci5yZW1vdmVDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC13cmFwcGVyJyk7XHJcblx0XHRjb250YWluZXIuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4tZmxleC1pbnB1dC13cmFwcGVyJywgJ21ldGEtYmluZC1wbHVnaW4taW5wdXQtZWxlbWVudC1ncm91cCcpO1xyXG5cclxuXHRcdHRoaXMuaG91ckNvbXBvbmVudCA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250YWluZXIpO1xyXG5cdFx0dGhpcy5ob3VyQ29tcG9uZW50LmFkZE9wdGlvbnModGhpcy5ob3Vycyk7XHJcblx0XHR0aGlzLmhvdXJDb21wb25lbnQuc2V0VmFsdWUodGhpcy50aW1lLmdldEhvdXIoKS50b1N0cmluZygpKTtcclxuXHRcdHRoaXMuaG91ckNvbXBvbmVudC5vbkNoYW5nZSh0aGlzLm9uSG91ckNoYW5nZS5iaW5kKHRoaXMpKTtcclxuXHJcblx0XHR0aGlzLm1pbnV0ZUNvbXBvbmVudCA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250YWluZXIpO1xyXG5cdFx0dGhpcy5taW51dGVDb21wb25lbnQuYWRkT3B0aW9ucyh0aGlzLm1pbnV0ZXMpO1xyXG5cdFx0dGhpcy5taW51dGVDb21wb25lbnQuc2V0VmFsdWUodGhpcy50aW1lLmdldE1pbnV0ZSgpLnRvU3RyaW5nKCkpO1xyXG5cdFx0dGhpcy5taW51dGVDb21wb25lbnQub25DaGFuZ2UodGhpcy5vbk1pbnV0ZUNoYW5nZS5iaW5kKHRoaXMpKTtcclxuXHJcblx0XHR0aGlzLmhvdXJDb21wb25lbnQuc2VsZWN0RWwuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4taW5wdXQtZWxlbWVudC1ncm91cC1lbGVtZW50Jyk7XHJcblx0XHR0aGlzLm1pbnV0ZUNvbXBvbmVudC5zZWxlY3RFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC1lbGVtZW50LWdyb3VwLWVsZW1lbnQnKTtcclxuXHJcblx0XHR0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgb25Ib3VyQ2hhbmdlKHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdHRoaXMudGltZS5zZXRIb3VyRnJvbVN0cmluZyh2YWx1ZSk7XHJcblx0XHR0aGlzLm9uVmFsdWVDaGFuZ2UodGhpcy5nZXRWYWx1ZSgpKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgb25NaW51dGVDaGFuZ2UodmFsdWU6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0dGhpcy50aW1lLnNldE1pbnV0ZUZyb21TdHJpbmcodmFsdWUpO1xyXG5cdFx0dGhpcy5vblZhbHVlQ2hhbmdlKHRoaXMuZ2V0VmFsdWUoKSk7XHJcblx0fVxyXG59XHJcbiIsICJleHBvcnQgY2xhc3MgVGltZSB7XG5cdHByaXZhdGUgX2hvdXI6IG51bWJlcjtcblx0cHJpdmF0ZSBfbWludXRlOiBudW1iZXI7XG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5faG91ciA9IFRpbWVQYXJzZXIuZ2V0RGVmYXVsdEhvdXIoKTtcblx0XHR0aGlzLl9taW51dGUgPSBUaW1lUGFyc2VyLmdldERlZmF1bHRIb3VyKCk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0SG91cigpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9ob3VyO1xuXHR9XG5cblx0cHVibGljIHNldEhvdXIodmFsdWU6IG51bWJlcik6IHZvaWQge1xuXHRcdGlmICh2YWx1ZSA8IDAgfHwgdmFsdWUgPiAyNCkge1xuXHRcdFx0dGhpcy5faG91ciA9IFRpbWVQYXJzZXIuZ2V0RGVmYXVsdEhvdXIoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5faG91ciA9IHZhbHVlO1xuXHR9XG5cblx0cHVibGljIGdldE1pbnV0ZSgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9taW51dGU7XG5cdH1cblxuXHRwdWJsaWMgc2V0TWludXRlKHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcblx0XHRpZiAodmFsdWUgPCAwIHx8IHZhbHVlID4gNTkpIHtcblx0XHRcdHRoaXMuX21pbnV0ZSA9IFRpbWVQYXJzZXIuZ2V0RGVmYXVsdE1pbnV0ZSgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLl9taW51dGUgPSB2YWx1ZTtcblx0fVxuXG5cdHB1YmxpYyBnZXRVbmlmb3JtSG91cigpOiBzdHJpbmcge1xuXHRcdHJldHVybiAoJzAwJyArIHRoaXMuZ2V0SG91cigpLnRvU3RyaW5nKCkpLnNsaWNlKC0yKTtcblx0fVxuXG5cdHB1YmxpYyBnZXRVbmlmb3JtTWludXRlKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuICgnMDAnICsgdGhpcy5nZXRNaW51dGUoKS50b1N0cmluZygpKS5zbGljZSgtMik7XG5cdH1cblxuXHRwdWJsaWMgc2V0SG91ckZyb21TdHJpbmcoc3RyOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRjb25zdCB2ID0gTnVtYmVyLnBhcnNlSW50KHN0cik7XG5cdFx0dGhpcy5zZXRIb3VyKE51bWJlci5pc05hTih2KSA/IFRpbWVQYXJzZXIuZ2V0RGVmYXVsdEhvdXIoKSA6IHYpO1xuXHR9XG5cblx0cHVibGljIHNldE1pbnV0ZUZyb21TdHJpbmcoc3RyOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRjb25zdCB2ID0gTnVtYmVyLnBhcnNlSW50KHN0cik7XG5cdFx0dGhpcy5zZXRNaW51dGUoTnVtYmVyLmlzTmFOKHYpID8gVGltZVBhcnNlci5nZXREZWZhdWx0TWludXRlKCkgOiB2KTtcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgVGltZVBhcnNlciB7XG5cdHB1YmxpYyBzdGF0aWMgcGFyc2UodGltZVN0cmluZzogc3RyaW5nKTogVGltZSB8IHVuZGVmaW5lZCB7XG5cdFx0Y29uc3QgdGltZTogVGltZSA9IFRpbWVQYXJzZXIuZ2V0RGVmYXVsdFRpbWUoKTtcblxuXHRcdGNvbnN0IHRpbWVQYXJ0cyA9IHRpbWVTdHJpbmcuc3BsaXQoJzonKTtcblx0XHRpZiAodGltZVBhcnRzLmxlbmd0aCAhPT0gMikge1xuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHR0aW1lLnNldEhvdXJGcm9tU3RyaW5nKHRpbWVQYXJ0c1swXSk7XG5cdFx0dGltZS5zZXRNaW51dGVGcm9tU3RyaW5nKHRpbWVQYXJ0c1sxXSk7XG5cblx0XHRyZXR1cm4gdGltZTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgc3RyaW5naWZ5KHRpbWU6IFRpbWUpOiBzdHJpbmcge1xuXHRcdHJldHVybiBgJHt0aW1lLmdldFVuaWZvcm1Ib3VyKCl9OiR7dGltZS5nZXRVbmlmb3JtTWludXRlKCl9YDtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgZ2V0RGVmYXVsdFRpbWUoKTogVGltZSB7XG5cdFx0cmV0dXJuIG5ldyBUaW1lKCk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIGdldERlZmF1bHRIb3VyKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIDA7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIGdldERlZmF1bHRNaW51dGUoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gMDtcblx0fVxufVxuIiwgImZ1bmN0aW9uIG5vb3AoKSB7IH1cbmNvbnN0IGlkZW50aXR5ID0geCA9PiB4O1xuZnVuY3Rpb24gYXNzaWduKHRhciwgc3JjKSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGZvciAoY29uc3QgayBpbiBzcmMpXG4gICAgICAgIHRhcltrXSA9IHNyY1trXTtcbiAgICByZXR1cm4gdGFyO1xufVxuZnVuY3Rpb24gaXNfcHJvbWlzZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nO1xufVxuZnVuY3Rpb24gYWRkX2xvY2F0aW9uKGVsZW1lbnQsIGZpbGUsIGxpbmUsIGNvbHVtbiwgY2hhcikge1xuICAgIGVsZW1lbnQuX19zdmVsdGVfbWV0YSA9IHtcbiAgICAgICAgbG9jOiB7IGZpbGUsIGxpbmUsIGNvbHVtbiwgY2hhciB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHJ1bihmbikge1xuICAgIHJldHVybiBmbigpO1xufVxuZnVuY3Rpb24gYmxhbmtfb2JqZWN0KCkge1xuICAgIHJldHVybiBPYmplY3QuY3JlYXRlKG51bGwpO1xufVxuZnVuY3Rpb24gcnVuX2FsbChmbnMpIHtcbiAgICBmbnMuZm9yRWFjaChydW4pO1xufVxuZnVuY3Rpb24gaXNfZnVuY3Rpb24odGhpbmcpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaW5nID09PSAnZnVuY3Rpb24nO1xufVxuZnVuY3Rpb24gc2FmZV9ub3RfZXF1YWwoYSwgYikge1xuICAgIHJldHVybiBhICE9IGEgPyBiID09IGIgOiBhICE9PSBiIHx8ICgoYSAmJiB0eXBlb2YgYSA9PT0gJ29iamVjdCcpIHx8IHR5cGVvZiBhID09PSAnZnVuY3Rpb24nKTtcbn1cbmxldCBzcmNfdXJsX2VxdWFsX2FuY2hvcjtcbmZ1bmN0aW9uIHNyY191cmxfZXF1YWwoZWxlbWVudF9zcmMsIHVybCkge1xuICAgIGlmICghc3JjX3VybF9lcXVhbF9hbmNob3IpIHtcbiAgICAgICAgc3JjX3VybF9lcXVhbF9hbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgfVxuICAgIHNyY191cmxfZXF1YWxfYW5jaG9yLmhyZWYgPSB1cmw7XG4gICAgcmV0dXJuIGVsZW1lbnRfc3JjID09PSBzcmNfdXJsX2VxdWFsX2FuY2hvci5ocmVmO1xufVxuZnVuY3Rpb24gbm90X2VxdWFsKGEsIGIpIHtcbiAgICByZXR1cm4gYSAhPSBhID8gYiA9PSBiIDogYSAhPT0gYjtcbn1cbmZ1bmN0aW9uIGlzX2VtcHR5KG9iaikge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA9PT0gMDtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX3N0b3JlKHN0b3JlLCBuYW1lKSB7XG4gICAgaWYgKHN0b3JlICE9IG51bGwgJiYgdHlwZW9mIHN0b3JlLnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke25hbWV9JyBpcyBub3QgYSBzdG9yZSB3aXRoIGEgJ3N1YnNjcmliZScgbWV0aG9kYCk7XG4gICAgfVxufVxuZnVuY3Rpb24gc3Vic2NyaWJlKHN0b3JlLCAuLi5jYWxsYmFja3MpIHtcbiAgICBpZiAoc3RvcmUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbm9vcDtcbiAgICB9XG4gICAgY29uc3QgdW5zdWIgPSBzdG9yZS5zdWJzY3JpYmUoLi4uY2FsbGJhY2tzKTtcbiAgICByZXR1cm4gdW5zdWIudW5zdWJzY3JpYmUgPyAoKSA9PiB1bnN1Yi51bnN1YnNjcmliZSgpIDogdW5zdWI7XG59XG5mdW5jdGlvbiBnZXRfc3RvcmVfdmFsdWUoc3RvcmUpIHtcbiAgICBsZXQgdmFsdWU7XG4gICAgc3Vic2NyaWJlKHN0b3JlLCBfID0+IHZhbHVlID0gXykoKTtcbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBjb21wb25lbnRfc3Vic2NyaWJlKGNvbXBvbmVudCwgc3RvcmUsIGNhbGxiYWNrKSB7XG4gICAgY29tcG9uZW50LiQkLm9uX2Rlc3Ryb3kucHVzaChzdWJzY3JpYmUoc3RvcmUsIGNhbGxiYWNrKSk7XG59XG5mdW5jdGlvbiBjcmVhdGVfc2xvdChkZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGZuKSB7XG4gICAgaWYgKGRlZmluaXRpb24pIHtcbiAgICAgICAgY29uc3Qgc2xvdF9jdHggPSBnZXRfc2xvdF9jb250ZXh0KGRlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZm4pO1xuICAgICAgICByZXR1cm4gZGVmaW5pdGlvblswXShzbG90X2N0eCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0X3Nsb3RfY29udGV4dChkZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGZuKSB7XG4gICAgcmV0dXJuIGRlZmluaXRpb25bMV0gJiYgZm5cbiAgICAgICAgPyBhc3NpZ24oJCRzY29wZS5jdHguc2xpY2UoKSwgZGVmaW5pdGlvblsxXShmbihjdHgpKSlcbiAgICAgICAgOiAkJHNjb3BlLmN0eDtcbn1cbmZ1bmN0aW9uIGdldF9zbG90X2NoYW5nZXMoZGVmaW5pdGlvbiwgJCRzY29wZSwgZGlydHksIGZuKSB7XG4gICAgaWYgKGRlZmluaXRpb25bMl0gJiYgZm4pIHtcbiAgICAgICAgY29uc3QgbGV0cyA9IGRlZmluaXRpb25bMl0oZm4oZGlydHkpKTtcbiAgICAgICAgaWYgKCQkc2NvcGUuZGlydHkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGxldHM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBsZXRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gW107XG4gICAgICAgICAgICBjb25zdCBsZW4gPSBNYXRoLm1heCgkJHNjb3BlLmRpcnR5Lmxlbmd0aCwgbGV0cy5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIG1lcmdlZFtpXSA9ICQkc2NvcGUuZGlydHlbaV0gfCBsZXRzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJCRzY29wZS5kaXJ0eSB8IGxldHM7XG4gICAgfVxuICAgIHJldHVybiAkJHNjb3BlLmRpcnR5O1xufVxuZnVuY3Rpb24gdXBkYXRlX3Nsb3RfYmFzZShzbG90LCBzbG90X2RlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgc2xvdF9jaGFuZ2VzLCBnZXRfc2xvdF9jb250ZXh0X2ZuKSB7XG4gICAgaWYgKHNsb3RfY2hhbmdlcykge1xuICAgICAgICBjb25zdCBzbG90X2NvbnRleHQgPSBnZXRfc2xvdF9jb250ZXh0KHNsb3RfZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBnZXRfc2xvdF9jb250ZXh0X2ZuKTtcbiAgICAgICAgc2xvdC5wKHNsb3RfY29udGV4dCwgc2xvdF9jaGFuZ2VzKTtcbiAgICB9XG59XG5mdW5jdGlvbiB1cGRhdGVfc2xvdChzbG90LCBzbG90X2RlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZGlydHksIGdldF9zbG90X2NoYW5nZXNfZm4sIGdldF9zbG90X2NvbnRleHRfZm4pIHtcbiAgICBjb25zdCBzbG90X2NoYW5nZXMgPSBnZXRfc2xvdF9jaGFuZ2VzKHNsb3RfZGVmaW5pdGlvbiwgJCRzY29wZSwgZGlydHksIGdldF9zbG90X2NoYW5nZXNfZm4pO1xuICAgIHVwZGF0ZV9zbG90X2Jhc2Uoc2xvdCwgc2xvdF9kZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIHNsb3RfY2hhbmdlcywgZ2V0X3Nsb3RfY29udGV4dF9mbik7XG59XG5mdW5jdGlvbiBnZXRfYWxsX2RpcnR5X2Zyb21fc2NvcGUoJCRzY29wZSkge1xuICAgIGlmICgkJHNjb3BlLmN0eC5sZW5ndGggPiAzMikge1xuICAgICAgICBjb25zdCBkaXJ0eSA9IFtdO1xuICAgICAgICBjb25zdCBsZW5ndGggPSAkJHNjb3BlLmN0eC5sZW5ndGggLyAzMjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZGlydHlbaV0gPSAtMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGlydHk7XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn1cbmZ1bmN0aW9uIGV4Y2x1ZGVfaW50ZXJuYWxfcHJvcHMocHJvcHMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gcHJvcHMpXG4gICAgICAgIGlmIChrWzBdICE9PSAnJCcpXG4gICAgICAgICAgICByZXN1bHRba10gPSBwcm9wc1trXTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY29tcHV0ZV9yZXN0X3Byb3BzKHByb3BzLCBrZXlzKSB7XG4gICAgY29uc3QgcmVzdCA9IHt9O1xuICAgIGtleXMgPSBuZXcgU2V0KGtleXMpO1xuICAgIGZvciAoY29uc3QgayBpbiBwcm9wcylcbiAgICAgICAgaWYgKCFrZXlzLmhhcyhrKSAmJiBrWzBdICE9PSAnJCcpXG4gICAgICAgICAgICByZXN0W2tdID0gcHJvcHNba107XG4gICAgcmV0dXJuIHJlc3Q7XG59XG5mdW5jdGlvbiBjb21wdXRlX3Nsb3RzKHNsb3RzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gc2xvdHMpIHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gb25jZShmbikge1xuICAgIGxldCByYW4gPSBmYWxzZTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgaWYgKHJhbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmFuID0gdHJ1ZTtcbiAgICAgICAgZm4uY2FsbCh0aGlzLCAuLi5hcmdzKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gbnVsbF90b19lbXB0eSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHNldF9zdG9yZV92YWx1ZShzdG9yZSwgcmV0LCB2YWx1ZSkge1xuICAgIHN0b3JlLnNldCh2YWx1ZSk7XG4gICAgcmV0dXJuIHJldDtcbn1cbmNvbnN0IGhhc19wcm9wID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG5mdW5jdGlvbiBhY3Rpb25fZGVzdHJveWVyKGFjdGlvbl9yZXN1bHQpIHtcbiAgICByZXR1cm4gYWN0aW9uX3Jlc3VsdCAmJiBpc19mdW5jdGlvbihhY3Rpb25fcmVzdWx0LmRlc3Ryb3kpID8gYWN0aW9uX3Jlc3VsdC5kZXN0cm95IDogbm9vcDtcbn1cblxuY29uc3QgaXNfY2xpZW50ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCc7XG5sZXQgbm93ID0gaXNfY2xpZW50XG4gICAgPyAoKSA9PiB3aW5kb3cucGVyZm9ybWFuY2Uubm93KClcbiAgICA6ICgpID0+IERhdGUubm93KCk7XG5sZXQgcmFmID0gaXNfY2xpZW50ID8gY2IgPT4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNiKSA6IG5vb3A7XG4vLyB1c2VkIGludGVybmFsbHkgZm9yIHRlc3RpbmdcbmZ1bmN0aW9uIHNldF9ub3coZm4pIHtcbiAgICBub3cgPSBmbjtcbn1cbmZ1bmN0aW9uIHNldF9yYWYoZm4pIHtcbiAgICByYWYgPSBmbjtcbn1cblxuY29uc3QgdGFza3MgPSBuZXcgU2V0KCk7XG5mdW5jdGlvbiBydW5fdGFza3Mobm93KSB7XG4gICAgdGFza3MuZm9yRWFjaCh0YXNrID0+IHtcbiAgICAgICAgaWYgKCF0YXNrLmMobm93KSkge1xuICAgICAgICAgICAgdGFza3MuZGVsZXRlKHRhc2spO1xuICAgICAgICAgICAgdGFzay5mKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAodGFza3Muc2l6ZSAhPT0gMClcbiAgICAgICAgcmFmKHJ1bl90YXNrcyk7XG59XG4vKipcbiAqIEZvciB0ZXN0aW5nIHB1cnBvc2VzIG9ubHkhXG4gKi9cbmZ1bmN0aW9uIGNsZWFyX2xvb3BzKCkge1xuICAgIHRhc2tzLmNsZWFyKCk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdGFzayB0aGF0IHJ1bnMgb24gZWFjaCByYWYgZnJhbWVcbiAqIHVudGlsIGl0IHJldHVybnMgYSBmYWxzeSB2YWx1ZSBvciBpcyBhYm9ydGVkXG4gKi9cbmZ1bmN0aW9uIGxvb3AoY2FsbGJhY2spIHtcbiAgICBsZXQgdGFzaztcbiAgICBpZiAodGFza3Muc2l6ZSA9PT0gMClcbiAgICAgICAgcmFmKHJ1bl90YXNrcyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJvbWlzZTogbmV3IFByb21pc2UoZnVsZmlsbCA9PiB7XG4gICAgICAgICAgICB0YXNrcy5hZGQodGFzayA9IHsgYzogY2FsbGJhY2ssIGY6IGZ1bGZpbGwgfSk7XG4gICAgICAgIH0pLFxuICAgICAgICBhYm9ydCgpIHtcbiAgICAgICAgICAgIHRhc2tzLmRlbGV0ZSh0YXNrKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8vIFRyYWNrIHdoaWNoIG5vZGVzIGFyZSBjbGFpbWVkIGR1cmluZyBoeWRyYXRpb24uIFVuY2xhaW1lZCBub2RlcyBjYW4gdGhlbiBiZSByZW1vdmVkIGZyb20gdGhlIERPTVxuLy8gYXQgdGhlIGVuZCBvZiBoeWRyYXRpb24gd2l0aG91dCB0b3VjaGluZyB0aGUgcmVtYWluaW5nIG5vZGVzLlxubGV0IGlzX2h5ZHJhdGluZyA9IGZhbHNlO1xuZnVuY3Rpb24gc3RhcnRfaHlkcmF0aW5nKCkge1xuICAgIGlzX2h5ZHJhdGluZyA9IHRydWU7XG59XG5mdW5jdGlvbiBlbmRfaHlkcmF0aW5nKCkge1xuICAgIGlzX2h5ZHJhdGluZyA9IGZhbHNlO1xufVxuZnVuY3Rpb24gdXBwZXJfYm91bmQobG93LCBoaWdoLCBrZXksIHZhbHVlKSB7XG4gICAgLy8gUmV0dXJuIGZpcnN0IGluZGV4IG9mIHZhbHVlIGxhcmdlciB0aGFuIGlucHV0IHZhbHVlIGluIHRoZSByYW5nZSBbbG93LCBoaWdoKVxuICAgIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgICAgIGNvbnN0IG1pZCA9IGxvdyArICgoaGlnaCAtIGxvdykgPj4gMSk7XG4gICAgICAgIGlmIChrZXkobWlkKSA8PSB2YWx1ZSkge1xuICAgICAgICAgICAgbG93ID0gbWlkICsgMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhpZ2ggPSBtaWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxvdztcbn1cbmZ1bmN0aW9uIGluaXRfaHlkcmF0ZSh0YXJnZXQpIHtcbiAgICBpZiAodGFyZ2V0Lmh5ZHJhdGVfaW5pdClcbiAgICAgICAgcmV0dXJuO1xuICAgIHRhcmdldC5oeWRyYXRlX2luaXQgPSB0cnVlO1xuICAgIC8vIFdlIGtub3cgdGhhdCBhbGwgY2hpbGRyZW4gaGF2ZSBjbGFpbV9vcmRlciB2YWx1ZXMgc2luY2UgdGhlIHVuY2xhaW1lZCBoYXZlIGJlZW4gZGV0YWNoZWQgaWYgdGFyZ2V0IGlzIG5vdCA8aGVhZD5cbiAgICBsZXQgY2hpbGRyZW4gPSB0YXJnZXQuY2hpbGROb2RlcztcbiAgICAvLyBJZiB0YXJnZXQgaXMgPGhlYWQ+LCB0aGVyZSBtYXkgYmUgY2hpbGRyZW4gd2l0aG91dCBjbGFpbV9vcmRlclxuICAgIGlmICh0YXJnZXQubm9kZU5hbWUgPT09ICdIRUFEJykge1xuICAgICAgICBjb25zdCBteUNoaWxkcmVuID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGlmIChub2RlLmNsYWltX29yZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBteUNoaWxkcmVuLnB1c2gobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGRyZW4gPSBteUNoaWxkcmVuO1xuICAgIH1cbiAgICAvKlxuICAgICogUmVvcmRlciBjbGFpbWVkIGNoaWxkcmVuIG9wdGltYWxseS5cbiAgICAqIFdlIGNhbiByZW9yZGVyIGNsYWltZWQgY2hpbGRyZW4gb3B0aW1hbGx5IGJ5IGZpbmRpbmcgdGhlIGxvbmdlc3Qgc3Vic2VxdWVuY2Ugb2ZcbiAgICAqIG5vZGVzIHRoYXQgYXJlIGFscmVhZHkgY2xhaW1lZCBpbiBvcmRlciBhbmQgb25seSBtb3ZpbmcgdGhlIHJlc3QuIFRoZSBsb25nZXN0XG4gICAgKiBzdWJzZXF1ZW5jZSBzdWJzZXF1ZW5jZSBvZiBub2RlcyB0aGF0IGFyZSBjbGFpbWVkIGluIG9yZGVyIGNhbiBiZSBmb3VuZCBieVxuICAgICogY29tcHV0aW5nIHRoZSBsb25nZXN0IGluY3JlYXNpbmcgc3Vic2VxdWVuY2Ugb2YgLmNsYWltX29yZGVyIHZhbHVlcy5cbiAgICAqXG4gICAgKiBUaGlzIGFsZ29yaXRobSBpcyBvcHRpbWFsIGluIGdlbmVyYXRpbmcgdGhlIGxlYXN0IGFtb3VudCBvZiByZW9yZGVyIG9wZXJhdGlvbnNcbiAgICAqIHBvc3NpYmxlLlxuICAgICpcbiAgICAqIFByb29mOlxuICAgICogV2Uga25vdyB0aGF0LCBnaXZlbiBhIHNldCBvZiByZW9yZGVyaW5nIG9wZXJhdGlvbnMsIHRoZSBub2RlcyB0aGF0IGRvIG5vdCBtb3ZlXG4gICAgKiBhbHdheXMgZm9ybSBhbiBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlLCBzaW5jZSB0aGV5IGRvIG5vdCBtb3ZlIGFtb25nIGVhY2ggb3RoZXJcbiAgICAqIG1lYW5pbmcgdGhhdCB0aGV5IG11c3QgYmUgYWxyZWFkeSBvcmRlcmVkIGFtb25nIGVhY2ggb3RoZXIuIFRodXMsIHRoZSBtYXhpbWFsXG4gICAgKiBzZXQgb2Ygbm9kZXMgdGhhdCBkbyBub3QgbW92ZSBmb3JtIGEgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlLlxuICAgICovXG4gICAgLy8gQ29tcHV0ZSBsb25nZXN0IGluY3JlYXNpbmcgc3Vic2VxdWVuY2VcbiAgICAvLyBtOiBzdWJzZXF1ZW5jZSBsZW5ndGggaiA9PiBpbmRleCBrIG9mIHNtYWxsZXN0IHZhbHVlIHRoYXQgZW5kcyBhbiBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlIG9mIGxlbmd0aCBqXG4gICAgY29uc3QgbSA9IG5ldyBJbnQzMkFycmF5KGNoaWxkcmVuLmxlbmd0aCArIDEpO1xuICAgIC8vIFByZWRlY2Vzc29yIGluZGljZXMgKyAxXG4gICAgY29uc3QgcCA9IG5ldyBJbnQzMkFycmF5KGNoaWxkcmVuLmxlbmd0aCk7XG4gICAgbVswXSA9IC0xO1xuICAgIGxldCBsb25nZXN0ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBjaGlsZHJlbltpXS5jbGFpbV9vcmRlcjtcbiAgICAgICAgLy8gRmluZCB0aGUgbGFyZ2VzdCBzdWJzZXF1ZW5jZSBsZW5ndGggc3VjaCB0aGF0IGl0IGVuZHMgaW4gYSB2YWx1ZSBsZXNzIHRoYW4gb3VyIGN1cnJlbnQgdmFsdWVcbiAgICAgICAgLy8gdXBwZXJfYm91bmQgcmV0dXJucyBmaXJzdCBncmVhdGVyIHZhbHVlLCBzbyB3ZSBzdWJ0cmFjdCBvbmVcbiAgICAgICAgLy8gd2l0aCBmYXN0IHBhdGggZm9yIHdoZW4gd2UgYXJlIG9uIHRoZSBjdXJyZW50IGxvbmdlc3Qgc3Vic2VxdWVuY2VcbiAgICAgICAgY29uc3Qgc2VxTGVuID0gKChsb25nZXN0ID4gMCAmJiBjaGlsZHJlblttW2xvbmdlc3RdXS5jbGFpbV9vcmRlciA8PSBjdXJyZW50KSA/IGxvbmdlc3QgKyAxIDogdXBwZXJfYm91bmQoMSwgbG9uZ2VzdCwgaWR4ID0+IGNoaWxkcmVuW21baWR4XV0uY2xhaW1fb3JkZXIsIGN1cnJlbnQpKSAtIDE7XG4gICAgICAgIHBbaV0gPSBtW3NlcUxlbl0gKyAxO1xuICAgICAgICBjb25zdCBuZXdMZW4gPSBzZXFMZW4gKyAxO1xuICAgICAgICAvLyBXZSBjYW4gZ3VhcmFudGVlIHRoYXQgY3VycmVudCBpcyB0aGUgc21hbGxlc3QgdmFsdWUuIE90aGVyd2lzZSwgd2Ugd291bGQgaGF2ZSBnZW5lcmF0ZWQgYSBsb25nZXIgc2VxdWVuY2UuXG4gICAgICAgIG1bbmV3TGVuXSA9IGk7XG4gICAgICAgIGxvbmdlc3QgPSBNYXRoLm1heChuZXdMZW4sIGxvbmdlc3QpO1xuICAgIH1cbiAgICAvLyBUaGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlIG9mIG5vZGVzIChpbml0aWFsbHkgcmV2ZXJzZWQpXG4gICAgY29uc3QgbGlzID0gW107XG4gICAgLy8gVGhlIHJlc3Qgb2YgdGhlIG5vZGVzLCBub2RlcyB0aGF0IHdpbGwgYmUgbW92ZWRcbiAgICBjb25zdCB0b01vdmUgPSBbXTtcbiAgICBsZXQgbGFzdCA9IGNoaWxkcmVuLmxlbmd0aCAtIDE7XG4gICAgZm9yIChsZXQgY3VyID0gbVtsb25nZXN0XSArIDE7IGN1ciAhPSAwOyBjdXIgPSBwW2N1ciAtIDFdKSB7XG4gICAgICAgIGxpcy5wdXNoKGNoaWxkcmVuW2N1ciAtIDFdKTtcbiAgICAgICAgZm9yICg7IGxhc3QgPj0gY3VyOyBsYXN0LS0pIHtcbiAgICAgICAgICAgIHRvTW92ZS5wdXNoKGNoaWxkcmVuW2xhc3RdKTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0LS07XG4gICAgfVxuICAgIGZvciAoOyBsYXN0ID49IDA7IGxhc3QtLSkge1xuICAgICAgICB0b01vdmUucHVzaChjaGlsZHJlbltsYXN0XSk7XG4gICAgfVxuICAgIGxpcy5yZXZlcnNlKCk7XG4gICAgLy8gV2Ugc29ydCB0aGUgbm9kZXMgYmVpbmcgbW92ZWQgdG8gZ3VhcmFudGVlIHRoYXQgdGhlaXIgaW5zZXJ0aW9uIG9yZGVyIG1hdGNoZXMgdGhlIGNsYWltIG9yZGVyXG4gICAgdG9Nb3ZlLnNvcnQoKGEsIGIpID0+IGEuY2xhaW1fb3JkZXIgLSBiLmNsYWltX29yZGVyKTtcbiAgICAvLyBGaW5hbGx5LCB3ZSBtb3ZlIHRoZSBub2Rlc1xuICAgIGZvciAobGV0IGkgPSAwLCBqID0gMDsgaSA8IHRvTW92ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICB3aGlsZSAoaiA8IGxpcy5sZW5ndGggJiYgdG9Nb3ZlW2ldLmNsYWltX29yZGVyID49IGxpc1tqXS5jbGFpbV9vcmRlcikge1xuICAgICAgICAgICAgaisrO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFuY2hvciA9IGogPCBsaXMubGVuZ3RoID8gbGlzW2pdIDogbnVsbDtcbiAgICAgICAgdGFyZ2V0Lmluc2VydEJlZm9yZSh0b01vdmVbaV0sIGFuY2hvcik7XG4gICAgfVxufVxuZnVuY3Rpb24gYXBwZW5kKHRhcmdldCwgbm9kZSkge1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChub2RlKTtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9zdHlsZXModGFyZ2V0LCBzdHlsZV9zaGVldF9pZCwgc3R5bGVzKSB7XG4gICAgY29uc3QgYXBwZW5kX3N0eWxlc190byA9IGdldF9yb290X2Zvcl9zdHlsZSh0YXJnZXQpO1xuICAgIGlmICghYXBwZW5kX3N0eWxlc190by5nZXRFbGVtZW50QnlJZChzdHlsZV9zaGVldF9pZCkpIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBlbGVtZW50KCdzdHlsZScpO1xuICAgICAgICBzdHlsZS5pZCA9IHN0eWxlX3NoZWV0X2lkO1xuICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IHN0eWxlcztcbiAgICAgICAgYXBwZW5kX3N0eWxlc2hlZXQoYXBwZW5kX3N0eWxlc190bywgc3R5bGUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldF9yb290X2Zvcl9zdHlsZShub2RlKSB7XG4gICAgaWYgKCFub2RlKVxuICAgICAgICByZXR1cm4gZG9jdW1lbnQ7XG4gICAgY29uc3Qgcm9vdCA9IG5vZGUuZ2V0Um9vdE5vZGUgPyBub2RlLmdldFJvb3ROb2RlKCkgOiBub2RlLm93bmVyRG9jdW1lbnQ7XG4gICAgaWYgKHJvb3QgJiYgcm9vdC5ob3N0KSB7XG4gICAgICAgIHJldHVybiByb290O1xuICAgIH1cbiAgICByZXR1cm4gbm9kZS5vd25lckRvY3VtZW50O1xufVxuZnVuY3Rpb24gYXBwZW5kX2VtcHR5X3N0eWxlc2hlZXQobm9kZSkge1xuICAgIGNvbnN0IHN0eWxlX2VsZW1lbnQgPSBlbGVtZW50KCdzdHlsZScpO1xuICAgIGFwcGVuZF9zdHlsZXNoZWV0KGdldF9yb290X2Zvcl9zdHlsZShub2RlKSwgc3R5bGVfZWxlbWVudCk7XG4gICAgcmV0dXJuIHN0eWxlX2VsZW1lbnQuc2hlZXQ7XG59XG5mdW5jdGlvbiBhcHBlbmRfc3R5bGVzaGVldChub2RlLCBzdHlsZSkge1xuICAgIGFwcGVuZChub2RlLmhlYWQgfHwgbm9kZSwgc3R5bGUpO1xufVxuZnVuY3Rpb24gYXBwZW5kX2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUpIHtcbiAgICBpZiAoaXNfaHlkcmF0aW5nKSB7XG4gICAgICAgIGluaXRfaHlkcmF0ZSh0YXJnZXQpO1xuICAgICAgICBpZiAoKHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkID09PSB1bmRlZmluZWQpIHx8ICgodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgIT09IG51bGwpICYmICh0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZC5wYXJlbnRFbGVtZW50ICE9PSB0YXJnZXQpKSkge1xuICAgICAgICAgICAgdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgPSB0YXJnZXQuZmlyc3RDaGlsZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBTa2lwIG5vZGVzIG9mIHVuZGVmaW5lZCBvcmRlcmluZ1xuICAgICAgICB3aGlsZSAoKHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkICE9PSBudWxsKSAmJiAodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQuY2xhaW1fb3JkZXIgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICAgIHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkID0gdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUgIT09IHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkKSB7XG4gICAgICAgICAgICAvLyBXZSBvbmx5IGluc2VydCBpZiB0aGUgb3JkZXJpbmcgb2YgdGhpcyBub2RlIHNob3VsZCBiZSBtb2RpZmllZCBvciB0aGUgcGFyZW50IG5vZGUgaXMgbm90IHRhcmdldFxuICAgICAgICAgICAgaWYgKG5vZGUuY2xhaW1fb3JkZXIgIT09IHVuZGVmaW5lZCB8fCBub2RlLnBhcmVudE5vZGUgIT09IHRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRhcmdldC5pbnNlcnRCZWZvcmUobm9kZSwgdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG5vZGUucGFyZW50Tm9kZSAhPT0gdGFyZ2V0IHx8IG5vZGUubmV4dFNpYmxpbmcgIT09IG51bGwpIHtcbiAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGluc2VydCh0YXJnZXQsIG5vZGUsIGFuY2hvcikge1xuICAgIHRhcmdldC5pbnNlcnRCZWZvcmUobm9kZSwgYW5jaG9yIHx8IG51bGwpO1xufVxuZnVuY3Rpb24gaW5zZXJ0X2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUsIGFuY2hvcikge1xuICAgIGlmIChpc19oeWRyYXRpbmcgJiYgIWFuY2hvcikge1xuICAgICAgICBhcHBlbmRfaHlkcmF0aW9uKHRhcmdldCwgbm9kZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG5vZGUucGFyZW50Tm9kZSAhPT0gdGFyZ2V0IHx8IG5vZGUubmV4dFNpYmxpbmcgIT0gYW5jaG9yKSB7XG4gICAgICAgIHRhcmdldC5pbnNlcnRCZWZvcmUobm9kZSwgYW5jaG9yIHx8IG51bGwpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRldGFjaChub2RlKSB7XG4gICAgbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xufVxuZnVuY3Rpb24gZGVzdHJveV9lYWNoKGl0ZXJhdGlvbnMsIGRldGFjaGluZykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlcmF0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoaXRlcmF0aW9uc1tpXSlcbiAgICAgICAgICAgIGl0ZXJhdGlvbnNbaV0uZChkZXRhY2hpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVsZW1lbnQobmFtZSkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpO1xufVxuZnVuY3Rpb24gZWxlbWVudF9pcyhuYW1lLCBpcykge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUsIHsgaXMgfSk7XG59XG5mdW5jdGlvbiBvYmplY3Rfd2l0aG91dF9wcm9wZXJ0aWVzKG9iaiwgZXhjbHVkZSkge1xuICAgIGNvbnN0IHRhcmdldCA9IHt9O1xuICAgIGZvciAoY29uc3QgayBpbiBvYmopIHtcbiAgICAgICAgaWYgKGhhc19wcm9wKG9iaiwgaylcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICYmIGV4Y2x1ZGUuaW5kZXhPZihrKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHRhcmdldFtrXSA9IG9ialtrXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gc3ZnX2VsZW1lbnQobmFtZSkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgbmFtZSk7XG59XG5mdW5jdGlvbiB0ZXh0KGRhdGEpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZGF0YSk7XG59XG5mdW5jdGlvbiBzcGFjZSgpIHtcbiAgICByZXR1cm4gdGV4dCgnICcpO1xufVxuZnVuY3Rpb24gZW1wdHkoKSB7XG4gICAgcmV0dXJuIHRleHQoJycpO1xufVxuZnVuY3Rpb24gbGlzdGVuKG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICByZXR1cm4gKCkgPT4gbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHByZXZlbnRfZGVmYXVsdChmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHN0b3BfcHJvcGFnYXRpb24oZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gc2VsZihmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzKVxuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRydXN0ZWQoZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKGV2ZW50LmlzVHJ1c3RlZClcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH07XG59XG5mdW5jdGlvbiBhdHRyKG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbClcbiAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbiAgICBlbHNlIGlmIChub2RlLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUpICE9PSB2YWx1ZSlcbiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiBzZXRfYXR0cmlidXRlcyhub2RlLCBhdHRyaWJ1dGVzKSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IGRlc2NyaXB0b3JzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobm9kZS5fX3Byb3RvX18pO1xuICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZXNba2V5XSA9PSBudWxsKSB7XG4gICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ3N0eWxlJykge1xuICAgICAgICAgICAgbm9kZS5zdHlsZS5jc3NUZXh0ID0gYXR0cmlidXRlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ19fdmFsdWUnKSB7XG4gICAgICAgICAgICBub2RlLnZhbHVlID0gbm9kZVtrZXldID0gYXR0cmlidXRlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlc2NyaXB0b3JzW2tleV0gJiYgZGVzY3JpcHRvcnNba2V5XS5zZXQpIHtcbiAgICAgICAgICAgIG5vZGVba2V5XSA9IGF0dHJpYnV0ZXNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF0dHIobm9kZSwga2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gc2V0X3N2Z19hdHRyaWJ1dGVzKG5vZGUsIGF0dHJpYnV0ZXMpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGF0dHIobm9kZSwga2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNldF9jdXN0b21fZWxlbWVudF9kYXRhKG5vZGUsIHByb3AsIHZhbHVlKSB7XG4gICAgaWYgKHByb3AgaW4gbm9kZSkge1xuICAgICAgICBub2RlW3Byb3BdID0gdHlwZW9mIG5vZGVbcHJvcF0gPT09ICdib29sZWFuJyAmJiB2YWx1ZSA9PT0gJycgPyB0cnVlIDogdmFsdWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhdHRyKG5vZGUsIHByb3AsIHZhbHVlKTtcbiAgICB9XG59XG5mdW5jdGlvbiB4bGlua19hdHRyKG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICBub2RlLnNldEF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgYXR0cmlidXRlLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiBnZXRfYmluZGluZ19ncm91cF92YWx1ZShncm91cCwgX192YWx1ZSwgY2hlY2tlZCkge1xuICAgIGNvbnN0IHZhbHVlID0gbmV3IFNldCgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXAubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKGdyb3VwW2ldLmNoZWNrZWQpXG4gICAgICAgICAgICB2YWx1ZS5hZGQoZ3JvdXBbaV0uX192YWx1ZSk7XG4gICAgfVxuICAgIGlmICghY2hlY2tlZCkge1xuICAgICAgICB2YWx1ZS5kZWxldGUoX192YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBBcnJheS5mcm9tKHZhbHVlKTtcbn1cbmZ1bmN0aW9uIHRvX251bWJlcih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gJycgPyBudWxsIDogK3ZhbHVlO1xufVxuZnVuY3Rpb24gdGltZV9yYW5nZXNfdG9fYXJyYXkocmFuZ2VzKSB7XG4gICAgY29uc3QgYXJyYXkgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBhcnJheS5wdXNoKHsgc3RhcnQ6IHJhbmdlcy5zdGFydChpKSwgZW5kOiByYW5nZXMuZW5kKGkpIH0pO1xuICAgIH1cbiAgICByZXR1cm4gYXJyYXk7XG59XG5mdW5jdGlvbiBjaGlsZHJlbihlbGVtZW50KSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oZWxlbWVudC5jaGlsZE5vZGVzKTtcbn1cbmZ1bmN0aW9uIGluaXRfY2xhaW1faW5mbyhub2Rlcykge1xuICAgIGlmIChub2Rlcy5jbGFpbV9pbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbm9kZXMuY2xhaW1faW5mbyA9IHsgbGFzdF9pbmRleDogMCwgdG90YWxfY2xhaW1lZDogMCB9O1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNsYWltX25vZGUobm9kZXMsIHByZWRpY2F0ZSwgcHJvY2Vzc05vZGUsIGNyZWF0ZU5vZGUsIGRvbnRVcGRhdGVMYXN0SW5kZXggPSBmYWxzZSkge1xuICAgIC8vIFRyeSB0byBmaW5kIG5vZGVzIGluIGFuIG9yZGVyIHN1Y2ggdGhhdCB3ZSBsZW5ndGhlbiB0aGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlXG4gICAgaW5pdF9jbGFpbV9pbmZvKG5vZGVzKTtcbiAgICBjb25zdCByZXN1bHROb2RlID0gKCgpID0+IHtcbiAgICAgICAgLy8gV2UgZmlyc3QgdHJ5IHRvIGZpbmQgYW4gZWxlbWVudCBhZnRlciB0aGUgcHJldmlvdXMgb25lXG4gICAgICAgIGZvciAobGV0IGkgPSBub2Rlcy5jbGFpbV9pbmZvLmxhc3RfaW5kZXg7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZShub2RlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gcHJvY2Vzc05vZGUobm9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlcGxhY2VtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXNbaV0gPSByZXBsYWNlbWVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFkb250VXBkYXRlTGFzdEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLmNsYWltX2luZm8ubGFzdF9pbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE90aGVyd2lzZSwgd2UgdHJ5IHRvIGZpbmQgb25lIGJlZm9yZVxuICAgICAgICAvLyBXZSBpdGVyYXRlIGluIHJldmVyc2Ugc28gdGhhdCB3ZSBkb24ndCBnbyB0b28gZmFyIGJhY2tcbiAgICAgICAgZm9yIChsZXQgaSA9IG5vZGVzLmNsYWltX2luZm8ubGFzdF9pbmRleCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlKG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBwcm9jZXNzTm9kZShub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVwbGFjZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBub2Rlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBub2Rlc1tpXSA9IHJlcGxhY2VtZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWRvbnRVcGRhdGVMYXN0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4ID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVwbGFjZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB3ZSBzcGxpY2VkIGJlZm9yZSB0aGUgbGFzdF9pbmRleCwgd2UgZGVjcmVhc2UgaXRcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4LS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIElmIHdlIGNhbid0IGZpbmQgYW55IG1hdGNoaW5nIG5vZGUsIHdlIGNyZWF0ZSBhIG5ldyBvbmVcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU5vZGUoKTtcbiAgICB9KSgpO1xuICAgIHJlc3VsdE5vZGUuY2xhaW1fb3JkZXIgPSBub2Rlcy5jbGFpbV9pbmZvLnRvdGFsX2NsYWltZWQ7XG4gICAgbm9kZXMuY2xhaW1faW5mby50b3RhbF9jbGFpbWVkICs9IDE7XG4gICAgcmV0dXJuIHJlc3VsdE5vZGU7XG59XG5mdW5jdGlvbiBjbGFpbV9lbGVtZW50X2Jhc2Uobm9kZXMsIG5hbWUsIGF0dHJpYnV0ZXMsIGNyZWF0ZV9lbGVtZW50KSB7XG4gICAgcmV0dXJuIGNsYWltX25vZGUobm9kZXMsIChub2RlKSA9PiBub2RlLm5vZGVOYW1lID09PSBuYW1lLCAobm9kZSkgPT4ge1xuICAgICAgICBjb25zdCByZW1vdmUgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBub2RlLmF0dHJpYnV0ZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IG5vZGUuYXR0cmlidXRlc1tqXTtcbiAgICAgICAgICAgIGlmICghYXR0cmlidXRlc1thdHRyaWJ1dGUubmFtZV0pIHtcbiAgICAgICAgICAgICAgICByZW1vdmUucHVzaChhdHRyaWJ1dGUubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVtb3ZlLmZvckVhY2godiA9PiBub2RlLnJlbW92ZUF0dHJpYnV0ZSh2KSk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSwgKCkgPT4gY3JlYXRlX2VsZW1lbnQobmFtZSkpO1xufVxuZnVuY3Rpb24gY2xhaW1fZWxlbWVudChub2RlcywgbmFtZSwgYXR0cmlidXRlcykge1xuICAgIHJldHVybiBjbGFpbV9lbGVtZW50X2Jhc2Uobm9kZXMsIG5hbWUsIGF0dHJpYnV0ZXMsIGVsZW1lbnQpO1xufVxuZnVuY3Rpb24gY2xhaW1fc3ZnX2VsZW1lbnQobm9kZXMsIG5hbWUsIGF0dHJpYnV0ZXMpIHtcbiAgICByZXR1cm4gY2xhaW1fZWxlbWVudF9iYXNlKG5vZGVzLCBuYW1lLCBhdHRyaWJ1dGVzLCBzdmdfZWxlbWVudCk7XG59XG5mdW5jdGlvbiBjbGFpbV90ZXh0KG5vZGVzLCBkYXRhKSB7XG4gICAgcmV0dXJuIGNsYWltX25vZGUobm9kZXMsIChub2RlKSA9PiBub2RlLm5vZGVUeXBlID09PSAzLCAobm9kZSkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhU3RyID0gJycgKyBkYXRhO1xuICAgICAgICBpZiAobm9kZS5kYXRhLnN0YXJ0c1dpdGgoZGF0YVN0cikpIHtcbiAgICAgICAgICAgIGlmIChub2RlLmRhdGEubGVuZ3RoICE9PSBkYXRhU3RyLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLnNwbGl0VGV4dChkYXRhU3RyLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBub2RlLmRhdGEgPSBkYXRhU3RyO1xuICAgICAgICB9XG4gICAgfSwgKCkgPT4gdGV4dChkYXRhKSwgdHJ1ZSAvLyBUZXh0IG5vZGVzIHNob3VsZCBub3QgdXBkYXRlIGxhc3QgaW5kZXggc2luY2UgaXQgaXMgbGlrZWx5IG5vdCB3b3J0aCBpdCB0byBlbGltaW5hdGUgYW4gaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSBvZiBhY3R1YWwgZWxlbWVudHNcbiAgICApO1xufVxuZnVuY3Rpb24gY2xhaW1fc3BhY2Uobm9kZXMpIHtcbiAgICByZXR1cm4gY2xhaW1fdGV4dChub2RlcywgJyAnKTtcbn1cbmZ1bmN0aW9uIGZpbmRfY29tbWVudChub2RlcywgdGV4dCwgc3RhcnQpIHtcbiAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBub2Rlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07XG4gICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSA4IC8qIGNvbW1lbnQgbm9kZSAqLyAmJiBub2RlLnRleHRDb250ZW50LnRyaW0oKSA9PT0gdGV4dCkge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vZGVzLmxlbmd0aDtcbn1cbmZ1bmN0aW9uIGNsYWltX2h0bWxfdGFnKG5vZGVzLCBpc19zdmcpIHtcbiAgICAvLyBmaW5kIGh0bWwgb3BlbmluZyB0YWdcbiAgICBjb25zdCBzdGFydF9pbmRleCA9IGZpbmRfY29tbWVudChub2RlcywgJ0hUTUxfVEFHX1NUQVJUJywgMCk7XG4gICAgY29uc3QgZW5kX2luZGV4ID0gZmluZF9jb21tZW50KG5vZGVzLCAnSFRNTF9UQUdfRU5EJywgc3RhcnRfaW5kZXgpO1xuICAgIGlmIChzdGFydF9pbmRleCA9PT0gZW5kX2luZGV4KSB7XG4gICAgICAgIHJldHVybiBuZXcgSHRtbFRhZ0h5ZHJhdGlvbih1bmRlZmluZWQsIGlzX3N2Zyk7XG4gICAgfVxuICAgIGluaXRfY2xhaW1faW5mbyhub2Rlcyk7XG4gICAgY29uc3QgaHRtbF90YWdfbm9kZXMgPSBub2Rlcy5zcGxpY2Uoc3RhcnRfaW5kZXgsIGVuZF9pbmRleCAtIHN0YXJ0X2luZGV4ICsgMSk7XG4gICAgZGV0YWNoKGh0bWxfdGFnX25vZGVzWzBdKTtcbiAgICBkZXRhY2goaHRtbF90YWdfbm9kZXNbaHRtbF90YWdfbm9kZXMubGVuZ3RoIC0gMV0pO1xuICAgIGNvbnN0IGNsYWltZWRfbm9kZXMgPSBodG1sX3RhZ19ub2Rlcy5zbGljZSgxLCBodG1sX3RhZ19ub2Rlcy5sZW5ndGggLSAxKTtcbiAgICBmb3IgKGNvbnN0IG4gb2YgY2xhaW1lZF9ub2Rlcykge1xuICAgICAgICBuLmNsYWltX29yZGVyID0gbm9kZXMuY2xhaW1faW5mby50b3RhbF9jbGFpbWVkO1xuICAgICAgICBub2Rlcy5jbGFpbV9pbmZvLnRvdGFsX2NsYWltZWQgKz0gMTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBIdG1sVGFnSHlkcmF0aW9uKGNsYWltZWRfbm9kZXMsIGlzX3N2Zyk7XG59XG5mdW5jdGlvbiBzZXRfZGF0YSh0ZXh0LCBkYXRhKSB7XG4gICAgZGF0YSA9ICcnICsgZGF0YTtcbiAgICBpZiAodGV4dC53aG9sZVRleHQgIT09IGRhdGEpXG4gICAgICAgIHRleHQuZGF0YSA9IGRhdGE7XG59XG5mdW5jdGlvbiBzZXRfaW5wdXRfdmFsdWUoaW5wdXQsIHZhbHVlKSB7XG4gICAgaW5wdXQudmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHNldF9pbnB1dF90eXBlKGlucHV0LCB0eXBlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaW5wdXQudHlwZSA9IHR5cGU7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRfc3R5bGUobm9kZSwga2V5LCB2YWx1ZSwgaW1wb3J0YW50KSB7XG4gICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIG5vZGUuc3R5bGUucmVtb3ZlUHJvcGVydHkoa2V5KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG5vZGUuc3R5bGUuc2V0UHJvcGVydHkoa2V5LCB2YWx1ZSwgaW1wb3J0YW50ID8gJ2ltcG9ydGFudCcgOiAnJyk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2VsZWN0X29wdGlvbihzZWxlY3QsIHZhbHVlKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3Qub3B0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3Qub3B0aW9uc1tpXTtcbiAgICAgICAgaWYgKG9wdGlvbi5fX3ZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxlY3Quc2VsZWN0ZWRJbmRleCA9IC0xOyAvLyBubyBvcHRpb24gc2hvdWxkIGJlIHNlbGVjdGVkXG59XG5mdW5jdGlvbiBzZWxlY3Rfb3B0aW9ucyhzZWxlY3QsIHZhbHVlKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3Qub3B0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3Qub3B0aW9uc1tpXTtcbiAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gfnZhbHVlLmluZGV4T2Yob3B0aW9uLl9fdmFsdWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNlbGVjdF92YWx1ZShzZWxlY3QpIHtcbiAgICBjb25zdCBzZWxlY3RlZF9vcHRpb24gPSBzZWxlY3QucXVlcnlTZWxlY3RvcignOmNoZWNrZWQnKSB8fCBzZWxlY3Qub3B0aW9uc1swXTtcbiAgICByZXR1cm4gc2VsZWN0ZWRfb3B0aW9uICYmIHNlbGVjdGVkX29wdGlvbi5fX3ZhbHVlO1xufVxuZnVuY3Rpb24gc2VsZWN0X211bHRpcGxlX3ZhbHVlKHNlbGVjdCkge1xuICAgIHJldHVybiBbXS5tYXAuY2FsbChzZWxlY3QucXVlcnlTZWxlY3RvckFsbCgnOmNoZWNrZWQnKSwgb3B0aW9uID0+IG9wdGlvbi5fX3ZhbHVlKTtcbn1cbi8vIHVuZm9ydHVuYXRlbHkgdGhpcyBjYW4ndCBiZSBhIGNvbnN0YW50IGFzIHRoYXQgd291bGRuJ3QgYmUgdHJlZS1zaGFrZWFibGVcbi8vIHNvIHdlIGNhY2hlIHRoZSByZXN1bHQgaW5zdGVhZFxubGV0IGNyb3Nzb3JpZ2luO1xuZnVuY3Rpb24gaXNfY3Jvc3NvcmlnaW4oKSB7XG4gICAgaWYgKGNyb3Nzb3JpZ2luID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY3Jvc3NvcmlnaW4gPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgdm9pZCB3aW5kb3cucGFyZW50LmRvY3VtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY3Jvc3NvcmlnaW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjcm9zc29yaWdpbjtcbn1cbmZ1bmN0aW9uIGFkZF9yZXNpemVfbGlzdGVuZXIobm9kZSwgZm4pIHtcbiAgICBjb25zdCBjb21wdXRlZF9zdHlsZSA9IGdldENvbXB1dGVkU3R5bGUobm9kZSk7XG4gICAgaWYgKGNvbXB1dGVkX3N0eWxlLnBvc2l0aW9uID09PSAnc3RhdGljJykge1xuICAgICAgICBub2RlLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICB9XG4gICAgY29uc3QgaWZyYW1lID0gZWxlbWVudCgnaWZyYW1lJyk7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTogYmxvY2s7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyAnICtcbiAgICAgICAgJ292ZXJmbG93OiBoaWRkZW47IGJvcmRlcjogMDsgb3BhY2l0eTogMDsgcG9pbnRlci1ldmVudHM6IG5vbmU7IHotaW5kZXg6IC0xOycpO1xuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICBpZnJhbWUudGFiSW5kZXggPSAtMTtcbiAgICBjb25zdCBjcm9zc29yaWdpbiA9IGlzX2Nyb3Nzb3JpZ2luKCk7XG4gICAgbGV0IHVuc3Vic2NyaWJlO1xuICAgIGlmIChjcm9zc29yaWdpbikge1xuICAgICAgICBpZnJhbWUuc3JjID0gXCJkYXRhOnRleHQvaHRtbCw8c2NyaXB0Pm9ucmVzaXplPWZ1bmN0aW9uKCl7cGFyZW50LnBvc3RNZXNzYWdlKDAsJyonKX08L3NjcmlwdD5cIjtcbiAgICAgICAgdW5zdWJzY3JpYmUgPSBsaXN0ZW4od2luZG93LCAnbWVzc2FnZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gaWZyYW1lLmNvbnRlbnRXaW5kb3cpXG4gICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZnJhbWUuc3JjID0gJ2Fib3V0OmJsYW5rJztcbiAgICAgICAgaWZyYW1lLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlID0gbGlzdGVuKGlmcmFtZS5jb250ZW50V2luZG93LCAncmVzaXplJywgZm4pO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBhcHBlbmQobm9kZSwgaWZyYW1lKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAoY3Jvc3NvcmlnaW4pIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodW5zdWJzY3JpYmUgJiYgaWZyYW1lLmNvbnRlbnRXaW5kb3cpIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZGV0YWNoKGlmcmFtZSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRvZ2dsZV9jbGFzcyhlbGVtZW50LCBuYW1lLCB0b2dnbGUpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdFt0b2dnbGUgPyAnYWRkJyA6ICdyZW1vdmUnXShuYW1lKTtcbn1cbmZ1bmN0aW9uIGN1c3RvbV9ldmVudCh0eXBlLCBkZXRhaWwsIHsgYnViYmxlcyA9IGZhbHNlLCBjYW5jZWxhYmxlID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgY29uc3QgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIGJ1YmJsZXMsIGNhbmNlbGFibGUsIGRldGFpbCk7XG4gICAgcmV0dXJuIGU7XG59XG5mdW5jdGlvbiBxdWVyeV9zZWxlY3Rvcl9hbGwoc2VsZWN0b3IsIHBhcmVudCA9IGRvY3VtZW50LmJvZHkpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShwYXJlbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xufVxuY2xhc3MgSHRtbFRhZyB7XG4gICAgY29uc3RydWN0b3IoaXNfc3ZnID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5pc19zdmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc19zdmcgPSBpc19zdmc7XG4gICAgICAgIHRoaXMuZSA9IHRoaXMubiA9IG51bGw7XG4gICAgfVxuICAgIGMoaHRtbCkge1xuICAgICAgICB0aGlzLmgoaHRtbCk7XG4gICAgfVxuICAgIG0oaHRtbCwgdGFyZ2V0LCBhbmNob3IgPSBudWxsKSB7XG4gICAgICAgIGlmICghdGhpcy5lKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc19zdmcpXG4gICAgICAgICAgICAgICAgdGhpcy5lID0gc3ZnX2VsZW1lbnQodGFyZ2V0Lm5vZGVOYW1lKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLmUgPSBlbGVtZW50KHRhcmdldC5ub2RlTmFtZSk7XG4gICAgICAgICAgICB0aGlzLnQgPSB0YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmMoaHRtbCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pKGFuY2hvcik7XG4gICAgfVxuICAgIGgoaHRtbCkge1xuICAgICAgICB0aGlzLmUuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgdGhpcy5uID0gQXJyYXkuZnJvbSh0aGlzLmUuY2hpbGROb2Rlcyk7XG4gICAgfVxuICAgIGkoYW5jaG9yKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5uLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBpbnNlcnQodGhpcy50LCB0aGlzLm5baV0sIGFuY2hvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcChodG1sKSB7XG4gICAgICAgIHRoaXMuZCgpO1xuICAgICAgICB0aGlzLmgoaHRtbCk7XG4gICAgICAgIHRoaXMuaSh0aGlzLmEpO1xuICAgIH1cbiAgICBkKCkge1xuICAgICAgICB0aGlzLm4uZm9yRWFjaChkZXRhY2gpO1xuICAgIH1cbn1cbmNsYXNzIEh0bWxUYWdIeWRyYXRpb24gZXh0ZW5kcyBIdG1sVGFnIHtcbiAgICBjb25zdHJ1Y3RvcihjbGFpbWVkX25vZGVzLCBpc19zdmcgPSBmYWxzZSkge1xuICAgICAgICBzdXBlcihpc19zdmcpO1xuICAgICAgICB0aGlzLmUgPSB0aGlzLm4gPSBudWxsO1xuICAgICAgICB0aGlzLmwgPSBjbGFpbWVkX25vZGVzO1xuICAgIH1cbiAgICBjKGh0bWwpIHtcbiAgICAgICAgaWYgKHRoaXMubCkge1xuICAgICAgICAgICAgdGhpcy5uID0gdGhpcy5sO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3VwZXIuYyhodG1sKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpKGFuY2hvcikge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubi5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgaW5zZXJ0X2h5ZHJhdGlvbih0aGlzLnQsIHRoaXMubltpXSwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGF0dHJpYnV0ZV90b19vYmplY3QoYXR0cmlidXRlcykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgcmVzdWx0W2F0dHJpYnV0ZS5uYW1lXSA9IGF0dHJpYnV0ZS52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGdldF9jdXN0b21fZWxlbWVudHNfc2xvdHMoZWxlbWVudCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGVsZW1lbnQuY2hpbGROb2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgIHJlc3VsdFtub2RlLnNsb3QgfHwgJ2RlZmF1bHQnXSA9IHRydWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLy8gd2UgbmVlZCB0byBzdG9yZSB0aGUgaW5mb3JtYXRpb24gZm9yIG11bHRpcGxlIGRvY3VtZW50cyBiZWNhdXNlIGEgU3ZlbHRlIGFwcGxpY2F0aW9uIGNvdWxkIGFsc28gY29udGFpbiBpZnJhbWVzXG4vLyBodHRwczovL2dpdGh1Yi5jb20vc3ZlbHRlanMvc3ZlbHRlL2lzc3Vlcy8zNjI0XG5jb25zdCBtYW5hZ2VkX3N0eWxlcyA9IG5ldyBNYXAoKTtcbmxldCBhY3RpdmUgPSAwO1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL2Rhcmtza3lhcHAvc3RyaW5nLWhhc2gvYmxvYi9tYXN0ZXIvaW5kZXguanNcbmZ1bmN0aW9uIGhhc2goc3RyKSB7XG4gICAgbGV0IGhhc2ggPSA1MzgxO1xuICAgIGxldCBpID0gc3RyLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKVxuICAgICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgXiBzdHIuY2hhckNvZGVBdChpKTtcbiAgICByZXR1cm4gaGFzaCA+Pj4gMDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9zdHlsZV9pbmZvcm1hdGlvbihkb2MsIG5vZGUpIHtcbiAgICBjb25zdCBpbmZvID0geyBzdHlsZXNoZWV0OiBhcHBlbmRfZW1wdHlfc3R5bGVzaGVldChub2RlKSwgcnVsZXM6IHt9IH07XG4gICAgbWFuYWdlZF9zdHlsZXMuc2V0KGRvYywgaW5mbyk7XG4gICAgcmV0dXJuIGluZm87XG59XG5mdW5jdGlvbiBjcmVhdGVfcnVsZShub2RlLCBhLCBiLCBkdXJhdGlvbiwgZGVsYXksIGVhc2UsIGZuLCB1aWQgPSAwKSB7XG4gICAgY29uc3Qgc3RlcCA9IDE2LjY2NiAvIGR1cmF0aW9uO1xuICAgIGxldCBrZXlmcmFtZXMgPSAne1xcbic7XG4gICAgZm9yIChsZXQgcCA9IDA7IHAgPD0gMTsgcCArPSBzdGVwKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhICsgKGIgLSBhKSAqIGVhc2UocCk7XG4gICAgICAgIGtleWZyYW1lcyArPSBwICogMTAwICsgYCV7JHtmbih0LCAxIC0gdCl9fVxcbmA7XG4gICAgfVxuICAgIGNvbnN0IHJ1bGUgPSBrZXlmcmFtZXMgKyBgMTAwJSB7JHtmbihiLCAxIC0gYil9fVxcbn1gO1xuICAgIGNvbnN0IG5hbWUgPSBgX19zdmVsdGVfJHtoYXNoKHJ1bGUpfV8ke3VpZH1gO1xuICAgIGNvbnN0IGRvYyA9IGdldF9yb290X2Zvcl9zdHlsZShub2RlKTtcbiAgICBjb25zdCB7IHN0eWxlc2hlZXQsIHJ1bGVzIH0gPSBtYW5hZ2VkX3N0eWxlcy5nZXQoZG9jKSB8fCBjcmVhdGVfc3R5bGVfaW5mb3JtYXRpb24oZG9jLCBub2RlKTtcbiAgICBpZiAoIXJ1bGVzW25hbWVdKSB7XG4gICAgICAgIHJ1bGVzW25hbWVdID0gdHJ1ZTtcbiAgICAgICAgc3R5bGVzaGVldC5pbnNlcnRSdWxlKGBAa2V5ZnJhbWVzICR7bmFtZX0gJHtydWxlfWAsIHN0eWxlc2hlZXQuY3NzUnVsZXMubGVuZ3RoKTtcbiAgICB9XG4gICAgY29uc3QgYW5pbWF0aW9uID0gbm9kZS5zdHlsZS5hbmltYXRpb24gfHwgJyc7XG4gICAgbm9kZS5zdHlsZS5hbmltYXRpb24gPSBgJHthbmltYXRpb24gPyBgJHthbmltYXRpb259LCBgIDogJyd9JHtuYW1lfSAke2R1cmF0aW9ufW1zIGxpbmVhciAke2RlbGF5fW1zIDEgYm90aGA7XG4gICAgYWN0aXZlICs9IDE7XG4gICAgcmV0dXJuIG5hbWU7XG59XG5mdW5jdGlvbiBkZWxldGVfcnVsZShub2RlLCBuYW1lKSB7XG4gICAgY29uc3QgcHJldmlvdXMgPSAobm9kZS5zdHlsZS5hbmltYXRpb24gfHwgJycpLnNwbGl0KCcsICcpO1xuICAgIGNvbnN0IG5leHQgPSBwcmV2aW91cy5maWx0ZXIobmFtZVxuICAgICAgICA/IGFuaW0gPT4gYW5pbS5pbmRleE9mKG5hbWUpIDwgMCAvLyByZW1vdmUgc3BlY2lmaWMgYW5pbWF0aW9uXG4gICAgICAgIDogYW5pbSA9PiBhbmltLmluZGV4T2YoJ19fc3ZlbHRlJykgPT09IC0xIC8vIHJlbW92ZSBhbGwgU3ZlbHRlIGFuaW1hdGlvbnNcbiAgICApO1xuICAgIGNvbnN0IGRlbGV0ZWQgPSBwcmV2aW91cy5sZW5ndGggLSBuZXh0Lmxlbmd0aDtcbiAgICBpZiAoZGVsZXRlZCkge1xuICAgICAgICBub2RlLnN0eWxlLmFuaW1hdGlvbiA9IG5leHQuam9pbignLCAnKTtcbiAgICAgICAgYWN0aXZlIC09IGRlbGV0ZWQ7XG4gICAgICAgIGlmICghYWN0aXZlKVxuICAgICAgICAgICAgY2xlYXJfcnVsZXMoKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjbGVhcl9ydWxlcygpIHtcbiAgICByYWYoKCkgPT4ge1xuICAgICAgICBpZiAoYWN0aXZlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBtYW5hZ2VkX3N0eWxlcy5mb3JFYWNoKGluZm8gPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBzdHlsZXNoZWV0IH0gPSBpbmZvO1xuICAgICAgICAgICAgbGV0IGkgPSBzdHlsZXNoZWV0LmNzc1J1bGVzLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlIChpLS0pXG4gICAgICAgICAgICAgICAgc3R5bGVzaGVldC5kZWxldGVSdWxlKGkpO1xuICAgICAgICAgICAgaW5mby5ydWxlcyA9IHt9O1xuICAgICAgICB9KTtcbiAgICAgICAgbWFuYWdlZF9zdHlsZXMuY2xlYXIoKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlX2FuaW1hdGlvbihub2RlLCBmcm9tLCBmbiwgcGFyYW1zKSB7XG4gICAgaWYgKCFmcm9tKVxuICAgICAgICByZXR1cm4gbm9vcDtcbiAgICBjb25zdCB0byA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgaWYgKGZyb20ubGVmdCA9PT0gdG8ubGVmdCAmJiBmcm9tLnJpZ2h0ID09PSB0by5yaWdodCAmJiBmcm9tLnRvcCA9PT0gdG8udG9wICYmIGZyb20uYm90dG9tID09PSB0by5ib3R0b20pXG4gICAgICAgIHJldHVybiBub29wO1xuICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIFxuICAgIC8vIEB0cy1pZ25vcmUgdG9kbzogc2hvdWxkIHRoaXMgYmUgc2VwYXJhdGVkIGZyb20gZGVzdHJ1Y3R1cmluZz8gT3Igc3RhcnQvZW5kIGFkZGVkIHRvIHB1YmxpYyBhcGkgYW5kIGRvY3VtZW50YXRpb24/XG4gICAgc3RhcnQ6IHN0YXJ0X3RpbWUgPSBub3coKSArIGRlbGF5LCBcbiAgICAvLyBAdHMtaWdub3JlIHRvZG86XG4gICAgZW5kID0gc3RhcnRfdGltZSArIGR1cmF0aW9uLCB0aWNrID0gbm9vcCwgY3NzIH0gPSBmbihub2RlLCB7IGZyb20sIHRvIH0sIHBhcmFtcyk7XG4gICAgbGV0IHJ1bm5pbmcgPSB0cnVlO1xuICAgIGxldCBzdGFydGVkID0gZmFsc2U7XG4gICAgbGV0IG5hbWU7XG4gICAgZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICAgIGlmIChjc3MpIHtcbiAgICAgICAgICAgIG5hbWUgPSBjcmVhdGVfcnVsZShub2RlLCAwLCAxLCBkdXJhdGlvbiwgZGVsYXksIGVhc2luZywgY3NzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRlbGF5KSB7XG4gICAgICAgICAgICBzdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgICBpZiAoY3NzKVxuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSwgbmFtZSk7XG4gICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgbG9vcChub3cgPT4ge1xuICAgICAgICBpZiAoIXN0YXJ0ZWQgJiYgbm93ID49IHN0YXJ0X3RpbWUpIHtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydGVkICYmIG5vdyA+PSBlbmQpIHtcbiAgICAgICAgICAgIHRpY2soMSwgMCk7XG4gICAgICAgICAgICBzdG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFydW5uaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHAgPSBub3cgLSBzdGFydF90aW1lO1xuICAgICAgICAgICAgY29uc3QgdCA9IDAgKyAxICogZWFzaW5nKHAgLyBkdXJhdGlvbik7XG4gICAgICAgICAgICB0aWNrKHQsIDEgLSB0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgICBzdGFydCgpO1xuICAgIHRpY2soMCwgMSk7XG4gICAgcmV0dXJuIHN0b3A7XG59XG5mdW5jdGlvbiBmaXhfcG9zaXRpb24obm9kZSkge1xuICAgIGNvbnN0IHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcbiAgICBpZiAoc3R5bGUucG9zaXRpb24gIT09ICdhYnNvbHV0ZScgJiYgc3R5bGUucG9zaXRpb24gIT09ICdmaXhlZCcpIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBzdHlsZTtcbiAgICAgICAgY29uc3QgYSA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBub2RlLnN0eWxlLndpZHRoID0gd2lkdGg7XG4gICAgICAgIG5vZGUuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICBhZGRfdHJhbnNmb3JtKG5vZGUsIGEpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFkZF90cmFuc2Zvcm0obm9kZSwgYSkge1xuICAgIGNvbnN0IGIgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGlmIChhLmxlZnQgIT09IGIubGVmdCB8fCBhLnRvcCAhPT0gYi50b3ApIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKG5vZGUpO1xuICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBzdHlsZS50cmFuc2Zvcm0gPT09ICdub25lJyA/ICcnIDogc3R5bGUudHJhbnNmb3JtO1xuICAgICAgICBub2RlLnN0eWxlLnRyYW5zZm9ybSA9IGAke3RyYW5zZm9ybX0gdHJhbnNsYXRlKCR7YS5sZWZ0IC0gYi5sZWZ0fXB4LCAke2EudG9wIC0gYi50b3B9cHgpYDtcbiAgICB9XG59XG5cbmxldCBjdXJyZW50X2NvbXBvbmVudDtcbmZ1bmN0aW9uIHNldF9jdXJyZW50X2NvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICBjdXJyZW50X2NvbXBvbmVudCA9IGNvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIGdldF9jdXJyZW50X2NvbXBvbmVudCgpIHtcbiAgICBpZiAoIWN1cnJlbnRfY29tcG9uZW50KVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Z1bmN0aW9uIGNhbGxlZCBvdXRzaWRlIGNvbXBvbmVudCBpbml0aWFsaXphdGlvbicpO1xuICAgIHJldHVybiBjdXJyZW50X2NvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIGJlZm9yZVVwZGF0ZShmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmJlZm9yZV91cGRhdGUucHVzaChmbik7XG59XG5mdW5jdGlvbiBvbk1vdW50KGZuKSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQub25fbW91bnQucHVzaChmbik7XG59XG5mdW5jdGlvbiBhZnRlclVwZGF0ZShmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmFmdGVyX3VwZGF0ZS5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIG9uRGVzdHJveShmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLm9uX2Rlc3Ryb3kucHVzaChmbik7XG59XG5mdW5jdGlvbiBjcmVhdGVFdmVudERpc3BhdGNoZXIoKSB7XG4gICAgY29uc3QgY29tcG9uZW50ID0gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCk7XG4gICAgcmV0dXJuICh0eXBlLCBkZXRhaWwsIHsgY2FuY2VsYWJsZSA9IGZhbHNlIH0gPSB7fSkgPT4ge1xuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSBjb21wb25lbnQuJCQuY2FsbGJhY2tzW3R5cGVdO1xuICAgICAgICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAvLyBUT0RPIGFyZSB0aGVyZSBzaXR1YXRpb25zIHdoZXJlIGV2ZW50cyBjb3VsZCBiZSBkaXNwYXRjaGVkXG4gICAgICAgICAgICAvLyBpbiBhIHNlcnZlciAobm9uLURPTSkgZW52aXJvbm1lbnQ/XG4gICAgICAgICAgICBjb25zdCBldmVudCA9IGN1c3RvbV9ldmVudCh0eXBlLCBkZXRhaWwsIHsgY2FuY2VsYWJsZSB9KTtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5zbGljZSgpLmZvckVhY2goZm4gPT4ge1xuICAgICAgICAgICAgICAgIGZuLmNhbGwoY29tcG9uZW50LCBldmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiAhZXZlbnQuZGVmYXVsdFByZXZlbnRlZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufVxuZnVuY3Rpb24gc2V0Q29udGV4dChrZXksIGNvbnRleHQpIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5jb250ZXh0LnNldChrZXksIGNvbnRleHQpO1xuICAgIHJldHVybiBjb250ZXh0O1xufVxuZnVuY3Rpb24gZ2V0Q29udGV4dChrZXkpIHtcbiAgICByZXR1cm4gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuY29udGV4dC5nZXQoa2V5KTtcbn1cbmZ1bmN0aW9uIGdldEFsbENvbnRleHRzKCkge1xuICAgIHJldHVybiBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5jb250ZXh0O1xufVxuZnVuY3Rpb24gaGFzQ29udGV4dChrZXkpIHtcbiAgICByZXR1cm4gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuY29udGV4dC5oYXMoa2V5KTtcbn1cbi8vIFRPRE8gZmlndXJlIG91dCBpZiB3ZSBzdGlsbCB3YW50IHRvIHN1cHBvcnRcbi8vIHNob3J0aGFuZCBldmVudHMsIG9yIGlmIHdlIHdhbnQgdG8gaW1wbGVtZW50XG4vLyBhIHJlYWwgYnViYmxpbmcgbWVjaGFuaXNtXG5mdW5jdGlvbiBidWJibGUoY29tcG9uZW50LCBldmVudCkge1xuICAgIGNvbnN0IGNhbGxiYWNrcyA9IGNvbXBvbmVudC4kJC5jYWxsYmFja3NbZXZlbnQudHlwZV07XG4gICAgaWYgKGNhbGxiYWNrcykge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNhbGxiYWNrcy5zbGljZSgpLmZvckVhY2goZm4gPT4gZm4uY2FsbCh0aGlzLCBldmVudCkpO1xuICAgIH1cbn1cblxuY29uc3QgZGlydHlfY29tcG9uZW50cyA9IFtdO1xuY29uc3QgaW50cm9zID0geyBlbmFibGVkOiBmYWxzZSB9O1xuY29uc3QgYmluZGluZ19jYWxsYmFja3MgPSBbXTtcbmNvbnN0IHJlbmRlcl9jYWxsYmFja3MgPSBbXTtcbmNvbnN0IGZsdXNoX2NhbGxiYWNrcyA9IFtdO1xuY29uc3QgcmVzb2x2ZWRfcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xubGV0IHVwZGF0ZV9zY2hlZHVsZWQgPSBmYWxzZTtcbmZ1bmN0aW9uIHNjaGVkdWxlX3VwZGF0ZSgpIHtcbiAgICBpZiAoIXVwZGF0ZV9zY2hlZHVsZWQpIHtcbiAgICAgICAgdXBkYXRlX3NjaGVkdWxlZCA9IHRydWU7XG4gICAgICAgIHJlc29sdmVkX3Byb21pc2UudGhlbihmbHVzaCk7XG4gICAgfVxufVxuZnVuY3Rpb24gdGljaygpIHtcbiAgICBzY2hlZHVsZV91cGRhdGUoKTtcbiAgICByZXR1cm4gcmVzb2x2ZWRfcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGFkZF9yZW5kZXJfY2FsbGJhY2soZm4pIHtcbiAgICByZW5kZXJfY2FsbGJhY2tzLnB1c2goZm4pO1xufVxuZnVuY3Rpb24gYWRkX2ZsdXNoX2NhbGxiYWNrKGZuKSB7XG4gICAgZmx1c2hfY2FsbGJhY2tzLnB1c2goZm4pO1xufVxuLy8gZmx1c2goKSBjYWxscyBjYWxsYmFja3MgaW4gdGhpcyBvcmRlcjpcbi8vIDEuIEFsbCBiZWZvcmVVcGRhdGUgY2FsbGJhY2tzLCBpbiBvcmRlcjogcGFyZW50cyBiZWZvcmUgY2hpbGRyZW5cbi8vIDIuIEFsbCBiaW5kOnRoaXMgY2FsbGJhY2tzLCBpbiByZXZlcnNlIG9yZGVyOiBjaGlsZHJlbiBiZWZvcmUgcGFyZW50cy5cbi8vIDMuIEFsbCBhZnRlclVwZGF0ZSBjYWxsYmFja3MsIGluIG9yZGVyOiBwYXJlbnRzIGJlZm9yZSBjaGlsZHJlbi4gRVhDRVBUXG4vLyAgICBmb3IgYWZ0ZXJVcGRhdGVzIGNhbGxlZCBkdXJpbmcgdGhlIGluaXRpYWwgb25Nb3VudCwgd2hpY2ggYXJlIGNhbGxlZCBpblxuLy8gICAgcmV2ZXJzZSBvcmRlcjogY2hpbGRyZW4gYmVmb3JlIHBhcmVudHMuXG4vLyBTaW5jZSBjYWxsYmFja3MgbWlnaHQgdXBkYXRlIGNvbXBvbmVudCB2YWx1ZXMsIHdoaWNoIGNvdWxkIHRyaWdnZXIgYW5vdGhlclxuLy8gY2FsbCB0byBmbHVzaCgpLCB0aGUgZm9sbG93aW5nIHN0ZXBzIGd1YXJkIGFnYWluc3QgdGhpczpcbi8vIDEuIER1cmluZyBiZWZvcmVVcGRhdGUsIGFueSB1cGRhdGVkIGNvbXBvbmVudHMgd2lsbCBiZSBhZGRlZCB0byB0aGVcbi8vICAgIGRpcnR5X2NvbXBvbmVudHMgYXJyYXkgYW5kIHdpbGwgY2F1c2UgYSByZWVudHJhbnQgY2FsbCB0byBmbHVzaCgpLiBCZWNhdXNlXG4vLyAgICB0aGUgZmx1c2ggaW5kZXggaXMga2VwdCBvdXRzaWRlIHRoZSBmdW5jdGlvbiwgdGhlIHJlZW50cmFudCBjYWxsIHdpbGwgcGlja1xuLy8gICAgdXAgd2hlcmUgdGhlIGVhcmxpZXIgY2FsbCBsZWZ0IG9mZiBhbmQgZ28gdGhyb3VnaCBhbGwgZGlydHkgY29tcG9uZW50cy4gVGhlXG4vLyAgICBjdXJyZW50X2NvbXBvbmVudCB2YWx1ZSBpcyBzYXZlZCBhbmQgcmVzdG9yZWQgc28gdGhhdCB0aGUgcmVlbnRyYW50IGNhbGwgd2lsbFxuLy8gICAgbm90IGludGVyZmVyZSB3aXRoIHRoZSBcInBhcmVudFwiIGZsdXNoKCkgY2FsbC5cbi8vIDIuIGJpbmQ6dGhpcyBjYWxsYmFja3MgY2Fubm90IHRyaWdnZXIgbmV3IGZsdXNoKCkgY2FsbHMuXG4vLyAzLiBEdXJpbmcgYWZ0ZXJVcGRhdGUsIGFueSB1cGRhdGVkIGNvbXBvbmVudHMgd2lsbCBOT1QgaGF2ZSB0aGVpciBhZnRlclVwZGF0ZVxuLy8gICAgY2FsbGJhY2sgY2FsbGVkIGEgc2Vjb25kIHRpbWU7IHRoZSBzZWVuX2NhbGxiYWNrcyBzZXQsIG91dHNpZGUgdGhlIGZsdXNoKClcbi8vICAgIGZ1bmN0aW9uLCBndWFyYW50ZWVzIHRoaXMgYmVoYXZpb3IuXG5jb25zdCBzZWVuX2NhbGxiYWNrcyA9IG5ldyBTZXQoKTtcbmxldCBmbHVzaGlkeCA9IDA7IC8vIERvICpub3QqIG1vdmUgdGhpcyBpbnNpZGUgdGhlIGZsdXNoKCkgZnVuY3Rpb25cbmZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIGNvbnN0IHNhdmVkX2NvbXBvbmVudCA9IGN1cnJlbnRfY29tcG9uZW50O1xuICAgIGRvIHtcbiAgICAgICAgLy8gZmlyc3QsIGNhbGwgYmVmb3JlVXBkYXRlIGZ1bmN0aW9uc1xuICAgICAgICAvLyBhbmQgdXBkYXRlIGNvbXBvbmVudHNcbiAgICAgICAgd2hpbGUgKGZsdXNoaWR4IDwgZGlydHlfY29tcG9uZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGRpcnR5X2NvbXBvbmVudHNbZmx1c2hpZHhdO1xuICAgICAgICAgICAgZmx1c2hpZHgrKztcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChjb21wb25lbnQpO1xuICAgICAgICAgICAgdXBkYXRlKGNvbXBvbmVudC4kJCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KG51bGwpO1xuICAgICAgICBkaXJ0eV9jb21wb25lbnRzLmxlbmd0aCA9IDA7XG4gICAgICAgIGZsdXNoaWR4ID0gMDtcbiAgICAgICAgd2hpbGUgKGJpbmRpbmdfY2FsbGJhY2tzLmxlbmd0aClcbiAgICAgICAgICAgIGJpbmRpbmdfY2FsbGJhY2tzLnBvcCgpKCk7XG4gICAgICAgIC8vIHRoZW4sIG9uY2UgY29tcG9uZW50cyBhcmUgdXBkYXRlZCwgY2FsbFxuICAgICAgICAvLyBhZnRlclVwZGF0ZSBmdW5jdGlvbnMuIFRoaXMgbWF5IGNhdXNlXG4gICAgICAgIC8vIHN1YnNlcXVlbnQgdXBkYXRlcy4uLlxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbmRlcl9jYWxsYmFja3MubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gcmVuZGVyX2NhbGxiYWNrc1tpXTtcbiAgICAgICAgICAgIGlmICghc2Vlbl9jYWxsYmFja3MuaGFzKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICAgIC8vIC4uLnNvIGd1YXJkIGFnYWluc3QgaW5maW5pdGUgbG9vcHNcbiAgICAgICAgICAgICAgICBzZWVuX2NhbGxiYWNrcy5hZGQoY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVuZGVyX2NhbGxiYWNrcy5sZW5ndGggPSAwO1xuICAgIH0gd2hpbGUgKGRpcnR5X2NvbXBvbmVudHMubGVuZ3RoKTtcbiAgICB3aGlsZSAoZmx1c2hfY2FsbGJhY2tzLmxlbmd0aCkge1xuICAgICAgICBmbHVzaF9jYWxsYmFja3MucG9wKCkoKTtcbiAgICB9XG4gICAgdXBkYXRlX3NjaGVkdWxlZCA9IGZhbHNlO1xuICAgIHNlZW5fY2FsbGJhY2tzLmNsZWFyKCk7XG4gICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KHNhdmVkX2NvbXBvbmVudCk7XG59XG5mdW5jdGlvbiB1cGRhdGUoJCQpIHtcbiAgICBpZiAoJCQuZnJhZ21lbnQgIT09IG51bGwpIHtcbiAgICAgICAgJCQudXBkYXRlKCk7XG4gICAgICAgIHJ1bl9hbGwoJCQuYmVmb3JlX3VwZGF0ZSk7XG4gICAgICAgIGNvbnN0IGRpcnR5ID0gJCQuZGlydHk7XG4gICAgICAgICQkLmRpcnR5ID0gWy0xXTtcbiAgICAgICAgJCQuZnJhZ21lbnQgJiYgJCQuZnJhZ21lbnQucCgkJC5jdHgsIGRpcnR5KTtcbiAgICAgICAgJCQuYWZ0ZXJfdXBkYXRlLmZvckVhY2goYWRkX3JlbmRlcl9jYWxsYmFjayk7XG4gICAgfVxufVxuXG5sZXQgcHJvbWlzZTtcbmZ1bmN0aW9uIHdhaXQoKSB7XG4gICAgaWYgKCFwcm9taXNlKSB7XG4gICAgICAgIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgcHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHByb21pc2UgPSBudWxsO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5mdW5jdGlvbiBkaXNwYXRjaChub2RlLCBkaXJlY3Rpb24sIGtpbmQpIHtcbiAgICBub2RlLmRpc3BhdGNoRXZlbnQoY3VzdG9tX2V2ZW50KGAke2RpcmVjdGlvbiA/ICdpbnRybycgOiAnb3V0cm8nfSR7a2luZH1gKSk7XG59XG5jb25zdCBvdXRyb2luZyA9IG5ldyBTZXQoKTtcbmxldCBvdXRyb3M7XG5mdW5jdGlvbiBncm91cF9vdXRyb3MoKSB7XG4gICAgb3V0cm9zID0ge1xuICAgICAgICByOiAwLFxuICAgICAgICBjOiBbXSxcbiAgICAgICAgcDogb3V0cm9zIC8vIHBhcmVudCBncm91cFxuICAgIH07XG59XG5mdW5jdGlvbiBjaGVja19vdXRyb3MoKSB7XG4gICAgaWYgKCFvdXRyb3Mucikge1xuICAgICAgICBydW5fYWxsKG91dHJvcy5jKTtcbiAgICB9XG4gICAgb3V0cm9zID0gb3V0cm9zLnA7XG59XG5mdW5jdGlvbiB0cmFuc2l0aW9uX2luKGJsb2NrLCBsb2NhbCkge1xuICAgIGlmIChibG9jayAmJiBibG9jay5pKSB7XG4gICAgICAgIG91dHJvaW5nLmRlbGV0ZShibG9jayk7XG4gICAgICAgIGJsb2NrLmkobG9jYWwpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRyYW5zaXRpb25fb3V0KGJsb2NrLCBsb2NhbCwgZGV0YWNoLCBjYWxsYmFjaykge1xuICAgIGlmIChibG9jayAmJiBibG9jay5vKSB7XG4gICAgICAgIGlmIChvdXRyb2luZy5oYXMoYmxvY2spKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBvdXRyb2luZy5hZGQoYmxvY2spO1xuICAgICAgICBvdXRyb3MuYy5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgIG91dHJvaW5nLmRlbGV0ZShibG9jayk7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBpZiAoZGV0YWNoKVxuICAgICAgICAgICAgICAgICAgICBibG9jay5kKDEpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBibG9jay5vKGxvY2FsKTtcbiAgICB9XG59XG5jb25zdCBudWxsX3RyYW5zaXRpb24gPSB7IGR1cmF0aW9uOiAwIH07XG5mdW5jdGlvbiBjcmVhdGVfaW5fdHJhbnNpdGlvbihub2RlLCBmbiwgcGFyYW1zKSB7XG4gICAgbGV0IGNvbmZpZyA9IGZuKG5vZGUsIHBhcmFtcyk7XG4gICAgbGV0IHJ1bm5pbmcgPSBmYWxzZTtcbiAgICBsZXQgYW5pbWF0aW9uX25hbWU7XG4gICAgbGV0IHRhc2s7XG4gICAgbGV0IHVpZCA9IDA7XG4gICAgZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICAgICAgaWYgKGFuaW1hdGlvbl9uYW1lKVxuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSwgYW5pbWF0aW9uX25hbWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnbygpIHtcbiAgICAgICAgY29uc3QgeyBkZWxheSA9IDAsIGR1cmF0aW9uID0gMzAwLCBlYXNpbmcgPSBpZGVudGl0eSwgdGljayA9IG5vb3AsIGNzcyB9ID0gY29uZmlnIHx8IG51bGxfdHJhbnNpdGlvbjtcbiAgICAgICAgaWYgKGNzcylcbiAgICAgICAgICAgIGFuaW1hdGlvbl9uYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgMCwgMSwgZHVyYXRpb24sIGRlbGF5LCBlYXNpbmcsIGNzcywgdWlkKyspO1xuICAgICAgICB0aWNrKDAsIDEpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gbm93KCkgKyBkZWxheTtcbiAgICAgICAgY29uc3QgZW5kX3RpbWUgPSBzdGFydF90aW1lICsgZHVyYXRpb247XG4gICAgICAgIGlmICh0YXNrKVxuICAgICAgICAgICAgdGFzay5hYm9ydCgpO1xuICAgICAgICBydW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgYWRkX3JlbmRlcl9jYWxsYmFjaygoKSA9PiBkaXNwYXRjaChub2RlLCB0cnVlLCAnc3RhcnQnKSk7XG4gICAgICAgIHRhc2sgPSBsb29wKG5vdyA9PiB7XG4gICAgICAgICAgICBpZiAocnVubmluZykge1xuICAgICAgICAgICAgICAgIGlmIChub3cgPj0gZW5kX3RpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGljaygxLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2gobm9kZSwgdHJ1ZSwgJ2VuZCcpO1xuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub3cgPj0gc3RhcnRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZWFzaW5nKChub3cgLSBzdGFydF90aW1lKSAvIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdGljayh0LCAxIC0gdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJ1bm5pbmc7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsZXQgc3RhcnRlZCA9IGZhbHNlO1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXJ0KCkge1xuICAgICAgICAgICAgaWYgKHN0YXJ0ZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICBkZWxldGVfcnVsZShub2RlKTtcbiAgICAgICAgICAgIGlmIChpc19mdW5jdGlvbihjb25maWcpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnID0gY29uZmlnKCk7XG4gICAgICAgICAgICAgICAgd2FpdCgpLnRoZW4oZ28pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZ28oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW52YWxpZGF0ZSgpIHtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW5kKCkge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9vdXRfdHJhbnNpdGlvbihub2RlLCBmbiwgcGFyYW1zKSB7XG4gICAgbGV0IGNvbmZpZyA9IGZuKG5vZGUsIHBhcmFtcyk7XG4gICAgbGV0IHJ1bm5pbmcgPSB0cnVlO1xuICAgIGxldCBhbmltYXRpb25fbmFtZTtcbiAgICBjb25zdCBncm91cCA9IG91dHJvcztcbiAgICBncm91cC5yICs9IDE7XG4gICAgZnVuY3Rpb24gZ28oKSB7XG4gICAgICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIHRpY2sgPSBub29wLCBjc3MgfSA9IGNvbmZpZyB8fCBudWxsX3RyYW5zaXRpb247XG4gICAgICAgIGlmIChjc3MpXG4gICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIDEsIDAsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gbm93KCkgKyBkZWxheTtcbiAgICAgICAgY29uc3QgZW5kX3RpbWUgPSBzdGFydF90aW1lICsgZHVyYXRpb247XG4gICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4gZGlzcGF0Y2gobm9kZSwgZmFsc2UsICdzdGFydCcpKTtcbiAgICAgICAgbG9vcChub3cgPT4ge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAobm93ID49IGVuZF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpY2soMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIGZhbHNlLCAnZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghLS1ncm91cC5yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIHdpbGwgcmVzdWx0IGluIGBlbmQoKWAgYmVpbmcgY2FsbGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc28gd2UgZG9uJ3QgbmVlZCB0byBjbGVhbiB1cCBoZXJlXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5fYWxsKGdyb3VwLmMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBzdGFydF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlYXNpbmcoKG5vdyAtIHN0YXJ0X3RpbWUpIC8gZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aWNrKDEgLSB0LCB0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnVubmluZztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpc19mdW5jdGlvbihjb25maWcpKSB7XG4gICAgICAgIHdhaXQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZygpO1xuICAgICAgICAgICAgZ28oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBnbygpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBlbmQocmVzZXQpIHtcbiAgICAgICAgICAgIGlmIChyZXNldCAmJiBjb25maWcudGljaykge1xuICAgICAgICAgICAgICAgIGNvbmZpZy50aWNrKDEsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uX25hbWUpXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUsIGFuaW1hdGlvbl9uYW1lKTtcbiAgICAgICAgICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlX2JpZGlyZWN0aW9uYWxfdHJhbnNpdGlvbihub2RlLCBmbiwgcGFyYW1zLCBpbnRybykge1xuICAgIGxldCBjb25maWcgPSBmbihub2RlLCBwYXJhbXMpO1xuICAgIGxldCB0ID0gaW50cm8gPyAwIDogMTtcbiAgICBsZXQgcnVubmluZ19wcm9ncmFtID0gbnVsbDtcbiAgICBsZXQgcGVuZGluZ19wcm9ncmFtID0gbnVsbDtcbiAgICBsZXQgYW5pbWF0aW9uX25hbWUgPSBudWxsO1xuICAgIGZ1bmN0aW9uIGNsZWFyX2FuaW1hdGlvbigpIHtcbiAgICAgICAgaWYgKGFuaW1hdGlvbl9uYW1lKVxuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSwgYW5pbWF0aW9uX25hbWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbml0KHByb2dyYW0sIGR1cmF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGQgPSAocHJvZ3JhbS5iIC0gdCk7XG4gICAgICAgIGR1cmF0aW9uICo9IE1hdGguYWJzKGQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYTogdCxcbiAgICAgICAgICAgIGI6IHByb2dyYW0uYixcbiAgICAgICAgICAgIGQsXG4gICAgICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgICAgIHN0YXJ0OiBwcm9ncmFtLnN0YXJ0LFxuICAgICAgICAgICAgZW5kOiBwcm9ncmFtLnN0YXJ0ICsgZHVyYXRpb24sXG4gICAgICAgICAgICBncm91cDogcHJvZ3JhbS5ncm91cFxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBnbyhiKSB7XG4gICAgICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIHRpY2sgPSBub29wLCBjc3MgfSA9IGNvbmZpZyB8fCBudWxsX3RyYW5zaXRpb247XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSB7XG4gICAgICAgICAgICBzdGFydDogbm93KCkgKyBkZWxheSxcbiAgICAgICAgICAgIGJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFiKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlIHRvZG86IGltcHJvdmUgdHlwaW5nc1xuICAgICAgICAgICAgcHJvZ3JhbS5ncm91cCA9IG91dHJvcztcbiAgICAgICAgICAgIG91dHJvcy5yICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJ1bm5pbmdfcHJvZ3JhbSB8fCBwZW5kaW5nX3Byb2dyYW0pIHtcbiAgICAgICAgICAgIHBlbmRpbmdfcHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGFuIGludHJvLCBhbmQgdGhlcmUncyBhIGRlbGF5LCB3ZSBuZWVkIHRvIGRvXG4gICAgICAgICAgICAvLyBhbiBpbml0aWFsIHRpY2sgYW5kL29yIGFwcGx5IENTUyBhbmltYXRpb24gaW1tZWRpYXRlbHlcbiAgICAgICAgICAgIGlmIChjc3MpIHtcbiAgICAgICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIHQsIGIsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGIpXG4gICAgICAgICAgICAgICAgdGljaygwLCAxKTtcbiAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IGluaXQocHJvZ3JhbSwgZHVyYXRpb24pO1xuICAgICAgICAgICAgYWRkX3JlbmRlcl9jYWxsYmFjaygoKSA9PiBkaXNwYXRjaChub2RlLCBiLCAnc3RhcnQnKSk7XG4gICAgICAgICAgICBsb29wKG5vdyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdfcHJvZ3JhbSAmJiBub3cgPiBwZW5kaW5nX3Byb2dyYW0uc3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcnVubmluZ19wcm9ncmFtID0gaW5pdChwZW5kaW5nX3Byb2dyYW0sIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ19wcm9ncmFtID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2gobm9kZSwgcnVubmluZ19wcm9ncmFtLmIsICdzdGFydCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3NzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbl9uYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgdCwgcnVubmluZ19wcm9ncmFtLmIsIHJ1bm5pbmdfcHJvZ3JhbS5kdXJhdGlvbiwgMCwgZWFzaW5nLCBjb25maWcuY3NzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocnVubmluZ19wcm9ncmFtKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub3cgPj0gcnVubmluZ19wcm9ncmFtLmVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGljayh0ID0gcnVubmluZ19wcm9ncmFtLmIsIDEgLSB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIHJ1bm5pbmdfcHJvZ3JhbS5iLCAnZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBlbmRpbmdfcHJvZ3JhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlJ3JlIGRvbmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVubmluZ19wcm9ncmFtLmIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW50cm8gXHUyMDE0IHdlIGNhbiB0aWR5IHVwIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyX2FuaW1hdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3V0cm8gXHUyMDE0IG5lZWRzIHRvIGJlIGNvb3JkaW5hdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghLS1ydW5uaW5nX3Byb2dyYW0uZ3JvdXAucilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bl9hbGwocnVubmluZ19wcm9ncmFtLmdyb3VwLmMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobm93ID49IHJ1bm5pbmdfcHJvZ3JhbS5zdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IG5vdyAtIHJ1bm5pbmdfcHJvZ3JhbS5zdGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBydW5uaW5nX3Byb2dyYW0uYSArIHJ1bm5pbmdfcHJvZ3JhbS5kICogZWFzaW5nKHAgLyBydW5uaW5nX3Byb2dyYW0uZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGljayh0LCAxIC0gdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhKHJ1bm5pbmdfcHJvZ3JhbSB8fCBwZW5kaW5nX3Byb2dyYW0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcnVuKGIpIHtcbiAgICAgICAgICAgIGlmIChpc19mdW5jdGlvbihjb25maWcpKSB7XG4gICAgICAgICAgICAgICAgd2FpdCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZygpO1xuICAgICAgICAgICAgICAgICAgICBnbyhiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGdvKGIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbmQoKSB7XG4gICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IHBlbmRpbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBoYW5kbGVfcHJvbWlzZShwcm9taXNlLCBpbmZvKSB7XG4gICAgY29uc3QgdG9rZW4gPSBpbmZvLnRva2VuID0ge307XG4gICAgZnVuY3Rpb24gdXBkYXRlKHR5cGUsIGluZGV4LCBrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmIChpbmZvLnRva2VuICE9PSB0b2tlbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaW5mby5yZXNvbHZlZCA9IHZhbHVlO1xuICAgICAgICBsZXQgY2hpbGRfY3R4ID0gaW5mby5jdHg7XG4gICAgICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2hpbGRfY3R4ID0gY2hpbGRfY3R4LnNsaWNlKCk7XG4gICAgICAgICAgICBjaGlsZF9jdHhba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJsb2NrID0gdHlwZSAmJiAoaW5mby5jdXJyZW50ID0gdHlwZSkoY2hpbGRfY3R4KTtcbiAgICAgICAgbGV0IG5lZWRzX2ZsdXNoID0gZmFsc2U7XG4gICAgICAgIGlmIChpbmZvLmJsb2NrKSB7XG4gICAgICAgICAgICBpZiAoaW5mby5ibG9ja3MpIHtcbiAgICAgICAgICAgICAgICBpbmZvLmJsb2Nrcy5mb3JFYWNoKChibG9jaywgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaW5kZXggJiYgYmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwX291dHJvcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbl9vdXQoYmxvY2ssIDEsIDEsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5mby5ibG9ja3NbaV0gPT09IGJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uYmxvY2tzW2ldID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrX291dHJvcygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbmZvLmJsb2NrLmQoMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBibG9jay5jKCk7XG4gICAgICAgICAgICB0cmFuc2l0aW9uX2luKGJsb2NrLCAxKTtcbiAgICAgICAgICAgIGJsb2NrLm0oaW5mby5tb3VudCgpLCBpbmZvLmFuY2hvcik7XG4gICAgICAgICAgICBuZWVkc19mbHVzaCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaW5mby5ibG9jayA9IGJsb2NrO1xuICAgICAgICBpZiAoaW5mby5ibG9ja3MpXG4gICAgICAgICAgICBpbmZvLmJsb2Nrc1tpbmRleF0gPSBibG9jaztcbiAgICAgICAgaWYgKG5lZWRzX2ZsdXNoKSB7XG4gICAgICAgICAgICBmbHVzaCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc19wcm9taXNlKHByb21pc2UpKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRfY29tcG9uZW50ID0gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCk7XG4gICAgICAgIHByb21pc2UudGhlbih2YWx1ZSA9PiB7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY3VycmVudF9jb21wb25lbnQpO1xuICAgICAgICAgICAgdXBkYXRlKGluZm8udGhlbiwgMSwgaW5mby52YWx1ZSwgdmFsdWUpO1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KG51bGwpO1xuICAgICAgICB9LCBlcnJvciA9PiB7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY3VycmVudF9jb21wb25lbnQpO1xuICAgICAgICAgICAgdXBkYXRlKGluZm8uY2F0Y2gsIDIsIGluZm8uZXJyb3IsIGVycm9yKTtcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChudWxsKTtcbiAgICAgICAgICAgIGlmICghaW5mby5oYXNDYXRjaCkge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gaWYgd2UgcHJldmlvdXNseSBoYWQgYSB0aGVuL2NhdGNoIGJsb2NrLCBkZXN0cm95IGl0XG4gICAgICAgIGlmIChpbmZvLmN1cnJlbnQgIT09IGluZm8ucGVuZGluZykge1xuICAgICAgICAgICAgdXBkYXRlKGluZm8ucGVuZGluZywgMCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKGluZm8uY3VycmVudCAhPT0gaW5mby50aGVuKSB7XG4gICAgICAgICAgICB1cGRhdGUoaW5mby50aGVuLCAxLCBpbmZvLnZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGluZm8ucmVzb2x2ZWQgPSBwcm9taXNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHVwZGF0ZV9hd2FpdF9ibG9ja19icmFuY2goaW5mbywgY3R4LCBkaXJ0eSkge1xuICAgIGNvbnN0IGNoaWxkX2N0eCA9IGN0eC5zbGljZSgpO1xuICAgIGNvbnN0IHsgcmVzb2x2ZWQgfSA9IGluZm87XG4gICAgaWYgKGluZm8uY3VycmVudCA9PT0gaW5mby50aGVuKSB7XG4gICAgICAgIGNoaWxkX2N0eFtpbmZvLnZhbHVlXSA9IHJlc29sdmVkO1xuICAgIH1cbiAgICBpZiAoaW5mby5jdXJyZW50ID09PSBpbmZvLmNhdGNoKSB7XG4gICAgICAgIGNoaWxkX2N0eFtpbmZvLmVycm9yXSA9IHJlc29sdmVkO1xuICAgIH1cbiAgICBpbmZvLmJsb2NrLnAoY2hpbGRfY3R4LCBkaXJ0eSk7XG59XG5cbmNvbnN0IGdsb2JhbHMgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcbiAgICA/IHdpbmRvd1xuICAgIDogdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnXG4gICAgICAgID8gZ2xvYmFsVGhpc1xuICAgICAgICA6IGdsb2JhbCk7XG5cbmZ1bmN0aW9uIGRlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCkge1xuICAgIGJsb2NrLmQoMSk7XG4gICAgbG9va3VwLmRlbGV0ZShibG9jay5rZXkpO1xufVxuZnVuY3Rpb24gb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCkge1xuICAgIHRyYW5zaXRpb25fb3V0KGJsb2NrLCAxLCAxLCAoKSA9PiB7XG4gICAgICAgIGxvb2t1cC5kZWxldGUoYmxvY2sua2V5KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGZpeF9hbmRfZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKSB7XG4gICAgYmxvY2suZigpO1xuICAgIGRlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCk7XG59XG5mdW5jdGlvbiBmaXhfYW5kX291dHJvX2FuZF9kZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApIHtcbiAgICBibG9jay5mKCk7XG4gICAgb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCk7XG59XG5mdW5jdGlvbiB1cGRhdGVfa2V5ZWRfZWFjaChvbGRfYmxvY2tzLCBkaXJ0eSwgZ2V0X2tleSwgZHluYW1pYywgY3R4LCBsaXN0LCBsb29rdXAsIG5vZGUsIGRlc3Ryb3ksIGNyZWF0ZV9lYWNoX2Jsb2NrLCBuZXh0LCBnZXRfY29udGV4dCkge1xuICAgIGxldCBvID0gb2xkX2Jsb2Nrcy5sZW5ndGg7XG4gICAgbGV0IG4gPSBsaXN0Lmxlbmd0aDtcbiAgICBsZXQgaSA9IG87XG4gICAgY29uc3Qgb2xkX2luZGV4ZXMgPSB7fTtcbiAgICB3aGlsZSAoaS0tKVxuICAgICAgICBvbGRfaW5kZXhlc1tvbGRfYmxvY2tzW2ldLmtleV0gPSBpO1xuICAgIGNvbnN0IG5ld19ibG9ja3MgPSBbXTtcbiAgICBjb25zdCBuZXdfbG9va3VwID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IGRlbHRhcyA9IG5ldyBNYXAoKTtcbiAgICBpID0gbjtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkX2N0eCA9IGdldF9jb250ZXh0KGN0eCwgbGlzdCwgaSk7XG4gICAgICAgIGNvbnN0IGtleSA9IGdldF9rZXkoY2hpbGRfY3R4KTtcbiAgICAgICAgbGV0IGJsb2NrID0gbG9va3VwLmdldChrZXkpO1xuICAgICAgICBpZiAoIWJsb2NrKSB7XG4gICAgICAgICAgICBibG9jayA9IGNyZWF0ZV9lYWNoX2Jsb2NrKGtleSwgY2hpbGRfY3R4KTtcbiAgICAgICAgICAgIGJsb2NrLmMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkeW5hbWljKSB7XG4gICAgICAgICAgICBibG9jay5wKGNoaWxkX2N0eCwgZGlydHkpO1xuICAgICAgICB9XG4gICAgICAgIG5ld19sb29rdXAuc2V0KGtleSwgbmV3X2Jsb2Nrc1tpXSA9IGJsb2NrKTtcbiAgICAgICAgaWYgKGtleSBpbiBvbGRfaW5kZXhlcylcbiAgICAgICAgICAgIGRlbHRhcy5zZXQoa2V5LCBNYXRoLmFicyhpIC0gb2xkX2luZGV4ZXNba2V5XSkpO1xuICAgIH1cbiAgICBjb25zdCB3aWxsX21vdmUgPSBuZXcgU2V0KCk7XG4gICAgY29uc3QgZGlkX21vdmUgPSBuZXcgU2V0KCk7XG4gICAgZnVuY3Rpb24gaW5zZXJ0KGJsb2NrKSB7XG4gICAgICAgIHRyYW5zaXRpb25faW4oYmxvY2ssIDEpO1xuICAgICAgICBibG9jay5tKG5vZGUsIG5leHQpO1xuICAgICAgICBsb29rdXAuc2V0KGJsb2NrLmtleSwgYmxvY2spO1xuICAgICAgICBuZXh0ID0gYmxvY2suZmlyc3Q7XG4gICAgICAgIG4tLTtcbiAgICB9XG4gICAgd2hpbGUgKG8gJiYgbikge1xuICAgICAgICBjb25zdCBuZXdfYmxvY2sgPSBuZXdfYmxvY2tzW24gLSAxXTtcbiAgICAgICAgY29uc3Qgb2xkX2Jsb2NrID0gb2xkX2Jsb2Nrc1tvIC0gMV07XG4gICAgICAgIGNvbnN0IG5ld19rZXkgPSBuZXdfYmxvY2sua2V5O1xuICAgICAgICBjb25zdCBvbGRfa2V5ID0gb2xkX2Jsb2NrLmtleTtcbiAgICAgICAgaWYgKG5ld19ibG9jayA9PT0gb2xkX2Jsb2NrKSB7XG4gICAgICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgICAgICAgICBuZXh0ID0gbmV3X2Jsb2NrLmZpcnN0O1xuICAgICAgICAgICAgby0tO1xuICAgICAgICAgICAgbi0tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFuZXdfbG9va3VwLmhhcyhvbGRfa2V5KSkge1xuICAgICAgICAgICAgLy8gcmVtb3ZlIG9sZCBibG9ja1xuICAgICAgICAgICAgZGVzdHJveShvbGRfYmxvY2ssIGxvb2t1cCk7XG4gICAgICAgICAgICBvLS07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWxvb2t1cC5oYXMobmV3X2tleSkgfHwgd2lsbF9tb3ZlLmhhcyhuZXdfa2V5KSkge1xuICAgICAgICAgICAgaW5zZXJ0KG5ld19ibG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGlkX21vdmUuaGFzKG9sZF9rZXkpKSB7XG4gICAgICAgICAgICBvLS07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVsdGFzLmdldChuZXdfa2V5KSA+IGRlbHRhcy5nZXQob2xkX2tleSkpIHtcbiAgICAgICAgICAgIGRpZF9tb3ZlLmFkZChuZXdfa2V5KTtcbiAgICAgICAgICAgIGluc2VydChuZXdfYmxvY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd2lsbF9tb3ZlLmFkZChvbGRfa2V5KTtcbiAgICAgICAgICAgIG8tLTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3aGlsZSAoby0tKSB7XG4gICAgICAgIGNvbnN0IG9sZF9ibG9jayA9IG9sZF9ibG9ja3Nbb107XG4gICAgICAgIGlmICghbmV3X2xvb2t1cC5oYXMob2xkX2Jsb2NrLmtleSkpXG4gICAgICAgICAgICBkZXN0cm95KG9sZF9ibG9jaywgbG9va3VwKTtcbiAgICB9XG4gICAgd2hpbGUgKG4pXG4gICAgICAgIGluc2VydChuZXdfYmxvY2tzW24gLSAxXSk7XG4gICAgcmV0dXJuIG5ld19ibG9ja3M7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9lYWNoX2tleXMoY3R4LCBsaXN0LCBnZXRfY29udGV4dCwgZ2V0X2tleSkge1xuICAgIGNvbnN0IGtleXMgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGdldF9rZXkoZ2V0X2NvbnRleHQoY3R4LCBsaXN0LCBpKSk7XG4gICAgICAgIGlmIChrZXlzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBoYXZlIGR1cGxpY2F0ZSBrZXlzIGluIGEga2V5ZWQgZWFjaCcpO1xuICAgICAgICB9XG4gICAgICAgIGtleXMuYWRkKGtleSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRfc3ByZWFkX3VwZGF0ZShsZXZlbHMsIHVwZGF0ZXMpIHtcbiAgICBjb25zdCB1cGRhdGUgPSB7fTtcbiAgICBjb25zdCB0b19udWxsX291dCA9IHt9O1xuICAgIGNvbnN0IGFjY291bnRlZF9mb3IgPSB7ICQkc2NvcGU6IDEgfTtcbiAgICBsZXQgaSA9IGxldmVscy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgICBjb25zdCBvID0gbGV2ZWxzW2ldO1xuICAgICAgICBjb25zdCBuID0gdXBkYXRlc1tpXTtcbiAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG8pIHtcbiAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gbikpXG4gICAgICAgICAgICAgICAgICAgIHRvX251bGxfb3V0W2tleV0gPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbikge1xuICAgICAgICAgICAgICAgIGlmICghYWNjb3VudGVkX2ZvcltrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVtrZXldID0gbltrZXldO1xuICAgICAgICAgICAgICAgICAgICBhY2NvdW50ZWRfZm9yW2tleV0gPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldmVsc1tpXSA9IG47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvKSB7XG4gICAgICAgICAgICAgICAgYWNjb3VudGVkX2ZvcltrZXldID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBpbiB0b19udWxsX291dCkge1xuICAgICAgICBpZiAoIShrZXkgaW4gdXBkYXRlKSlcbiAgICAgICAgICAgIHVwZGF0ZVtrZXldID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlO1xufVxuZnVuY3Rpb24gZ2V0X3NwcmVhZF9vYmplY3Qoc3ByZWFkX3Byb3BzKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBzcHJlYWRfcHJvcHMgPT09ICdvYmplY3QnICYmIHNwcmVhZF9wcm9wcyAhPT0gbnVsbCA/IHNwcmVhZF9wcm9wcyA6IHt9O1xufVxuXG4vLyBzb3VyY2U6IGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2luZGljZXMuaHRtbFxuY29uc3QgYm9vbGVhbl9hdHRyaWJ1dGVzID0gbmV3IFNldChbXG4gICAgJ2FsbG93ZnVsbHNjcmVlbicsXG4gICAgJ2FsbG93cGF5bWVudHJlcXVlc3QnLFxuICAgICdhc3luYycsXG4gICAgJ2F1dG9mb2N1cycsXG4gICAgJ2F1dG9wbGF5JyxcbiAgICAnY2hlY2tlZCcsXG4gICAgJ2NvbnRyb2xzJyxcbiAgICAnZGVmYXVsdCcsXG4gICAgJ2RlZmVyJyxcbiAgICAnZGlzYWJsZWQnLFxuICAgICdmb3Jtbm92YWxpZGF0ZScsXG4gICAgJ2hpZGRlbicsXG4gICAgJ2lzbWFwJyxcbiAgICAnbG9vcCcsXG4gICAgJ211bHRpcGxlJyxcbiAgICAnbXV0ZWQnLFxuICAgICdub21vZHVsZScsXG4gICAgJ25vdmFsaWRhdGUnLFxuICAgICdvcGVuJyxcbiAgICAncGxheXNpbmxpbmUnLFxuICAgICdyZWFkb25seScsXG4gICAgJ3JlcXVpcmVkJyxcbiAgICAncmV2ZXJzZWQnLFxuICAgICdzZWxlY3RlZCdcbl0pO1xuXG5jb25zdCB2b2lkX2VsZW1lbnRfbmFtZXMgPSAvXig/OmFyZWF8YmFzZXxicnxjb2x8Y29tbWFuZHxlbWJlZHxocnxpbWd8aW5wdXR8a2V5Z2VufGxpbmt8bWV0YXxwYXJhbXxzb3VyY2V8dHJhY2t8d2JyKSQvO1xuZnVuY3Rpb24gaXNfdm9pZChuYW1lKSB7XG4gICAgcmV0dXJuIHZvaWRfZWxlbWVudF9uYW1lcy50ZXN0KG5hbWUpIHx8IG5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJyFkb2N0eXBlJztcbn1cblxuY29uc3QgaW52YWxpZF9hdHRyaWJ1dGVfbmFtZV9jaGFyYWN0ZXIgPSAvW1xccydcIj4vPVxcdXtGREQwfS1cXHV7RkRFRn1cXHV7RkZGRX1cXHV7RkZGRn1cXHV7MUZGRkV9XFx1ezFGRkZGfVxcdXsyRkZGRX1cXHV7MkZGRkZ9XFx1ezNGRkZFfVxcdXszRkZGRn1cXHV7NEZGRkV9XFx1ezRGRkZGfVxcdXs1RkZGRX1cXHV7NUZGRkZ9XFx1ezZGRkZFfVxcdXs2RkZGRn1cXHV7N0ZGRkV9XFx1ezdGRkZGfVxcdXs4RkZGRX1cXHV7OEZGRkZ9XFx1ezlGRkZFfVxcdXs5RkZGRn1cXHV7QUZGRkV9XFx1e0FGRkZGfVxcdXtCRkZGRX1cXHV7QkZGRkZ9XFx1e0NGRkZFfVxcdXtDRkZGRn1cXHV7REZGRkV9XFx1e0RGRkZGfVxcdXtFRkZGRX1cXHV7RUZGRkZ9XFx1e0ZGRkZFfVxcdXtGRkZGRn1cXHV7MTBGRkZFfVxcdXsxMEZGRkZ9XS91O1xuLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjYXR0cmlidXRlcy0yXG4vLyBodHRwczovL2luZnJhLnNwZWMud2hhdHdnLm9yZy8jbm9uY2hhcmFjdGVyXG5mdW5jdGlvbiBzcHJlYWQoYXJncywgYXR0cnNfdG9fYWRkKSB7XG4gICAgY29uc3QgYXR0cmlidXRlcyA9IE9iamVjdC5hc3NpZ24oe30sIC4uLmFyZ3MpO1xuICAgIGlmIChhdHRyc190b19hZGQpIHtcbiAgICAgICAgY29uc3QgY2xhc3Nlc190b19hZGQgPSBhdHRyc190b19hZGQuY2xhc3NlcztcbiAgICAgICAgY29uc3Qgc3R5bGVzX3RvX2FkZCA9IGF0dHJzX3RvX2FkZC5zdHlsZXM7XG4gICAgICAgIGlmIChjbGFzc2VzX3RvX2FkZCkge1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXMuY2xhc3MgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMuY2xhc3MgPSBjbGFzc2VzX3RvX2FkZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMuY2xhc3MgKz0gJyAnICsgY2xhc3Nlc190b19hZGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0eWxlc190b19hZGQpIHtcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVzLnN0eWxlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLnN0eWxlID0gc3R5bGVfb2JqZWN0X3RvX3N0cmluZyhzdHlsZXNfdG9fYWRkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMuc3R5bGUgPSBzdHlsZV9vYmplY3RfdG9fc3RyaW5nKG1lcmdlX3Nzcl9zdHlsZXMoYXR0cmlidXRlcy5zdHlsZSwgc3R5bGVzX3RvX2FkZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBzdHIgPSAnJztcbiAgICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgICBpZiAoaW52YWxpZF9hdHRyaWJ1dGVfbmFtZV9jaGFyYWN0ZXIudGVzdChuYW1lKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhdHRyaWJ1dGVzW25hbWVdO1xuICAgICAgICBpZiAodmFsdWUgPT09IHRydWUpXG4gICAgICAgICAgICBzdHIgKz0gJyAnICsgbmFtZTtcbiAgICAgICAgZWxzZSBpZiAoYm9vbGVhbl9hdHRyaWJ1dGVzLmhhcyhuYW1lLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUpXG4gICAgICAgICAgICAgICAgc3RyICs9ICcgJyArIG5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgc3RyICs9IGAgJHtuYW1lfT1cIiR7dmFsdWV9XCJgO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHN0cjtcbn1cbmZ1bmN0aW9uIG1lcmdlX3Nzcl9zdHlsZXMoc3R5bGVfYXR0cmlidXRlLCBzdHlsZV9kaXJlY3RpdmUpIHtcbiAgICBjb25zdCBzdHlsZV9vYmplY3QgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGluZGl2aWR1YWxfc3R5bGUgb2Ygc3R5bGVfYXR0cmlidXRlLnNwbGl0KCc7JykpIHtcbiAgICAgICAgY29uc3QgY29sb25faW5kZXggPSBpbmRpdmlkdWFsX3N0eWxlLmluZGV4T2YoJzonKTtcbiAgICAgICAgY29uc3QgbmFtZSA9IGluZGl2aWR1YWxfc3R5bGUuc2xpY2UoMCwgY29sb25faW5kZXgpLnRyaW0oKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBpbmRpdmlkdWFsX3N0eWxlLnNsaWNlKGNvbG9uX2luZGV4ICsgMSkudHJpbSgpO1xuICAgICAgICBpZiAoIW5hbWUpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgc3R5bGVfb2JqZWN0W25hbWVdID0gdmFsdWU7XG4gICAgfVxuICAgIGZvciAoY29uc3QgbmFtZSBpbiBzdHlsZV9kaXJlY3RpdmUpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBzdHlsZV9kaXJlY3RpdmVbbmFtZV07XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgc3R5bGVfb2JqZWN0W25hbWVdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZWxldGUgc3R5bGVfb2JqZWN0W25hbWVdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdHlsZV9vYmplY3Q7XG59XG5jb25zdCBlc2NhcGVkID0ge1xuICAgICdcIic6ICcmcXVvdDsnLFxuICAgIFwiJ1wiOiAnJiMzOTsnLFxuICAgICcmJzogJyZhbXA7JyxcbiAgICAnPCc6ICcmbHQ7JyxcbiAgICAnPic6ICcmZ3Q7J1xufTtcbmZ1bmN0aW9uIGVzY2FwZShodG1sKSB7XG4gICAgcmV0dXJuIFN0cmluZyhodG1sKS5yZXBsYWNlKC9bXCInJjw+XS9nLCBtYXRjaCA9PiBlc2NhcGVkW21hdGNoXSk7XG59XG5mdW5jdGlvbiBlc2NhcGVfYXR0cmlidXRlX3ZhbHVlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyBlc2NhcGUodmFsdWUpIDogdmFsdWU7XG59XG5mdW5jdGlvbiBlc2NhcGVfb2JqZWN0KG9iaikge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICByZXN1bHRba2V5XSA9IGVzY2FwZV9hdHRyaWJ1dGVfdmFsdWUob2JqW2tleV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gZWFjaChpdGVtcywgZm4pIHtcbiAgICBsZXQgc3RyID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBzdHIgKz0gZm4oaXRlbXNbaV0sIGkpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xufVxuY29uc3QgbWlzc2luZ19jb21wb25lbnQgPSB7XG4gICAgJCRyZW5kZXI6ICgpID0+ICcnXG59O1xuZnVuY3Rpb24gdmFsaWRhdGVfY29tcG9uZW50KGNvbXBvbmVudCwgbmFtZSkge1xuICAgIGlmICghY29tcG9uZW50IHx8ICFjb21wb25lbnQuJCRyZW5kZXIpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdzdmVsdGU6Y29tcG9uZW50JylcbiAgICAgICAgICAgIG5hbWUgKz0gJyB0aGlzPXsuLi59JztcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGA8JHtuYW1lfT4gaXMgbm90IGEgdmFsaWQgU1NSIGNvbXBvbmVudC4gWW91IG1heSBuZWVkIHRvIHJldmlldyB5b3VyIGJ1aWxkIGNvbmZpZyB0byBlbnN1cmUgdGhhdCBkZXBlbmRlbmNpZXMgYXJlIGNvbXBpbGVkLCByYXRoZXIgdGhhbiBpbXBvcnRlZCBhcyBwcmUtY29tcGlsZWQgbW9kdWxlc2ApO1xuICAgIH1cbiAgICByZXR1cm4gY29tcG9uZW50O1xufVxuZnVuY3Rpb24gZGVidWcoZmlsZSwgbGluZSwgY29sdW1uLCB2YWx1ZXMpIHtcbiAgICBjb25zb2xlLmxvZyhge0BkZWJ1Z30gJHtmaWxlID8gZmlsZSArICcgJyA6ICcnfSgke2xpbmV9OiR7Y29sdW1ufSlgKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS5sb2codmFsdWVzKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgcmV0dXJuICcnO1xufVxubGV0IG9uX2Rlc3Ryb3k7XG5mdW5jdGlvbiBjcmVhdGVfc3NyX2NvbXBvbmVudChmbikge1xuICAgIGZ1bmN0aW9uICQkcmVuZGVyKHJlc3VsdCwgcHJvcHMsIGJpbmRpbmdzLCBzbG90cywgY29udGV4dCkge1xuICAgICAgICBjb25zdCBwYXJlbnRfY29tcG9uZW50ID0gY3VycmVudF9jb21wb25lbnQ7XG4gICAgICAgIGNvbnN0ICQkID0ge1xuICAgICAgICAgICAgb25fZGVzdHJveSxcbiAgICAgICAgICAgIGNvbnRleHQ6IG5ldyBNYXAoY29udGV4dCB8fCAocGFyZW50X2NvbXBvbmVudCA/IHBhcmVudF9jb21wb25lbnQuJCQuY29udGV4dCA6IFtdKSksXG4gICAgICAgICAgICAvLyB0aGVzZSB3aWxsIGJlIGltbWVkaWF0ZWx5IGRpc2NhcmRlZFxuICAgICAgICAgICAgb25fbW91bnQ6IFtdLFxuICAgICAgICAgICAgYmVmb3JlX3VwZGF0ZTogW10sXG4gICAgICAgICAgICBhZnRlcl91cGRhdGU6IFtdLFxuICAgICAgICAgICAgY2FsbGJhY2tzOiBibGFua19vYmplY3QoKVxuICAgICAgICB9O1xuICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoeyAkJCB9KTtcbiAgICAgICAgY29uc3QgaHRtbCA9IGZuKHJlc3VsdCwgcHJvcHMsIGJpbmRpbmdzLCBzbG90cyk7XG4gICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChwYXJlbnRfY29tcG9uZW50KTtcbiAgICAgICAgcmV0dXJuIGh0bWw7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHJlbmRlcjogKHByb3BzID0ge30sIHsgJCRzbG90cyA9IHt9LCBjb250ZXh0ID0gbmV3IE1hcCgpIH0gPSB7fSkgPT4ge1xuICAgICAgICAgICAgb25fZGVzdHJveSA9IFtdO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geyB0aXRsZTogJycsIGhlYWQ6ICcnLCBjc3M6IG5ldyBTZXQoKSB9O1xuICAgICAgICAgICAgY29uc3QgaHRtbCA9ICQkcmVuZGVyKHJlc3VsdCwgcHJvcHMsIHt9LCAkJHNsb3RzLCBjb250ZXh0KTtcbiAgICAgICAgICAgIHJ1bl9hbGwob25fZGVzdHJveSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGh0bWwsXG4gICAgICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IEFycmF5LmZyb20ocmVzdWx0LmNzcykubWFwKGNzcyA9PiBjc3MuY29kZSkuam9pbignXFxuJyksXG4gICAgICAgICAgICAgICAgICAgIG1hcDogbnVsbCAvLyBUT0RPXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBoZWFkOiByZXN1bHQudGl0bGUgKyByZXN1bHQuaGVhZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgJCRyZW5kZXJcbiAgICB9O1xufVxuZnVuY3Rpb24gYWRkX2F0dHJpYnV0ZShuYW1lLCB2YWx1ZSwgYm9vbGVhbikge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IChib29sZWFuICYmICF2YWx1ZSkpXG4gICAgICAgIHJldHVybiAnJztcbiAgICBjb25zdCBhc3NpZ25tZW50ID0gKGJvb2xlYW4gJiYgdmFsdWUgPT09IHRydWUpID8gJycgOiBgPVwiJHtlc2NhcGVfYXR0cmlidXRlX3ZhbHVlKHZhbHVlLnRvU3RyaW5nKCkpfVwiYDtcbiAgICByZXR1cm4gYCAke25hbWV9JHthc3NpZ25tZW50fWA7XG59XG5mdW5jdGlvbiBhZGRfY2xhc3NlcyhjbGFzc2VzKSB7XG4gICAgcmV0dXJuIGNsYXNzZXMgPyBgIGNsYXNzPVwiJHtjbGFzc2VzfVwiYCA6ICcnO1xufVxuZnVuY3Rpb24gc3R5bGVfb2JqZWN0X3RvX3N0cmluZyhzdHlsZV9vYmplY3QpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoc3R5bGVfb2JqZWN0KVxuICAgICAgICAuZmlsdGVyKGtleSA9PiBzdHlsZV9vYmplY3Rba2V5XSlcbiAgICAgICAgLm1hcChrZXkgPT4gYCR7a2V5fTogJHtzdHlsZV9vYmplY3Rba2V5XX07YClcbiAgICAgICAgLmpvaW4oJyAnKTtcbn1cbmZ1bmN0aW9uIGFkZF9zdHlsZXMoc3R5bGVfb2JqZWN0KSB7XG4gICAgY29uc3Qgc3R5bGVzID0gc3R5bGVfb2JqZWN0X3RvX3N0cmluZyhzdHlsZV9vYmplY3QpO1xuICAgIHJldHVybiBzdHlsZXMgPyBgIHN0eWxlPVwiJHtzdHlsZXN9XCJgIDogJyc7XG59XG5cbmZ1bmN0aW9uIGJpbmQoY29tcG9uZW50LCBuYW1lLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGluZGV4ID0gY29tcG9uZW50LiQkLnByb3BzW25hbWVdO1xuICAgIGlmIChpbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbXBvbmVudC4kJC5ib3VuZFtpbmRleF0gPSBjYWxsYmFjaztcbiAgICAgICAgY2FsbGJhY2soY29tcG9uZW50LiQkLmN0eFtpbmRleF0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZV9jb21wb25lbnQoYmxvY2spIHtcbiAgICBibG9jayAmJiBibG9jay5jKCk7XG59XG5mdW5jdGlvbiBjbGFpbV9jb21wb25lbnQoYmxvY2ssIHBhcmVudF9ub2Rlcykge1xuICAgIGJsb2NrICYmIGJsb2NrLmwocGFyZW50X25vZGVzKTtcbn1cbmZ1bmN0aW9uIG1vdW50X2NvbXBvbmVudChjb21wb25lbnQsIHRhcmdldCwgYW5jaG9yLCBjdXN0b21FbGVtZW50KSB7XG4gICAgY29uc3QgeyBmcmFnbWVudCwgb25fbW91bnQsIG9uX2Rlc3Ryb3ksIGFmdGVyX3VwZGF0ZSB9ID0gY29tcG9uZW50LiQkO1xuICAgIGZyYWdtZW50ICYmIGZyYWdtZW50Lm0odGFyZ2V0LCBhbmNob3IpO1xuICAgIGlmICghY3VzdG9tRWxlbWVudCkge1xuICAgICAgICAvLyBvbk1vdW50IGhhcHBlbnMgYmVmb3JlIHRoZSBpbml0aWFsIGFmdGVyVXBkYXRlXG4gICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3X29uX2Rlc3Ryb3kgPSBvbl9tb3VudC5tYXAocnVuKS5maWx0ZXIoaXNfZnVuY3Rpb24pO1xuICAgICAgICAgICAgaWYgKG9uX2Rlc3Ryb3kpIHtcbiAgICAgICAgICAgICAgICBvbl9kZXN0cm95LnB1c2goLi4ubmV3X29uX2Rlc3Ryb3kpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRWRnZSBjYXNlIC0gY29tcG9uZW50IHdhcyBkZXN0cm95ZWQgaW1tZWRpYXRlbHksXG4gICAgICAgICAgICAgICAgLy8gbW9zdCBsaWtlbHkgYXMgYSByZXN1bHQgb2YgYSBiaW5kaW5nIGluaXRpYWxpc2luZ1xuICAgICAgICAgICAgICAgIHJ1bl9hbGwobmV3X29uX2Rlc3Ryb3kpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcG9uZW50LiQkLm9uX21vdW50ID0gW107XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZnRlcl91cGRhdGUuZm9yRWFjaChhZGRfcmVuZGVyX2NhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIGRlc3Ryb3lfY29tcG9uZW50KGNvbXBvbmVudCwgZGV0YWNoaW5nKSB7XG4gICAgY29uc3QgJCQgPSBjb21wb25lbnQuJCQ7XG4gICAgaWYgKCQkLmZyYWdtZW50ICE9PSBudWxsKSB7XG4gICAgICAgIHJ1bl9hbGwoJCQub25fZGVzdHJveSk7XG4gICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50LmQoZGV0YWNoaW5nKTtcbiAgICAgICAgLy8gVE9ETyBudWxsIG91dCBvdGhlciByZWZzLCBpbmNsdWRpbmcgY29tcG9uZW50LiQkIChidXQgbmVlZCB0b1xuICAgICAgICAvLyBwcmVzZXJ2ZSBmaW5hbCBzdGF0ZT8pXG4gICAgICAgICQkLm9uX2Rlc3Ryb3kgPSAkJC5mcmFnbWVudCA9IG51bGw7XG4gICAgICAgICQkLmN0eCA9IFtdO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1ha2VfZGlydHkoY29tcG9uZW50LCBpKSB7XG4gICAgaWYgKGNvbXBvbmVudC4kJC5kaXJ0eVswXSA9PT0gLTEpIHtcbiAgICAgICAgZGlydHlfY29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XG4gICAgICAgIHNjaGVkdWxlX3VwZGF0ZSgpO1xuICAgICAgICBjb21wb25lbnQuJCQuZGlydHkuZmlsbCgwKTtcbiAgICB9XG4gICAgY29tcG9uZW50LiQkLmRpcnR5WyhpIC8gMzEpIHwgMF0gfD0gKDEgPDwgKGkgJSAzMSkpO1xufVxuZnVuY3Rpb24gaW5pdChjb21wb25lbnQsIG9wdGlvbnMsIGluc3RhbmNlLCBjcmVhdGVfZnJhZ21lbnQsIG5vdF9lcXVhbCwgcHJvcHMsIGFwcGVuZF9zdHlsZXMsIGRpcnR5ID0gWy0xXSkge1xuICAgIGNvbnN0IHBhcmVudF9jb21wb25lbnQgPSBjdXJyZW50X2NvbXBvbmVudDtcbiAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY29tcG9uZW50KTtcbiAgICBjb25zdCAkJCA9IGNvbXBvbmVudC4kJCA9IHtcbiAgICAgICAgZnJhZ21lbnQ6IG51bGwsXG4gICAgICAgIGN0eDogbnVsbCxcbiAgICAgICAgLy8gc3RhdGVcbiAgICAgICAgcHJvcHMsXG4gICAgICAgIHVwZGF0ZTogbm9vcCxcbiAgICAgICAgbm90X2VxdWFsLFxuICAgICAgICBib3VuZDogYmxhbmtfb2JqZWN0KCksXG4gICAgICAgIC8vIGxpZmVjeWNsZVxuICAgICAgICBvbl9tb3VudDogW10sXG4gICAgICAgIG9uX2Rlc3Ryb3k6IFtdLFxuICAgICAgICBvbl9kaXNjb25uZWN0OiBbXSxcbiAgICAgICAgYmVmb3JlX3VwZGF0ZTogW10sXG4gICAgICAgIGFmdGVyX3VwZGF0ZTogW10sXG4gICAgICAgIGNvbnRleHQ6IG5ldyBNYXAob3B0aW9ucy5jb250ZXh0IHx8IChwYXJlbnRfY29tcG9uZW50ID8gcGFyZW50X2NvbXBvbmVudC4kJC5jb250ZXh0IDogW10pKSxcbiAgICAgICAgLy8gZXZlcnl0aGluZyBlbHNlXG4gICAgICAgIGNhbGxiYWNrczogYmxhbmtfb2JqZWN0KCksXG4gICAgICAgIGRpcnR5LFxuICAgICAgICBza2lwX2JvdW5kOiBmYWxzZSxcbiAgICAgICAgcm9vdDogb3B0aW9ucy50YXJnZXQgfHwgcGFyZW50X2NvbXBvbmVudC4kJC5yb290XG4gICAgfTtcbiAgICBhcHBlbmRfc3R5bGVzICYmIGFwcGVuZF9zdHlsZXMoJCQucm9vdCk7XG4gICAgbGV0IHJlYWR5ID0gZmFsc2U7XG4gICAgJCQuY3R4ID0gaW5zdGFuY2VcbiAgICAgICAgPyBpbnN0YW5jZShjb21wb25lbnQsIG9wdGlvbnMucHJvcHMgfHwge30sIChpLCByZXQsIC4uLnJlc3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmVzdC5sZW5ndGggPyByZXN0WzBdIDogcmV0O1xuICAgICAgICAgICAgaWYgKCQkLmN0eCAmJiBub3RfZXF1YWwoJCQuY3R4W2ldLCAkJC5jdHhbaV0gPSB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoISQkLnNraXBfYm91bmQgJiYgJCQuYm91bmRbaV0pXG4gICAgICAgICAgICAgICAgICAgICQkLmJvdW5kW2ldKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVhZHkpXG4gICAgICAgICAgICAgICAgICAgIG1ha2VfZGlydHkoY29tcG9uZW50LCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH0pXG4gICAgICAgIDogW107XG4gICAgJCQudXBkYXRlKCk7XG4gICAgcmVhZHkgPSB0cnVlO1xuICAgIHJ1bl9hbGwoJCQuYmVmb3JlX3VwZGF0ZSk7XG4gICAgLy8gYGZhbHNlYCBhcyBhIHNwZWNpYWwgY2FzZSBvZiBubyBET00gY29tcG9uZW50XG4gICAgJCQuZnJhZ21lbnQgPSBjcmVhdGVfZnJhZ21lbnQgPyBjcmVhdGVfZnJhZ21lbnQoJCQuY3R4KSA6IGZhbHNlO1xuICAgIGlmIChvcHRpb25zLnRhcmdldCkge1xuICAgICAgICBpZiAob3B0aW9ucy5oeWRyYXRlKSB7XG4gICAgICAgICAgICBzdGFydF9oeWRyYXRpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVzID0gY2hpbGRyZW4ob3B0aW9ucy50YXJnZXQpO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50Lmwobm9kZXMpO1xuICAgICAgICAgICAgbm9kZXMuZm9yRWFjaChkZXRhY2gpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50LmMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5pbnRybylcbiAgICAgICAgICAgIHRyYW5zaXRpb25faW4oY29tcG9uZW50LiQkLmZyYWdtZW50KTtcbiAgICAgICAgbW91bnRfY29tcG9uZW50KGNvbXBvbmVudCwgb3B0aW9ucy50YXJnZXQsIG9wdGlvbnMuYW5jaG9yLCBvcHRpb25zLmN1c3RvbUVsZW1lbnQpO1xuICAgICAgICBlbmRfaHlkcmF0aW5nKCk7XG4gICAgICAgIGZsdXNoKCk7XG4gICAgfVxuICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChwYXJlbnRfY29tcG9uZW50KTtcbn1cbmxldCBTdmVsdGVFbGVtZW50O1xuaWYgKHR5cGVvZiBIVE1MRWxlbWVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIFN2ZWx0ZUVsZW1lbnQgPSBjbGFzcyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBjb25zdCB7IG9uX21vdW50IH0gPSB0aGlzLiQkO1xuICAgICAgICAgICAgdGhpcy4kJC5vbl9kaXNjb25uZWN0ID0gb25fbW91bnQubWFwKHJ1bikuZmlsdGVyKGlzX2Z1bmN0aW9uKTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgdG9kbzogaW1wcm92ZSB0eXBpbmdzXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLiQkLnNsb3R0ZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIHRvZG86IGltcHJvdmUgdHlwaW5nc1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGhpcy4kJC5zbG90dGVkW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhdHRyLCBfb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzW2F0dHJdID0gbmV3VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBydW5fYWxsKHRoaXMuJCQub25fZGlzY29ubmVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgJGRlc3Ryb3koKSB7XG4gICAgICAgICAgICBkZXN0cm95X2NvbXBvbmVudCh0aGlzLCAxKTtcbiAgICAgICAgICAgIHRoaXMuJGRlc3Ryb3kgPSBub29wO1xuICAgICAgICB9XG4gICAgICAgICRvbih0eXBlLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgLy8gVE9ETyBzaG91bGQgdGhpcyBkZWxlZ2F0ZSB0byBhZGRFdmVudExpc3RlbmVyP1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdIHx8ICh0aGlzLiQkLmNhbGxiYWNrc1t0eXBlXSA9IFtdKSk7XG4gICAgICAgICAgICBjYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY2FsbGJhY2tzLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAkc2V0KCQkcHJvcHMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiQkc2V0ICYmICFpc19lbXB0eSgkJHByb3BzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJCQuc2tpcF9ib3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy4kJHNldCgkJHByb3BzKTtcbiAgICAgICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIFN2ZWx0ZSBjb21wb25lbnRzLiBVc2VkIHdoZW4gZGV2PWZhbHNlLlxuICovXG5jbGFzcyBTdmVsdGVDb21wb25lbnQge1xuICAgICRkZXN0cm95KCkge1xuICAgICAgICBkZXN0cm95X2NvbXBvbmVudCh0aGlzLCAxKTtcbiAgICAgICAgdGhpcy4kZGVzdHJveSA9IG5vb3A7XG4gICAgfVxuICAgICRvbih0eXBlLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSAodGhpcy4kJC5jYWxsYmFja3NbdHlwZV0gfHwgKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdID0gW10pKTtcbiAgICAgICAgY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjYWxsYmFja3MuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAkc2V0KCQkcHJvcHMpIHtcbiAgICAgICAgaWYgKHRoaXMuJCRzZXQgJiYgIWlzX2VtcHR5KCQkcHJvcHMpKSB7XG4gICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy4kJHNldCgkJHByb3BzKTtcbiAgICAgICAgICAgIHRoaXMuJCQuc2tpcF9ib3VuZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkaXNwYXRjaF9kZXYodHlwZSwgZGV0YWlsKSB7XG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjdXN0b21fZXZlbnQodHlwZSwgT2JqZWN0LmFzc2lnbih7IHZlcnNpb246ICczLjQ4LjAnIH0sIGRldGFpbCksIHsgYnViYmxlczogdHJ1ZSB9KSk7XG59XG5mdW5jdGlvbiBhcHBlbmRfZGV2KHRhcmdldCwgbm9kZSkge1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NSW5zZXJ0JywgeyB0YXJnZXQsIG5vZGUgfSk7XG4gICAgYXBwZW5kKHRhcmdldCwgbm9kZSk7XG59XG5mdW5jdGlvbiBhcHBlbmRfaHlkcmF0aW9uX2Rldih0YXJnZXQsIG5vZGUpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUluc2VydCcsIHsgdGFyZ2V0LCBub2RlIH0pO1xuICAgIGFwcGVuZF9oeWRyYXRpb24odGFyZ2V0LCBub2RlKTtcbn1cbmZ1bmN0aW9uIGluc2VydF9kZXYodGFyZ2V0LCBub2RlLCBhbmNob3IpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUluc2VydCcsIHsgdGFyZ2V0LCBub2RlLCBhbmNob3IgfSk7XG4gICAgaW5zZXJ0KHRhcmdldCwgbm9kZSwgYW5jaG9yKTtcbn1cbmZ1bmN0aW9uIGluc2VydF9oeWRyYXRpb25fZGV2KHRhcmdldCwgbm9kZSwgYW5jaG9yKSB7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01JbnNlcnQnLCB7IHRhcmdldCwgbm9kZSwgYW5jaG9yIH0pO1xuICAgIGluc2VydF9oeWRyYXRpb24odGFyZ2V0LCBub2RlLCBhbmNob3IpO1xufVxuZnVuY3Rpb24gZGV0YWNoX2Rldihub2RlKSB7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01SZW1vdmUnLCB7IG5vZGUgfSk7XG4gICAgZGV0YWNoKG5vZGUpO1xufVxuZnVuY3Rpb24gZGV0YWNoX2JldHdlZW5fZGV2KGJlZm9yZSwgYWZ0ZXIpIHtcbiAgICB3aGlsZSAoYmVmb3JlLm5leHRTaWJsaW5nICYmIGJlZm9yZS5uZXh0U2libGluZyAhPT0gYWZ0ZXIpIHtcbiAgICAgICAgZGV0YWNoX2RldihiZWZvcmUubmV4dFNpYmxpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRldGFjaF9iZWZvcmVfZGV2KGFmdGVyKSB7XG4gICAgd2hpbGUgKGFmdGVyLnByZXZpb3VzU2libGluZykge1xuICAgICAgICBkZXRhY2hfZGV2KGFmdGVyLnByZXZpb3VzU2libGluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGV0YWNoX2FmdGVyX2RldihiZWZvcmUpIHtcbiAgICB3aGlsZSAoYmVmb3JlLm5leHRTaWJsaW5nKSB7XG4gICAgICAgIGRldGFjaF9kZXYoYmVmb3JlLm5leHRTaWJsaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBsaXN0ZW5fZGV2KG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zLCBoYXNfcHJldmVudF9kZWZhdWx0LCBoYXNfc3RvcF9wcm9wYWdhdGlvbikge1xuICAgIGNvbnN0IG1vZGlmaWVycyA9IG9wdGlvbnMgPT09IHRydWUgPyBbJ2NhcHR1cmUnXSA6IG9wdGlvbnMgPyBBcnJheS5mcm9tKE9iamVjdC5rZXlzKG9wdGlvbnMpKSA6IFtdO1xuICAgIGlmIChoYXNfcHJldmVudF9kZWZhdWx0KVxuICAgICAgICBtb2RpZmllcnMucHVzaCgncHJldmVudERlZmF1bHQnKTtcbiAgICBpZiAoaGFzX3N0b3BfcHJvcGFnYXRpb24pXG4gICAgICAgIG1vZGlmaWVycy5wdXNoKCdzdG9wUHJvcGFnYXRpb24nKTtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUFkZEV2ZW50TGlzdGVuZXInLCB7IG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBtb2RpZmllcnMgfSk7XG4gICAgY29uc3QgZGlzcG9zZSA9IGxpc3Rlbihub2RlLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01SZW1vdmVFdmVudExpc3RlbmVyJywgeyBub2RlLCBldmVudCwgaGFuZGxlciwgbW9kaWZpZXJzIH0pO1xuICAgICAgICBkaXNwb3NlKCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGF0dHJfZGV2KG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICBhdHRyKG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpO1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVJlbW92ZUF0dHJpYnV0ZScsIHsgbm9kZSwgYXR0cmlidXRlIH0pO1xuICAgIGVsc2VcbiAgICAgICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01TZXRBdHRyaWJ1dGUnLCB7IG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUgfSk7XG59XG5mdW5jdGlvbiBwcm9wX2Rldihub2RlLCBwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICBub2RlW3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NU2V0UHJvcGVydHknLCB7IG5vZGUsIHByb3BlcnR5LCB2YWx1ZSB9KTtcbn1cbmZ1bmN0aW9uIGRhdGFzZXRfZGV2KG5vZGUsIHByb3BlcnR5LCB2YWx1ZSkge1xuICAgIG5vZGUuZGF0YXNldFtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVNldERhdGFzZXQnLCB7IG5vZGUsIHByb3BlcnR5LCB2YWx1ZSB9KTtcbn1cbmZ1bmN0aW9uIHNldF9kYXRhX2Rldih0ZXh0LCBkYXRhKSB7XG4gICAgZGF0YSA9ICcnICsgZGF0YTtcbiAgICBpZiAodGV4dC53aG9sZVRleHQgPT09IGRhdGEpXG4gICAgICAgIHJldHVybjtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVNldERhdGEnLCB7IG5vZGU6IHRleHQsIGRhdGEgfSk7XG4gICAgdGV4dC5kYXRhID0gZGF0YTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX2VhY2hfYXJndW1lbnQoYXJnKSB7XG4gICAgaWYgKHR5cGVvZiBhcmcgIT09ICdzdHJpbmcnICYmICEoYXJnICYmIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmICdsZW5ndGgnIGluIGFyZykpIHtcbiAgICAgICAgbGV0IG1zZyA9ICd7I2VhY2h9IG9ubHkgaXRlcmF0ZXMgb3ZlciBhcnJheS1saWtlIG9iamVjdHMuJztcbiAgICAgICAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgYXJnICYmIFN5bWJvbC5pdGVyYXRvciBpbiBhcmcpIHtcbiAgICAgICAgICAgIG1zZyArPSAnIFlvdSBjYW4gdXNlIGEgc3ByZWFkIHRvIGNvbnZlcnQgdGhpcyBpdGVyYWJsZSBpbnRvIGFuIGFycmF5Lic7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gdmFsaWRhdGVfc2xvdHMobmFtZSwgc2xvdCwga2V5cykge1xuICAgIGZvciAoY29uc3Qgc2xvdF9rZXkgb2YgT2JqZWN0LmtleXMoc2xvdCkpIHtcbiAgICAgICAgaWYgKCF+a2V5cy5pbmRleE9mKHNsb3Rfa2V5KSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGA8JHtuYW1lfT4gcmVjZWl2ZWQgYW4gdW5leHBlY3RlZCBzbG90IFwiJHtzbG90X2tleX1cIi5gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX2R5bmFtaWNfZWxlbWVudCh0YWcpIHtcbiAgICBjb25zdCBpc19zdHJpbmcgPSB0eXBlb2YgdGFnID09PSAnc3RyaW5nJztcbiAgICBpZiAodGFnICYmICFpc19zdHJpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCc8c3ZlbHRlOmVsZW1lbnQ+IGV4cGVjdHMgXCJ0aGlzXCIgYXR0cmlidXRlIHRvIGJlIGEgc3RyaW5nLicpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX3ZvaWRfZHluYW1pY19lbGVtZW50KHRhZykge1xuICAgIGlmICh0YWcgJiYgaXNfdm9pZCh0YWcpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgPHN2ZWx0ZTplbGVtZW50IHRoaXM9XCIke3RhZ31cIj4gaXMgc2VsZi1jbG9zaW5nIGFuZCBjYW5ub3QgaGF2ZSBjb250ZW50LmApO1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgU3ZlbHRlIGNvbXBvbmVudHMgd2l0aCBzb21lIG1pbm9yIGRldi1lbmhhbmNlbWVudHMuIFVzZWQgd2hlbiBkZXY9dHJ1ZS5cbiAqL1xuY2xhc3MgU3ZlbHRlQ29tcG9uZW50RGV2IGV4dGVuZHMgU3ZlbHRlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucyB8fCAoIW9wdGlvbnMudGFyZ2V0ICYmICFvcHRpb25zLiQkaW5saW5lKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ3RhcmdldCcgaXMgYSByZXF1aXJlZCBvcHRpb25cIik7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG4gICAgJGRlc3Ryb3koKSB7XG4gICAgICAgIHN1cGVyLiRkZXN0cm95KCk7XG4gICAgICAgIHRoaXMuJGRlc3Ryb3kgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0NvbXBvbmVudCB3YXMgYWxyZWFkeSBkZXN0cm95ZWQnKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgICAgIH07XG4gICAgfVxuICAgICRjYXB0dXJlX3N0YXRlKCkgeyB9XG4gICAgJGluamVjdF9zdGF0ZSgpIHsgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIHRvIGNyZWF0ZSBzdHJvbmdseSB0eXBlZCBTdmVsdGUgY29tcG9uZW50cy5cbiAqIFRoaXMgb25seSBleGlzdHMgZm9yIHR5cGluZyBwdXJwb3NlcyBhbmQgc2hvdWxkIGJlIHVzZWQgaW4gYC5kLnRzYCBmaWxlcy5cbiAqXG4gKiAjIyMgRXhhbXBsZTpcbiAqXG4gKiBZb3UgaGF2ZSBjb21wb25lbnQgbGlicmFyeSBvbiBucG0gY2FsbGVkIGBjb21wb25lbnQtbGlicmFyeWAsIGZyb20gd2hpY2hcbiAqIHlvdSBleHBvcnQgYSBjb21wb25lbnQgY2FsbGVkIGBNeUNvbXBvbmVudGAuIEZvciBTdmVsdGUrVHlwZVNjcmlwdCB1c2VycyxcbiAqIHlvdSB3YW50IHRvIHByb3ZpZGUgdHlwaW5ncy4gVGhlcmVmb3JlIHlvdSBjcmVhdGUgYSBgaW5kZXguZC50c2A6XG4gKiBgYGB0c1xuICogaW1wb3J0IHsgU3ZlbHRlQ29tcG9uZW50VHlwZWQgfSBmcm9tIFwic3ZlbHRlXCI7XG4gKiBleHBvcnQgY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnRUeXBlZDx7Zm9vOiBzdHJpbmd9PiB7fVxuICogYGBgXG4gKiBUeXBpbmcgdGhpcyBtYWtlcyBpdCBwb3NzaWJsZSBmb3IgSURFcyBsaWtlIFZTIENvZGUgd2l0aCB0aGUgU3ZlbHRlIGV4dGVuc2lvblxuICogdG8gcHJvdmlkZSBpbnRlbGxpc2Vuc2UgYW5kIHRvIHVzZSB0aGUgY29tcG9uZW50IGxpa2UgdGhpcyBpbiBhIFN2ZWx0ZSBmaWxlXG4gKiB3aXRoIFR5cGVTY3JpcHQ6XG4gKiBgYGBzdmVsdGVcbiAqIDxzY3JpcHQgbGFuZz1cInRzXCI+XG4gKiBcdGltcG9ydCB7IE15Q29tcG9uZW50IH0gZnJvbSBcImNvbXBvbmVudC1saWJyYXJ5XCI7XG4gKiA8L3NjcmlwdD5cbiAqIDxNeUNvbXBvbmVudCBmb289eydiYXInfSAvPlxuICogYGBgXG4gKlxuICogIyMjIyBXaHkgbm90IG1ha2UgdGhpcyBwYXJ0IG9mIGBTdmVsdGVDb21wb25lbnQoRGV2KWA/XG4gKiBCZWNhdXNlXG4gKiBgYGB0c1xuICogY2xhc3MgQVN1YmNsYXNzT2ZTdmVsdGVDb21wb25lbnQgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnQ8e2Zvbzogc3RyaW5nfT4ge31cbiAqIGNvbnN0IGNvbXBvbmVudDogdHlwZW9mIFN2ZWx0ZUNvbXBvbmVudCA9IEFTdWJjbGFzc09mU3ZlbHRlQ29tcG9uZW50O1xuICogYGBgXG4gKiB3aWxsIHRocm93IGEgdHlwZSBlcnJvciwgc28gd2UgbmVlZCB0byBzZXBhcmF0ZSB0aGUgbW9yZSBzdHJpY3RseSB0eXBlZCBjbGFzcy5cbiAqL1xuY2xhc3MgU3ZlbHRlQ29tcG9uZW50VHlwZWQgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnREZXYge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgfVxufVxuZnVuY3Rpb24gbG9vcF9ndWFyZCh0aW1lb3V0KSB7XG4gICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGlmIChEYXRlLm5vdygpIC0gc3RhcnQgPiB0aW1lb3V0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luZmluaXRlIGxvb3AgZGV0ZWN0ZWQnKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCB7IEh0bWxUYWcsIEh0bWxUYWdIeWRyYXRpb24sIFN2ZWx0ZUNvbXBvbmVudCwgU3ZlbHRlQ29tcG9uZW50RGV2LCBTdmVsdGVDb21wb25lbnRUeXBlZCwgU3ZlbHRlRWxlbWVudCwgYWN0aW9uX2Rlc3Ryb3llciwgYWRkX2F0dHJpYnV0ZSwgYWRkX2NsYXNzZXMsIGFkZF9mbHVzaF9jYWxsYmFjaywgYWRkX2xvY2F0aW9uLCBhZGRfcmVuZGVyX2NhbGxiYWNrLCBhZGRfcmVzaXplX2xpc3RlbmVyLCBhZGRfc3R5bGVzLCBhZGRfdHJhbnNmb3JtLCBhZnRlclVwZGF0ZSwgYXBwZW5kLCBhcHBlbmRfZGV2LCBhcHBlbmRfZW1wdHlfc3R5bGVzaGVldCwgYXBwZW5kX2h5ZHJhdGlvbiwgYXBwZW5kX2h5ZHJhdGlvbl9kZXYsIGFwcGVuZF9zdHlsZXMsIGFzc2lnbiwgYXR0ciwgYXR0cl9kZXYsIGF0dHJpYnV0ZV90b19vYmplY3QsIGJlZm9yZVVwZGF0ZSwgYmluZCwgYmluZGluZ19jYWxsYmFja3MsIGJsYW5rX29iamVjdCwgYnViYmxlLCBjaGVja19vdXRyb3MsIGNoaWxkcmVuLCBjbGFpbV9jb21wb25lbnQsIGNsYWltX2VsZW1lbnQsIGNsYWltX2h0bWxfdGFnLCBjbGFpbV9zcGFjZSwgY2xhaW1fc3ZnX2VsZW1lbnQsIGNsYWltX3RleHQsIGNsZWFyX2xvb3BzLCBjb21wb25lbnRfc3Vic2NyaWJlLCBjb21wdXRlX3Jlc3RfcHJvcHMsIGNvbXB1dGVfc2xvdHMsIGNyZWF0ZUV2ZW50RGlzcGF0Y2hlciwgY3JlYXRlX2FuaW1hdGlvbiwgY3JlYXRlX2JpZGlyZWN0aW9uYWxfdHJhbnNpdGlvbiwgY3JlYXRlX2NvbXBvbmVudCwgY3JlYXRlX2luX3RyYW5zaXRpb24sIGNyZWF0ZV9vdXRfdHJhbnNpdGlvbiwgY3JlYXRlX3Nsb3QsIGNyZWF0ZV9zc3JfY29tcG9uZW50LCBjdXJyZW50X2NvbXBvbmVudCwgY3VzdG9tX2V2ZW50LCBkYXRhc2V0X2RldiwgZGVidWcsIGRlc3Ryb3lfYmxvY2ssIGRlc3Ryb3lfY29tcG9uZW50LCBkZXN0cm95X2VhY2gsIGRldGFjaCwgZGV0YWNoX2FmdGVyX2RldiwgZGV0YWNoX2JlZm9yZV9kZXYsIGRldGFjaF9iZXR3ZWVuX2RldiwgZGV0YWNoX2RldiwgZGlydHlfY29tcG9uZW50cywgZGlzcGF0Y2hfZGV2LCBlYWNoLCBlbGVtZW50LCBlbGVtZW50X2lzLCBlbXB0eSwgZW5kX2h5ZHJhdGluZywgZXNjYXBlLCBlc2NhcGVfYXR0cmlidXRlX3ZhbHVlLCBlc2NhcGVfb2JqZWN0LCBlc2NhcGVkLCBleGNsdWRlX2ludGVybmFsX3Byb3BzLCBmaXhfYW5kX2Rlc3Ryb3lfYmxvY2ssIGZpeF9hbmRfb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2ssIGZpeF9wb3NpdGlvbiwgZmx1c2gsIGdldEFsbENvbnRleHRzLCBnZXRDb250ZXh0LCBnZXRfYWxsX2RpcnR5X2Zyb21fc2NvcGUsIGdldF9iaW5kaW5nX2dyb3VwX3ZhbHVlLCBnZXRfY3VycmVudF9jb21wb25lbnQsIGdldF9jdXN0b21fZWxlbWVudHNfc2xvdHMsIGdldF9yb290X2Zvcl9zdHlsZSwgZ2V0X3Nsb3RfY2hhbmdlcywgZ2V0X3NwcmVhZF9vYmplY3QsIGdldF9zcHJlYWRfdXBkYXRlLCBnZXRfc3RvcmVfdmFsdWUsIGdsb2JhbHMsIGdyb3VwX291dHJvcywgaGFuZGxlX3Byb21pc2UsIGhhc0NvbnRleHQsIGhhc19wcm9wLCBpZGVudGl0eSwgaW5pdCwgaW5zZXJ0LCBpbnNlcnRfZGV2LCBpbnNlcnRfaHlkcmF0aW9uLCBpbnNlcnRfaHlkcmF0aW9uX2RldiwgaW50cm9zLCBpbnZhbGlkX2F0dHJpYnV0ZV9uYW1lX2NoYXJhY3RlciwgaXNfY2xpZW50LCBpc19jcm9zc29yaWdpbiwgaXNfZW1wdHksIGlzX2Z1bmN0aW9uLCBpc19wcm9taXNlLCBpc192b2lkLCBsaXN0ZW4sIGxpc3Rlbl9kZXYsIGxvb3AsIGxvb3BfZ3VhcmQsIG1lcmdlX3Nzcl9zdHlsZXMsIG1pc3NpbmdfY29tcG9uZW50LCBtb3VudF9jb21wb25lbnQsIG5vb3AsIG5vdF9lcXVhbCwgbm93LCBudWxsX3RvX2VtcHR5LCBvYmplY3Rfd2l0aG91dF9wcm9wZXJ0aWVzLCBvbkRlc3Ryb3ksIG9uTW91bnQsIG9uY2UsIG91dHJvX2FuZF9kZXN0cm95X2Jsb2NrLCBwcmV2ZW50X2RlZmF1bHQsIHByb3BfZGV2LCBxdWVyeV9zZWxlY3Rvcl9hbGwsIHJhZiwgcnVuLCBydW5fYWxsLCBzYWZlX25vdF9lcXVhbCwgc2NoZWR1bGVfdXBkYXRlLCBzZWxlY3RfbXVsdGlwbGVfdmFsdWUsIHNlbGVjdF9vcHRpb24sIHNlbGVjdF9vcHRpb25zLCBzZWxlY3RfdmFsdWUsIHNlbGYsIHNldENvbnRleHQsIHNldF9hdHRyaWJ1dGVzLCBzZXRfY3VycmVudF9jb21wb25lbnQsIHNldF9jdXN0b21fZWxlbWVudF9kYXRhLCBzZXRfZGF0YSwgc2V0X2RhdGFfZGV2LCBzZXRfaW5wdXRfdHlwZSwgc2V0X2lucHV0X3ZhbHVlLCBzZXRfbm93LCBzZXRfcmFmLCBzZXRfc3RvcmVfdmFsdWUsIHNldF9zdHlsZSwgc2V0X3N2Z19hdHRyaWJ1dGVzLCBzcGFjZSwgc3ByZWFkLCBzcmNfdXJsX2VxdWFsLCBzdGFydF9oeWRyYXRpbmcsIHN0b3BfcHJvcGFnYXRpb24sIHN1YnNjcmliZSwgc3ZnX2VsZW1lbnQsIHRleHQsIHRpY2ssIHRpbWVfcmFuZ2VzX3RvX2FycmF5LCB0b19udW1iZXIsIHRvZ2dsZV9jbGFzcywgdHJhbnNpdGlvbl9pbiwgdHJhbnNpdGlvbl9vdXQsIHRydXN0ZWQsIHVwZGF0ZV9hd2FpdF9ibG9ja19icmFuY2gsIHVwZGF0ZV9rZXllZF9lYWNoLCB1cGRhdGVfc2xvdCwgdXBkYXRlX3Nsb3RfYmFzZSwgdmFsaWRhdGVfY29tcG9uZW50LCB2YWxpZGF0ZV9keW5hbWljX2VsZW1lbnQsIHZhbGlkYXRlX2VhY2hfYXJndW1lbnQsIHZhbGlkYXRlX2VhY2hfa2V5cywgdmFsaWRhdGVfc2xvdHMsIHZhbGlkYXRlX3N0b3JlLCB2YWxpZGF0ZV92b2lkX2R5bmFtaWNfZWxlbWVudCwgeGxpbmtfYXR0ciB9O1xuIiwgImltcG9ydCB7IG1vbWVudCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmNvbnN0IG1vbnRoTmFtZXMgPSBbJ0phbnVhcnknLCAnRmVicnVhcnknLCAnTWFyY2gnLCAnQXByaWwnLCAnTWF5JywgJ0p1bmUnLCAnSnVseScsICdBdWd1c3QnLCAnU2VwdGVtYmVyJywgJ09jdG9iZXInLCAnTm92ZW1iZXInLCAnRGVjZW1iZXInXTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRNb250aE5hbWUoaW5kZXg6IG51bWJlcik6IHN0cmluZyB7XHJcblx0cmV0dXJuIG1vbnRoTmFtZXNbaW5kZXhdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0ZVJvd3MobW9udGhJbmRleDogbnVtYmVyLCB5ZWFyOiBudW1iZXIpOiBudW1iZXJbXSB7XHJcblx0Y29uc3QgZGF5czogbnVtYmVyID0gbW9tZW50KG5ldyBEYXRlKHllYXIsIG1vbnRoSW5kZXgpKS5kYXlzSW5Nb250aCgpOyAvLyBhbW91bnQgb2YgZGF5cyBpbiBtb250aFxyXG5cdGxldCByb3dzOiBudW1iZXJbXSA9IG5ldyBBcnJheSg0MikuZmlsbCh1bmRlZmluZWQpOyAvLyBlbXB0eSA0MiBsb25nIGFycmF5XHJcblx0Y29uc3Qgc3RhcnRJbmRleDogbnVtYmVyID0gZ2V0V2Vla0RheShuZXcgRGF0ZSh5ZWFyLCBtb250aEluZGV4LCAxKSk7IC8vIGluZGV4IG9mZnNldCBiYXNlZCBvbiB3ZWVrZGF5IG9mIGZpcnN0IGRheSBpbiBtb250aFxyXG5cclxuXHRmb3IgKGxldCBpID0gMDsgaSA8IGRheXM7IGkrKykge1xyXG5cdFx0cm93c1tpICsgc3RhcnRJbmRleF0gPSBpICsgMTtcclxuXHR9XHJcblxyXG5cdHJvd3MgPSByb3dzW3Jvd3MubGVuZ3RoIC0gN10gPyByb3dzIDogcm93cy5zbGljZSgwLCAtNyk7IC8vIHNsaWNlIGxhc3Qgd2VlayBpZiBpdCBpcyBlbXB0eVxyXG5cdHJvd3MgPSByb3dzW3Jvd3MubGVuZ3RoIC0gN10gPyByb3dzIDogcm93cy5zbGljZSgwLCAtNyk7IC8vIHNsaWNlIGxhc3Qgd2VlayBpZiBpdCBpcyBlbXB0eVxyXG5cclxuXHRyZXR1cm4gcm93cztcclxufVxyXG5cclxuLy8gZmlyc3QgZGF5IG9mIHRoZSB3ZWVrIGlzIG1vbmRheSB3aGVyZSBJIGxpdmVcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFdlZWtEYXkoZGF0ZTogRGF0ZSk6IG51bWJlciB7XHJcblx0cmV0dXJuIGRhdGUuZ2V0RGF5KCkgPT09IDAgPyA2IDogZGF0ZS5nZXREYXkoKSAtIDE7XHJcbn1cclxuXHJcbi8vIGZpcnN0IGRheSBvZiB0aGUgd2VlayBpcyBtb25kYXkgd2hlcmUgSSBsaXZlXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRXZWVrRGF5cygpOiBzdHJpbmdbXSB7XHJcblx0cmV0dXJuIFsnTW8nLCAnVHUnLCAnV2UnLCAnVGgnLCAnRnInLCAnU2EnLCAnU3UnXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHV1aWQoKTogKCkgPT4gbnVtYmVyIHtcclxuXHRsZXQgaWQgPSAwO1xyXG5cdHJldHVybiAoKSA9PiB7XHJcblx0XHRyZXR1cm4gKytpZDtcclxuXHR9O1xyXG59XHJcbiIsICI8c2NyaXB0IGxhbmc9XCJ0c1wiPlxyXG5cdGltcG9ydCB7Z2V0RGF0ZVJvd3MsIGdldFdlZWtEYXlzLCB1dWlkfSBmcm9tICcuL0RhdGVQaWNrZXJJbnB1dFN2ZWx0ZUhlbHBlcnMuanMnO1xyXG5cdGltcG9ydCB7Y3JlYXRlRXZlbnREaXNwYXRjaGVyfSBmcm9tICdzdmVsdGUnO1xyXG5cdGltcG9ydCB7bW9tZW50fSBmcm9tICdvYnNpZGlhbic7XHJcblx0aW1wb3J0IHR5cGUge01vbWVudH0gZnJvbSAnbW9tZW50JztcclxuXHJcblx0Y29uc3QgZGlzcGF0Y2ggPSBjcmVhdGVFdmVudERpc3BhdGNoZXIoKTtcclxuXHJcblx0Ly8gcHJvcHNcclxuXHRleHBvcnQgbGV0IHNlbGVjdGVkRGF0ZTogTW9tZW50O1xyXG5cdGV4cG9ydCBsZXQgbW9udGg6IG51bWJlcjtcclxuXHRleHBvcnQgbGV0IHllYXI6IG51bWJlcjtcclxuXHJcblx0Ly8gbG9jYWwgdmFycyB0byBoZWxwIGluIHJlbmRlclxyXG5cdGxldCBjZWxscztcclxuXHJcblx0Ly8gZnVuY3Rpb24gaGVscGVyc1xyXG5cdGZ1bmN0aW9uIG9uQ2hhbmdlKGRhdGU6IG51bWJlcikge1xyXG5cdFx0ZGlzcGF0Y2goJ2RhdGVDaGFuZ2UnLCBtb21lbnQobmV3IERhdGUoeWVhciwgbW9udGgsIGRhdGUpKSk7XHJcblx0fVxyXG5cclxuXHQkOiBjZWxscyA9IGdldERhdGVSb3dzKG1vbnRoLCB5ZWFyKTtcclxuPC9zY3JpcHQ+XHJcblxyXG48c3R5bGU+XHJcblx0LmNhbGVuZGFyIHtcclxuXHRcdG1hcmdpbi10b3A6IDEwcHg7XHJcblx0fVxyXG5cclxuXHQuY2FsZW5kYXItaGVhZGVyIHtcclxuXHRcdGRpc3BsYXk6ICAgICAgICAgZmxleDtcclxuXHRcdGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xyXG5cdFx0ZmxleC13cmFwOiAgICAgICB3cmFwO1xyXG5cdFx0Z2FwOiAgICAgICAgICAgICAycHg7XHJcblx0XHRiYWNrZ3JvdW5kOiAgICAgIHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XHJcblx0XHRib3JkZXItcmFkaXVzOiAgIHZhcigtLW1ldGEtYmluZC1wbHVnaW4tYm9yZGVyLXJhZGl1cyk7XHJcblx0XHRtYXJnaW4tYm90dG9tOiAgIDJweDtcclxuXHR9XHJcblxyXG5cdC5jYWxlbmRhci1jb250ZW50IHtcclxuXHRcdGRpc3BsYXk6ICAgICAgICAgICAgICAgZ3JpZDtcclxuXHRcdGZsZXgtd3JhcDogICAgICAgICAgICAgd3JhcDtcclxuXHRcdGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDcsIDFmcik7XHJcblx0XHRnYXA6ICAgICAgICAgICAgICAgICAgIDJweDtcclxuXHR9XHJcblxyXG5cdC5jZWxsIHtcclxuXHRcdG1pbi13aWR0aDogICAgICAgNDBweDtcclxuXHRcdGhlaWdodDogICAgICAgICAgMzBweDtcclxuXHRcdHBhZGRpbmc6ICAgICAgICAgNXB4O1xyXG5cdFx0ZGlzcGxheTogICAgICAgICBmbGV4O1xyXG5cdFx0anVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcblx0XHRhbGlnbi1pdGVtczogICAgIGNlbnRlcjtcclxuXHRcdGJvcmRlci1yYWRpdXM6ICAgdmFyKC0tbWV0YS1iaW5kLXBsdWdpbi1ib3JkZXItcmFkaXVzKTtcclxuXHR9XHJcblxyXG5cdC5jb250ZW50LWNlbGwge1xyXG5cdFx0Y3Vyc29yOiBwb2ludGVyO1xyXG5cdH1cclxuXHJcblx0LmNlbGwtdGV4dCB7XHJcblx0XHRtYXJnaW46ICAgICBhdXRvO1xyXG5cdFx0dGV4dC1hbGlnbjogY2VudGVyO1xyXG5cdH1cclxuXHJcblx0LnNlbGVjdGVkIHtcclxuXHRcdGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItc3VjY2Vzcyk7XHJcblx0fVxyXG5cclxuXHQuaGlnaGxpZ2h0OmhvdmVyIHtcclxuXHRcdGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWhvdmVyKTtcclxuXHR9XHJcblxyXG5cdC5zZWxlY3RlZC5oaWdobGlnaHQ6aG92ZXIge1xyXG5cdFx0YmFja2dyb3VuZDogZ3JlZW47XHJcblx0fVxyXG48L3N0eWxlPlxyXG5cclxuPGRpdiBjbGFzcz1cImNhbGVuZGFyXCI+XHJcblx0PGRpdiBjbGFzcz1cImNhbGVuZGFyLWhlYWRlclwiPlxyXG5cdFx0eyNlYWNoIGdldFdlZWtEYXlzKCkgYXMgZGF5fVxyXG5cdFx0XHQ8ZGl2IGNsYXNzPVwiY2VsbCBoZWFkZXItY2VsbFwiPlxyXG5cdFx0XHRcdDxzcGFuIGNsYXNzPVwiY2VsbC10ZXh0XCI+e2RheX08L3NwYW4+XHJcblx0XHRcdDwvZGl2PlxyXG5cdFx0ey9lYWNofVxyXG5cdDwvZGl2PlxyXG5cclxuXHQ8ZGl2IGNsYXNzPVwiY2FsZW5kYXItY29udGVudFwiPlxyXG5cdFx0eyNlYWNoIGNlbGxzIGFzIHZhbHVlICh1dWlkKCkpfVxyXG5cdFx0XHQ8ZGl2XHJcblx0XHRcdFx0Y2xhc3M9XCJjZWxsXCJcclxuXHRcdFx0XHRvbjpjbGljaz17dmFsdWUgPyAoKSA9PiBvbkNoYW5nZSh2YWx1ZSkgOiAoKSA9PiB7fX1cclxuXHRcdFx0XHRjbGFzczpoaWdobGlnaHQ9e3ZhbHVlfVxyXG5cdFx0XHRcdGNsYXNzOmNvbnRlbnQtY2VsbD17dmFsdWV9XHJcblx0XHRcdFx0Y2xhc3M6c2VsZWN0ZWQ9e3NlbGVjdGVkRGF0ZS55ZWFyKCkgPT09IHllYXIgJiYgc2VsZWN0ZWREYXRlLm1vbnRoKCkgPT09IG1vbnRoICYmIHNlbGVjdGVkRGF0ZS5kYXRlKCkgPT09IHZhbHVlfT5cclxuXHRcdFx0XHQ8c3BhbiBjbGFzcz1cImNlbGwtdGV4dFwiPnt2YWx1ZSB8fCAnJ308L3NwYW4+XHJcblx0XHRcdDwvZGl2PlxyXG5cdFx0ey9lYWNofVxyXG5cdDwvZGl2PlxyXG48L2Rpdj5cclxuIiwgIjwhLS1hZGFwdGVkIGZyb20gQGpvZXRoZWkncyBjb2RlOiBodHRwczovL2dpdGh1Yi5jb20vam9ldGhlaS9vYnNpZGlhbi1yc3MvYmxvYi9tYXN0ZXIvc3JjL3ZpZXcvSWNvbkNvbXBvbmVudC5zdmVsdGUtLT5cclxuPCEtLWFkYXB0ZWQgZnJvbSBAamF2YWxlbnQncyBjb2RlOiBodHRwczovL2Rpc2NvcmQuY29tL2NoYW5uZWxzLzY4NjA1MzcwODI2MTIyODU3Ny84NDAyODYyNjQ5NjQwMjIzMDIvOTAyOTQ5NzY0MjA5OTg3NjU0LS0+XHJcbjxzY3JpcHQgbGFuZz1cInRzXCI+XHJcblx0aW1wb3J0IHtzZXRJY29ufSBmcm9tICdvYnNpZGlhbic7XHJcblx0aW1wb3J0IHtvbk1vdW50fSBmcm9tICdzdmVsdGUnO1xyXG5cclxuXHRleHBvcnQgbGV0IGljb25OYW1lOiBzdHJpbmcgPSAnJztcclxuXHRleHBvcnQgbGV0IGljb25TaXplOiBudW1iZXIgPSAyMDtcclxuXHJcblx0bGV0IGljb25FbDogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdG9uTW91bnQoKCkgPT4ge1xyXG5cdFx0c2V0SWNvbihpY29uRWwsIGljb25OYW1lLCBpY29uU2l6ZSk7XHJcblx0fSk7XHJcbjwvc2NyaXB0PlxyXG5cclxuPHN0eWxlPlxyXG5cdC5pY29uLXdyYXBwZXIge1xyXG5cdFx0ZGlzcGxheTogIGlubGluZS1ibG9jaztcclxuXHRcdHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuXHRcdHdpZHRoOiAgICAyMHB4O1xyXG5cdH1cclxuXHJcblx0Lmljb24ge1xyXG5cdFx0cG9zaXRpb246IGFic29sdXRlO1xyXG5cdFx0aGVpZ2h0OiAgIDIwcHg7XHJcblx0XHR3aWR0aDogICAgMjBweDtcclxuXHRcdGJvdHRvbTogICAtNXB4O1xyXG5cdH1cclxuPC9zdHlsZT5cclxuXHJcbnsjaWYgaWNvbk5hbWUubGVuZ3RoID4gMH1cclxuXHQ8ZGl2IGNsYXNzPVwiaWNvbi13cmFwcGVyXCI+XHJcblx0XHQ8ZGl2IGJpbmQ6dGhpcz17aWNvbkVsfSBjbGFzcz1cImljb25cIj48L2Rpdj5cclxuXHQ8L2Rpdj5cclxuey9pZn1cclxuIiwgIjxzY3JpcHQgbGFuZz1cInRzXCI+XHJcblx0aW1wb3J0IHtjcmVhdGVFdmVudERpc3BhdGNoZXJ9IGZyb20gJ3N2ZWx0ZSc7XHJcblx0aW1wb3J0IENhbGVuZGVyIGZyb20gJy4vQ2FsZW5kZXIuc3ZlbHRlJztcclxuXHRpbXBvcnQge2dldE1vbnRoTmFtZX0gZnJvbSAnLi9EYXRlUGlja2VySW5wdXRTdmVsdGVIZWxwZXJzLmpzJztcclxuXHRpbXBvcnQge21vbWVudH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cdGltcG9ydCB0eXBlIHtNb21lbnR9IGZyb20gJ21vbWVudCc7XHJcblx0aW1wb3J0IEljb24gZnJvbSAnLi9JY29uLnN2ZWx0ZSc7XHJcblxyXG5cdGNvbnN0IGRpc3BhdGNoID0gY3JlYXRlRXZlbnREaXNwYXRjaGVyKCk7XHJcblxyXG5cdGV4cG9ydCBsZXQgc2VsZWN0ZWREYXRlOiBNb21lbnQgPSBtb21lbnQoKTtcclxuXHRleHBvcnQgbGV0IGRhdGVGb3JtYXQ6IHN0cmluZyA9ICdkZGRkLCBNTU1NIERvIFlZWVknO1xyXG5cdGV4cG9ydCBsZXQgZGF0ZUNoYW5nZUNhbGxiYWNrOiAoZGF0ZTogTW9tZW50KSA9PiB2b2lkO1xyXG5cclxuXHRleHBvcnQgbGV0IGFsaWduUmlnaHQ6IGJvb2xlYW47XHJcblxyXG5cdGxldCBkYXRlOiBudW1iZXI7XHJcblx0bGV0IG1vbnRoOiBudW1iZXI7XHJcblx0bGV0IHllYXI6IG51bWJlcjtcclxuXHRsZXQgc2hvd0RhdGVQaWNrZXI6IGJvb2xlYW47XHJcblxyXG5cdC8vIHNvIHRoYXQgdGhlc2UgY2hhbmdlIHdpdGggcHJvcHNcclxuXHQkOiB7XHJcblx0XHRjb25zb2xlLmxvZygndXBkYXRlIGRhdGUgcGlja2VyJywgc2VsZWN0ZWREYXRlKTtcclxuXHRcdGRhdGUgPSBzZWxlY3RlZERhdGUuZGF0ZSgpO1xyXG5cdFx0bW9udGggPSBzZWxlY3RlZERhdGUubW9udGgoKTtcclxuXHRcdHllYXIgPSBzZWxlY3RlZERhdGUueWVhcigpO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gbmV4dE1vbnRoKCk6IHZvaWQge1xyXG5cdFx0aWYgKG1vbnRoID09PSAxMSkge1xyXG5cdFx0XHRtb250aCA9IDA7XHJcblx0XHRcdHllYXIgKz0gMTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0bW9udGggPSBtb250aCArIDE7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBwcmV2TW9udGgoKTogdm9pZCB7XHJcblx0XHRpZiAobW9udGggPT09IDApIHtcclxuXHRcdFx0bW9udGggPSAxMTtcclxuXHRcdFx0eWVhciAtPSAxO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRtb250aCAtPSAxO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gY2hhbmdlWWVhcih2YWx1ZTogYW55KTogdm9pZCB7XHJcblx0XHRjb25zdCB2ID0gdmFsdWUudGFyZ2V0LnZhbHVlO1xyXG5cdFx0Y29uc3Qgdk51bSA9IE51bWJlci5wYXJzZUludCh2KTtcclxuXHRcdGlmICghTnVtYmVyLmlzTmFOKHZOdW0pKSB7XHJcblx0XHRcdHllYXIgPSB2TnVtO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gb25EYXRlQ2hhbmdlKGQ6IHsgZGV0YWlsOiBNb21lbnQgfSk6IHZvaWQge1xyXG5cdFx0c2hvd0RhdGVQaWNrZXIgPSBmYWxzZTtcclxuXHRcdHNlbGVjdGVkRGF0ZSA9IGQuZGV0YWlsO1xyXG5cdFx0ZGF0ZUNoYW5nZUNhbGxiYWNrKGQuZGV0YWlsKTtcclxuXHR9XHJcbjwvc2NyaXB0PlxyXG5cclxuPHN0eWxlPlxyXG5cdC5kYXRlLXBpY2tlci1pbnB1dCB7XHJcblx0XHRwb3NpdGlvbjogcmVsYXRpdmU7XHJcblx0XHRjb2xvcjogICAgdmFyKC0tdGV4dC1ub3JtYWwpO1xyXG5cdFx0ZGlzcGxheTogIGlubGluZS1ibG9jaztcclxuXHR9XHJcblxyXG5cdC5kYXRlLXBpY2tlciB7XHJcblx0XHRwb3NpdGlvbjogICAgICBhYnNvbHV0ZTtcclxuXHRcdHRvcDogICAgICAgICAgIDM1cHg7XHJcblx0XHRkaXNwbGF5OiAgICAgICBpbmxpbmUtYmxvY2s7XHJcblx0XHRiYWNrZ3JvdW5kOiAgICB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XHJcblx0XHRib3JkZXItcmFkaXVzOiB2YXIoLS1tZXRhLWJpbmQtcGx1Z2luLWJvcmRlci1yYWRpdXMpO1xyXG5cdFx0Ym9yZGVyOiAgICAgICAgdmFyKC0tbWV0YS1iaW5kLXBsdWdpbi1ib3JkZXItd2lkdGgpIHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcclxuXHRcdHBhZGRpbmc6ICAgICAgIDEwcHg7XHJcblx0XHR6LWluZGV4OiAgICAgICAxMDAwMDAwO1xyXG5cdH1cclxuXHJcblx0LmRhdGUtcGlja2VyLXRleHQge1xyXG5cdFx0YmFja2dyb3VuZDogICAgdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xyXG5cdFx0Ym9yZGVyLXJhZGl1czogdmFyKC0tbWV0YS1iaW5kLXBsdWdpbi1ib3JkZXItcmFkaXVzKTtcclxuXHRcdGJvcmRlcjogICAgICAgIHZhcigtLW1ldGEtYmluZC1wbHVnaW4tYm9yZGVyLXdpZHRoKSBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XHJcblx0XHRwYWRkaW5nOiAgICAgICA1cHggNXB4IDVweCA3cHg7XHJcblx0XHRjdXJzb3I6ICAgICAgICBwb2ludGVyO1xyXG5cdFx0d2lkdGg6ICAgICAgICAgZml0LWNvbnRlbnQ7XHJcblx0XHRkaXNwbGF5OiAgICAgICBpbmxpbmUtYmxvY2s7XHJcblx0fVxyXG5cclxuXHQuZGF0ZS1waWNrZXItY2xvc2UtbGF5ZXIge1xyXG5cdFx0cG9zaXRpb246IGZpeGVkO1xyXG5cdFx0dG9wOiAgICAgIDA7XHJcblx0XHRsZWZ0OiAgICAgMDtcclxuXHRcdHdpZHRoOiAgICAxMDB2dztcclxuXHRcdGhlaWdodDogICAxMDB2aDtcclxuXHRcdHotaW5kZXg6ICA5MDAwMDA7IC8qIHNvIGl0IG92ZXJsYXlzIGV2ZXJ5dGhpbmcgZXhjZXB0IHRoZSBkYXRlIHBpY2tlciovXHJcblx0fVxyXG5cclxuXHQuZGF0ZS1waWNrZXItaGVhZGVyIHtcclxuXHRcdGRpc3BsYXk6ICAgICAgICAgZmxleDtcclxuXHRcdGdhcDogICAgICAgICAgICAgNXB4O1xyXG5cdFx0YWxpZ24taXRlbXM6ICAgICBjZW50ZXI7XHJcblx0XHRqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcclxuXHR9XHJcblxyXG5cdC5kYXRlLXBpY2tlci1oZWFkZXItdGV4dCB7XHJcblx0XHRmbGV4OiAgICAgICAgICAgIDE7XHJcblx0XHR0ZXh0LWFsaWduOiAgICAgIGNlbnRlcjtcclxuXHRcdGRpc3BsYXk6ICAgICAgICAgZmxleDtcclxuXHRcdGdhcDogICAgICAgICAgICAgNXB4O1xyXG5cdFx0YWxpZ24taXRlbXM6ICAgICBjZW50ZXI7XHJcblx0XHRqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuXHRcdHdpZHRoOiAgICAgICAgICAgbWluLWNvbnRlbnQ7XHJcblx0fVxyXG5cclxuXHQuZGF0ZS1waWNrZXItaGVhZGVyLXRleHQteWVhciB7XHJcblx0XHR3aWR0aDogICA2MHB4O1xyXG5cdFx0cGFkZGluZzogNXB4O1xyXG5cdH1cclxuXHJcblx0LmRhdGUtcGlja2VyLWhlYWRlci10ZXh0LW1vbnRoIHtcclxuXHRcdGhlaWdodDogbWluLWNvbnRlbnQ7XHJcblx0fVxyXG5cclxuXHQubW9udGgtc3dpdGNoLWJ1dHRvbiB7XHJcblx0XHRtYXJnaW46IDA7XHJcblx0fVxyXG48L3N0eWxlPlxyXG5cclxuPGRpdiBjbGFzcz1cImRhdGUtcGlja2VyLWlucHV0XCI+XHJcblx0PGRpdiBjbGFzcz1cImRhdGUtcGlja2VyLXRleHRcIiBvbjpjbGljaz17KCkgPT4gc2hvd0RhdGVQaWNrZXIgPSB0cnVlfT5cclxuXHRcdHtzZWxlY3RlZERhdGUuZm9ybWF0KGRhdGVGb3JtYXQpfVxyXG5cdFx0PEljb24gaWNvbk5hbWU9XCJjYWxlbmRhclwiLz5cclxuXHQ8L2Rpdj5cclxuXHR7I2lmIHNob3dEYXRlUGlja2VyfVxyXG5cdFx0PGRpdiBjbGFzcz1cImRhdGUtcGlja2VyLWNsb3NlLWxheWVyXCIgb246Y2xpY2s9eygpID0+IHNob3dEYXRlUGlja2VyID0gZmFsc2V9PjwvZGl2PlxyXG5cdFx0PGRpdiBjbGFzcz1cImRhdGUtcGlja2VyXCIgc3R5bGU9XCJ7YWxpZ25SaWdodCA/ICdsZWZ0OiBhdXRvOyByaWdodDogMDsnIDogJ3JpZ2h0OiBhdXRvOyBsZWZ0OiAwOyd9XCI+XHJcblx0XHRcdDxkaXYgY2xhc3M9XCJkYXRlLXBpY2tlci1oZWFkZXJcIj5cclxuXHRcdFx0XHQ8YnV0dG9uIGNsYXNzPVwibW9udGgtc3dpdGNoLWJ1dHRvblwiIG9uOmNsaWNrPXtwcmV2TW9udGh9PlByZXY8L2J1dHRvbj5cclxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwiZGF0ZS1waWNrZXItaGVhZGVyLXRleHRcIj5cclxuXHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiZGF0ZS1waWNrZXItaGVhZGVyLXRleHQtbW9udGhcIj57Z2V0TW9udGhOYW1lKG1vbnRoKX08L3NwYW4+XHJcblx0XHRcdFx0XHQ8aW5wdXQgY2xhc3M9XCJkYXRlLXBpY2tlci1oZWFkZXItdGV4dC15ZWFyXCIgdHlwZT1cIm51bWJlclwiIHZhbHVlPVwie3llYXIudG9TdHJpbmcoKX1cIlxyXG5cdFx0XHRcdFx0XHQgICBvbjppbnB1dD1cIntjaGFuZ2VZZWFyfVwiPlxyXG5cdFx0XHRcdDwvZGl2PlxyXG5cdFx0XHRcdDxidXR0b24gY2xhc3M9XCJtb250aC1zd2l0Y2gtYnV0dG9uXCIgb246Y2xpY2s9e25leHRNb250aH0+TmV4dDwvYnV0dG9uPlxyXG5cdFx0XHQ8L2Rpdj5cclxuXHRcdFx0PENhbGVuZGVyXHJcblx0XHRcdFx0b246ZGF0ZUNoYW5nZT17b25EYXRlQ2hhbmdlfVxyXG5cdFx0XHRcdG1vbnRoPXttb250aH1cclxuXHRcdFx0XHR5ZWFyPXt5ZWFyfVxyXG5cdFx0XHRcdHNlbGVjdGVkRGF0ZT17c2VsZWN0ZWREYXRlfT5cclxuXHRcdFx0PC9DYWxlbmRlcj5cclxuXHRcdDwvZGl2PlxyXG5cdHsvaWZ9XHJcbjwvZGl2PlxyXG4iLCAiaW1wb3J0IHsgSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQgfSBmcm9tICcuLi8uLi9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCc7XHJcbmltcG9ydCB7IEFic3RyYWN0SW5wdXRGaWVsZCB9IGZyb20gJy4uL0Fic3RyYWN0SW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7IGlzVHJ1dGh5LCBNZXRhQmluZEludGVybmFsRXJyb3IgfSBmcm9tICcuLi8uLi91dGlscy9VdGlscyc7XHJcbmltcG9ydCBEYXRlUGlja2VyIGZyb20gJy4vRGF0ZVBpY2tlci5zdmVsdGUnO1xyXG5pbXBvcnQgeyBtb21lbnQgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IERhdGVQYXJzZXIgfSBmcm9tICcuLi8uLi9wYXJzZXJzL0RhdGVQYXJzZXInO1xyXG5pbXBvcnQgeyBJbnB1dEZpZWxkQXJndW1lbnRUeXBlIH0gZnJvbSAnLi4vLi4vcGFyc2Vycy9JbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIERhdGVQaWNrZXJJbnB1dEZpZWxkIGV4dGVuZHMgQWJzdHJhY3RJbnB1dEZpZWxkIHtcclxuXHRjb250YWluZXI6IEhUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkO1xyXG5cdGNvbXBvbmVudDogRGF0ZVBpY2tlciB8IHVuZGVmaW5lZDtcclxuXHRkYXRlOiBtb21lbnQuTW9tZW50O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIG9uVmFsdWVDaGFuZ2U6ICh2YWx1ZTogYW55KSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPikge1xyXG5cdFx0c3VwZXIoaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIG9uVmFsdWVDaGFuZ2UpO1xyXG5cclxuXHRcdHRoaXMuZGF0ZSA9IERhdGVQYXJzZXIuZ2V0RGVmYXVsdERhdGUoKTtcclxuXHR9XHJcblxyXG5cdGdldFZhbHVlKCk6IGFueSB7XHJcblx0XHRyZXR1cm4gRGF0ZVBhcnNlci5zdHJpbmdpZnkodGhpcy5kYXRlKTtcclxuXHR9XHJcblxyXG5cdHNldFZhbHVlKHZhbHVlOiBhbnkpOiB2b2lkIHtcclxuXHRcdHRoaXMuZGF0ZSA9IERhdGVQYXJzZXIucGFyc2UodmFsdWUpID8/IERhdGVQYXJzZXIuZ2V0RGVmYXVsdERhdGUoKTtcclxuXHJcblx0XHRpZiAoIXRoaXMuZGF0ZS5pc1ZhbGlkKCkpIHtcclxuXHRcdFx0dGhpcy5kYXRlID0gRGF0ZVBhcnNlci5nZXREZWZhdWx0RGF0ZSgpO1xyXG5cdFx0XHR0aGlzLm9uVmFsdWVDaGFuZ2UodGhpcy5nZXRWYWx1ZSgpKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmNvbXBvbmVudD8uJHNldCh7IHNlbGVjdGVkRGF0ZTogdGhpcy5kYXRlIH0pO1xyXG5cdH1cclxuXHJcblx0aXNFcXVhbFZhbHVlKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmdldFZhbHVlKCkgPT0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHRnZXREZWZhdWx0VmFsdWUoKTogYW55IHtcclxuXHRcdHJldHVybiBEYXRlUGFyc2VyLnN0cmluZ2lmeShEYXRlUGFyc2VyLmdldERlZmF1bHREYXRlKCkpO1xyXG5cdH1cclxuXHJcblx0Z2V0SHRtbEVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xyXG5cdFx0aWYgKCF0aGlzLmNvbnRhaW5lcikge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCcnKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy5jb250YWluZXI7XHJcblx0fVxyXG5cclxuXHRkYXRlUGlja2VyVmFsdWVDaGFuZ2VkKGRhdGU6IG1vbWVudC5Nb21lbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMuZGF0ZSA9IGRhdGU7XHJcblx0XHQvLyBjb25zb2xlLmxvZygnZGF0ZSBwaWNrZXIgdmFsdWUgY2hhbmdlJywgdGhpcy5kYXRlKTtcclxuXHJcblx0XHRpZiAodGhpcy5kYXRlLmlzVmFsaWQoKSkge1xyXG5cdFx0XHR0aGlzLm9uVmFsdWVDaGFuZ2UodGhpcy5nZXRWYWx1ZSgpKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XHJcblx0XHR0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuXHJcblx0XHR0aGlzLmRhdGUgPSBEYXRlUGFyc2VyLnBhcnNlKHRoaXMuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0SW5pdGlhbFZhbHVlKCkpID8/IERhdGVQYXJzZXIuZ2V0RGVmYXVsdERhdGUoKTtcclxuXHRcdGlmICghdGhpcy5kYXRlLmlzVmFsaWQoKSkge1xyXG5cdFx0XHR0aGlzLmRhdGUgPSBEYXRlUGFyc2VyLmdldERlZmF1bHREYXRlKCk7XHJcblx0XHRcdHRoaXMub25WYWx1ZUNoYW5nZSh0aGlzLmdldFZhbHVlKCkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuY29tcG9uZW50ID0gbmV3IERhdGVQaWNrZXIoe1xyXG5cdFx0XHR0YXJnZXQ6IGNvbnRhaW5lcixcclxuXHRcdFx0cHJvcHM6IHtcclxuXHRcdFx0XHRhbGlnblJpZ2h0OiB0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEFyZ3VtZW50KElucHV0RmllbGRBcmd1bWVudFR5cGUuQUxJR05fUklHSFQpPy52YWx1ZSxcclxuXHRcdFx0XHRzZWxlY3RlZERhdGU6IHRoaXMuZGF0ZSxcclxuXHRcdFx0XHRkYXRlRm9ybWF0OiB0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLnBsdWdpbi5zZXR0aW5ncy5wcmVmZXJyZWREYXRlRm9ybWF0LFxyXG5cdFx0XHRcdGRhdGVDaGFuZ2VDYWxsYmFjazogKGRhdGU6IG1vbWVudC5Nb21lbnQpID0+IHRoaXMuZGF0ZVBpY2tlclZhbHVlQ2hhbmdlZChkYXRlKSxcclxuXHRcdFx0fSxcclxuXHRcdH0pO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgVG9nZ2xlSW5wdXRGaWVsZCB9IGZyb20gJy4vVG9nZ2xlSW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGUgfSBmcm9tICcuLi9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCc7XHJcbmltcG9ydCB7IFRleHRJbnB1dEZpZWxkIH0gZnJvbSAnLi9UZXh0SW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7IFNsaWRlcklucHV0RmllbGQgfSBmcm9tICcuL1NsaWRlcklucHV0RmllbGQnO1xyXG5pbXBvcnQgeyBUZXh0QXJlYUlucHV0RmllbGQgfSBmcm9tICcuL1RleHRBcmVhSW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7IFNlbGVjdElucHV0RmllbGQgfSBmcm9tICcuL1NlbGVjdElucHV0RmllbGQnO1xyXG5pbXBvcnQgeyBNdWx0aVNlbGVjdElucHV0RmllbGQgfSBmcm9tICcuL011bHRpU2VsZWN0SW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7IERhdGVJbnB1dEZpZWxkIH0gZnJvbSAnLi9EYXRlSW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7IFRpbWVJbnB1dEZpZWxkIH0gZnJvbSAnLi9UaW1lSW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7IE1ldGFCaW5kUGFyc2luZ0Vycm9yIH0gZnJvbSAnLi4vdXRpbHMvVXRpbHMnO1xyXG5pbXBvcnQgeyBBYnN0cmFjdElucHV0RmllbGQgfSBmcm9tICcuL0Fic3RyYWN0SW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7IElucHV0RmllbGRUeXBlIH0gZnJvbSAnLi4vcGFyc2Vycy9JbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXInO1xyXG5pbXBvcnQgeyBEYXRlUGlja2VySW5wdXRGaWVsZCB9IGZyb20gJy4vRGF0ZVBpY2tlci9EYXRlUGlja2VySW5wdXRGaWVsZCc7XHJcblxyXG5leHBvcnQgY2xhc3MgSW5wdXRGaWVsZEZhY3Rvcnkge1xyXG5cdHN0YXRpYyBhbGxvd0NvZGVCbG9ja01hcDogUmVjb3JkPHN0cmluZywgeyBjb2RlQmxvY2s6IGJvb2xlYW47IGlubGluZUNvZGVCbG9jazogYm9vbGVhbiB9PiA9IHtcclxuXHRcdFtJbnB1dEZpZWxkVHlwZS5UT0dHTEVdOiB7XHJcblx0XHRcdGNvZGVCbG9jazogVG9nZ2xlSW5wdXRGaWVsZC5hbGxvd0NvZGVCbG9jayxcclxuXHRcdFx0aW5saW5lQ29kZUJsb2NrOiBUb2dnbGVJbnB1dEZpZWxkLmFsbG93SW5saW5lQ29kZUJsb2NrLFxyXG5cdFx0fSxcclxuXHRcdFtJbnB1dEZpZWxkVHlwZS5TTElERVJdOiB7XHJcblx0XHRcdGNvZGVCbG9jazogU2xpZGVySW5wdXRGaWVsZC5hbGxvd0NvZGVCbG9jayxcclxuXHRcdFx0aW5saW5lQ29kZUJsb2NrOiBTbGlkZXJJbnB1dEZpZWxkLmFsbG93SW5saW5lQ29kZUJsb2NrLFxyXG5cdFx0fSxcclxuXHRcdFtJbnB1dEZpZWxkVHlwZS5URVhUXToge1xyXG5cdFx0XHRjb2RlQmxvY2s6IFRleHRJbnB1dEZpZWxkLmFsbG93Q29kZUJsb2NrLFxyXG5cdFx0XHRpbmxpbmVDb2RlQmxvY2s6IFRleHRJbnB1dEZpZWxkLmFsbG93SW5saW5lQ29kZUJsb2NrLFxyXG5cdFx0fSxcclxuXHRcdFtJbnB1dEZpZWxkVHlwZS5URVhUX0FSRUFdOiB7XHJcblx0XHRcdGNvZGVCbG9jazogVGV4dEFyZWFJbnB1dEZpZWxkLmFsbG93Q29kZUJsb2NrLFxyXG5cdFx0XHRpbmxpbmVDb2RlQmxvY2s6IFRleHRBcmVhSW5wdXRGaWVsZC5hbGxvd0lubGluZUNvZGVCbG9jayxcclxuXHRcdH0sXHJcblx0XHRbSW5wdXRGaWVsZFR5cGUuU0VMRUNUXToge1xyXG5cdFx0XHRjb2RlQmxvY2s6IFNlbGVjdElucHV0RmllbGQuYWxsb3dDb2RlQmxvY2ssXHJcblx0XHRcdGlubGluZUNvZGVCbG9jazogU2VsZWN0SW5wdXRGaWVsZC5hbGxvd0lubGluZUNvZGVCbG9jayxcclxuXHRcdH0sXHJcblx0XHRbSW5wdXRGaWVsZFR5cGUuTVVMVElfU0VMRUNUXToge1xyXG5cdFx0XHRjb2RlQmxvY2s6IE11bHRpU2VsZWN0SW5wdXRGaWVsZC5hbGxvd0NvZGVCbG9jayxcclxuXHRcdFx0aW5saW5lQ29kZUJsb2NrOiBNdWx0aVNlbGVjdElucHV0RmllbGQuYWxsb3dJbmxpbmVDb2RlQmxvY2ssXHJcblx0XHR9LFxyXG5cdFx0W0lucHV0RmllbGRUeXBlLkRBVEVdOiB7XHJcblx0XHRcdGNvZGVCbG9jazogRGF0ZUlucHV0RmllbGQuYWxsb3dDb2RlQmxvY2ssXHJcblx0XHRcdGlubGluZUNvZGVCbG9jazogRGF0ZUlucHV0RmllbGQuYWxsb3dJbmxpbmVDb2RlQmxvY2ssXHJcblx0XHR9LFxyXG5cdFx0W0lucHV0RmllbGRUeXBlLlRJTUVdOiB7XHJcblx0XHRcdGNvZGVCbG9jazogVGltZUlucHV0RmllbGQuYWxsb3dDb2RlQmxvY2ssXHJcblx0XHRcdGlubGluZUNvZGVCbG9jazogVGltZUlucHV0RmllbGQuYWxsb3dJbmxpbmVDb2RlQmxvY2ssXHJcblx0XHR9LFxyXG5cdFx0W0lucHV0RmllbGRUeXBlLkRBVEVfUElDS0VSXToge1xyXG5cdFx0XHRjb2RlQmxvY2s6IERhdGVQaWNrZXJJbnB1dEZpZWxkLmFsbG93Q29kZUJsb2NrLFxyXG5cdFx0XHRpbmxpbmVDb2RlQmxvY2s6IERhdGVQaWNrZXJJbnB1dEZpZWxkLmFsbG93SW5saW5lQ29kZUJsb2NrLFxyXG5cdFx0fSxcclxuXHR9O1xyXG5cclxuXHRzdGF0aWMgY3JlYXRlSW5wdXRGaWVsZChcclxuXHRcdGlucHV0RmllbGRUeXBlOiBJbnB1dEZpZWxkVHlwZSxcclxuXHRcdGFyZ3M6IHsgdHlwZTogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlOyBpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ7IG9uVmFsdWVDaGFuZ2VkOiAodmFsdWU6IGFueSkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4gfVxyXG5cdCk6IEFic3RyYWN0SW5wdXRGaWVsZCB8IHVuZGVmaW5lZCB7XHJcblx0XHRpZiAoaW5wdXRGaWVsZFR5cGUgPT09IElucHV0RmllbGRUeXBlLlRPR0dMRSkge1xyXG5cdFx0XHRJbnB1dEZpZWxkRmFjdG9yeS5jaGVja0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZUFsbG93ZWQoaW5wdXRGaWVsZFR5cGUsIGFyZ3MudHlwZSk7XHJcblx0XHRcdHJldHVybiBuZXcgVG9nZ2xlSW5wdXRGaWVsZChhcmdzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBhcmdzLm9uVmFsdWVDaGFuZ2VkKTtcclxuXHRcdH0gZWxzZSBpZiAoaW5wdXRGaWVsZFR5cGUgPT09IElucHV0RmllbGRUeXBlLlNMSURFUikge1xyXG5cdFx0XHRJbnB1dEZpZWxkRmFjdG9yeS5jaGVja0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZUFsbG93ZWQoaW5wdXRGaWVsZFR5cGUsIGFyZ3MudHlwZSk7XHJcblx0XHRcdHJldHVybiBuZXcgU2xpZGVySW5wdXRGaWVsZChhcmdzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBhcmdzLm9uVmFsdWVDaGFuZ2VkKTtcclxuXHRcdH0gZWxzZSBpZiAoaW5wdXRGaWVsZFR5cGUgPT09IElucHV0RmllbGRUeXBlLlRFWFQpIHtcclxuXHRcdFx0SW5wdXRGaWVsZEZhY3RvcnkuY2hlY2tJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGVBbGxvd2VkKGlucHV0RmllbGRUeXBlLCBhcmdzLnR5cGUpO1xyXG5cdFx0XHRyZXR1cm4gbmV3IFRleHRJbnB1dEZpZWxkKGFyZ3MuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIGFyZ3Mub25WYWx1ZUNoYW5nZWQpO1xyXG5cdFx0fSBlbHNlIGlmIChpbnB1dEZpZWxkVHlwZSA9PT0gSW5wdXRGaWVsZFR5cGUuVEVYVF9BUkVBKSB7XHJcblx0XHRcdElucHV0RmllbGRGYWN0b3J5LmNoZWNrSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlQWxsb3dlZChpbnB1dEZpZWxkVHlwZSwgYXJncy50eXBlKTtcclxuXHRcdFx0cmV0dXJuIG5ldyBUZXh0QXJlYUlucHV0RmllbGQoYXJncy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgYXJncy5vblZhbHVlQ2hhbmdlZCk7XHJcblx0XHR9IGVsc2UgaWYgKGlucHV0RmllbGRUeXBlID09PSBJbnB1dEZpZWxkVHlwZS5TRUxFQ1QpIHtcclxuXHRcdFx0SW5wdXRGaWVsZEZhY3RvcnkuY2hlY2tJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGVBbGxvd2VkKGlucHV0RmllbGRUeXBlLCBhcmdzLnR5cGUpO1xyXG5cdFx0XHRyZXR1cm4gbmV3IFNlbGVjdElucHV0RmllbGQoYXJncy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgYXJncy5vblZhbHVlQ2hhbmdlZCk7XHJcblx0XHR9IGVsc2UgaWYgKGlucHV0RmllbGRUeXBlID09PSBJbnB1dEZpZWxkVHlwZS5NVUxUSV9TRUxFQ1QpIHtcclxuXHRcdFx0SW5wdXRGaWVsZEZhY3RvcnkuY2hlY2tJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGVBbGxvd2VkKGlucHV0RmllbGRUeXBlLCBhcmdzLnR5cGUpO1xyXG5cdFx0XHRyZXR1cm4gbmV3IE11bHRpU2VsZWN0SW5wdXRGaWVsZChhcmdzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBhcmdzLm9uVmFsdWVDaGFuZ2VkKTtcclxuXHRcdH0gZWxzZSBpZiAoaW5wdXRGaWVsZFR5cGUgPT09IElucHV0RmllbGRUeXBlLkRBVEUpIHtcclxuXHRcdFx0SW5wdXRGaWVsZEZhY3RvcnkuY2hlY2tJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGVBbGxvd2VkKGlucHV0RmllbGRUeXBlLCBhcmdzLnR5cGUpO1xyXG5cdFx0XHRyZXR1cm4gbmV3IERhdGVJbnB1dEZpZWxkKGFyZ3MuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIGFyZ3Mub25WYWx1ZUNoYW5nZWQpO1xyXG5cdFx0fSBlbHNlIGlmIChpbnB1dEZpZWxkVHlwZSA9PT0gSW5wdXRGaWVsZFR5cGUuVElNRSkge1xyXG5cdFx0XHRJbnB1dEZpZWxkRmFjdG9yeS5jaGVja0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZUFsbG93ZWQoaW5wdXRGaWVsZFR5cGUsIGFyZ3MudHlwZSk7XHJcblx0XHRcdHJldHVybiBuZXcgVGltZUlucHV0RmllbGQoYXJncy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgYXJncy5vblZhbHVlQ2hhbmdlZCk7XHJcblx0XHR9IGVsc2UgaWYgKGlucHV0RmllbGRUeXBlID09PSBJbnB1dEZpZWxkVHlwZS5EQVRFX1BJQ0tFUikge1xyXG5cdFx0XHRJbnB1dEZpZWxkRmFjdG9yeS5jaGVja0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZUFsbG93ZWQoaW5wdXRGaWVsZFR5cGUsIGFyZ3MudHlwZSk7XHJcblx0XHRcdHJldHVybiBuZXcgRGF0ZVBpY2tlcklucHV0RmllbGQoYXJncy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgYXJncy5vblZhbHVlQ2hhbmdlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHVuZGVmaW5lZDtcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBjaGVja0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZUFsbG93ZWQoaW5wdXRGaWVsZFR5cGU6IElucHV0RmllbGRUeXBlLCB0eXBlOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGUpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGFsbG93Q29kZUJsb2NrOiB7IGNvZGVCbG9jazogYm9vbGVhbjsgaW5saW5lQ29kZUJsb2NrOiBib29sZWFuIH0gPSBJbnB1dEZpZWxkRmFjdG9yeS5hbGxvd0NvZGVCbG9ja01hcFtpbnB1dEZpZWxkVHlwZV07XHJcblx0XHRpZiAodHlwZSA9PT0gSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlLkNPREVfQkxPQ0sgJiYgIWFsbG93Q29kZUJsb2NrLmNvZGVCbG9jaykge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRQYXJzaW5nRXJyb3IoYFxcJyR7aW5wdXRGaWVsZFR5cGV9XFwnIGlzIG5vdCBhbGxvd2VkIGFzIGNvZGUgYmxvY2tgKTtcclxuXHRcdH1cclxuXHRcdGlmICh0eXBlID09PSBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGUuSU5MSU5FX0NPREVfQkxPQ0sgJiYgIWFsbG93Q29kZUJsb2NrLmlubGluZUNvZGVCbG9jaykge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRQYXJzaW5nRXJyb3IoYFxcJyR7aW5wdXRGaWVsZFR5cGV9XFwnIGlzIG5vdCBhbGxvd2VkIGFzIGlubGluZSBjb2RlIGJsb2NrYCk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUNBLFdBQU8sZUFBZSxTQUFTLGNBQWMsRUFBRSxPQUFPLEtBQUssQ0FBQztBQUM1RCxZQUFRLG9CQUFvQixRQUFRLGVBQWUsUUFBUSxZQUFZLFFBQVEsdUJBQXVCLFFBQVEseUJBQXlCLFFBQVEsaUJBQWlCO0FBQ2hLLDZCQUF3QixNQUFNLEdBQUc7QUFDN0IsVUFBSSxZQUFZLFVBQVUsSUFBSTtBQUM5QixhQUFPLHFCQUFxQixXQUFXLENBQUM7QUFBQSxJQUM1QztBQUNBLFlBQVEsaUJBQWlCO0FBQ3pCLG9DQUFnQyxNQUFNLEdBQUc7QUFDckMsVUFBSTtBQUNKLFVBQUksWUFBWSxVQUFVLElBQUk7QUFDOUIsVUFBSSxVQUFVLE9BQU8sSUFBSTtBQUNyQixjQUFNLElB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
