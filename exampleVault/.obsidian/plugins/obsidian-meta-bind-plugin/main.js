"use strict";
/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod2) => __copyProps(__defProp({}, "__esModule", { value: true }), mod2);
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MetaBindPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian10 = require("obsidian");

// src/settings/Settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  devMode: false,
  preferredDateFormat: "YYYY-MM-DD",
  useUsDateInputOrder: false,
  syncInterval: 200,
  minSyncInterval: 50,
  maxSyncInterval: 1e3
};
var MetaBindSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Meta Bind Plugin Settings" });
    new import_obsidian.Setting(containerEl).setName("Sync interval").setDesc(`The interval in milli-seconds between disk writes. Changing this number is not recommended except if your hard drive is exceptionally slow. Standard: ${DEFAULT_SETTINGS.syncInterval}; Minimum: ${DEFAULT_SETTINGS.minSyncInterval}; Maximum: ${DEFAULT_SETTINGS.maxSyncInterval}`).addText((cb) => {
      cb.setValue(this.plugin.settings.syncInterval.toString());
      cb.onChange((data) => {
        this.plugin.settings.syncInterval = Number.parseInt(data);
        if (Number.isNaN(this.plugin.settings.syncInterval)) {
          this.plugin.settings.syncInterval = DEFAULT_SETTINGS.syncInterval;
        }
        if (this.plugin.settings.syncInterval < DEFAULT_SETTINGS.minSyncInterval) {
          this.plugin.settings.syncInterval = DEFAULT_SETTINGS.minSyncInterval;
        }
        if (this.plugin.settings.syncInterval > DEFAULT_SETTINGS.maxSyncInterval) {
          this.plugin.settings.syncInterval = DEFAULT_SETTINGS.maxSyncInterval;
        }
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Date format").setDesc(`The date format to be used by this plugin.`).addText((cb) => {
      cb.setValue(this.plugin.settings.preferredDateFormat);
      cb.onChange((data) => {
        this.plugin.settings.preferredDateFormat = data;
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Use US date input field order").setDesc(`When enabled the month input is before the day input.`).addToggle((cb) => {
      cb.setValue(this.plugin.settings.useUsDateInputOrder);
      cb.onChange((data) => {
        this.plugin.settings.useUsDateInputOrder = data;
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Dev Mode").setDesc("Enable dev mode. Not recommended unless you want to debug this plugin.").addToggle((cb) => {
      cb.setValue(this.plugin.settings.devMode);
      cb.onChange((data) => {
        this.plugin.settings.devMode = data;
        this.plugin.saveSettings();
      });
    });
  }
};

// src/InputFieldMarkdownRenderChild.ts
var import_obsidian9 = require("obsidian");

// src/utils/Logger.ts
var _Logger = class {
  static log(...data) {
    console.log(this.prefix, ...data);
  }
  static logDebug(...data) {
    if (this.devMode) {
      _Logger.log(...data);
    }
  }
  static logWarning(...data) {
    console.warn(this.prefix, data);
  }
  static logError(...data) {
    console.error(this.prefix, data);
  }
};
var Logger = _Logger;
Logger.prefix = "meta-bind |";

// src/inputFields/AbstractInputField.ts
var AbstractInputField = class {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    this.inputFieldMarkdownRenderChild = inputFieldMarkdownRenderChild;
    this.onValueChange = onValueChange;
  }
};
AbstractInputField.allowCodeBlock = true;
AbstractInputField.allowInlineCodeBlock = true;

// src/inputFields/ToggleInputField.ts
var import_obsidian2 = require("obsidian");

// src/utils/Utils.ts
var MetaBindInternalError = class extends Error {
  constructor(message) {
    super(`[MB_INTERNAL_ERROR - please report this error here https://github.com/mProjectsCode/obsidian-meta-bind-plugin/issues] ${message}`);
  }
};
var MetaBindParsingError = class extends Error {
  constructor(message) {
    super(`[MB_PARSING_ERROR] ${message}`);
  }
};
var MetaBindBindTargetError = class extends Error {
  constructor(message) {
    super(`[MB_BIND_TARGET_ERROR] ${message}`);
  }
};
function getFileName(path) {
  var _a;
  return (_a = path.split("/").at(-1)) != null ? _a : path;
}
function isPath(path) {
  return path.split("/").length > 1;
}
function removeFileEnding(fileName) {
  const fileNameParts = fileName.split(".");
  if (fileNameParts.length === 1) {
    return fileName;
  } else {
    let newFileName = fileNameParts[0];
    for (let i = 1; i < fileNameParts.length - 1; i++) {
      newFileName += "." + fileNameParts[i];
    }
    return newFileName;
  }
}
function mod(n, m) {
  return (n % m + m) % m;
}
function arrayEquals(arr1, arr2) {
  if (arr1.length !== arr2.length) {
    return false;
  }
  for (const arr1Element of arr1) {
    if (!arr2.contains(arr1Element)) {
      return false;
    }
  }
  return true;
}
function isTruthy(value) {
  return !!value;
}
function isFalsy(value) {
  return !value;
}
function equalOrIncludes(str1, str2) {
  return str1 === str2 || str1.includes(str2) || str2.includes(str1);
}

// src/inputFields/ToggleInputField.ts
var ToggleInputField = class extends AbstractInputField {
  getValue() {
    if (!this.toggleComponent) {
      throw new MetaBindInternalError("toggle input component is undefined");
    }
    return this.toggleComponent.getValue();
  }
  setValue(value) {
    if (!this.toggleComponent) {
      throw new MetaBindInternalError("toggle input component is undefined");
    }
    if (value != null && typeof value == "boolean") {
      this.toggleComponent.setValue(value);
    } else {
      Logger.logWarning(`can not set value of toggle to '${value}'`);
      this.toggleComponent.setValue(false);
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return false;
  }
  getHtmlElement() {
    if (!this.toggleComponent) {
      throw new MetaBindInternalError("toggle input component is undefined");
    }
    return this.toggleComponent.toggleEl;
  }
  render(container) {
    const component = new import_obsidian2.ToggleComponent(container);
    component.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
    component.onChange(this.onValueChange);
    this.toggleComponent = component;
  }
};

// src/inputFields/TextInputField.ts
var import_obsidian3 = require("obsidian");
var TextInputField = class extends AbstractInputField {
  getValue() {
    if (!this.textComponent) {
      throw new MetaBindInternalError("text input component is undefined");
    }
    return this.textComponent.getValue();
  }
  setValue(value) {
    if (!this.textComponent) {
      throw new MetaBindInternalError("text input component is undefined");
    }
    if (value != null && typeof value == "string") {
      this.textComponent.setValue(value);
    } else {
      Logger.logWarning(`can not set value of text input to '${value}'`);
      this.textComponent.setValue("");
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return "";
  }
  getHtmlElement() {
    if (!this.textComponent) {
      throw new MetaBindInternalError("text input component is undefined");
    }
    return this.textComponent.inputEl;
  }
  render(container) {
    const component = new import_obsidian3.TextComponent(container);
    component.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
    component.onChange(this.onValueChange);
    this.textComponent = component;
  }
};

// src/inputFields/SliderInputField.ts
var import_obsidian4 = require("obsidian");
var SliderInputField = class extends AbstractInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    var _a, _b, _c, _d;
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.minValue = (_b = (_a = inputFieldMarkdownRenderChild.getArgument("minValue")) == null ? void 0 : _a.value) != null ? _b : 0;
    this.maxValue = (_d = (_c = inputFieldMarkdownRenderChild.getArgument("maxValue")) == null ? void 0 : _c.value) != null ? _d : 100;
  }
  getValue() {
    if (!this.sliderComponent) {
      throw new MetaBindInternalError("slider input component is undefined");
    }
    return this.sliderComponent.getValue();
  }
  setValue(value) {
    if (!this.sliderComponent) {
      throw new MetaBindInternalError("slider input component is undefined");
    }
    if (value != null && typeof value == "number") {
      if (value >= this.minValue && value <= this.maxValue) {
        this.sliderComponent.setValue(value);
      }
    } else {
      Logger.logWarning(`can not set value of slider to '${value}'`);
      this.sliderComponent.setValue(this.getDefaultValue());
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return this.minValue;
  }
  getHtmlElement() {
    if (!this.sliderComponent) {
      throw new MetaBindInternalError("slider input component is undefined");
    }
    return this.sliderComponent.sliderEl;
  }
  render(container) {
    container.removeClass("meta-bind-plugin-input-wrapper");
    container.addClass("meta-bind-plugin-flex-input-wrapper");
    const labelArgument = this.inputFieldMarkdownRenderChild.getArgument("labels");
    if (labelArgument && labelArgument.value === true) {
      container.createSpan({ text: this.minValue.toString(), cls: "meta-bind-plugin-slider-input-label" });
    }
    const component = new import_obsidian4.SliderComponent(container);
    component.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
    component.onChange(this.onValueChange);
    component.setDynamicTooltip();
    component.setLimits(this.minValue, this.maxValue, 1);
    component.sliderEl.addClass("meta-bind-plugin-slider-input");
    if (labelArgument && labelArgument.value === true) {
      container.createSpan({ text: this.maxValue.toString(), cls: "meta-bind-plugin-slider-input-label" });
    }
    this.sliderComponent = component;
  }
};

// src/inputFields/TextAreaInputField.ts
var import_obsidian5 = require("obsidian");
var TextAreaInputField = class extends AbstractInputField {
  getValue() {
    if (!this.textAreaComponent) {
      throw new MetaBindInternalError("text area input component is undefined");
    }
    return this.textAreaComponent.getValue();
  }
  setValue(value) {
    if (!this.textAreaComponent) {
      throw new MetaBindInternalError("text area input component is undefined");
    }
    if (value != null && typeof value == "string") {
      this.textAreaComponent.setValue(value);
    } else {
      Logger.logWarning(`can not set value of text area input to '${value}'`);
      this.textAreaComponent.setValue("");
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return "";
  }
  getHtmlElement() {
    if (!this.textAreaComponent) {
      throw new MetaBindInternalError("text area input component is undefined");
    }
    return this.textAreaComponent.inputEl;
  }
  render(container) {
    const component = new import_obsidian5.TextAreaComponent(container);
    component.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
    component.onChange(this.onValueChange);
    this.textAreaComponent = component;
  }
};

// src/inputFields/SelectInputFieldElement.ts
var SelectInputFieldElement = class {
  constructor(value, parentElement, id, multiSelectInputField, active = false) {
    this.value = value;
    this.id = id;
    this.active = active;
    this.highlighted = false;
    this.selectInputField = multiSelectInputField;
    this.cssClass = "meta-bind-plugin-select-input-element";
    this.activeClass = "meta-bind-plugin-select-input-element-selected";
    this.hoverClass = "meta-bind-plugin-select-input-element-hover";
    this.element = parentElement.createDiv({ cls: this.cssClass });
    this.element.id = this.getHTMLId();
    this.element.on("click", "#" + this.getHTMLId(), () => {
      this.setActive(!this.active);
      if (!this.selectInputField.allowMultiSelect) {
        this.selectInputField.disableAllOtherElements(this.id);
      }
    });
    this.element.on("mouseenter", "#" + this.getHTMLId(), () => {
      this.setHighlighted(true);
    });
    this.element.on("mouseleave", "#" + this.getHTMLId(), () => {
      this.setHighlighted(false);
    });
  }
  getHTMLId() {
    return `meta-bind-select-input-element-${this.selectInputField.inputFieldMarkdownRenderChild.uid}-${this.id}`;
  }
  isHighlighted() {
    return this.highlighted;
  }
  setHighlighted(value) {
    this.highlighted = value;
    if (this.highlighted) {
      this.addClass(this.hoverClass);
      this.selectInputField.deHighlightAllOtherElements(this.id);
    } else {
      this.removeClass(this.hoverClass);
    }
  }
  isActive() {
    return this.active;
  }
  setActive(active, updateParent = true) {
    this.active = active;
    this.update(updateParent);
  }
  update(updateParent) {
    if (this.active) {
      this.addClass(this.activeClass);
    } else {
      this.removeClass(this.activeClass);
    }
    if (updateParent) {
      this.selectInputField.onChange();
    }
  }
  addClass(cssClass) {
    if (!this.element.hasClass(cssClass)) {
      this.element.addClass(cssClass);
    }
  }
  removeClass(cssClass) {
    if (this.element.hasClass(cssClass)) {
      this.element.removeClass(cssClass);
    }
  }
  render() {
    this.element.createEl("div", { text: this.value });
  }
};

// src/inputFields/SelectInputField.ts
var SelectInputField = class extends AbstractInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.elements = [];
    this.allowMultiSelect = false;
  }
  getHtmlElement() {
    if (!this.container) {
      throw new MetaBindInternalError("select input container is undefined");
    }
    return this.container;
  }
  getValue() {
    var _a, _b;
    return (_b = (_a = this.elements.filter((x) => x.isActive()).first()) == null ? void 0 : _a.value) != null ? _b : "";
  }
  setValue(value) {
    for (const element of this.elements) {
      if (value === element.value) {
        element.setActive(true, false);
      } else {
        element.setActive(false, false);
      }
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return "";
  }
  onChange() {
    this.onValueChange(this.getValue());
  }
  render(container) {
    container.addClass("meta-bind-plugin-select-input-bg");
    this.container = container;
    const elementWrapper = container.createDiv({ cls: "meta-bind-plugin-select-input-wrapper" });
    const titleArgument = this.inputFieldMarkdownRenderChild.getArgument("title");
    if (titleArgument) {
      elementWrapper.createEl("div", { text: titleArgument.value, cls: "meta-bind-plugin-select-input-header" });
    }
    const elementArguments = this.inputFieldMarkdownRenderChild.getArguments("option");
    let i = 0;
    for (const elementArgument of elementArguments) {
      const selectInputFieldElement = new SelectInputFieldElement(elementArgument.value, elementWrapper, i, this, false);
      this.elements.push(selectInputFieldElement);
      selectInputFieldElement.render();
      i += 1;
    }
    this.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
  }
  disableAllOtherElements(elementId) {
    for (const selectModalElement of this.elements) {
      if (selectModalElement.id !== elementId) {
        selectModalElement.setActive(false);
      }
    }
  }
  deHighlightAllOtherElements(elementId) {
    for (const selectModalElement of this.elements) {
      if (selectModalElement.id !== elementId) {
        selectModalElement.setHighlighted(false);
      }
    }
  }
  activateHighlighted() {
    for (const selectModalElement of this.elements) {
      if (selectModalElement.isHighlighted()) {
        selectModalElement.setActive(!selectModalElement.isActive());
        if (!this.allowMultiSelect) {
          this.disableAllOtherElements(selectModalElement.id);
        }
      }
    }
  }
  highlightUp() {
    var _a, _b;
    for (const selectModalElement of this.elements) {
      if (selectModalElement.isHighlighted()) {
        (_a = this.getPreviousSelectModalElement(selectModalElement)) == null ? void 0 : _a.setHighlighted(true);
        return;
      }
    }
    (_b = this.elements.at(-1)) == null ? void 0 : _b.setHighlighted(true);
  }
  highlightDown() {
    var _a, _b;
    for (const selectModalElement of this.elements) {
      if (selectModalElement.isHighlighted()) {
        (_a = this.getNextSelectModalElement(selectModalElement)) == null ? void 0 : _a.setHighlighted(true);
        return;
      }
    }
    (_b = this.elements.at(0)) == null ? void 0 : _b.setHighlighted(true);
  }
  getNextSelectModalElement(element) {
    let nextId = element.id + 1;
    nextId = mod(nextId, this.elements.length);
    return this.elements.filter((x) => x.id === nextId).at(0);
  }
  getPreviousSelectModalElement(element) {
    let nextId = element.id - 1;
    nextId = mod(nextId, this.elements.length);
    return this.elements.filter((x) => x.id === nextId).at(0);
  }
};
SelectInputField.allowInlineCodeBlock = false;

// src/inputFields/MultiSelectInputField.ts
var MultiSelectInputField = class extends SelectInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.allowMultiSelect = true;
  }
  getValue() {
    return this.elements.filter((x) => x.isActive()).map((x) => x.value);
  }
  setValue(value) {
    if (value.length === 0) {
      for (const element of this.elements) {
        element.setActive(false, false);
      }
      return;
    }
    elementLoop:
      for (const element of this.elements) {
        for (const valueElement of value) {
          if (valueElement === element.value) {
            element.setActive(true, false);
            continue elementLoop;
          }
        }
        element.setActive(false, false);
      }
  }
  isEqualValue(value) {
    if (!Array.isArray(value)) {
      return false;
    }
    return arrayEquals(this.getValue(), value);
  }
  getDefaultValue() {
    return [];
  }
};

// src/inputFields/DateInputField.ts
var import_obsidian7 = require("obsidian");

// src/parsers/DateParser.ts
var import_obsidian6 = require("obsidian");
var DateParser = class {
  static stringify(date) {
    return date.format(this.dateFormat);
  }
  static parse(dateString) {
    return (0, import_obsidian6.moment)(dateString, DateParser.dateFormat);
  }
  static getDefaultDate() {
    return (0, import_obsidian6.moment)(`${DateParser.getDefaultYear}-${DateParser.getDefaultMonth()}-${DateParser.getDefaultDay()}`);
  }
  static getDefaultDay() {
    return 1;
  }
  static getDefaultMonth() {
    return 1;
  }
  static getDefaultYear() {
    return 2022;
  }
};

// src/inputFields/DateInputField.ts
var DateInputField = class extends AbstractInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.months = {
      "0": "January",
      "1": "February",
      "2": "March",
      "3": "April",
      "4": "May",
      "5": "June",
      "6": "July",
      "7": "August",
      "8": "September",
      "9": "October",
      "10": "November",
      "11": "December"
    };
    this.date = DateParser.getDefaultDate();
    this.days = {};
    for (let i = 1; i <= 31; i++) {
      this.days[i.toString()] = i.toString();
    }
  }
  getHtmlElement() {
    if (!this.container) {
      throw new MetaBindInternalError("toggle input container is undefined");
    }
    return this.container;
  }
  getValue() {
    return DateParser.stringify(this.date);
  }
  setValue(value) {
    var _a;
    if (!this.monthComponent) {
      throw new MetaBindInternalError("date input month component is undefined");
    }
    if (!this.dayComponent) {
      throw new MetaBindInternalError("date input day component is undefined");
    }
    if (!this.yearComponent) {
      throw new MetaBindInternalError("date input hour component is undefined");
    }
    this.date = (_a = DateParser.parse(value)) != null ? _a : DateParser.getDefaultDate();
    this.monthComponent.setValue(this.date.month().toString());
    this.dayComponent.setValue(this.date.date().toString());
    this.yearComponent.setValue(this.date.year().toString());
  }
  isEqualValue(value) {
    return value == this.getValue();
  }
  getDefaultValue() {
    return DateParser.stringify(DateParser.getDefaultDate());
  }
  render(container) {
    var _a;
    this.date = (_a = DateParser.parse(this.inputFieldMarkdownRenderChild.getInitialValue())) != null ? _a : DateParser.getDefaultDate();
    let useUsInputOrder = this.inputFieldMarkdownRenderChild.plugin.settings.useUsDateInputOrder;
    container.removeClass("meta-bind-plugin-input-wrapper");
    container.addClass("meta-bind-plugin-flex-input-wrapper", "meta-bind-plugin-input-element-group");
    if (!useUsInputOrder) {
      this.dayComponent = new import_obsidian7.DropdownComponent(container);
      this.dayComponent.addOptions(this.days);
      this.dayComponent.setValue(this.date.date().toString());
      this.dayComponent.onChange(this.onDayChange.bind(this));
      this.monthComponent = new import_obsidian7.DropdownComponent(container);
      this.monthComponent.addOptions(this.months);
      this.monthComponent.setValue(this.date.month().toString());
      this.monthComponent.onChange(this.onMonthChange.bind(this));
      this.dayComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
      this.monthComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
    } else {
      this.monthComponent = new import_obsidian7.DropdownComponent(container);
      this.monthComponent.addOptions(this.months);
      this.monthComponent.setValue(this.date.month().toString());
      this.monthComponent.onChange(this.onMonthChange.bind(this));
      this.dayComponent = new import_obsidian7.DropdownComponent(container);
      this.dayComponent.addOptions(this.days);
      this.dayComponent.setValue(this.date.date().toString());
      this.dayComponent.onChange(this.onDayChange.bind(this));
      this.dayComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
      this.monthComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
    }
    this.yearComponent = new import_obsidian7.TextComponent(container);
    this.yearComponent.setValue(this.date.year().toString());
    this.yearComponent.onChange(this.onYearChange.bind(this));
    this.yearComponent.inputEl.addClass("meta-bind-plugin-date-input-year-input");
    this.yearComponent.inputEl.addClass("meta-bind-plugin-input-element-group-element");
    this.yearComponent.inputEl.type = "number";
    this.yearComponent.inputEl.max = "9999";
    this.container = container;
  }
  onMonthChange(value) {
    var _a;
    this.date.month(value);
    const clampedDay = this.clampDay(this.date.date());
    (_a = this.dayComponent) == null ? void 0 : _a.setValue(clampedDay.toString());
    this.date.date(clampedDay);
    this.onValueChange(this.getValue());
  }
  onDayChange(value) {
    var _a;
    const day = Number.parseInt(value);
    const clampedDay = this.clampDay(day);
    if (clampedDay !== day) {
      (_a = this.dayComponent) == null ? void 0 : _a.setValue(clampedDay.toString());
    }
    this.date.date(clampedDay);
    this.onValueChange(this.getValue());
  }
  onYearChange(value) {
    const year = Number.parseInt(value);
    this.date.year(Number.isNaN(year) ? DateParser.getDefaultYear() : year);
    this.onValueChange(this.getValue());
  }
  clampDay(day) {
    if (Number.isNaN(day)) {
      return DateParser.getDefaultDay();
    } else if (day < 1) {
      return 1;
    } else if (day > this.date.daysInMonth()) {
      return this.date.daysInMonth();
    }
    return day;
  }
};

// src/inputFields/TimeInputField.ts
var import_obsidian8 = require("obsidian");

// src/parsers/TimeParser.ts
var Time = class {
  constructor() {
    this._hour = TimeParser.getDefaultHour();
    this._minute = TimeParser.getDefaultHour();
  }
  getHour() {
    return this._hour;
  }
  setHour(value) {
    if (value < 0 || value > 24) {
      this._hour = TimeParser.getDefaultHour();
      return;
    }
    this._hour = value;
  }
  getMinute() {
    return this._minute;
  }
  setMinute(value) {
    if (value < 0 || value > 59) {
      this._minute = TimeParser.getDefaultMinute();
      return;
    }
    this._minute = value;
  }
  getUniformHour() {
    return ("00" + this.getHour().toString()).slice(-2);
  }
  getUniformMinute() {
    return ("00" + this.getMinute().toString()).slice(-2);
  }
  setHourFromString(str) {
    const v = Number.parseInt(str);
    this.setHour(Number.isNaN(v) ? TimeParser.getDefaultHour() : v);
  }
  setMinuteFromString(str) {
    const v = Number.parseInt(str);
    this.setMinute(Number.isNaN(v) ? TimeParser.getDefaultMinute() : v);
  }
};
var TimeParser = class {
  static parse(timeString) {
    const time = TimeParser.getDefaultTime();
    const timeParts = timeString.split(":");
    if (timeParts.length !== 2) {
      return void 0;
    }
    time.setHourFromString(timeParts[0]);
    time.setMinuteFromString(timeParts[1]);
    return time;
  }
  static stringify(time) {
    return `${time.getUniformHour()}:${time.getUniformMinute()}`;
  }
  static getDefaultTime() {
    return new Time();
  }
  static getDefaultHour() {
    return 0;
  }
  static getDefaultMinute() {
    return 0;
  }
};

// src/inputFields/TimeInputField.ts
var TimeInputField = class extends AbstractInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.time = TimeParser.getDefaultTime();
    this.hours = {};
    for (let i = 0; i <= 24; i++) {
      this.hours[i.toString()] = i.toString();
    }
    this.minutes = {};
    for (let i = 0; i <= 59; i++) {
      this.minutes[i.toString()] = i.toString();
    }
  }
  getHtmlElement() {
    if (!this.container) {
      throw new MetaBindInternalError("time input container is undefined");
    }
    return this.container;
  }
  getValue() {
    return TimeParser.stringify(this.time);
  }
  setValue(value) {
    var _a;
    if (!this.hourComponent) {
      throw new MetaBindInternalError("time input hour component is undefined");
    }
    if (!this.minuteComponent) {
      throw new MetaBindInternalError("time input minute component is undefined");
    }
    this.time = (_a = TimeParser.parse(value)) != null ? _a : TimeParser.getDefaultTime();
    this.hourComponent.setValue(this.time.getHour().toString());
    this.minuteComponent.setValue(this.time.getMinute().toString());
  }
  isEqualValue(value) {
    return value == this.getValue();
  }
  getDefaultValue() {
    return TimeParser.stringify(TimeParser.getDefaultTime());
  }
  render(container) {
    var _a;
    this.time = (_a = TimeParser.parse(this.inputFieldMarkdownRenderChild.getInitialValue())) != null ? _a : TimeParser.getDefaultTime();
    container.removeClass("meta-bind-plugin-input-wrapper");
    container.addClass("meta-bind-plugin-flex-input-wrapper", "meta-bind-plugin-input-element-group");
    this.hourComponent = new import_obsidian8.DropdownComponent(container);
    this.hourComponent.addOptions(this.hours);
    this.hourComponent.setValue(this.time.getHour().toString());
    this.hourComponent.onChange(this.onHourChange.bind(this));
    this.minuteComponent = new import_obsidian8.DropdownComponent(container);
    this.minuteComponent.addOptions(this.minutes);
    this.minuteComponent.setValue(this.time.getMinute().toString());
    this.minuteComponent.onChange(this.onMinuteChange.bind(this));
    this.hourComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
    this.minuteComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
    this.container = container;
  }
  onHourChange(value) {
    this.time.setHourFromString(value);
    this.onValueChange(this.getValue());
  }
  onMinuteChange(value) {
    this.time.setMinuteFromString(value);
    this.onValueChange(this.getValue());
  }
};

// src/utils/ParserUtils.ts
var EnclosingPair = class {
  constructor(openingString, closingString) {
    if (isFalsy(openingString)) {
      throw new MetaBindInternalError("opening string must not be empty");
    }
    this.openingEqualsClosing = isFalsy(closingString) || openingString === closingString;
    if (this.openingEqualsClosing) {
      this._openingString = openingString;
      this._closingString = openingString;
    } else {
      this._openingString = openingString;
      this._closingString = closingString;
    }
  }
  get openingString() {
    return this._openingString;
  }
  get closingString() {
    return this.openingEqualsClosing ? this._openingString : this._closingString;
  }
  overlaps(other) {
    return equalOrIncludes(this.openingString, other.openingString) || equalOrIncludes(this.openingString, other.closingString) || equalOrIncludes(this.closingString, other.openingString) || equalOrIncludes(this.closingString, other.closingString);
  }
  equals(other) {
    if (isFalsy(other)) {
      return false;
    }
    return this.openingString === other.openingString && this.closingString === other.closingString;
  }
  toString() {
    return JSON.stringify(this);
  }
};
var ParserUtils = class {
  static split(str, separator, ignore) {
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    if (!separator) {
      throw new MetaBindInternalError("separator must not be empty");
    }
    let subStr = "";
    const subStrings = [];
    if (ignore) {
      let remainingOpeningStringCount = ParserUtils.numberOfOccurrences(str, ignore.openingString);
      let remainingClosingStringCount = ParserUtils.numberOfOccurrences(str, ignore.closingString);
      let enclosingLevel = 0;
      strLoop:
        for (let i = 0; i < str.length; i++) {
          if (enclosingLevel === 0 && ParserUtils.isStringAt(str, separator, i)) {
            subStrings.push(subStr);
            subStr = "";
            i += separator.length - 1;
          } else {
            subStr += str[i];
          }
          if (ignore.openingEqualsClosing) {
            if (ParserUtils.isStringAt(str, ignore.openingString, i)) {
              if (enclosingLevel % 2 === 0 && remainingOpeningStringCount === 1) {
              } else if (enclosingLevel % 2 === 0) {
                enclosingLevel += 1;
                for (let j = 1; j < ignore.openingString.length; j++) {
                  i += 1;
                  subStr += str[i];
                  if (i >= str.length) {
                    break strLoop;
                  }
                }
              } else {
                enclosingLevel -= 1;
                for (let j = 1; j < ignore.closingString.length; j++) {
                  i += 1;
                  subStr += str[i];
                  if (i >= str.length) {
                    break strLoop;
                  }
                }
              }
              remainingOpeningStringCount -= 1;
            }
          } else {
            if (ParserUtils.isStringAt(str, ignore.openingString, i)) {
              if (remainingOpeningStringCount <= remainingClosingStringCount) {
                enclosingLevel += 1;
                for (let j = 1; j < ignore.openingString.length; j++) {
                  i += 1;
                  subStr += str[i];
                  if (i >= str.length) {
                    break strLoop;
                  }
                }
              }
              remainingOpeningStringCount -= 1;
            } else if (ParserUtils.isStringAt(str, ignore.closingString, i)) {
              if (enclosingLevel > 0) {
                enclosingLevel -= 1;
                for (let j = 1; j < ignore.closingString.length; j++) {
                  i += 1;
                  subStr += str[i];
                  if (i >= str.length) {
                    break strLoop;
                  }
                }
              }
              remainingClosingStringCount -= 1;
            }
          }
        }
    } else {
      for (let i = 0; i < str.length; i++) {
        if (ParserUtils.isStringAt(str, separator, i)) {
          subStrings.push(subStr);
          subStr = "";
          i += separator.length - 1;
        } else {
          subStr += str[i];
        }
      }
    }
    subStrings.push(subStr);
    return subStrings;
  }
  static removeInBetween(str, enclosingPair) {
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    let remainingOpeningStringCount = ParserUtils.numberOfOccurrences(str, enclosingPair.openingString);
    let remainingClosingStringCount = ParserUtils.numberOfOccurrences(str, enclosingPair.closingString);
    let enclosingLevel = 0;
    let subStr = "";
    for (let i = 0; i < str.length; i++) {
      if (enclosingPair.openingEqualsClosing) {
        if (ParserUtils.isStringAt(str, enclosingPair.openingString, i)) {
          if (enclosingLevel % 2 === 0 && remainingOpeningStringCount === 1) {
          } else if (enclosingLevel % 2 === 0) {
            enclosingLevel += 1;
            i += enclosingPair.openingString.length;
            if (i >= str.length) {
              break;
            }
          } else {
            enclosingLevel -= 1;
            i += enclosingPair.closingString.length;
            if (i >= str.length) {
              break;
            }
          }
          remainingOpeningStringCount -= 1;
        }
      } else {
        if (ParserUtils.isStringAt(str, enclosingPair.openingString, i)) {
          if (remainingOpeningStringCount <= remainingClosingStringCount) {
            enclosingLevel += 1;
            i += enclosingPair.openingString.length;
            if (i >= str.length) {
              break;
            }
          }
          remainingOpeningStringCount -= 1;
        } else if (ParserUtils.isStringAt(str, enclosingPair.closingString, i)) {
          if (enclosingLevel > 0) {
            enclosingLevel -= 1;
            i += enclosingPair.closingString.length;
            if (i >= str.length) {
              break;
            }
          }
          remainingClosingStringCount -= 1;
        }
      }
      if (enclosingLevel === 0) {
        subStr += str[i];
      }
    }
    return subStr;
  }
  static getInBetween(str, enclosingPair) {
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    let remainingOpeningStringCount = ParserUtils.numberOfOccurrences(str, enclosingPair.openingString);
    let remainingClosingStringCount = ParserUtils.numberOfOccurrences(str, enclosingPair.closingString);
    let enclosingLevel = 0;
    let subStr = "";
    const subStrings = [];
    strLoop:
      for (let i = 0; i < str.length; i++) {
        if (enclosingPair.openingEqualsClosing) {
          if (ParserUtils.isStringAt(str, enclosingPair.openingString, i)) {
            if (enclosingLevel % 2 === 0 && remainingOpeningStringCount === 1) {
            } else if (enclosingLevel % 2 === 0) {
              enclosingLevel += 1;
              subStr += str[i];
              for (let j = 1; j < enclosingPair.openingString.length; j++) {
                i += 1;
                subStr += str[i];
                if (i >= str.length) {
                  break strLoop;
                }
              }
            } else {
              enclosingLevel -= 1;
              subStr += str[i];
              for (let j = 1; j < enclosingPair.closingString.length; j++) {
                i += 1;
                subStr += str[i];
                if (i > str.length) {
                  break strLoop;
                }
              }
              subStrings.push(subStr);
              subStr = "";
            }
            remainingOpeningStringCount -= 1;
          } else {
            if (enclosingLevel >= 1) {
              subStr += str[i];
            }
          }
        } else {
          if (ParserUtils.isStringAt(str, enclosingPair.openingString, i)) {
            if (remainingOpeningStringCount <= remainingClosingStringCount) {
              enclosingLevel += 1;
              subStr += str[i];
              for (let j = 1; j < enclosingPair.openingString.length; j++) {
                i += 1;
                subStr += str[i];
                if (i >= str.length) {
                  break strLoop;
                }
              }
            }
            remainingOpeningStringCount -= 1;
          } else if (ParserUtils.isStringAt(str, enclosingPair.closingString, i)) {
            if (enclosingLevel > 0) {
              enclosingLevel -= 1;
              subStr += str[i];
              for (let j = 1; j < enclosingPair.closingString.length; j++) {
                i += 1;
                subStr += str[i];
                if (i > str.length) {
                  break strLoop;
                }
              }
              if (enclosingLevel === 0) {
                subStrings.push(subStr);
                subStr = "";
              }
            }
            remainingClosingStringCount -= 1;
          } else {
            if (enclosingLevel >= 1) {
              subStr += str[i];
            }
          }
        }
      }
    if (subStrings.length === 0) {
      return "";
    } else if (subStrings.length === 1) {
      return subStrings[0].substring(enclosingPair.openingString.length, subStrings[0].length - enclosingPair.closingString.length);
    } else {
      return subStrings.map((x) => x.substring(enclosingPair.openingString.length, x.length - enclosingPair.closingString.length));
    }
  }
  static isStringAt(str, subStr, index) {
    if (index < 0) {
      throw new MetaBindInternalError("index must be greater than 0");
    }
    if (index >= str.length) {
      throw new MetaBindInternalError("index out of bounds of string");
    }
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    if (!subStr) {
      throw new MetaBindInternalError("sub string must not be empty");
    }
    for (let i = 0; i < subStr.length; i++) {
      if (str[i + index] !== subStr[i]) {
        return false;
      }
    }
    return true;
  }
  static contains(str, subStr) {
    return ParserUtils.numberOfOccurrences(str, subStr) > 0;
  }
  static numberOfOccurrences(str, subStr) {
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    if (!subStr) {
      throw new MetaBindInternalError("sub string must not be empty");
    }
    let occurrences = 0;
    for (let i = 0; i < str.length; i++) {
      if (ParserUtils.isStringAt(str, subStr, i)) {
        occurrences += 1;
      }
    }
    return occurrences;
  }
};

// src/parsers/InputFieldDeclarationParser.ts
var InputFieldType = /* @__PURE__ */ ((InputFieldType2) => {
  InputFieldType2["TOGGLE"] = "toggle";
  InputFieldType2["SLIDER"] = "slider";
  InputFieldType2["TEXT"] = "text";
  InputFieldType2["TEXT_AREA"] = "text_area";
  InputFieldType2["SELECT"] = "select";
  InputFieldType2["MULTI_SELECT"] = "multi_select";
  InputFieldType2["DATE"] = "date";
  InputFieldType2["TIME"] = "time";
  InputFieldType2["INVALID"] = "invalid";
  return InputFieldType2;
})(InputFieldType || {});
var _InputFieldDeclarationParser = class {
  static parse(fullDeclaration) {
    var _a;
    const inputFieldDeclaration = {};
    inputFieldDeclaration.fullDeclaration = fullDeclaration;
    inputFieldDeclaration.declaration = ParserUtils.getInBetween(fullDeclaration, _InputFieldDeclarationParser.squareBracesPair);
    const declarationParts = ParserUtils.split(inputFieldDeclaration.declaration, ":", _InputFieldDeclarationParser.squareBracesPair);
    inputFieldDeclaration.bindTarget = (_a = declarationParts[1]) != null ? _a : "";
    inputFieldDeclaration.isBound = isTruthy(inputFieldDeclaration.bindTarget);
    const inputFieldTypeWithArguments = declarationParts[0];
    const inputFieldTypeString = ParserUtils.removeInBetween(inputFieldTypeWithArguments, _InputFieldDeclarationParser.roundBracesPair);
    inputFieldDeclaration.inputFieldType = _InputFieldDeclarationParser.getInputFieldType(inputFieldTypeString);
    if (inputFieldDeclaration.inputFieldType === "invalid" /* INVALID */) {
      throw new MetaBindParsingError(`unknown input field type '${inputFieldTypeString}'`);
    }
    const inputFieldArgumentsString = ParserUtils.getInBetween(inputFieldTypeWithArguments, _InputFieldDeclarationParser.roundBracesPair);
    if (inputFieldArgumentsString) {
      inputFieldDeclaration.arguments = _InputFieldDeclarationParser.parseArguments(inputFieldArgumentsString, inputFieldDeclaration.inputFieldType);
    } else {
      inputFieldDeclaration.arguments = [];
    }
    return inputFieldDeclaration;
  }
  static parseArguments(inputFieldArgumentsString, inputFieldType) {
    let inputFieldArgumentStrings = ParserUtils.split(inputFieldArgumentsString, ",", _InputFieldDeclarationParser.roundBracesPair);
    inputFieldArgumentStrings = inputFieldArgumentStrings.map((x) => x.trim());
    const inputFieldArguments = [];
    for (const inputFieldArgumentString of inputFieldArgumentStrings) {
      const inputFieldArgumentName = _InputFieldDeclarationParser.extractInputFieldArgumentName(inputFieldArgumentString);
      if (inputFieldArgumentName === "class") {
        const inputFieldArgumentValue = _InputFieldDeclarationParser.extractInputFieldArgumentValue(inputFieldArgumentString);
        const inputFieldClassArgument = { name: inputFieldArgumentName, value: inputFieldArgumentValue };
        inputFieldArguments.push(inputFieldClassArgument);
      } else if (inputFieldArgumentName === "addLabels") {
        if (inputFieldType !== "slider" /* SLIDER */) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' is only applicable to slider input fields`);
        }
        inputFieldArguments.push({ name: "labels", value: true });
      } else if (inputFieldArgumentName === "minValue") {
        if (inputFieldType !== "slider" /* SLIDER */) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' is only applicable to slider input fields`);
        }
        const inputFieldArgumentValue = _InputFieldDeclarationParser.extractInputFieldArgumentValue(inputFieldArgumentString);
        const inputFieldArgumentValueAsNumber = Number.parseInt(inputFieldArgumentValue);
        if (Number.isNaN(inputFieldArgumentValueAsNumber)) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' value must be of type number`);
        }
        const inputFieldArgumentObject = { name: inputFieldArgumentName, value: inputFieldArgumentValueAsNumber };
        inputFieldArguments.push(inputFieldArgumentObject);
      } else if (inputFieldArgumentName === "maxValue") {
        if (inputFieldType !== "slider" /* SLIDER */) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' is only applicable to slider input fields`);
        }
        const inputFieldArgumentValue = _InputFieldDeclarationParser.extractInputFieldArgumentValue(inputFieldArgumentString);
        const inputFieldArgumentValueAsNumber = Number.parseInt(inputFieldArgumentValue);
        if (Number.isNaN(inputFieldArgumentValueAsNumber)) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' value must be of type number`);
        }
        const inputFieldArgumentObject = { name: inputFieldArgumentName, value: inputFieldArgumentValueAsNumber };
        inputFieldArguments.push(inputFieldArgumentObject);
      } else if (inputFieldArgumentName === "option") {
        if (inputFieldType !== "select" /* SELECT */ && inputFieldType !== "multi_select" /* MULTI_SELECT */) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' is only applicable to select and multi-select input fields`);
        }
        const inputFieldArgumentValue = _InputFieldDeclarationParser.extractInputFieldArgumentValue(inputFieldArgumentString);
        const inputFieldArgumentObject = { name: inputFieldArgumentName, value: inputFieldArgumentValue };
        inputFieldArguments.push(inputFieldArgumentObject);
      } else if (inputFieldArgumentName === "title") {
        if (inputFieldType !== "select" /* SELECT */ && inputFieldType !== "multi_select" /* MULTI_SELECT */) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' is only applicable to select and multi-select input fields`);
        }
        const inputFieldArgumentValue = _InputFieldDeclarationParser.extractInputFieldArgumentValue(inputFieldArgumentString);
        const inputFieldArgumentObject = { name: inputFieldArgumentName, value: inputFieldArgumentValue };
        inputFieldArguments.push(inputFieldArgumentObject);
      } else {
        throw new MetaBindParsingError(`unknown argument '${inputFieldArgumentName}'`);
      }
    }
    return inputFieldArguments;
  }
  static extractInputFieldArgumentName(argumentString) {
    return ParserUtils.removeInBetween(argumentString, _InputFieldDeclarationParser.roundBracesPair);
  }
  static extractInputFieldArgumentValue(argumentString) {
    const argumentName = this.extractInputFieldArgumentName(argumentString);
    const argumentValue = ParserUtils.getInBetween(argumentString, _InputFieldDeclarationParser.roundBracesPair);
    if (!argumentValue) {
      throw new MetaBindParsingError(`argument '${argumentName}' requires a non empty value`);
    }
    return argumentValue;
  }
  static getInputFieldType(str) {
    for (const entry of Object.entries(InputFieldType)) {
      if (entry[1] === str) {
        return entry[1];
      }
    }
    return "invalid" /* INVALID */;
  }
};
var InputFieldDeclarationParser = _InputFieldDeclarationParser;
InputFieldDeclarationParser.roundBracesPair = new EnclosingPair("(", ")");
InputFieldDeclarationParser.squareBracesPair = new EnclosingPair("[", "]");
InputFieldDeclarationParser.curlyBracesPair = new EnclosingPair("{", "}");
InputFieldDeclarationParser.allBracesPairs = [
  _InputFieldDeclarationParser.roundBracesPair,
  _InputFieldDeclarationParser.squareBracesPair,
  _InputFieldDeclarationParser.curlyBracesPair
];

// src/inputFields/InputFieldFactory.ts
var _InputFieldFactory = class {
  static createInputField(inputFieldType, args) {
    if (inputFieldType === "toggle" /* TOGGLE */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new ToggleInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "slider" /* SLIDER */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new SliderInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "text" /* TEXT */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new TextInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "text_area" /* TEXT_AREA */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new TextAreaInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "select" /* SELECT */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new SelectInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "multi_select" /* MULTI_SELECT */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new MultiSelectInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "date" /* DATE */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new DateInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "time" /* TIME */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new TimeInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    }
    return void 0;
  }
  static checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, type) {
    const allowCodeBlock = _InputFieldFactory.allowCodeBlockMap[inputFieldType];
    if (type === 1 /* CODE_BLOCK */ && !allowCodeBlock.codeBlock) {
      throw new MetaBindParsingError(`'${inputFieldType}' is not allowed as code block`);
    }
    if (type === 0 /* INLINE_CODE_BLOCK */ && !allowCodeBlock.inlineCodeBlock) {
      throw new MetaBindParsingError(`'${inputFieldType}' is not allowed as inline code block`);
    }
  }
};
var InputFieldFactory = _InputFieldFactory;
InputFieldFactory.allowCodeBlockMap = {
  ["toggle" /* TOGGLE */]: { codeBlock: ToggleInputField.allowCodeBlock, inlineCodeBlock: ToggleInputField.allowInlineCodeBlock },
  ["slider" /* SLIDER */]: { codeBlock: SliderInputField.allowCodeBlock, inlineCodeBlock: SliderInputField.allowInlineCodeBlock },
  ["text" /* TEXT */]: { codeBlock: TextInputField.allowCodeBlock, inlineCodeBlock: TextInputField.allowInlineCodeBlock },
  ["text_area" /* TEXT_AREA */]: { codeBlock: TextAreaInputField.allowCodeBlock, inlineCodeBlock: TextAreaInputField.allowInlineCodeBlock },
  ["select" /* SELECT */]: { codeBlock: SelectInputField.allowCodeBlock, inlineCodeBlock: SelectInputField.allowInlineCodeBlock },
  ["multi_select" /* MULTI_SELECT */]: { codeBlock: MultiSelectInputField.allowCodeBlock, inlineCodeBlock: MultiSelectInputField.allowInlineCodeBlock },
  ["date" /* DATE */]: { codeBlock: DateInputField.allowCodeBlock, inlineCodeBlock: DateInputField.allowInlineCodeBlock },
  ["time" /* TIME */]: { codeBlock: TimeInputField.allowCodeBlock, inlineCodeBlock: TimeInputField.allowInlineCodeBlock }
};

// src/InputFieldMarkdownRenderChild.ts
var InputFieldMarkdownRenderChild2 = class extends import_obsidian9.MarkdownRenderChild {
  constructor(containerEl, type, fullDeclaration, plugin, filePath, uid) {
    super(containerEl);
    this.error = "";
    this.filePath = filePath;
    this.uid = uid;
    this.plugin = plugin;
    this.valueQueue = [];
    this.intervalCounter = 0;
    try {
      this.inputFieldDeclaration = InputFieldDeclarationParser.parse(fullDeclaration);
      if (this.inputFieldDeclaration.isBound) {
        this.parseBindTarget();
        this.metaData = this.plugin.getMetaDataForFile(this.bindTargetFile);
      }
      this.inputField = InputFieldFactory.createInputField(this.inputFieldDeclaration.inputFieldType, {
        type,
        inputFieldMarkdownRenderChild: this,
        onValueChanged: this.pushToValueQueue.bind(this)
      });
      this.limitInterval = window.setInterval(() => this.applyValueQueueToMetadata(), this.plugin.settings.syncInterval);
    } catch (e) {
      this.error = e.message;
      Logger.logWarning(e);
    }
  }
  parseBindTarget() {
    if (!this.inputFieldDeclaration) {
      throw new MetaBindInternalError("inputFieldDeclaration is undefined, can not parse bind target");
    }
    const bindTargetParts = this.inputFieldDeclaration.bindTarget.split("#");
    if (bindTargetParts.length === 1) {
      this.bindTargetMetadataField = this.inputFieldDeclaration.bindTarget;
      const files = this.plugin.getFilesByName(this.filePath);
      if (files.length === 0) {
        throw new MetaBindBindTargetError("bind target file not found");
      } else if (files.length === 1) {
        this.bindTargetFile = files[0];
      } else {
        throw new MetaBindBindTargetError("bind target resolves to multiple files, please also specify the file path");
      }
    } else if (bindTargetParts.length === 2) {
      this.bindTargetMetadataField = bindTargetParts[1];
      const files = this.plugin.getFilesByName(bindTargetParts[0]);
      if (files.length === 0) {
        throw new MetaBindBindTargetError("bind target file not found");
      } else if (files.length === 1) {
        this.bindTargetFile = files[0];
      } else {
        throw new MetaBindBindTargetError("bind target resolves to multiple files, please also specify the file path");
      }
    } else {
      throw new MetaBindBindTargetError("bind target may only contain one '#' to specify the metadata field");
    }
  }
  applyValueQueueToMetadata() {
    return __async(this, null, function* () {
      if (!this.inputFieldDeclaration) {
        throw new MetaBindInternalError("inputFieldDeclaration is undefined, can not update metadata");
      }
      if (!this.inputFieldDeclaration.isBound) {
        return;
      }
      if (!this.bindTargetMetadataField || !this.bindTargetFile) {
        throw new MetaBindInternalError("bindTargetMetadataField or bindTargetFile is undefined, can not update metadata");
      }
      if (this.valueQueue.length > 0) {
        yield this.plugin.updateMetaData(this.bindTargetMetadataField, this.valueQueue.at(-1), this.bindTargetFile);
        this.valueQueue = [];
      }
    });
  }
  pushToValueQueue(value) {
    return __async(this, null, function* () {
      var _a;
      if ((_a = this.inputFieldDeclaration) == null ? void 0 : _a.isBound) {
        this.valueQueue.push(value);
      }
    });
  }
  updateValue(value) {
    if (!this.inputField) {
      throw new MetaBindInternalError("inputField is undefined, can not update value");
    }
    if (value == null) {
      value = this.inputField.getDefaultValue();
    }
    if (!this.inputField.isEqualValue(value) && this.valueQueue.length === 0) {
      Logger.logDebug(`updating input field ${this.uid} to`, value);
      this.inputField.setValue(value);
    }
  }
  getInitialValue() {
    var _a, _b, _c, _d;
    if ((_a = this.inputFieldDeclaration) == null ? void 0 : _a.isBound) {
      return (_d = this.metaData[(_b = this.bindTargetMetadataField) != null ? _b : ""]) != null ? _d : (_c = this.inputField) == null ? void 0 : _c.getDefaultValue();
    }
  }
  getArguments(name) {
    if (!this.inputFieldDeclaration) {
      throw new MetaBindInternalError("inputFieldDeclaration is undefined, can not retrieve arguments");
    }
    return this.inputFieldDeclaration.arguments.filter((x) => x.name === name);
  }
  getArgument(name) {
    return this.getArguments(name).at(0);
  }
  onload() {
    return __async(this, null, function* () {
      Logger.logDebug("load", this);
      this.metaData = yield this.metaData;
      const container = this.containerEl.createDiv();
      container.addClass("meta-bind-plugin-input-wrapper");
      this.containerEl.addClass("meta-bind-plugin-input");
      if (this.error) {
        container.innerText = ` -> ERROR: ${this.error}`;
        container.addClass("meta-bind-plugin-error");
        this.containerEl.appendChild(container);
        return;
      }
      if (!this.inputField) {
        container.innerText = ` -> ERROR: ${new MetaBindInternalError("input field is undefined and error is empty").message}`;
        container.addClass("meta-bind-plugin-error");
        this.containerEl.appendChild(container);
        return;
      }
      this.plugin.registerInputFieldMarkdownRenderChild(this);
      this.inputField.render(container);
      const classArgument = this.getArguments("class");
      if (classArgument) {
        this.inputField.getHtmlElement().addClasses(classArgument.map((x) => x.value));
      }
      this.containerEl.empty();
      this.containerEl.appendChild(container);
    });
  }
  onunload() {
    Logger.logDebug("unload", this);
    this.plugin.unregisterInputFieldMarkdownRenderChild(this);
    super.onunload();
    window.clearInterval(this.limitInterval);
  }
};

// src/main.ts
var MetaBindPlugin = class extends import_obsidian10.Plugin {
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      Logger.devMode = this.settings.devMode;
      DateParser.dateFormat = this.settings.preferredDateFormat;
      this.activeMarkdownInputFields = [];
      this.markDownInputFieldIndex = 0;
      this.registerMarkdownPostProcessor((element, context) => {
        const codeBlocks = element.querySelectorAll("code");
        for (let index = 0; index < codeBlocks.length; index++) {
          const codeBlock = codeBlocks.item(index);
          const text = codeBlock.innerText;
          const isInputField = text.startsWith("INPUT[") && text.endsWith("]");
          if (isInputField) {
            context.addChild(new InputFieldMarkdownRenderChild2(codeBlock, 0 /* INLINE_CODE_BLOCK */, text, this, context.sourcePath, this.markDownInputFieldIndex));
            this.markDownInputFieldIndex += 1;
          }
        }
      });
      this.registerMarkdownCodeBlockProcessor("meta-bind", (source, el, ctx) => {
        const codeBlock = el;
        const text = source.replace(/\n/g, "");
        const isInputField = text.startsWith("INPUT[") && text.endsWith("]");
        if (isInputField) {
          ctx.addChild(new InputFieldMarkdownRenderChild2(codeBlock, 1 /* CODE_BLOCK */, text, this, ctx.sourcePath, this.markDownInputFieldIndex));
          this.markDownInputFieldIndex += 1;
        }
      });
      this.registerEvent(this.app.vault.on("modify", (abstractFile) => __async(this, null, function* () {
        if (abstractFile instanceof import_obsidian10.TFile) {
          yield this.updateMarkdownInputFieldsOnFileChange(abstractFile);
        }
      })));
      this.addSettingTab(new MetaBindSettingTab(this.app, this));
    });
  }
  onunload() {
    for (const activeMarkdownInputField of this.activeMarkdownInputFields) {
      activeMarkdownInputField.unload();
    }
  }
  registerInputFieldMarkdownRenderChild(inputFieldMarkdownRenderChild) {
    this.activeMarkdownInputFields.push(inputFieldMarkdownRenderChild);
  }
  unregisterInputFieldMarkdownRenderChild(inputFieldMarkdownRenderChild) {
    this.activeMarkdownInputFields = this.activeMarkdownInputFields.filter((x) => x.uid !== inputFieldMarkdownRenderChild.uid);
  }
  updateMarkdownInputFieldsOnFileChange(file) {
    return __async(this, null, function* () {
      var _a;
      let metadata = void 0;
      for (const activeMarkdownInputField of this.activeMarkdownInputFields) {
        if (!((_a = activeMarkdownInputField.inputFieldDeclaration) == null ? void 0 : _a.isBound) || !activeMarkdownInputField.bindTargetFile || !activeMarkdownInputField.bindTargetMetadataField) {
          continue;
        }
        if (activeMarkdownInputField.bindTargetFile.path === file.path) {
          if (metadata === void 0) {
            metadata = yield this.getMetaDataForFile(file);
          }
          activeMarkdownInputField.updateValue(metadata[activeMarkdownInputField.bindTargetMetadataField]);
        }
      }
    });
  }
  updateMetaData(key, value, file) {
    return __async(this, null, function* () {
      Logger.logDebug(`updating `, key, `: `, value, ` in '${file.path}'`);
      if (!file) {
        console.log("no file");
        return;
      }
      let fileContent = yield this.app.vault.read(file);
      const metadata = yield this.getMetaDataForFileContent(fileContent);
      if (!metadata) {
        return;
      }
      const regExp = new RegExp("^(---)\\n[\\s\\S]*\\n---");
      fileContent = fileContent.replace(regExp, "");
      metadata[key] = value;
      fileContent = `---
${(0, import_obsidian10.stringifyYaml)(metadata)}---` + fileContent;
      yield this.app.vault.modify(file, fileContent);
    });
  }
  getFilesByName(name) {
    const fileNameIsPath = isPath(name);
    const processedFileName = fileNameIsPath ? removeFileEnding(name) : getFileName(removeFileEnding(name));
    const allFiles = this.app.vault.getMarkdownFiles();
    const files = [];
    for (const file of allFiles) {
      if (fileNameIsPath) {
        if (removeFileEnding(file.path) === processedFileName) {
          files.push(file);
        }
      } else {
        if (getFileName(removeFileEnding(file.name)) === processedFileName) {
          files.push(file);
        }
      }
    }
    return files;
  }
  getMetaDataForFile(file) {
    return __async(this, null, function* () {
      if (!file) {
        return void 0;
      }
      const fileContent = yield this.app.vault.read(file);
      return yield this.getMetaDataForFileContent(fileContent);
    });
  }
  getMetaDataForFileContent(fileContent) {
    return __async(this, null, function* () {
      let metadata;
      const regExp = new RegExp("^(---)\\n[\\s\\S]*\\n---");
      const frontMatterRegExpResult = regExp.exec(fileContent);
      if (!frontMatterRegExpResult) {
        return {};
      }
      let frontMatter = frontMatterRegExpResult[0];
      if (!frontMatter) {
        return {};
      }
      frontMatter = frontMatter.substring(4);
      frontMatter = frontMatter.substring(0, frontMatter.length - 3);
      metadata = (0, import_obsidian10.parseYaml)(frontMatter);
      if (!metadata) {
        metadata = {};
      }
      return metadata;
    });
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      DateParser.dateFormat = this.settings.preferredDateFormat;
      Logger.devMode = this.settings.devMode;
      yield this.saveData(this.settings);
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vc3JjL21haW4udHMiLCAiLi4vLi4vLi4vLi4vc3JjL3NldHRpbmdzL1NldHRpbmdzLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvdXRpbHMvTG9nZ2VyLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9BYnN0cmFjdElucHV0RmllbGQudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2lucHV0RmllbGRzL1RvZ2dsZUlucHV0RmllbGQudHMiLCAiLi4vLi4vLi4vLi4vc3JjL3V0aWxzL1V0aWxzLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9UZXh0SW5wdXRGaWVsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvaW5wdXRGaWVsZHMvU2xpZGVySW5wdXRGaWVsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvaW5wdXRGaWVsZHMvVGV4dEFyZWFJbnB1dEZpZWxkLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9TZWxlY3RJbnB1dEZpZWxkRWxlbWVudC50cyIsICIuLi8uLi8uLi8uLi9zcmMvaW5wdXRGaWVsZHMvU2VsZWN0SW5wdXRGaWVsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvaW5wdXRGaWVsZHMvTXVsdGlTZWxlY3RJbnB1dEZpZWxkLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9EYXRlSW5wdXRGaWVsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvcGFyc2Vycy9EYXRlUGFyc2VyLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9UaW1lSW5wdXRGaWVsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvcGFyc2Vycy9UaW1lUGFyc2VyLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy91dGlscy9QYXJzZXJVdGlscy50cyIsICIuLi8uLi8uLi8uLi9zcmMvcGFyc2Vycy9JbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2lucHV0RmllbGRzL0lucHV0RmllbGRGYWN0b3J5LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge3BhcnNlWWFtbCwgUGx1Z2luLCBzdHJpbmdpZnlZYW1sLCBURmlsZX0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHtERUZBVUxUX1NFVFRJTkdTLCBNZXRhQmluZFBsdWdpblNldHRpbmdzLCBNZXRhQmluZFNldHRpbmdUYWJ9IGZyb20gJy4vc2V0dGluZ3MvU2V0dGluZ3MnO1xuaW1wb3J0IHtJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlfSBmcm9tICcuL0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkJztcbmltcG9ydCB7Z2V0RmlsZU5hbWUsIGlzUGF0aCwgcmVtb3ZlRmlsZUVuZGluZ30gZnJvbSAnLi91dGlscy9VdGlscyc7XG5pbXBvcnQge0xvZ2dlcn0gZnJvbSAnLi91dGlscy9Mb2dnZXInO1xuaW1wb3J0IHtEYXRlUGFyc2VyfSBmcm9tICcuL3BhcnNlcnMvRGF0ZVBhcnNlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1ldGFCaW5kUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0Ly8gQHRzLWlnbm9yZSBkZWZpbmVkIGluIGBvbmxvYWRgXG5cdHNldHRpbmdzOiBNZXRhQmluZFBsdWdpblNldHRpbmdzO1xuXG5cdC8vIEB0cy1pZ25vcmUgZGVmaW5lZCBpbiBgb25sb2FkYFxuXHRhY3RpdmVNYXJrZG93bklucHV0RmllbGRzOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFtdO1xuXHQvLyBAdHMtaWdub3JlIGRlZmluZWQgaW4gYG9ubG9hZGBcblx0bWFya0Rvd25JbnB1dEZpZWxkSW5kZXg6IG51bWJlcjtcblxuXHRhc3luYyBvbmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdExvZ2dlci5kZXZNb2RlID0gdGhpcy5zZXR0aW5ncy5kZXZNb2RlO1xuXHRcdERhdGVQYXJzZXIuZGF0ZUZvcm1hdCA9IHRoaXMuc2V0dGluZ3MucHJlZmVycmVkRGF0ZUZvcm1hdDtcblxuXHRcdHRoaXMuYWN0aXZlTWFya2Rvd25JbnB1dEZpZWxkcyA9IFtdO1xuXHRcdHRoaXMubWFya0Rvd25JbnB1dEZpZWxkSW5kZXggPSAwO1xuXG5cdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duUG9zdFByb2Nlc3NvcigoZWxlbWVudCwgY29udGV4dCkgPT4ge1xuXHRcdFx0Y29uc3QgY29kZUJsb2NrcyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnY29kZScpO1xuXHRcdFx0Zm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGNvZGVCbG9ja3MubGVuZ3RoOyBpbmRleCsrKSB7XG5cdFx0XHRcdGNvbnN0IGNvZGVCbG9jayA9IGNvZGVCbG9ja3MuaXRlbShpbmRleCk7XG5cdFx0XHRcdGNvbnN0IHRleHQgPSBjb2RlQmxvY2suaW5uZXJUZXh0O1xuXHRcdFx0XHRjb25zdCBpc0lucHV0RmllbGQgPSB0ZXh0LnN0YXJ0c1dpdGgoJ0lOUFVUWycpICYmIHRleHQuZW5kc1dpdGgoJ10nKTtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coY29udGV4dC5zb3VyY2VQYXRoKTtcblx0XHRcdFx0aWYgKGlzSW5wdXRGaWVsZCkge1xuXHRcdFx0XHRcdGNvbnRleHQuYWRkQ2hpbGQobmV3IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkKFxuXHRcdFx0XHRcdFx0Y29kZUJsb2NrLFxuXHRcdFx0XHRcdFx0SW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlLklOTElORV9DT0RFX0JMT0NLLFxuXHRcdFx0XHRcdFx0dGV4dCwgdGhpcyxcblx0XHRcdFx0XHRcdGNvbnRleHQuc291cmNlUGF0aCxcblx0XHRcdFx0XHRcdHRoaXMubWFya0Rvd25JbnB1dEZpZWxkSW5kZXhcblx0XHRcdFx0XHQpKTtcblx0XHRcdFx0XHR0aGlzLm1hcmtEb3duSW5wdXRGaWVsZEluZGV4ICs9IDE7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvcignbWV0YS1iaW5kJywgKHNvdXJjZSwgZWwsIGN0eCkgPT4ge1xuXHRcdFx0Y29uc3QgY29kZUJsb2NrID0gZWw7XG5cdFx0XHRjb25zdCB0ZXh0ID0gc291cmNlLnJlcGxhY2UoL1xcbi9nLCAnJyk7XG5cdFx0XHRjb25zdCBpc0lucHV0RmllbGQgPSB0ZXh0LnN0YXJ0c1dpdGgoJ0lOUFVUWycpICYmIHRleHQuZW5kc1dpdGgoJ10nKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKGNvbnRleHQuc291cmNlUGF0aCk7XG5cdFx0XHRpZiAoaXNJbnB1dEZpZWxkKSB7XG5cdFx0XHRcdGN0eC5hZGRDaGlsZChuZXcgSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQoXG5cdFx0XHRcdFx0Y29kZUJsb2NrLFxuXHRcdFx0XHRcdElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZS5DT0RFX0JMT0NLLFxuXHRcdFx0XHRcdHRleHQsXG5cdFx0XHRcdFx0dGhpcyxcblx0XHRcdFx0XHRjdHguc291cmNlUGF0aCxcblx0XHRcdFx0XHR0aGlzLm1hcmtEb3duSW5wdXRGaWVsZEluZGV4KSk7XG5cdFx0XHRcdHRoaXMubWFya0Rvd25JbnB1dEZpZWxkSW5kZXggKz0gMTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC52YXVsdC5vbignbW9kaWZ5JywgYXN5bmMgYWJzdHJhY3RGaWxlID0+IHtcblx0XHRcdGlmIChhYnN0cmFjdEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnVwZGF0ZU1hcmtkb3duSW5wdXRGaWVsZHNPbkZpbGVDaGFuZ2UoYWJzdHJhY3RGaWxlKTtcblx0XHRcdH1cblx0XHR9KSk7XG5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IE1ldGFCaW5kU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXHR9XG5cblx0b251bmxvYWQoKTogdm9pZCB7XG5cdFx0Zm9yIChjb25zdCBhY3RpdmVNYXJrZG93bklucHV0RmllbGQgb2YgdGhpcy5hY3RpdmVNYXJrZG93bklucHV0RmllbGRzKSB7XG5cdFx0XHRhY3RpdmVNYXJrZG93bklucHV0RmllbGQudW5sb2FkKCk7XG5cdFx0fVxuXHR9XG5cblx0cmVnaXN0ZXJJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZChpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQpOiB2b2lkIHtcblx0XHR0aGlzLmFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZHMucHVzaChpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCk7XG5cdH1cblxuXHR1bnJlZ2lzdGVySW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQoaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkKTogdm9pZCB7XG5cdFx0dGhpcy5hY3RpdmVNYXJrZG93bklucHV0RmllbGRzID0gdGhpcy5hY3RpdmVNYXJrZG93bklucHV0RmllbGRzLmZpbHRlcih4ID0+IHgudWlkICE9PSBpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZC51aWQpO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlTWFya2Rvd25JbnB1dEZpZWxkc09uRmlsZUNoYW5nZShmaWxlOiBURmlsZSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGxldCBtZXRhZGF0YTogYW55ID0gdW5kZWZpbmVkO1xuXG5cdFx0Zm9yIChjb25zdCBhY3RpdmVNYXJrZG93bklucHV0RmllbGQgb2YgdGhpcy5hY3RpdmVNYXJrZG93bklucHV0RmllbGRzKSB7XG5cdFx0XHRpZiAoIWFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZC5pbnB1dEZpZWxkRGVjbGFyYXRpb24/LmlzQm91bmQgfHwgIWFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZC5iaW5kVGFyZ2V0RmlsZSB8fCAhYWN0aXZlTWFya2Rvd25JbnB1dEZpZWxkLmJpbmRUYXJnZXRNZXRhZGF0YUZpZWxkKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoYWN0aXZlTWFya2Rvd25JbnB1dEZpZWxkLmJpbmRUYXJnZXRGaWxlLnBhdGggPT09IGZpbGUucGF0aCkge1xuXHRcdFx0XHRpZiAobWV0YWRhdGEgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdG1ldGFkYXRhID0gYXdhaXQgdGhpcy5nZXRNZXRhRGF0YUZvckZpbGUoZmlsZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YWN0aXZlTWFya2Rvd25JbnB1dEZpZWxkLnVwZGF0ZVZhbHVlKG1ldGFkYXRhW2FjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZC5iaW5kVGFyZ2V0TWV0YWRhdGFGaWVsZF0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGFzeW5jIHVwZGF0ZU1ldGFEYXRhKGtleTogc3RyaW5nLCB2YWx1ZTogYW55LCBmaWxlOiBURmlsZSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdExvZ2dlci5sb2dEZWJ1ZyhgdXBkYXRpbmcgYCwga2V5LCBgOiBgLCB2YWx1ZSwgYCBpbiAnJHtmaWxlLnBhdGh9J2ApO1xuXG5cdFx0aWYgKCFmaWxlKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnbm8gZmlsZScpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGxldCBmaWxlQ29udGVudDogc3RyaW5nID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcblxuXHRcdGNvbnN0IG1ldGFkYXRhOiBhbnkgPSBhd2FpdCB0aGlzLmdldE1ldGFEYXRhRm9yRmlsZUNvbnRlbnQoZmlsZUNvbnRlbnQpO1xuXHRcdC8vIGNvbnNvbGUubG9nKG1ldGFkYXRhKTtcblx0XHRpZiAoIW1ldGFkYXRhKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgcmVnRXhwID0gbmV3IFJlZ0V4cCgnXigtLS0pXFxcXG5bXFxcXHNcXFxcU10qXFxcXG4tLS0nKTtcblx0XHRmaWxlQ29udGVudCA9IGZpbGVDb250ZW50LnJlcGxhY2UocmVnRXhwLCAnJyk7XG5cblx0XHRtZXRhZGF0YVtrZXldID0gdmFsdWU7XG5cdFx0Ly8gY29uc29sZS5sb2cobWV0YWRhdGEpO1xuXG5cdFx0ZmlsZUNvbnRlbnQgPSBgLS0tXFxuJHtzdHJpbmdpZnlZYW1sKG1ldGFkYXRhKX0tLS1gICsgZmlsZUNvbnRlbnQ7XG5cdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIGZpbGVDb250ZW50KTtcblx0fVxuXG5cdGdldEZpbGVzQnlOYW1lKG5hbWU6IHN0cmluZyk6IFRGaWxlW10ge1xuXHRcdC8vIGNvbnNvbGUubG9nKGdldEZpbGVOYW1lKHJlbW92ZUZpbGVFbmRpbmcobmFtZSkpKVxuXHRcdGNvbnN0IGZpbGVOYW1lSXNQYXRoID0gaXNQYXRoKG5hbWUpO1xuXHRcdGNvbnN0IHByb2Nlc3NlZEZpbGVOYW1lID0gZmlsZU5hbWVJc1BhdGggPyByZW1vdmVGaWxlRW5kaW5nKG5hbWUpIDogZ2V0RmlsZU5hbWUocmVtb3ZlRmlsZUVuZGluZyhuYW1lKSk7XG5cblx0XHRjb25zdCBhbGxGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblx0XHRjb25zdCBmaWxlczogVEZpbGVbXSA9IFtdO1xuXHRcdGZvciAoY29uc3QgZmlsZSBvZiBhbGxGaWxlcykge1xuXHRcdFx0Ly8gY29uc29sZS5sb2cocmVtb3ZlRmlsZUVuZGluZyhmaWxlLnBhdGgpKTtcblx0XHRcdGlmIChmaWxlTmFtZUlzUGF0aCkge1xuXHRcdFx0XHRpZiAocmVtb3ZlRmlsZUVuZGluZyhmaWxlLnBhdGgpID09PSBwcm9jZXNzZWRGaWxlTmFtZSkge1xuXHRcdFx0XHRcdGZpbGVzLnB1c2goZmlsZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChnZXRGaWxlTmFtZShyZW1vdmVGaWxlRW5kaW5nKGZpbGUubmFtZSkpID09PSBwcm9jZXNzZWRGaWxlTmFtZSkge1xuXHRcdFx0XHRcdGZpbGVzLnB1c2goZmlsZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmlsZXM7XG5cdH1cblxuXHRhc3luYyBnZXRNZXRhRGF0YUZvckZpbGUoZmlsZTogVEZpbGUpOiBQcm9taXNlPGFueT4ge1xuXHRcdGlmICghZmlsZSkge1xuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHRjb25zdCBmaWxlQ29udGVudDogc3RyaW5nID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5nZXRNZXRhRGF0YUZvckZpbGVDb250ZW50KGZpbGVDb250ZW50KTtcblx0fVxuXG5cdGFzeW5jIGdldE1ldGFEYXRhRm9yRmlsZUNvbnRlbnQoZmlsZUNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG5cdFx0Ly8gTG9nZ2VyLmxvZ0RlYnVnKGByZWFkaW5nIG1ldGFkYXRhIGZvciAke2ZpbGUucGF0aH1gKTtcblx0XHRsZXQgbWV0YWRhdGE6IGFueTtcblxuXHRcdGNvbnN0IHJlZ0V4cCA9IG5ldyBSZWdFeHAoJ14oLS0tKVxcXFxuW1xcXFxzXFxcXFNdKlxcXFxuLS0tJyk7XG5cdFx0Y29uc3QgZnJvbnRNYXR0ZXJSZWdFeHBSZXN1bHQgPSByZWdFeHAuZXhlYyhmaWxlQ29udGVudCk7XG5cdFx0aWYgKCFmcm9udE1hdHRlclJlZ0V4cFJlc3VsdCkge1xuXHRcdFx0cmV0dXJuIHt9O1xuXHRcdH1cblx0XHRsZXQgZnJvbnRNYXR0ZXIgPSBmcm9udE1hdHRlclJlZ0V4cFJlc3VsdFswXTtcblx0XHRpZiAoIWZyb250TWF0dGVyKSB7XG5cdFx0XHRyZXR1cm4ge307XG5cdFx0fVxuXHRcdC8vIGNvbnNvbGUubG9nKGZyb250TWF0dGVyKTtcblx0XHRmcm9udE1hdHRlciA9IGZyb250TWF0dGVyLnN1YnN0cmluZyg0KTtcblx0XHRmcm9udE1hdHRlciA9IGZyb250TWF0dGVyLnN1YnN0cmluZygwLCBmcm9udE1hdHRlci5sZW5ndGggLSAzKTtcblx0XHQvLyBjb25zb2xlLmxvZyhmcm9udE1hdHRlcik7XG5cblx0XHRtZXRhZGF0YSA9IHBhcnNlWWFtbChmcm9udE1hdHRlcik7XG5cblx0XHRpZiAoIW1ldGFkYXRhKSB7XG5cdFx0XHRtZXRhZGF0YSA9IHt9O1xuXHRcdH1cblxuXHRcdC8vY29uc29sZS5sb2cobWV0YWRhdGEpO1xuXG5cdFx0cmV0dXJuIG1ldGFkYXRhO1xuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdERhdGVQYXJzZXIuZGF0ZUZvcm1hdCA9IHRoaXMuc2V0dGluZ3MucHJlZmVycmVkRGF0ZUZvcm1hdDtcblx0XHRMb2dnZXIuZGV2TW9kZSA9IHRoaXMuc2V0dGluZ3MuZGV2TW9kZTtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG59XG4iLCAiaW1wb3J0IHtBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmd9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBNZXRhQmluZFBsdWdpbiBmcm9tICcuLi9tYWluJztcblxuZXhwb3J0IGludGVyZmFjZSBNZXRhQmluZFBsdWdpblNldHRpbmdzIHtcblx0ZGV2TW9kZTogYm9vbGVhbjtcblx0cHJlZmVycmVkRGF0ZUZvcm1hdDogc3RyaW5nO1xuXHR1c2VVc0RhdGVJbnB1dE9yZGVyOiBib29sZWFuO1xuXHRzeW5jSW50ZXJ2YWw6IG51bWJlcjtcblx0bWF4U3luY0ludGVydmFsOiBudW1iZXI7XG5cdG1pblN5bmNJbnRlcnZhbDogbnVtYmVyO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTWV0YUJpbmRQbHVnaW5TZXR0aW5ncyA9IHtcblx0ZGV2TW9kZTogZmFsc2UsXG5cdHByZWZlcnJlZERhdGVGb3JtYXQ6ICdZWVlZLU1NLUREJyxcblx0dXNlVXNEYXRlSW5wdXRPcmRlcjogZmFsc2UsXG5cdHN5bmNJbnRlcnZhbDogMjAwLFxuXHRtaW5TeW5jSW50ZXJ2YWw6IDUwLFxuXHRtYXhTeW5jSW50ZXJ2YWw6IDEwMDAsXG59O1xuXG5leHBvcnQgY2xhc3MgTWV0YUJpbmRTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogTWV0YUJpbmRQbHVnaW47XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTWV0YUJpbmRQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnTWV0YSBCaW5kIFBsdWdpbiBTZXR0aW5ncyd9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1N5bmMgaW50ZXJ2YWwnKVxuXHRcdFx0LnNldERlc2MoYFRoZSBpbnRlcnZhbCBpbiBtaWxsaS1zZWNvbmRzIGJldHdlZW4gZGlzayB3cml0ZXMuIENoYW5naW5nIHRoaXMgbnVtYmVyIGlzIG5vdCByZWNvbW1lbmRlZCBleGNlcHQgaWYgeW91ciBoYXJkIGRyaXZlIGlzIGV4Y2VwdGlvbmFsbHkgc2xvdy4gU3RhbmRhcmQ6ICR7REVGQVVMVF9TRVRUSU5HUy5zeW5jSW50ZXJ2YWx9OyBNaW5pbXVtOiAke0RFRkFVTFRfU0VUVElOR1MubWluU3luY0ludGVydmFsfTsgTWF4aW11bTogJHtERUZBVUxUX1NFVFRJTkdTLm1heFN5bmNJbnRlcnZhbH1gKVxuXHRcdFx0LmFkZFRleHQoY2IgPT4ge1xuXHRcdFx0XHRjYi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeW5jSW50ZXJ2YWwudG9TdHJpbmcoKSk7XG5cdFx0XHRcdGNiLm9uQ2hhbmdlKGRhdGEgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA9IE51bWJlci5wYXJzZUludChkYXRhKTtcblx0XHRcdFx0XHRpZiAoTnVtYmVyLmlzTmFOKHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCkpIHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA9IERFRkFVTFRfU0VUVElOR1Muc3luY0ludGVydmFsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc3luY0ludGVydmFsIDwgREVGQVVMVF9TRVRUSU5HUy5taW5TeW5jSW50ZXJ2YWwpIHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA9IERFRkFVTFRfU0VUVElOR1MubWluU3luY0ludGVydmFsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc3luY0ludGVydmFsID4gREVGQVVMVF9TRVRUSU5HUy5tYXhTeW5jSW50ZXJ2YWwpIHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA9IERFRkFVTFRfU0VUVElOR1MubWF4U3luY0ludGVydmFsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0RhdGUgZm9ybWF0Jylcblx0XHRcdC5zZXREZXNjKGBUaGUgZGF0ZSBmb3JtYXQgdG8gYmUgdXNlZCBieSB0aGlzIHBsdWdpbi5gKVxuXHRcdFx0LmFkZFRleHQoY2IgPT4ge1xuXHRcdFx0XHRjYi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmZXJyZWREYXRlRm9ybWF0KTtcblx0XHRcdFx0Y2Iub25DaGFuZ2UoZGF0YSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlZmVycmVkRGF0ZUZvcm1hdCA9IGRhdGE7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdVc2UgVVMgZGF0ZSBpbnB1dCBmaWVsZCBvcmRlcicpXG5cdFx0XHQuc2V0RGVzYyhgV2hlbiBlbmFibGVkIHRoZSBtb250aCBpbnB1dCBpcyBiZWZvcmUgdGhlIGRheSBpbnB1dC5gKVxuXHRcdFx0LmFkZFRvZ2dsZShjYiA9PiB7XG5cdFx0XHRcdGNiLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZVVzRGF0ZUlucHV0T3JkZXIpO1xuXHRcdFx0XHRjYi5vbkNoYW5nZShkYXRhID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VVc0RhdGVJbnB1dE9yZGVyID0gZGF0YTtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0RldiBNb2RlJylcblx0XHRcdC5zZXREZXNjKCdFbmFibGUgZGV2IG1vZGUuIE5vdCByZWNvbW1lbmRlZCB1bmxlc3MgeW91IHdhbnQgdG8gZGVidWcgdGhpcyBwbHVnaW4uJylcblx0XHRcdC5hZGRUb2dnbGUoY2IgPT4ge1xuXHRcdFx0XHRjYi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZXZNb2RlKTtcblx0XHRcdFx0Y2Iub25DaGFuZ2UoZGF0YSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGV2TW9kZSA9IGRhdGE7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdH1cbn1cbiIsICJpbXBvcnQge01hcmtkb3duUmVuZGVyQ2hpbGQsIFRGaWxlfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgTWV0YUJpbmRQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7TG9nZ2VyfSBmcm9tICcuL3V0aWxzL0xvZ2dlcic7XG5pbXBvcnQge0Fic3RyYWN0SW5wdXRGaWVsZH0gZnJvbSAnLi9pbnB1dEZpZWxkcy9BYnN0cmFjdElucHV0RmllbGQnO1xuaW1wb3J0IHtJbnB1dEZpZWxkRmFjdG9yeX0gZnJvbSAnLi9pbnB1dEZpZWxkcy9JbnB1dEZpZWxkRmFjdG9yeSc7XG5pbXBvcnQge0lucHV0RmllbGRBcmd1bWVudCwgSW5wdXRGaWVsZERlY2xhcmF0aW9uLCBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXJ9IGZyb20gJy4vcGFyc2Vycy9JbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXInO1xuaW1wb3J0IHtNZXRhQmluZEJpbmRUYXJnZXRFcnJvciwgTWV0YUJpbmRJbnRlcm5hbEVycm9yfSBmcm9tICcuL3V0aWxzL1V0aWxzJztcblxuZXhwb3J0IGVudW0gSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlIHtcblx0SU5MSU5FX0NPREVfQkxPQ0ssXG5cdENPREVfQkxPQ0ssXG59XG5cbmV4cG9ydCBjbGFzcyBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCBleHRlbmRzIE1hcmtkb3duUmVuZGVyQ2hpbGQge1xuXHRwbHVnaW46IE1ldGFCaW5kUGx1Z2luO1xuXHRtZXRhRGF0YTogYW55O1xuXHRmaWxlUGF0aDogc3RyaW5nO1xuXHR1aWQ6IG51bWJlcjtcblx0aW5wdXRGaWVsZDogQWJzdHJhY3RJbnB1dEZpZWxkIHwgdW5kZWZpbmVkO1xuXHRlcnJvcjogc3RyaW5nO1xuXG5cdGlucHV0RmllbGREZWNsYXJhdGlvbjogSW5wdXRGaWVsZERlY2xhcmF0aW9uIHwgdW5kZWZpbmVkO1xuXHRiaW5kVGFyZ2V0RmlsZTogVEZpbGUgfCB1bmRlZmluZWQ7XG5cdGJpbmRUYXJnZXRNZXRhZGF0YUZpZWxkOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cblx0bGltaXRJbnRlcnZhbDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuXHRpbnRlcnZhbENvdW50ZXI6IG51bWJlcjtcblx0dmFsdWVRdWV1ZTogYW55W107XG5cblx0Y29uc3RydWN0b3IoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCB0eXBlOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGUsIGZ1bGxEZWNsYXJhdGlvbjogc3RyaW5nLCBwbHVnaW46IE1ldGFCaW5kUGx1Z2luLCBmaWxlUGF0aDogc3RyaW5nLCB1aWQ6IG51bWJlcikge1xuXHRcdHN1cGVyKGNvbnRhaW5lckVsKTtcblxuXHRcdHRoaXMuZXJyb3IgPSAnJztcblx0XHR0aGlzLmZpbGVQYXRoID0gZmlsZVBhdGg7XG5cdFx0dGhpcy51aWQgPSB1aWQ7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cblx0XHR0aGlzLnZhbHVlUXVldWUgPSBbXTtcblx0XHR0aGlzLmludGVydmFsQ291bnRlciA9IDA7XG5cblx0XHR0cnkge1xuXHRcdFx0dGhpcy5pbnB1dEZpZWxkRGVjbGFyYXRpb24gPSBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIucGFyc2UoZnVsbERlY2xhcmF0aW9uKTtcblxuXHRcdFx0aWYgKHRoaXMuaW5wdXRGaWVsZERlY2xhcmF0aW9uLmlzQm91bmQpIHtcblx0XHRcdFx0dGhpcy5wYXJzZUJpbmRUYXJnZXQoKTtcblx0XHRcdFx0Ly8gQHRzLWlnbm9yZSBgcGFyc2VCaW5kVGFyZ2V0YCBzZXRzIGBiaW5kVGFyZ2V0RmlsZWAgYW5kIGBiaW5kVGFyZ2V0TWV0YWRhdGFGaWVsZGAgb3IgdGhyb3dzIGFuIGVycm9yLlxuXHRcdFx0XHR0aGlzLm1ldGFEYXRhID0gdGhpcy5wbHVnaW4uZ2V0TWV0YURhdGFGb3JGaWxlKHRoaXMuYmluZFRhcmdldEZpbGUpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmlucHV0RmllbGQgPSBJbnB1dEZpZWxkRmFjdG9yeS5jcmVhdGVJbnB1dEZpZWxkKHRoaXMuaW5wdXRGaWVsZERlY2xhcmF0aW9uLmlucHV0RmllbGRUeXBlLCB7XG5cdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkOiB0aGlzLFxuXHRcdFx0XHRvblZhbHVlQ2hhbmdlZDogdGhpcy5wdXNoVG9WYWx1ZVF1ZXVlLmJpbmQodGhpcyksXG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy5saW1pdEludGVydmFsID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHRoaXMuYXBwbHlWYWx1ZVF1ZXVlVG9NZXRhZGF0YSgpLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeW5jSW50ZXJ2YWwpO1xuXHRcdH0gY2F0Y2ggKGU6IGFueSkge1xuXHRcdFx0dGhpcy5lcnJvciA9IGUubWVzc2FnZTtcblx0XHRcdExvZ2dlci5sb2dXYXJuaW5nKGUpO1xuXHRcdH1cblx0fVxuXG5cdHBhcnNlQmluZFRhcmdldCgpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMuaW5wdXRGaWVsZERlY2xhcmF0aW9uKSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdpbnB1dEZpZWxkRGVjbGFyYXRpb24gaXMgdW5kZWZpbmVkLCBjYW4gbm90IHBhcnNlIGJpbmQgdGFyZ2V0Jyk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgYmluZFRhcmdldFBhcnRzID0gdGhpcy5pbnB1dEZpZWxkRGVjbGFyYXRpb24uYmluZFRhcmdldC5zcGxpdCgnIycpO1xuXG5cdFx0aWYgKGJpbmRUYXJnZXRQYXJ0cy5sZW5ndGggPT09IDEpIHtcblx0XHRcdC8vIHRoZSBiaW5kIHRhcmdldCBpcyBpbiB0aGUgc2FtZSBmaWxlXG5cdFx0XHR0aGlzLmJpbmRUYXJnZXRNZXRhZGF0YUZpZWxkID0gdGhpcy5pbnB1dEZpZWxkRGVjbGFyYXRpb24uYmluZFRhcmdldDtcblxuXHRcdFx0Y29uc3QgZmlsZXM6IFRGaWxlW10gPSB0aGlzLnBsdWdpbi5nZXRGaWxlc0J5TmFtZSh0aGlzLmZpbGVQYXRoKTtcblx0XHRcdGlmIChmaWxlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kQmluZFRhcmdldEVycm9yKCdiaW5kIHRhcmdldCBmaWxlIG5vdCBmb3VuZCcpO1xuXHRcdFx0fSBlbHNlIGlmIChmaWxlcy5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0dGhpcy5iaW5kVGFyZ2V0RmlsZSA9IGZpbGVzWzBdO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kQmluZFRhcmdldEVycm9yKCdiaW5kIHRhcmdldCByZXNvbHZlcyB0byBtdWx0aXBsZSBmaWxlcywgcGxlYXNlIGFsc28gc3BlY2lmeSB0aGUgZmlsZSBwYXRoJyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChiaW5kVGFyZ2V0UGFydHMubGVuZ3RoID09PSAyKSB7XG5cdFx0XHQvLyB0aGUgYmluZCB0YXJnZXQgaXMgaW4gYW5vdGhlciBmaWxlXG5cdFx0XHR0aGlzLmJpbmRUYXJnZXRNZXRhZGF0YUZpZWxkID0gYmluZFRhcmdldFBhcnRzWzFdO1xuXG5cdFx0XHRjb25zdCBmaWxlczogVEZpbGVbXSA9IHRoaXMucGx1Z2luLmdldEZpbGVzQnlOYW1lKGJpbmRUYXJnZXRQYXJ0c1swXSk7XG5cdFx0XHRpZiAoZmlsZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdHRocm93IG5ldyBNZXRhQmluZEJpbmRUYXJnZXRFcnJvcignYmluZCB0YXJnZXQgZmlsZSBub3QgZm91bmQnKTtcblx0XHRcdH0gZWxzZSBpZiAoZmlsZXMubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRcdHRoaXMuYmluZFRhcmdldEZpbGUgPSBmaWxlc1swXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRocm93IG5ldyBNZXRhQmluZEJpbmRUYXJnZXRFcnJvcignYmluZCB0YXJnZXQgcmVzb2x2ZXMgdG8gbXVsdGlwbGUgZmlsZXMsIHBsZWFzZSBhbHNvIHNwZWNpZnkgdGhlIGZpbGUgcGF0aCcpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRCaW5kVGFyZ2V0RXJyb3IoJ2JpbmQgdGFyZ2V0IG1heSBvbmx5IGNvbnRhaW4gb25lIFxcJyNcXCcgdG8gc3BlY2lmeSB0aGUgbWV0YWRhdGEgZmllbGQnKTtcblx0XHR9XG5cdH1cblxuXHQvLyB1c2UgdGhpcyBpbnRlcnZhbCB0byByZWR1Y2Ugd3JpdGluZyBvcGVyYXRpb25zXG5cdGFzeW5jIGFwcGx5VmFsdWVRdWV1ZVRvTWV0YWRhdGEoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCF0aGlzLmlucHV0RmllbGREZWNsYXJhdGlvbikge1xuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignaW5wdXRGaWVsZERlY2xhcmF0aW9uIGlzIHVuZGVmaW5lZCwgY2FuIG5vdCB1cGRhdGUgbWV0YWRhdGEnKTtcblx0XHR9XG5cdFx0aWYgKCF0aGlzLmlucHV0RmllbGREZWNsYXJhdGlvbi5pc0JvdW5kKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmICghdGhpcy5iaW5kVGFyZ2V0TWV0YWRhdGFGaWVsZCB8fCAhdGhpcy5iaW5kVGFyZ2V0RmlsZSkge1xuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignYmluZFRhcmdldE1ldGFkYXRhRmllbGQgb3IgYmluZFRhcmdldEZpbGUgaXMgdW5kZWZpbmVkLCBjYW4gbm90IHVwZGF0ZSBtZXRhZGF0YScpO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnZhbHVlUXVldWUubGVuZ3RoID4gMCkge1xuXHRcdFx0Ly8gY29uc29sZS5sb2codGhpcy52YWx1ZVF1ZXVlLmF0KC0xKSlcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnVwZGF0ZU1ldGFEYXRhKHRoaXMuYmluZFRhcmdldE1ldGFkYXRhRmllbGQsIHRoaXMudmFsdWVRdWV1ZS5hdCgtMSksIHRoaXMuYmluZFRhcmdldEZpbGUpO1xuXHRcdFx0dGhpcy52YWx1ZVF1ZXVlID0gW107XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgcHVzaFRvVmFsdWVRdWV1ZSh2YWx1ZTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKHRoaXMuaW5wdXRGaWVsZERlY2xhcmF0aW9uPy5pc0JvdW5kKSB7XG5cdFx0XHR0aGlzLnZhbHVlUXVldWUucHVzaCh2YWx1ZSk7XG5cdFx0fVxuXHR9XG5cblx0dXBkYXRlVmFsdWUodmFsdWU6IGFueSk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5pbnB1dEZpZWxkKSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdpbnB1dEZpZWxkIGlzIHVuZGVmaW5lZCwgY2FuIG5vdCB1cGRhdGUgdmFsdWUnKTtcblx0XHR9XG5cblx0XHRpZiAodmFsdWUgPT0gbnVsbCkge1xuXHRcdFx0dmFsdWUgPSB0aGlzLmlucHV0RmllbGQuZ2V0RGVmYXVsdFZhbHVlKCk7XG5cdFx0fVxuXG5cdFx0aWYgKCF0aGlzLmlucHV0RmllbGQuaXNFcXVhbFZhbHVlKHZhbHVlKSAmJiB0aGlzLnZhbHVlUXVldWUubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRMb2dnZXIubG9nRGVidWcoYHVwZGF0aW5nIGlucHV0IGZpZWxkICR7dGhpcy51aWR9IHRvYCwgdmFsdWUpO1xuXHRcdFx0dGhpcy5pbnB1dEZpZWxkLnNldFZhbHVlKHZhbHVlKTtcblx0XHR9XG5cdH1cblxuXHRnZXRJbml0aWFsVmFsdWUoKTogYW55IHwgdW5kZWZpbmVkIHtcblx0XHRpZiAodGhpcy5pbnB1dEZpZWxkRGVjbGFyYXRpb24/LmlzQm91bmQpIHtcblx0XHRcdHJldHVybiB0aGlzLm1ldGFEYXRhW3RoaXMuYmluZFRhcmdldE1ldGFkYXRhRmllbGQgPz8gJyddID8/IHRoaXMuaW5wdXRGaWVsZD8uZ2V0RGVmYXVsdFZhbHVlKCk7XG5cdFx0fVxuXHR9XG5cblx0Z2V0QXJndW1lbnRzKG5hbWU6IHN0cmluZyk6IElucHV0RmllbGRBcmd1bWVudFtdIHtcblx0XHRpZiAoIXRoaXMuaW5wdXRGaWVsZERlY2xhcmF0aW9uKSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdpbnB1dEZpZWxkRGVjbGFyYXRpb24gaXMgdW5kZWZpbmVkLCBjYW4gbm90IHJldHJpZXZlIGFyZ3VtZW50cycpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmlucHV0RmllbGREZWNsYXJhdGlvbi5hcmd1bWVudHMuZmlsdGVyKHggPT4geC5uYW1lID09PSBuYW1lKTtcblx0fVxuXG5cdGdldEFyZ3VtZW50KG5hbWU6IHN0cmluZyk6IElucHV0RmllbGRBcmd1bWVudCB8IHVuZGVmaW5lZCB7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0QXJndW1lbnRzKG5hbWUpLmF0KDApO1xuXHR9XG5cblx0YXN5bmMgb25sb2FkKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdExvZ2dlci5sb2dEZWJ1ZygnbG9hZCcsIHRoaXMpO1xuXG5cdFx0dGhpcy5tZXRhRGF0YSA9IGF3YWl0IHRoaXMubWV0YURhdGE7XG5cblx0XHRjb25zdCBjb250YWluZXI6IEhUTUxEaXZFbGVtZW50ID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoKTtcblx0XHRjb250YWluZXIuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4taW5wdXQtd3JhcHBlcicpO1xuXHRcdHRoaXMuY29udGFpbmVyRWwuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4taW5wdXQnKTtcblxuXHRcdGlmICh0aGlzLmVycm9yKSB7XG5cdFx0XHRjb250YWluZXIuaW5uZXJUZXh0ID0gYCAtPiBFUlJPUjogJHt0aGlzLmVycm9yfWA7XG5cdFx0XHRjb250YWluZXIuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4tZXJyb3InKTtcblx0XHRcdHRoaXMuY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIXRoaXMuaW5wdXRGaWVsZCkge1xuXHRcdFx0Y29udGFpbmVyLmlubmVyVGV4dCA9IGAgLT4gRVJST1I6ICR7KG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ2lucHV0IGZpZWxkIGlzIHVuZGVmaW5lZCBhbmQgZXJyb3IgaXMgZW1wdHknKS5tZXNzYWdlKX1gO1xuXHRcdFx0Y29udGFpbmVyLmFkZENsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLWVycm9yJyk7XG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCh0aGlzKTtcblxuXHRcdHRoaXMuaW5wdXRGaWVsZC5yZW5kZXIoY29udGFpbmVyKTtcblxuXHRcdGNvbnN0IGNsYXNzQXJndW1lbnQgPSB0aGlzLmdldEFyZ3VtZW50cygnY2xhc3MnKTtcblx0XHRpZiAoY2xhc3NBcmd1bWVudCkge1xuXHRcdFx0dGhpcy5pbnB1dEZpZWxkLmdldEh0bWxFbGVtZW50KCkuYWRkQ2xhc3NlcyhjbGFzc0FyZ3VtZW50Lm1hcCh4ID0+IHgudmFsdWUpKTtcblx0XHR9XG5cblxuXHRcdHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcblx0XHR0aGlzLmNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5cdH1cblxuXHRvbnVubG9hZCgpOiB2b2lkIHtcblx0XHRMb2dnZXIubG9nRGVidWcoJ3VubG9hZCcsIHRoaXMpO1xuXG5cdFx0dGhpcy5wbHVnaW4udW5yZWdpc3RlcklucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkKHRoaXMpO1xuXG5cdFx0c3VwZXIub251bmxvYWQoKTtcblxuXHRcdC8vY29uc29sZS5sb2coJ3VubG9hZCcsIHRoaXMpO1xuXHRcdHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMubGltaXRJbnRlcnZhbCk7XG5cdH1cbn1cbiIsICJleHBvcnQgY2xhc3MgTG9nZ2VyIHtcclxuXHRzdGF0aWMgZGV2TW9kZTogYm9vbGVhbjtcclxuXHRzdGF0aWMgcHJlZml4OiBzdHJpbmcgPSAnbWV0YS1iaW5kIHwnO1xyXG5cclxuXHQvKipcclxuXHQgKiBMb2dzIHRvIHRoZSBjb25zb2xlIHdpdGggdGhlIHBsdWdpbiBwcmVmaXhcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBkYXRhXHJcblx0ICovXHJcblx0c3RhdGljIGxvZyguLi5kYXRhOiBhbnkpOiB2b2lkIHtcclxuXHRcdGNvbnNvbGUubG9nKHRoaXMucHJlZml4LCAuLi5kYXRhKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIExvZ3MgdG8gdGhlIGNvbnNvbGUgd2l0aCB0aGUgcGx1Z2luIHByZWZpeCwgaWYgZGV2IG1vZGUgaXMgdHVybmVkIG9uIGluIHRoZSBwbHVnaW4gc2V0dGluZ3NcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBkYXRhXHJcblx0ICovXHJcblx0c3RhdGljIGxvZ0RlYnVnKC4uLmRhdGE6IGFueSk6IHZvaWQge1xyXG5cdFx0aWYgKHRoaXMuZGV2TW9kZSkge1xyXG5cdFx0XHRMb2dnZXIubG9nKC4uLmRhdGEpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogTG9ncyBhIHdhcm5pbmcgdG8gdGhlIGNvbnNvbGUgd2l0aCB0aGUgcGx1Z2luIHByZWZpeFxyXG5cdCAqXHJcblx0ICogQHBhcmFtIGRhdGFcclxuXHQgKi9cclxuXHRzdGF0aWMgbG9nV2FybmluZyguLi5kYXRhOiBhbnkpOiB2b2lkIHtcclxuXHRcdGNvbnNvbGUud2Fybih0aGlzLnByZWZpeCwgZGF0YSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBMb2dzIGFuIGVycm9yIHRvIHRoZSBjb25zb2xlIHdpdGggdGhlIHBsdWdpbiBwcmVmaXhcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBkYXRhXHJcblx0ICovXHJcblx0c3RhdGljIGxvZ0Vycm9yKC4uLmRhdGE6IGFueSk6IHZvaWQge1xyXG5cdFx0Y29uc29sZS5lcnJvcih0aGlzLnByZWZpeCwgZGF0YSk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQge0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkfSBmcm9tICcuLi9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCc7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RJbnB1dEZpZWxkIHtcclxuXHRzdGF0aWMgYWxsb3dDb2RlQmxvY2s6IGJvb2xlYW4gPSB0cnVlO1xyXG5cdHN0YXRpYyBhbGxvd0lubGluZUNvZGVCbG9jazogYm9vbGVhbiA9IHRydWU7XHJcblx0aW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkO1xyXG5cdG9uVmFsdWVDaGFuZ2U6ICh2YWx1ZTogYW55KSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPjtcclxuXHJcblx0Y29uc3RydWN0b3IoaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBvblZhbHVlQ2hhbmdlOiAodmFsdWU6IGFueSkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4pIHtcclxuXHRcdHRoaXMuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQgPSBpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDtcclxuXHRcdHRoaXMub25WYWx1ZUNoYW5nZSA9IG9uVmFsdWVDaGFuZ2U7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGNvbnRlbnQgb2YgdGhlIGlucHV0IGZpZWxkXHJcblx0ICovXHJcblx0YWJzdHJhY3QgZ2V0VmFsdWUoKTogYW55O1xyXG5cclxuXHQvKipcclxuXHQgKiBTZXRzIHRoZSB2YWx1ZSBvbiB0aGlzIGlucHV0IGZpZWxkLCBvdmVycmlkaW5nIHRoZSBjdXJyZW50IGNvbnRlbnRcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB2YWx1ZVxyXG5cdCAqL1xyXG5cdGFic3RyYWN0IHNldFZhbHVlKHZhbHVlOiBhbnkpOiB2b2lkO1xyXG5cclxuXHQvKipcclxuXHQgKiBDaGVja3MgaWYgdGhlIHZhbHVlIGlzIHRoZSBzYW1lIGFzIHRoZSB2YWx1ZSBvZiB0aGlzIGlucHV0IGZpZWxkXHJcblx0ICpcclxuXHQgKiBAcGFyYW0gdmFsdWVcclxuXHQgKi9cclxuXHRhYnN0cmFjdCBpc0VxdWFsVmFsdWUodmFsdWU6IGFueSk6IGJvb2xlYW47XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgdGhlIGRlZmF1bHQgdmFsdWUgb2YgdGhpcyBpbnB1dCBmaWVsZFxyXG5cdCAqL1xyXG5cdGFic3RyYWN0IGdldERlZmF1bHRWYWx1ZSgpOiBhbnk7XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgdGhlIEhUTUwgZWxlbWVudCB0aGlzIGlucHV0IGZpZWxkIGlzIHdyYXBwZWQgaW5cclxuXHQgKi9cclxuXHRhYnN0cmFjdCBnZXRIdG1sRWxlbWVudCgpOiBIVE1MRWxlbWVudDtcclxuXHJcblx0LyoqXHJcblx0ICogUmVuZGVycyB0aGUgaW5wdXQgZmllbGQgYXMgYSBjaGlsZCBvZiB0aGUgY29udGFpbmVyXHJcblx0ICpcclxuXHQgKiBAcGFyYW0gY29udGFpbmVyXHJcblx0ICovXHJcblx0YWJzdHJhY3QgcmVuZGVyKGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpOiB2b2lkO1xyXG59XHJcbiIsICJpbXBvcnQge0Fic3RyYWN0SW5wdXRGaWVsZH0gZnJvbSAnLi9BYnN0cmFjdElucHV0RmllbGQnO1xyXG5pbXBvcnQge1RvZ2dsZUNvbXBvbmVudH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQge0xvZ2dlcn0gZnJvbSAnLi4vdXRpbHMvTG9nZ2VyJztcclxuaW1wb3J0IHtNZXRhQmluZEludGVybmFsRXJyb3J9IGZyb20gJy4uL3V0aWxzL1V0aWxzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUb2dnbGVJbnB1dEZpZWxkIGV4dGVuZHMgQWJzdHJhY3RJbnB1dEZpZWxkIHtcclxuXHR0b2dnbGVDb21wb25lbnQ6IFRvZ2dsZUNvbXBvbmVudCB8IHVuZGVmaW5lZDtcclxuXHJcblx0Z2V0VmFsdWUoKTogYW55IHtcclxuXHRcdGlmICghdGhpcy50b2dnbGVDb21wb25lbnQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndG9nZ2xlIGlucHV0IGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiB0aGlzLnRvZ2dsZUNvbXBvbmVudC5nZXRWYWx1ZSgpO1xyXG5cdH1cclxuXHJcblx0c2V0VmFsdWUodmFsdWU6IGFueSk6IHZvaWQge1xyXG5cdFx0aWYgKCF0aGlzLnRvZ2dsZUNvbXBvbmVudCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCd0b2dnbGUgaW5wdXQgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PSAnYm9vbGVhbicpIHtcclxuXHRcdFx0dGhpcy50b2dnbGVDb21wb25lbnQuc2V0VmFsdWUodmFsdWUpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0TG9nZ2VyLmxvZ1dhcm5pbmcoYGNhbiBub3Qgc2V0IHZhbHVlIG9mIHRvZ2dsZSB0byBcXCcke3ZhbHVlfVxcJ2ApO1xyXG5cdFx0XHR0aGlzLnRvZ2dsZUNvbXBvbmVudC5zZXRWYWx1ZShmYWxzZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRpc0VxdWFsVmFsdWUodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuZ2V0VmFsdWUoKSA9PSB2YWx1ZTtcclxuXHR9XHJcblxyXG5cdGdldERlZmF1bHRWYWx1ZSgpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdGdldEh0bWxFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcclxuXHRcdGlmICghdGhpcy50b2dnbGVDb21wb25lbnQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndG9nZ2xlIGlucHV0IGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy50b2dnbGVDb21wb25lbnQudG9nZ2xlRWw7XHJcblx0fVxyXG5cclxuXHRyZW5kZXIoY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgY29tcG9uZW50ID0gbmV3IFRvZ2dsZUNvbXBvbmVudChjb250YWluZXIpO1xyXG5cdFx0Y29tcG9uZW50LnNldFZhbHVlKHRoaXMuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0SW5pdGlhbFZhbHVlKCkpO1xyXG5cdFx0Y29tcG9uZW50Lm9uQ2hhbmdlKHRoaXMub25WYWx1ZUNoYW5nZSk7XHJcblx0XHR0aGlzLnRvZ2dsZUNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuXHR9XHJcblxyXG59XHJcbiIsICJleHBvcnQgY2xhc3MgTWV0YUJpbmRJbnRlcm5hbEVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG5cdGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZykge1xyXG5cdFx0c3VwZXIoYFtNQl9JTlRFUk5BTF9FUlJPUiAtIHBsZWFzZSByZXBvcnQgdGhpcyBlcnJvciBoZXJlIGh0dHBzOi8vZ2l0aHViLmNvbS9tUHJvamVjdHNDb2RlL29ic2lkaWFuLW1ldGEtYmluZC1wbHVnaW4vaXNzdWVzXSAke21lc3NhZ2V9YCk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTWV0YUJpbmRQYXJzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcblx0Y29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XHJcblx0XHRzdXBlcihgW01CX1BBUlNJTkdfRVJST1JdICR7bWVzc2FnZX1gKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBNZXRhQmluZEJpbmRUYXJnZXRFcnJvciBleHRlbmRzIEVycm9yIHtcclxuXHRjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcpIHtcclxuXHRcdHN1cGVyKGBbTUJfQklORF9UQVJHRVRfRVJST1JdICR7bWVzc2FnZX1gKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBmaWxlIG5hbWUgZnJvbSBhIHBhdGhcclxuICpcclxuICogQHBhcmFtIHBhdGhcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlTmFtZShwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdHJldHVybiBwYXRoLnNwbGl0KCcvJykuYXQoLTEpID8/IHBhdGg7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgYSBwYXRoIGlzIGEgcGF0aCBvciBhIGZpbGUgbmFtZVxyXG4gKlxyXG4gKiBAcGFyYW0gcGF0aFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzUGF0aChwYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcclxuXHRyZXR1cm4gcGF0aC5zcGxpdCgnLycpLmxlbmd0aCA+IDE7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZW1vdmVzIHRoZSBmaWxlIGVuZGluZyBvZiBhIGZpbGUgbmFtZVxyXG4gKlxyXG4gKiBAcGFyYW0gZmlsZU5hbWVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVGaWxlRW5kaW5nKGZpbGVOYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdGNvbnN0IGZpbGVOYW1lUGFydHMgPSBmaWxlTmFtZS5zcGxpdCgnLicpO1xyXG5cdGlmIChmaWxlTmFtZVBhcnRzLmxlbmd0aCA9PT0gMSkge1xyXG5cdFx0cmV0dXJuIGZpbGVOYW1lO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRsZXQgbmV3RmlsZU5hbWUgPSBmaWxlTmFtZVBhcnRzWzBdO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDE7IGkgPCBmaWxlTmFtZVBhcnRzLmxlbmd0aCAtIDE7IGkrKykge1xyXG5cdFx0XHRuZXdGaWxlTmFtZSArPSAnLicgKyBmaWxlTmFtZVBhcnRzW2ldO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG5ld0ZpbGVOYW1lO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENsYW1wLCB1bnVzZWRcclxuICpcclxuICogQHBhcmFtIG51bVxyXG4gKiBAcGFyYW0gbWluXHJcbiAqIEBwYXJhbSBtYXhcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjbGFtcChudW06IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyIHtcclxuXHRyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgobnVtLCBtaW4pLCBtYXgpO1xyXG59XHJcblxyXG4vKipcclxuICoganMgY2FuJ3QgZXZlbiBpbXBsZW1lbnQgbW9kdWxvIGNvcnJlY3RseS4uLlxyXG4gKlxyXG4gKiBAcGFyYW0gblxyXG4gKiBAcGFyYW0gbVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG1vZChuOiBudW1iZXIsIG06IG51bWJlcik6IG51bWJlciB7XHJcblx0cmV0dXJuICgobiAlIG0pICsgbSkgJSBtO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2tzIGlmIDIgYXJyYXlzIGFyZSBlcXVhbCwgdGhlIGFycmF5cyBzaG91bGQgaGF2ZSB0aGUgc2FtZSBkYXRhdHlwZVxyXG4gKlxyXG4gKiBAcGFyYW0gYXJyMVxyXG4gKiBAcGFyYW0gYXJyMlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGFycmF5RXF1YWxzKGFycjE6IGFueVtdLCBhcnIyOiBhbnlbXSk6IGJvb2xlYW4ge1xyXG5cdGlmIChhcnIxLmxlbmd0aCAhPT0gYXJyMi5sZW5ndGgpIHtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdGZvciAoY29uc3QgYXJyMUVsZW1lbnQgb2YgYXJyMSkge1xyXG5cdFx0aWYgKCFhcnIyLmNvbnRhaW5zKGFycjFFbGVtZW50KSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRlbXBsYXRlIFwiZW5naW5lXCIgZnJvbSBteSBtZWRpYSBkYiBwbHVnaW5cclxuICpcclxuICogQHBhcmFtIHRlbXBsYXRlXHJcbiAqIEBwYXJhbSBkYXRhTW9kZWxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlVGFncyh0ZW1wbGF0ZTogc3RyaW5nLCBkYXRhTW9kZWw6IGFueSk6IHN0cmluZyB7XHJcblx0Y29uc3QgcmVzb2x2ZWRUZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UobmV3IFJlZ0V4cCgne3suKj99fScsICdnJyksIChtYXRjaDogc3RyaW5nKSA9PiByZXBsYWNlVGFnKG1hdGNoLCBkYXRhTW9kZWwpKTtcclxuXHJcblx0cmV0dXJuIHJlc29sdmVkVGVtcGxhdGU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUYWtlcyBpbiBhIHRlbXBsYXRlIG1hdGNoIGFuZCByZXR1cm5zIHRoZSByZXBsYWNlbWVudCBkYXRhXHJcbiAqXHJcbiAqIEBwYXJhbSBtYXRjaFxyXG4gKiBAcGFyYW0gZGF0YU1vZGVsXHJcbiAqL1xyXG5mdW5jdGlvbiByZXBsYWNlVGFnKG1hdGNoOiBzdHJpbmcsIGRhdGFNb2RlbDogYW55KTogc3RyaW5nIHtcclxuXHRsZXQgdGFnID0gbWF0Y2g7XHJcblx0dGFnID0gdGFnLnN1YnN0cmluZygyKTtcclxuXHR0YWcgPSB0YWcuc3Vic3RyaW5nKDAsIHRhZy5sZW5ndGggLSAyKTtcclxuXHR0YWcgPSB0YWcudHJpbSgpO1xyXG5cclxuXHRjb25zdCBwYXJ0cyA9IHRhZy5zcGxpdCgnOicpO1xyXG5cdGlmIChwYXJ0cy5sZW5ndGggPT09IDEpIHtcclxuXHRcdGNvbnN0IHBhdGggPSBwYXJ0c1swXS5zcGxpdCgnLicpO1xyXG5cclxuXHRcdGNvbnN0IG9iaiA9IHRyYXZlcnNlT2JqZWN0KHBhdGgsIGRhdGFNb2RlbCk7XHJcblxyXG5cdFx0aWYgKG9iaiA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdHJldHVybiAne3sgSU5WQUxJRCBURU1QTEFURSBUQUcgLSBvYmplY3QgdW5kZWZpbmVkIH19JztcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gb2JqO1xyXG5cdH0gZWxzZSBpZiAocGFydHMubGVuZ3RoID09PSAyKSB7XHJcblx0XHRjb25zdCBvcGVyYXRvciA9IHBhcnRzWzBdO1xyXG5cclxuXHRcdGNvbnN0IHBhdGggPSBwYXJ0c1sxXS5zcGxpdCgnLicpO1xyXG5cclxuXHRcdGNvbnN0IG9iaiA9IHRyYXZlcnNlT2JqZWN0KHBhdGgsIGRhdGFNb2RlbCk7XHJcblxyXG5cdFx0aWYgKG9iaiA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdHJldHVybiAne3sgSU5WQUxJRCBURU1QTEFURSBUQUcgLSBvYmplY3QgdW5kZWZpbmVkIH19JztcclxuXHRcdH1cclxuXHJcblx0XHRpZiAob3BlcmF0b3IgPT09ICdMSVNUJykge1xyXG5cdFx0XHRpZiAoIUFycmF5LmlzQXJyYXkob2JqKSkge1xyXG5cdFx0XHRcdHJldHVybiAne3sgSU5WQUxJRCBURU1QTEFURSBUQUcgLSBvcGVyYXRvciBMSVNUIGlzIG9ubHkgYXBwbGljYWJsZSBvbiBhbiBhcnJheSB9fSc7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIG9iai5tYXAoKGU6IGFueSkgPT4gYC0gJHtlfWApLmpvaW4oJ1xcbicpO1xyXG5cdFx0fSBlbHNlIGlmIChvcGVyYXRvciA9PT0gJ0VOVU0nKSB7XHJcblx0XHRcdGlmICghQXJyYXkuaXNBcnJheShvYmopKSB7XHJcblx0XHRcdFx0cmV0dXJuICd7eyBJTlZBTElEIFRFTVBMQVRFIFRBRyAtIG9wZXJhdG9yIEVOVU0gaXMgb25seSBhcHBsaWNhYmxlIG9uIGFuIGFycmF5IH19JztcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gb2JqLmpvaW4oJywgJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGB7eyBJTlZBTElEIFRFTVBMQVRFIFRBRyAtIHVua25vd24gb3BlcmF0b3IgJHtvcGVyYXRvcn0gfX1gO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuICd7eyBJTlZBTElEIFRFTVBMQVRFIFRBRyB9fSc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUcmF2ZXJzZXMgdGhlIG9iamVjdCBhbG9uZyBhIHByb3BlcnR5IHBhdGhcclxuICpcclxuICogQHBhcmFtIHBhdGhcclxuICogQHBhcmFtIG9ialxyXG4gKi9cclxuZnVuY3Rpb24gdHJhdmVyc2VPYmplY3QocGF0aDogQXJyYXk8c3RyaW5nPiwgb2JqOiBhbnkpOiBhbnkge1xyXG5cdGZvciAoY29uc3QgcGFydCBvZiBwYXRoKSB7XHJcblx0XHRpZiAob2JqICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0b2JqID0gb2JqW3BhcnRdO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmV0dXJuIG9iajtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzVHJ1dGh5KHZhbHVlOiBhbnkpOiBib29sZWFuIHtcclxuXHRyZXR1cm4gISF2YWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzRmFsc3kodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xyXG5cdHJldHVybiAhdmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlcXVhbE9ySW5jbHVkZXMoc3RyMTogc3RyaW5nLCBzdHIyOiBzdHJpbmcpOiBib29sZWFuIHtcclxuXHRyZXR1cm4gc3RyMSA9PT0gc3RyMiB8fCBzdHIxLmluY2x1ZGVzKHN0cjIpIHx8IHN0cjIuaW5jbHVkZXMoc3RyMSk7XHJcbn1cclxuIiwgImltcG9ydCB7QWJzdHJhY3RJbnB1dEZpZWxkfSBmcm9tICcuL0Fic3RyYWN0SW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7VGV4dENvbXBvbmVudH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQge0xvZ2dlcn0gZnJvbSAnLi4vdXRpbHMvTG9nZ2VyJztcclxuaW1wb3J0IHtNZXRhQmluZEludGVybmFsRXJyb3J9IGZyb20gJy4uL3V0aWxzL1V0aWxzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUZXh0SW5wdXRGaWVsZCBleHRlbmRzIEFic3RyYWN0SW5wdXRGaWVsZCB7XHJcblx0dGV4dENvbXBvbmVudDogVGV4dENvbXBvbmVudCB8IHVuZGVmaW5lZDtcclxuXHJcblx0Z2V0VmFsdWUoKTogYW55IHtcclxuXHRcdGlmICghdGhpcy50ZXh0Q29tcG9uZW50KSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3RleHQgaW5wdXQgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLnRleHRDb21wb25lbnQuZ2V0VmFsdWUoKTtcclxuXHR9XHJcblxyXG5cdHNldFZhbHVlKHZhbHVlOiBhbnkpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy50ZXh0Q29tcG9uZW50KSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3RleHQgaW5wdXQgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xyXG5cdFx0XHR0aGlzLnRleHRDb21wb25lbnQuc2V0VmFsdWUodmFsdWUpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0TG9nZ2VyLmxvZ1dhcm5pbmcoYGNhbiBub3Qgc2V0IHZhbHVlIG9mIHRleHQgaW5wdXQgdG8gXFwnJHt2YWx1ZX1cXCdgKTtcclxuXHRcdFx0dGhpcy50ZXh0Q29tcG9uZW50LnNldFZhbHVlKCcnKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlzRXF1YWxWYWx1ZSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdGhpcy5nZXRWYWx1ZSgpID09IHZhbHVlO1xyXG5cdH1cclxuXHJcblx0Z2V0RGVmYXVsdFZhbHVlKCk6IGFueSB7XHJcblx0XHRyZXR1cm4gJyc7XHJcblx0fVxyXG5cclxuXHRnZXRIdG1sRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcblx0XHRpZiAoIXRoaXMudGV4dENvbXBvbmVudCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCd0ZXh0IGlucHV0IGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy50ZXh0Q29tcG9uZW50LmlucHV0RWw7XHJcblx0fVxyXG5cclxuXHRyZW5kZXIoY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgY29tcG9uZW50ID0gbmV3IFRleHRDb21wb25lbnQoY29udGFpbmVyKTtcclxuXHRcdGNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEluaXRpYWxWYWx1ZSgpKTtcclxuXHRcdGNvbXBvbmVudC5vbkNoYW5nZSh0aGlzLm9uVmFsdWVDaGFuZ2UpO1xyXG5cdFx0dGhpcy50ZXh0Q29tcG9uZW50ID0gY29tcG9uZW50O1xyXG5cdH1cclxuXHJcbn1cclxuIiwgImltcG9ydCB7QWJzdHJhY3RJbnB1dEZpZWxkfSBmcm9tICcuL0Fic3RyYWN0SW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7U2xpZGVyQ29tcG9uZW50fSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7TG9nZ2VyfSBmcm9tICcuLi91dGlscy9Mb2dnZXInO1xyXG5pbXBvcnQge0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkfSBmcm9tICcuLi9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCc7XHJcbmltcG9ydCB7TWV0YUJpbmRJbnRlcm5hbEVycm9yfSBmcm9tICcuLi91dGlscy9VdGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU2xpZGVySW5wdXRGaWVsZCBleHRlbmRzIEFic3RyYWN0SW5wdXRGaWVsZCB7XHJcblx0c2xpZGVyQ29tcG9uZW50OiBTbGlkZXJDb21wb25lbnQgfCB1bmRlZmluZWQ7XHJcblx0bWluVmFsdWU6IG51bWJlcjtcclxuXHRtYXhWYWx1ZTogbnVtYmVyO1xyXG5cclxuXHJcblx0Y29uc3RydWN0b3IoaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBvblZhbHVlQ2hhbmdlOiAodmFsdWU6IGFueSkgPT4gKHZvaWQgfCBQcm9taXNlPHZvaWQ+KSkge1xyXG5cdFx0c3VwZXIoaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIG9uVmFsdWVDaGFuZ2UpO1xyXG5cdFx0dGhpcy5taW5WYWx1ZSA9IGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEFyZ3VtZW50KCdtaW5WYWx1ZScpPy52YWx1ZSA/PyAwO1xyXG5cdFx0dGhpcy5tYXhWYWx1ZSA9IGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEFyZ3VtZW50KCdtYXhWYWx1ZScpPy52YWx1ZSA/PyAxMDA7XHJcblx0fVxyXG5cclxuXHRnZXRWYWx1ZSgpOiBhbnkge1xyXG5cdFx0aWYgKCF0aGlzLnNsaWRlckNvbXBvbmVudCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdzbGlkZXIgaW5wdXQgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLnNsaWRlckNvbXBvbmVudC5nZXRWYWx1ZSgpO1xyXG5cdH1cclxuXHJcblx0c2V0VmFsdWUodmFsdWU6IGFueSk6IHZvaWQge1xyXG5cdFx0aWYgKCF0aGlzLnNsaWRlckNvbXBvbmVudCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdzbGlkZXIgaW5wdXQgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xyXG5cdFx0XHRpZiAodmFsdWUgPj0gdGhpcy5taW5WYWx1ZSAmJiB2YWx1ZSA8PSB0aGlzLm1heFZhbHVlKSB7XHJcblx0XHRcdFx0dGhpcy5zbGlkZXJDb21wb25lbnQuc2V0VmFsdWUodmFsdWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRMb2dnZXIubG9nV2FybmluZyhgY2FuIG5vdCBzZXQgdmFsdWUgb2Ygc2xpZGVyIHRvIFxcJyR7dmFsdWV9XFwnYCk7XHJcblx0XHRcdHRoaXMuc2xpZGVyQ29tcG9uZW50LnNldFZhbHVlKHRoaXMuZ2V0RGVmYXVsdFZhbHVlKCkpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aXNFcXVhbFZhbHVlKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmdldFZhbHVlKCkgPT0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHRnZXREZWZhdWx0VmFsdWUoKTogYW55IHtcclxuXHRcdHJldHVybiB0aGlzLm1pblZhbHVlO1xyXG5cdH1cclxuXHJcblx0Z2V0SHRtbEVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xyXG5cdFx0aWYgKCF0aGlzLnNsaWRlckNvbXBvbmVudCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdzbGlkZXIgaW5wdXQgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLnNsaWRlckNvbXBvbmVudC5zbGlkZXJFbDtcclxuXHR9XHJcblxyXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb250YWluZXIucmVtb3ZlQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4taW5wdXQtd3JhcHBlcicpO1xyXG5cdFx0Y29udGFpbmVyLmFkZENsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLWZsZXgtaW5wdXQtd3JhcHBlcicpO1xyXG5cclxuXHRcdGNvbnN0IGxhYmVsQXJndW1lbnQgPSB0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEFyZ3VtZW50KCdsYWJlbHMnKTtcclxuXHRcdGlmIChsYWJlbEFyZ3VtZW50ICYmIGxhYmVsQXJndW1lbnQudmFsdWUgPT09IHRydWUpIHtcclxuXHRcdFx0Y29udGFpbmVyLmNyZWF0ZVNwYW4oe3RleHQ6IHRoaXMubWluVmFsdWUudG9TdHJpbmcoKSwgY2xzOiAnbWV0YS1iaW5kLXBsdWdpbi1zbGlkZXItaW5wdXQtbGFiZWwnfSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgY29tcG9uZW50ID0gbmV3IFNsaWRlckNvbXBvbmVudChjb250YWluZXIpO1xyXG5cdFx0Y29tcG9uZW50LnNldFZhbHVlKHRoaXMuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0SW5pdGlhbFZhbHVlKCkpO1xyXG5cdFx0Y29tcG9uZW50Lm9uQ2hhbmdlKHRoaXMub25WYWx1ZUNoYW5nZSk7XHJcblx0XHRjb21wb25lbnQuc2V0RHluYW1pY1Rvb2x0aXAoKTtcclxuXHRcdGNvbXBvbmVudC5zZXRMaW1pdHModGhpcy5taW5WYWx1ZSwgdGhpcy5tYXhWYWx1ZSwgMSk7XHJcblx0XHRjb21wb25lbnQuc2xpZGVyRWwuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4tc2xpZGVyLWlucHV0Jyk7XHJcblxyXG5cdFx0aWYgKGxhYmVsQXJndW1lbnQgJiYgbGFiZWxBcmd1bWVudC52YWx1ZSA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRjb250YWluZXIuY3JlYXRlU3Bhbih7dGV4dDogdGhpcy5tYXhWYWx1ZS50b1N0cmluZygpLCBjbHM6ICdtZXRhLWJpbmQtcGx1Z2luLXNsaWRlci1pbnB1dC1sYWJlbCd9KTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnNsaWRlckNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuXHR9XHJcblxyXG59XHJcbiIsICJpbXBvcnQge0Fic3RyYWN0SW5wdXRGaWVsZH0gZnJvbSAnLi9BYnN0cmFjdElucHV0RmllbGQnO1xyXG5pbXBvcnQge1RleHRBcmVhQ29tcG9uZW50fSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7TG9nZ2VyfSBmcm9tICcuLi91dGlscy9Mb2dnZXInO1xyXG5pbXBvcnQge01ldGFCaW5kSW50ZXJuYWxFcnJvcn0gZnJvbSAnLi4vdXRpbHMvVXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRleHRBcmVhSW5wdXRGaWVsZCBleHRlbmRzIEFic3RyYWN0SW5wdXRGaWVsZCB7XHJcblx0dGV4dEFyZWFDb21wb25lbnQ6IFRleHRBcmVhQ29tcG9uZW50IHwgdW5kZWZpbmVkO1xyXG5cclxuXHRnZXRWYWx1ZSgpOiBhbnkge1xyXG5cdFx0aWYgKCF0aGlzLnRleHRBcmVhQ29tcG9uZW50KSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3RleHQgYXJlYSBpbnB1dCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMudGV4dEFyZWFDb21wb25lbnQuZ2V0VmFsdWUoKTtcclxuXHR9XHJcblxyXG5cdHNldFZhbHVlKHZhbHVlOiBhbnkpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy50ZXh0QXJlYUNvbXBvbmVudCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCd0ZXh0IGFyZWEgaW5wdXQgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xyXG5cdFx0XHR0aGlzLnRleHRBcmVhQ29tcG9uZW50LnNldFZhbHVlKHZhbHVlKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdExvZ2dlci5sb2dXYXJuaW5nKGBjYW4gbm90IHNldCB2YWx1ZSBvZiB0ZXh0IGFyZWEgaW5wdXQgdG8gXFwnJHt2YWx1ZX1cXCdgKTtcclxuXHRcdFx0dGhpcy50ZXh0QXJlYUNvbXBvbmVudC5zZXRWYWx1ZSgnJyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRpc0VxdWFsVmFsdWUodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuZ2V0VmFsdWUoKSA9PSB2YWx1ZTtcclxuXHR9XHJcblxyXG5cdGdldERlZmF1bHRWYWx1ZSgpOiBhbnkge1xyXG5cdFx0cmV0dXJuICcnO1xyXG5cdH1cclxuXHJcblx0Z2V0SHRtbEVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xyXG5cdFx0aWYgKCF0aGlzLnRleHRBcmVhQ29tcG9uZW50KSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3RleHQgYXJlYSBpbnB1dCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMudGV4dEFyZWFDb21wb25lbnQuaW5wdXRFbDtcclxuXHR9XHJcblxyXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBjb21wb25lbnQgPSBuZXcgVGV4dEFyZWFDb21wb25lbnQoY29udGFpbmVyKTtcclxuXHRcdGNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEluaXRpYWxWYWx1ZSgpKTtcclxuXHRcdGNvbXBvbmVudC5vbkNoYW5nZSh0aGlzLm9uVmFsdWVDaGFuZ2UpO1xyXG5cdFx0dGhpcy50ZXh0QXJlYUNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuXHR9XHJcblxyXG59XHJcbiIsICJpbXBvcnQge1NlbGVjdElucHV0RmllbGR9IGZyb20gJy4vU2VsZWN0SW5wdXRGaWVsZCc7XHJcblxyXG5leHBvcnQgY2xhc3MgU2VsZWN0SW5wdXRGaWVsZEVsZW1lbnQge1xyXG5cdHZhbHVlOiBzdHJpbmc7XHJcblx0c2VsZWN0SW5wdXRGaWVsZDogU2VsZWN0SW5wdXRGaWVsZDtcclxuXHRyZWFkb25seSBpZDogbnVtYmVyO1xyXG5cdGVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xyXG5cclxuXHRjc3NDbGFzczogc3RyaW5nO1xyXG5cdGFjdGl2ZUNsYXNzOiBzdHJpbmc7XHJcblx0aG92ZXJDbGFzczogc3RyaW5nO1xyXG5cclxuXHRwcml2YXRlIGFjdGl2ZTogYm9vbGVhbjtcclxuXHRwcml2YXRlIGhpZ2hsaWdodGVkOiBib29sZWFuO1xyXG5cclxuXHRjb25zdHJ1Y3Rvcih2YWx1ZTogc3RyaW5nLCBwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudCwgaWQ6IG51bWJlciwgbXVsdGlTZWxlY3RJbnB1dEZpZWxkOiBTZWxlY3RJbnB1dEZpZWxkLCBhY3RpdmU6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG5cdFx0dGhpcy52YWx1ZSA9IHZhbHVlO1xyXG5cdFx0dGhpcy5pZCA9IGlkO1xyXG5cdFx0dGhpcy5hY3RpdmUgPSBhY3RpdmU7XHJcblx0XHR0aGlzLmhpZ2hsaWdodGVkID0gZmFsc2U7XHJcblx0XHR0aGlzLnNlbGVjdElucHV0RmllbGQgPSBtdWx0aVNlbGVjdElucHV0RmllbGQ7XHJcblxyXG5cdFx0dGhpcy5jc3NDbGFzcyA9ICdtZXRhLWJpbmQtcGx1Z2luLXNlbGVjdC1pbnB1dC1lbGVtZW50JztcclxuXHRcdHRoaXMuYWN0aXZlQ2xhc3MgPSAnbWV0YS1iaW5kLXBsdWdpbi1zZWxlY3QtaW5wdXQtZWxlbWVudC1zZWxlY3RlZCc7XHJcblx0XHR0aGlzLmhvdmVyQ2xhc3MgPSAnbWV0YS1iaW5kLXBsdWdpbi1zZWxlY3QtaW5wdXQtZWxlbWVudC1ob3Zlcic7XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50ID0gcGFyZW50RWxlbWVudC5jcmVhdGVEaXYoe2NsczogdGhpcy5jc3NDbGFzc30pO1xyXG5cdFx0dGhpcy5lbGVtZW50LmlkID0gdGhpcy5nZXRIVE1MSWQoKTtcclxuXHRcdHRoaXMuZWxlbWVudC5vbignY2xpY2snLCAnIycgKyB0aGlzLmdldEhUTUxJZCgpLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuc2V0QWN0aXZlKCF0aGlzLmFjdGl2ZSk7XHJcblx0XHRcdGlmICghdGhpcy5zZWxlY3RJbnB1dEZpZWxkLmFsbG93TXVsdGlTZWxlY3QpIHtcclxuXHRcdFx0XHR0aGlzLnNlbGVjdElucHV0RmllbGQuZGlzYWJsZUFsbE90aGVyRWxlbWVudHModGhpcy5pZCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5lbGVtZW50Lm9uKCdtb3VzZWVudGVyJywgJyMnICsgdGhpcy5nZXRIVE1MSWQoKSwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnNldEhpZ2hsaWdodGVkKHRydWUpO1xyXG5cdFx0fSk7XHJcblx0XHR0aGlzLmVsZW1lbnQub24oJ21vdXNlbGVhdmUnLCAnIycgKyB0aGlzLmdldEhUTUxJZCgpLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuc2V0SGlnaGxpZ2h0ZWQoZmFsc2UpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRnZXRIVE1MSWQoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBgbWV0YS1iaW5kLXNlbGVjdC1pbnB1dC1lbGVtZW50LSR7dGhpcy5zZWxlY3RJbnB1dEZpZWxkLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLnVpZH0tJHt0aGlzLmlkfWA7XHJcblx0fVxyXG5cclxuXHRpc0hpZ2hsaWdodGVkKCk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuaGlnaGxpZ2h0ZWQ7XHJcblx0fVxyXG5cclxuXHRzZXRIaWdobGlnaHRlZCh2YWx1ZTogYm9vbGVhbik6IHZvaWQge1xyXG5cdFx0dGhpcy5oaWdobGlnaHRlZCA9IHZhbHVlO1xyXG5cdFx0aWYgKHRoaXMuaGlnaGxpZ2h0ZWQpIHtcclxuXHRcdFx0dGhpcy5hZGRDbGFzcyh0aGlzLmhvdmVyQ2xhc3MpO1xyXG5cdFx0XHR0aGlzLnNlbGVjdElucHV0RmllbGQuZGVIaWdobGlnaHRBbGxPdGhlckVsZW1lbnRzKHRoaXMuaWQpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5yZW1vdmVDbGFzcyh0aGlzLmhvdmVyQ2xhc3MpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aXNBY3RpdmUoKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdGhpcy5hY3RpdmU7XHJcblx0fVxyXG5cclxuXHRzZXRBY3RpdmUoYWN0aXZlOiBib29sZWFuLCB1cGRhdGVQYXJlbnQ6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XHJcblx0XHR0aGlzLmFjdGl2ZSA9IGFjdGl2ZTtcclxuXHRcdHRoaXMudXBkYXRlKHVwZGF0ZVBhcmVudCk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGUodXBkYXRlUGFyZW50OiBib29sZWFuKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5hY3RpdmUpIHtcclxuXHRcdFx0dGhpcy5hZGRDbGFzcyh0aGlzLmFjdGl2ZUNsYXNzKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMucmVtb3ZlQ2xhc3ModGhpcy5hY3RpdmVDbGFzcyk7XHJcblx0XHR9XHJcblx0XHRpZiAodXBkYXRlUGFyZW50KSB7XHJcblx0XHRcdHRoaXMuc2VsZWN0SW5wdXRGaWVsZC5vbkNoYW5nZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YWRkQ2xhc3MoY3NzQ2xhc3M6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0aWYgKCF0aGlzLmVsZW1lbnQuaGFzQ2xhc3MoY3NzQ2xhc3MpKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyhjc3NDbGFzcyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZW1vdmVDbGFzcyhjc3NDbGFzczogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5lbGVtZW50Lmhhc0NsYXNzKGNzc0NsYXNzKSkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoY3NzQ2xhc3MpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmVuZGVyKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5lbGVtZW50LmNyZWF0ZUVsKCdkaXYnLCB7dGV4dDogdGhpcy52YWx1ZX0pO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHtBYnN0cmFjdElucHV0RmllbGR9IGZyb20gJy4vQWJzdHJhY3RJbnB1dEZpZWxkJztcclxuaW1wb3J0IHtTZWxlY3RJbnB1dEZpZWxkRWxlbWVudH0gZnJvbSAnLi9TZWxlY3RJbnB1dEZpZWxkRWxlbWVudCc7XHJcbmltcG9ydCB7TWV0YUJpbmRJbnRlcm5hbEVycm9yLCBtb2R9IGZyb20gJy4uL3V0aWxzL1V0aWxzJztcclxuaW1wb3J0IHtJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZH0gZnJvbSAnLi4vSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNlbGVjdElucHV0RmllbGQgZXh0ZW5kcyBBYnN0cmFjdElucHV0RmllbGQge1xyXG5cdHN0YXRpYyBhbGxvd0lubGluZUNvZGVCbG9jazogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdGVsZW1lbnRzOiBTZWxlY3RJbnB1dEZpZWxkRWxlbWVudFtdO1xyXG5cdGFsbG93TXVsdGlTZWxlY3Q6IGJvb2xlYW47XHJcblx0Y29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCB8IHVuZGVmaW5lZDtcclxuXHJcblx0Y29uc3RydWN0b3IoaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBvblZhbHVlQ2hhbmdlOiAodmFsdWU6IGFueSkgPT4gKHZvaWQgfCBQcm9taXNlPHZvaWQ+KSkge1xyXG5cdFx0c3VwZXIoaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIG9uVmFsdWVDaGFuZ2UpO1xyXG5cdFx0dGhpcy5lbGVtZW50cyA9IFtdO1xyXG5cdFx0dGhpcy5hbGxvd011bHRpU2VsZWN0ID0gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRnZXRIdG1sRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcblx0XHRpZiAoIXRoaXMuY29udGFpbmVyKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3NlbGVjdCBpbnB1dCBjb250YWluZXIgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuY29udGFpbmVyO1xyXG5cdH1cclxuXHJcblx0Z2V0VmFsdWUoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiB0aGlzLmVsZW1lbnRzLmZpbHRlcih4ID0+IHguaXNBY3RpdmUoKSkuZmlyc3QoKT8udmFsdWUgPz8gJyc7XHJcblx0fVxyXG5cclxuXHRzZXRWYWx1ZSh2YWx1ZTogYW55KTogdm9pZCB7XHJcblx0XHRmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy5lbGVtZW50cykge1xyXG5cdFx0XHRpZiAodmFsdWUgPT09IGVsZW1lbnQudmFsdWUpIHtcclxuXHRcdFx0XHRlbGVtZW50LnNldEFjdGl2ZSh0cnVlLCBmYWxzZSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZWxlbWVudC5zZXRBY3RpdmUoZmFsc2UsIGZhbHNlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aXNFcXVhbFZhbHVlKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmdldFZhbHVlKCkgPT0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHRnZXREZWZhdWx0VmFsdWUoKTogYW55IHtcclxuXHRcdHJldHVybiAnJztcclxuXHR9XHJcblxyXG5cdG9uQ2hhbmdlKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5vblZhbHVlQ2hhbmdlKHRoaXMuZ2V0VmFsdWUoKSk7XHJcblx0fVxyXG5cclxuXHRyZW5kZXIoY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCk6IHZvaWQge1xyXG5cdFx0Y29udGFpbmVyLmFkZENsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLXNlbGVjdC1pbnB1dC1iZycpO1xyXG5cdFx0dGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcblxyXG5cdFx0Y29uc3QgZWxlbWVudFdyYXBwZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHtjbHM6ICdtZXRhLWJpbmQtcGx1Z2luLXNlbGVjdC1pbnB1dC13cmFwcGVyJ30pO1xyXG5cclxuXHRcdGNvbnN0IHRpdGxlQXJndW1lbnQgPSB0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEFyZ3VtZW50KCd0aXRsZScpO1xyXG5cdFx0aWYgKHRpdGxlQXJndW1lbnQpIHtcclxuXHRcdFx0ZWxlbWVudFdyYXBwZXIuY3JlYXRlRWwoJ2RpdicsIHt0ZXh0OiB0aXRsZUFyZ3VtZW50LnZhbHVlLCBjbHM6ICdtZXRhLWJpbmQtcGx1Z2luLXNlbGVjdC1pbnB1dC1oZWFkZXInfSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgZWxlbWVudEFyZ3VtZW50czogeyBuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfVtdID0gdGhpcy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZC5nZXRBcmd1bWVudHMoJ29wdGlvbicpO1xyXG5cclxuXHRcdGxldCBpID0gMDtcclxuXHRcdGZvciAoY29uc3QgZWxlbWVudEFyZ3VtZW50IG9mIGVsZW1lbnRBcmd1bWVudHMpIHtcclxuXHRcdFx0Y29uc3Qgc2VsZWN0SW5wdXRGaWVsZEVsZW1lbnQgPSBuZXcgU2VsZWN0SW5wdXRGaWVsZEVsZW1lbnQoZWxlbWVudEFyZ3VtZW50LnZhbHVlLCBlbGVtZW50V3JhcHBlciwgaSwgdGhpcywgZmFsc2UpO1xyXG5cclxuXHRcdFx0dGhpcy5lbGVtZW50cy5wdXNoKHNlbGVjdElucHV0RmllbGRFbGVtZW50KTtcclxuXHJcblx0XHRcdHNlbGVjdElucHV0RmllbGRFbGVtZW50LnJlbmRlcigpO1xyXG5cclxuXHRcdFx0aSArPSAxO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuc2V0VmFsdWUodGhpcy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZC5nZXRJbml0aWFsVmFsdWUoKSk7XHJcblx0fVxyXG5cclxuXHRkaXNhYmxlQWxsT3RoZXJFbGVtZW50cyhlbGVtZW50SWQ6IG51bWJlcik6IHZvaWQge1xyXG5cdFx0Zm9yIChjb25zdCBzZWxlY3RNb2RhbEVsZW1lbnQgb2YgdGhpcy5lbGVtZW50cykge1xyXG5cdFx0XHRpZiAoc2VsZWN0TW9kYWxFbGVtZW50LmlkICE9PSBlbGVtZW50SWQpIHtcclxuXHRcdFx0XHRzZWxlY3RNb2RhbEVsZW1lbnQuc2V0QWN0aXZlKGZhbHNlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZGVIaWdobGlnaHRBbGxPdGhlckVsZW1lbnRzKGVsZW1lbnRJZDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRmb3IgKGNvbnN0IHNlbGVjdE1vZGFsRWxlbWVudCBvZiB0aGlzLmVsZW1lbnRzKSB7XHJcblx0XHRcdGlmIChzZWxlY3RNb2RhbEVsZW1lbnQuaWQgIT09IGVsZW1lbnRJZCkge1xyXG5cdFx0XHRcdHNlbGVjdE1vZGFsRWxlbWVudC5zZXRIaWdobGlnaHRlZChmYWxzZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFjdGl2YXRlSGlnaGxpZ2h0ZWQoKTogdm9pZCB7XHJcblx0XHRmb3IgKGNvbnN0IHNlbGVjdE1vZGFsRWxlbWVudCBvZiB0aGlzLmVsZW1lbnRzKSB7XHJcblx0XHRcdGlmIChzZWxlY3RNb2RhbEVsZW1lbnQuaXNIaWdobGlnaHRlZCgpKSB7XHJcblx0XHRcdFx0c2VsZWN0TW9kYWxFbGVtZW50LnNldEFjdGl2ZSghc2VsZWN0TW9kYWxFbGVtZW50LmlzQWN0aXZlKCkpO1xyXG5cdFx0XHRcdGlmICghdGhpcy5hbGxvd011bHRpU2VsZWN0KSB7XHJcblx0XHRcdFx0XHR0aGlzLmRpc2FibGVBbGxPdGhlckVsZW1lbnRzKHNlbGVjdE1vZGFsRWxlbWVudC5pZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRoaWdobGlnaHRVcCgpOiB2b2lkIHtcclxuXHRcdGZvciAoY29uc3Qgc2VsZWN0TW9kYWxFbGVtZW50IG9mIHRoaXMuZWxlbWVudHMpIHtcclxuXHRcdFx0aWYgKHNlbGVjdE1vZGFsRWxlbWVudC5pc0hpZ2hsaWdodGVkKCkpIHtcclxuXHRcdFx0XHR0aGlzLmdldFByZXZpb3VzU2VsZWN0TW9kYWxFbGVtZW50KHNlbGVjdE1vZGFsRWxlbWVudCk/LnNldEhpZ2hsaWdodGVkKHRydWUpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIG5vdGhpbmcgaXMgaGlnaGxpZ2h0ZWRcclxuXHRcdHRoaXMuZWxlbWVudHMuYXQoLTEpPy5zZXRIaWdobGlnaHRlZCh0cnVlKTtcclxuXHR9XHJcblxyXG5cdGhpZ2hsaWdodERvd24oKTogdm9pZCB7XHJcblx0XHRmb3IgKGNvbnN0IHNlbGVjdE1vZGFsRWxlbWVudCBvZiB0aGlzLmVsZW1lbnRzKSB7XHJcblx0XHRcdGlmIChzZWxlY3RNb2RhbEVsZW1lbnQuaXNIaWdobGlnaHRlZCgpKSB7XHJcblx0XHRcdFx0dGhpcy5nZXROZXh0U2VsZWN0TW9kYWxFbGVtZW50KHNlbGVjdE1vZGFsRWxlbWVudCk/LnNldEhpZ2hsaWdodGVkKHRydWUpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIG5vdGhpbmcgaXMgaGlnaGxpZ2h0ZWRcclxuXHRcdHRoaXMuZWxlbWVudHMuYXQoMCk/LnNldEhpZ2hsaWdodGVkKHRydWUpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZXROZXh0U2VsZWN0TW9kYWxFbGVtZW50KGVsZW1lbnQ6IFNlbGVjdElucHV0RmllbGRFbGVtZW50KTogU2VsZWN0SW5wdXRGaWVsZEVsZW1lbnQgfCB1bmRlZmluZWQge1xyXG5cdFx0bGV0IG5leHRJZCA9IGVsZW1lbnQuaWQgKyAxO1xyXG5cdFx0bmV4dElkID0gbW9kKG5leHRJZCwgdGhpcy5lbGVtZW50cy5sZW5ndGgpO1xyXG5cclxuXHRcdHJldHVybiB0aGlzLmVsZW1lbnRzLmZpbHRlcih4ID0+IHguaWQgPT09IG5leHRJZCkuYXQoMCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGdldFByZXZpb3VzU2VsZWN0TW9kYWxFbGVtZW50KGVsZW1lbnQ6IFNlbGVjdElucHV0RmllbGRFbGVtZW50KTogU2VsZWN0SW5wdXRGaWVsZEVsZW1lbnQgfCB1bmRlZmluZWQge1xyXG5cdFx0bGV0IG5leHRJZCA9IGVsZW1lbnQuaWQgLSAxO1xyXG5cdFx0bmV4dElkID0gbW9kKG5leHRJZCwgdGhpcy5lbGVtZW50cy5sZW5ndGgpO1xyXG5cclxuXHRcdHJldHVybiB0aGlzLmVsZW1lbnRzLmZpbHRlcih4ID0+IHguaWQgPT09IG5leHRJZCkuYXQoMCk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQge1NlbGVjdElucHV0RmllbGR9IGZyb20gJy4vU2VsZWN0SW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7SW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGR9IGZyb20gJy4uL0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkJztcclxuaW1wb3J0IHthcnJheUVxdWFsc30gZnJvbSAnLi4vdXRpbHMvVXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIE11bHRpU2VsZWN0SW5wdXRGaWVsZCBleHRlbmRzIFNlbGVjdElucHV0RmllbGQge1xyXG5cclxuXHRjb25zdHJ1Y3RvcihpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIG9uVmFsdWVDaGFuZ2U6ICh2YWx1ZTogYW55KSA9PiAodm9pZCB8IFByb21pc2U8dm9pZD4pKSB7XHJcblx0XHRzdXBlcihpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgb25WYWx1ZUNoYW5nZSk7XHJcblx0XHR0aGlzLmFsbG93TXVsdGlTZWxlY3QgPSB0cnVlO1xyXG5cdH1cclxuXHJcblx0Z2V0VmFsdWUoKTogYW55IHtcclxuXHRcdHJldHVybiB0aGlzLmVsZW1lbnRzLmZpbHRlcih4ID0+IHguaXNBY3RpdmUoKSkubWFwKHggPT4geC52YWx1ZSk7XHJcblx0fVxyXG5cclxuXHRzZXRWYWx1ZSh2YWx1ZTogc3RyaW5nW10pOiB2b2lkIHtcclxuXHRcdGlmICh2YWx1ZS5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0Zm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMuZWxlbWVudHMpIHtcclxuXHRcdFx0XHRlbGVtZW50LnNldEFjdGl2ZShmYWxzZSwgZmFsc2UpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRlbGVtZW50TG9vcCA6IGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLmVsZW1lbnRzKSB7XHJcblx0XHRcdGZvciAoY29uc3QgdmFsdWVFbGVtZW50IG9mIHZhbHVlKSB7XHJcblx0XHRcdFx0aWYgKHZhbHVlRWxlbWVudCA9PT0gZWxlbWVudC52YWx1ZSkge1xyXG5cdFx0XHRcdFx0ZWxlbWVudC5zZXRBY3RpdmUodHJ1ZSwgZmFsc2UpO1xyXG5cdFx0XHRcdFx0Y29udGludWUgZWxlbWVudExvb3A7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsZW1lbnQuc2V0QWN0aXZlKGZhbHNlLCBmYWxzZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRpc0VxdWFsVmFsdWUodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xyXG5cdFx0aWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGFycmF5RXF1YWxzKHRoaXMuZ2V0VmFsdWUoKSwgdmFsdWUpO1xyXG5cdH1cclxuXHJcblx0Z2V0RGVmYXVsdFZhbHVlKCk6IHN0cmluZ1tdIHtcclxuXHRcdHJldHVybiBbXTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7QWJzdHJhY3RJbnB1dEZpZWxkfSBmcm9tICcuL0Fic3RyYWN0SW5wdXRGaWVsZCc7XG5pbXBvcnQge0Ryb3Bkb3duQ29tcG9uZW50LCBUZXh0Q29tcG9uZW50fSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQge0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkfSBmcm9tICcuLi9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCc7XG5pbXBvcnQge0RhdGVQYXJzZXJ9IGZyb20gJy4uL3BhcnNlcnMvRGF0ZVBhcnNlcic7XG5pbXBvcnQge01ldGFCaW5kSW50ZXJuYWxFcnJvcn0gZnJvbSAnLi4vdXRpbHMvVXRpbHMnO1xuaW1wb3J0IHttb21lbnR9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIERhdGVJbnB1dEZpZWxkIGV4dGVuZHMgQWJzdHJhY3RJbnB1dEZpZWxkIHtcblx0Y29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCB8IHVuZGVmaW5lZDtcblx0ZGF0ZTogbW9tZW50Lk1vbWVudDtcblxuXHRtb250aHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG5cdFx0JzAnOiAnSmFudWFyeScsXG5cdFx0JzEnOiAnRmVicnVhcnknLFxuXHRcdCcyJzogJ01hcmNoJyxcblx0XHQnMyc6ICdBcHJpbCcsXG5cdFx0JzQnOiAnTWF5Jyxcblx0XHQnNSc6ICdKdW5lJyxcblx0XHQnNic6ICdKdWx5Jyxcblx0XHQnNyc6ICdBdWd1c3QnLFxuXHRcdCc4JzogJ1NlcHRlbWJlcicsXG5cdFx0JzknOiAnT2N0b2JlcicsXG5cdFx0JzEwJzogJ05vdmVtYmVyJyxcblx0XHQnMTEnOiAnRGVjZW1iZXInLFxuXHR9O1xuXHRkYXlzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuXG5cdG1vbnRoQ29tcG9uZW50OiBEcm9wZG93bkNvbXBvbmVudCB8IHVuZGVmaW5lZDtcblx0ZGF5Q29tcG9uZW50OiBEcm9wZG93bkNvbXBvbmVudCB8IHVuZGVmaW5lZDtcblx0eWVhckNvbXBvbmVudDogVGV4dENvbXBvbmVudCB8IHVuZGVmaW5lZDtcblxuXG5cdGNvbnN0cnVjdG9yKGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgb25WYWx1ZUNoYW5nZTogKHZhbHVlOiBhbnkpID0+ICh2b2lkIHwgUHJvbWlzZTx2b2lkPikpIHtcblx0XHRzdXBlcihpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgb25WYWx1ZUNoYW5nZSk7XG5cblx0XHR0aGlzLmRhdGUgPSBEYXRlUGFyc2VyLmdldERlZmF1bHREYXRlKCk7XG5cblx0XHR0aGlzLmRheXMgPSB7fTtcblx0XHRmb3IgKGxldCBpID0gMTsgaSA8PSAzMTsgaSsrKSB7XG5cdFx0XHR0aGlzLmRheXNbaS50b1N0cmluZygpXSA9IGkudG9TdHJpbmcoKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgZ2V0SHRtbEVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xuXHRcdGlmICghdGhpcy5jb250YWluZXIpIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3RvZ2dsZSBpbnB1dCBjb250YWluZXIgaXMgdW5kZWZpbmVkJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuY29udGFpbmVyO1xuXHR9XG5cblx0cHVibGljIGdldFZhbHVlKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIERhdGVQYXJzZXIuc3RyaW5naWZ5KHRoaXMuZGF0ZSk7XG5cdH1cblxuXHRwdWJsaWMgc2V0VmFsdWUodmFsdWU6IHN0cmluZyk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5tb250aENvbXBvbmVudCkge1xuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignZGF0ZSBpbnB1dCBtb250aCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XG5cdFx0fVxuXHRcdGlmICghdGhpcy5kYXlDb21wb25lbnQpIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ2RhdGUgaW5wdXQgZGF5IGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcblx0XHR9XG5cdFx0aWYgKCF0aGlzLnllYXJDb21wb25lbnQpIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ2RhdGUgaW5wdXQgaG91ciBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XG5cdFx0fVxuXG5cdFx0dGhpcy5kYXRlID0gRGF0ZVBhcnNlci5wYXJzZSh2YWx1ZSkgPz8gRGF0ZVBhcnNlci5nZXREZWZhdWx0RGF0ZSgpO1xuXHRcdC8vIGNvbnNvbGUubG9nKHRoaXMuZGF0ZSk7XG5cdFx0dGhpcy5tb250aENvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmRhdGUubW9udGgoKS50b1N0cmluZygpKTtcblx0XHR0aGlzLmRheUNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmRhdGUuZGF0ZSgpLnRvU3RyaW5nKCkpO1xuXHRcdHRoaXMueWVhckNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmRhdGUueWVhcigpLnRvU3RyaW5nKCkpO1xuXHR9XG5cblx0cHVibGljIGlzRXF1YWxWYWx1ZSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHZhbHVlID09IHRoaXMuZ2V0VmFsdWUoKTtcblx0fVxuXG5cdHB1YmxpYyBnZXREZWZhdWx0VmFsdWUoKTogYW55IHtcblx0XHRyZXR1cm4gRGF0ZVBhcnNlci5zdHJpbmdpZnkoRGF0ZVBhcnNlci5nZXREZWZhdWx0RGF0ZSgpKTtcblx0fVxuXG5cdHB1YmxpYyByZW5kZXIoY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCk6IHZvaWQge1xuXHRcdHRoaXMuZGF0ZSA9IERhdGVQYXJzZXIucGFyc2UodGhpcy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZC5nZXRJbml0aWFsVmFsdWUoKSkgPz8gRGF0ZVBhcnNlci5nZXREZWZhdWx0RGF0ZSgpO1xuXHRcdGxldCB1c2VVc0lucHV0T3JkZXIgPSB0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLnBsdWdpbi5zZXR0aW5ncy51c2VVc0RhdGVJbnB1dE9yZGVyO1xuXG5cdFx0Y29udGFpbmVyLnJlbW92ZUNsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLWlucHV0LXdyYXBwZXInKTtcblx0XHRjb250YWluZXIuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4tZmxleC1pbnB1dC13cmFwcGVyJywgJ21ldGEtYmluZC1wbHVnaW4taW5wdXQtZWxlbWVudC1ncm91cCcpO1xuXG5cdFx0aWYgKCF1c2VVc0lucHV0T3JkZXIpIHtcblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50ID0gbmV3IERyb3Bkb3duQ29tcG9uZW50KGNvbnRhaW5lcik7XG5cdFx0XHR0aGlzLmRheUNvbXBvbmVudC5hZGRPcHRpb25zKHRoaXMuZGF5cyk7XG5cdFx0XHR0aGlzLmRheUNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmRhdGUuZGF0ZSgpLnRvU3RyaW5nKCkpO1xuXHRcdFx0dGhpcy5kYXlDb21wb25lbnQub25DaGFuZ2UodGhpcy5vbkRheUNoYW5nZS5iaW5kKHRoaXMpKTtcblxuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudCA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250YWluZXIpO1xuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5hZGRPcHRpb25zKHRoaXMubW9udGhzKTtcblx0XHRcdHRoaXMubW9udGhDb21wb25lbnQuc2V0VmFsdWUodGhpcy5kYXRlLm1vbnRoKCkudG9TdHJpbmcoKSk7XG5cdFx0XHR0aGlzLm1vbnRoQ29tcG9uZW50Lm9uQ2hhbmdlKHRoaXMub25Nb250aENoYW5nZS5iaW5kKHRoaXMpKTtcblxuXHRcdFx0dGhpcy5kYXlDb21wb25lbnQuc2VsZWN0RWwuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4taW5wdXQtZWxlbWVudC1ncm91cC1lbGVtZW50Jyk7XG5cdFx0XHR0aGlzLm1vbnRoQ29tcG9uZW50LnNlbGVjdEVsLmFkZENsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLWlucHV0LWVsZW1lbnQtZ3JvdXAtZWxlbWVudCcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLm1vbnRoQ29tcG9uZW50ID0gbmV3IERyb3Bkb3duQ29tcG9uZW50KGNvbnRhaW5lcik7XG5cdFx0XHR0aGlzLm1vbnRoQ29tcG9uZW50LmFkZE9wdGlvbnModGhpcy5tb250aHMpO1xuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmRhdGUubW9udGgoKS50b1N0cmluZygpKTtcblx0XHRcdHRoaXMubW9udGhDb21wb25lbnQub25DaGFuZ2UodGhpcy5vbk1vbnRoQ2hhbmdlLmJpbmQodGhpcykpO1xuXG5cdFx0XHR0aGlzLmRheUNvbXBvbmVudCA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250YWluZXIpO1xuXHRcdFx0dGhpcy5kYXlDb21wb25lbnQuYWRkT3B0aW9ucyh0aGlzLmRheXMpO1xuXHRcdFx0dGhpcy5kYXlDb21wb25lbnQuc2V0VmFsdWUodGhpcy5kYXRlLmRhdGUoKS50b1N0cmluZygpKTtcblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50Lm9uQ2hhbmdlKHRoaXMub25EYXlDaGFuZ2UuYmluZCh0aGlzKSk7XG5cblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50LnNlbGVjdEVsLmFkZENsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLWlucHV0LWVsZW1lbnQtZ3JvdXAtZWxlbWVudCcpO1xuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5zZWxlY3RFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC1lbGVtZW50LWdyb3VwLWVsZW1lbnQnKTtcblx0XHR9XG5cblx0XHR0aGlzLnllYXJDb21wb25lbnQgPSBuZXcgVGV4dENvbXBvbmVudChjb250YWluZXIpO1xuXHRcdHRoaXMueWVhckNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmRhdGUueWVhcigpLnRvU3RyaW5nKCkpO1xuXHRcdHRoaXMueWVhckNvbXBvbmVudC5vbkNoYW5nZSh0aGlzLm9uWWVhckNoYW5nZS5iaW5kKHRoaXMpKTtcblxuXHRcdHRoaXMueWVhckNvbXBvbmVudC5pbnB1dEVsLmFkZENsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLWRhdGUtaW5wdXQteWVhci1pbnB1dCcpO1xuXHRcdHRoaXMueWVhckNvbXBvbmVudC5pbnB1dEVsLmFkZENsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLWlucHV0LWVsZW1lbnQtZ3JvdXAtZWxlbWVudCcpO1xuXHRcdHRoaXMueWVhckNvbXBvbmVudC5pbnB1dEVsLnR5cGUgPSAnbnVtYmVyJztcblx0XHR0aGlzLnllYXJDb21wb25lbnQuaW5wdXRFbC5tYXggPSAnOTk5OSc7XG5cblx0XHR0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcblx0fVxuXG5cdHByaXZhdGUgb25Nb250aENoYW5nZSh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XG5cdFx0dGhpcy5kYXRlLm1vbnRoKHZhbHVlKTtcblxuXHRcdGNvbnN0IGNsYW1wZWREYXkgPSB0aGlzLmNsYW1wRGF5KHRoaXMuZGF0ZS5kYXRlKCkpO1xuXHRcdHRoaXMuZGF5Q29tcG9uZW50Py5zZXRWYWx1ZShjbGFtcGVkRGF5LnRvU3RyaW5nKCkpO1xuXHRcdHRoaXMuZGF0ZS5kYXRlKGNsYW1wZWREYXkpO1xuXG5cdFx0dGhpcy5vblZhbHVlQ2hhbmdlKHRoaXMuZ2V0VmFsdWUoKSk7XG5cdH1cblxuXHRwcml2YXRlIG9uRGF5Q2hhbmdlKHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRjb25zdCBkYXkgPSBOdW1iZXIucGFyc2VJbnQodmFsdWUpO1xuXHRcdGNvbnN0IGNsYW1wZWREYXkgPSB0aGlzLmNsYW1wRGF5KGRheSk7XG5cdFx0aWYgKGNsYW1wZWREYXkgIT09IGRheSkge1xuXHRcdFx0dGhpcy5kYXlDb21wb25lbnQ/LnNldFZhbHVlKGNsYW1wZWREYXkudG9TdHJpbmcoKSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5kYXRlLmRhdGUoY2xhbXBlZERheSk7XG5cdFx0dGhpcy5vblZhbHVlQ2hhbmdlKHRoaXMuZ2V0VmFsdWUoKSk7XG5cdH1cblxuXHRwcml2YXRlIG9uWWVhckNoYW5nZSh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XG5cdFx0Y29uc3QgeWVhciA9IE51bWJlci5wYXJzZUludCh2YWx1ZSk7XG5cdFx0dGhpcy5kYXRlLnllYXIoTnVtYmVyLmlzTmFOKHllYXIpID8gRGF0ZVBhcnNlci5nZXREZWZhdWx0WWVhcigpIDogeWVhcik7XG5cdFx0dGhpcy5vblZhbHVlQ2hhbmdlKHRoaXMuZ2V0VmFsdWUoKSk7XG5cdH1cblxuXHRwcml2YXRlIGNsYW1wRGF5KGRheTogbnVtYmVyKTogbnVtYmVyIHtcblx0XHRpZiAoTnVtYmVyLmlzTmFOKGRheSkpIHtcblx0XHRcdHJldHVybiBEYXRlUGFyc2VyLmdldERlZmF1bHREYXkoKTtcblx0XHR9IGVsc2UgaWYgKGRheSA8IDEpIHtcblx0XHRcdHJldHVybiAxO1xuXHRcdH0gZWxzZSBpZiAoZGF5ID4gdGhpcy5kYXRlLmRheXNJbk1vbnRoKCkpIHtcblx0XHRcdHJldHVybiB0aGlzLmRhdGUuZGF5c0luTW9udGgoKTtcblx0XHR9XG5cdFx0cmV0dXJuIGRheTtcblx0fVxuXG59XG4iLCAiaW1wb3J0IHttb21lbnR9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIERhdGVQYXJzZXIge1xuXHRwdWJsaWMgc3RhdGljIGRhdGVGb3JtYXQ6IHN0cmluZztcblxuXHRwdWJsaWMgc3RhdGljIHN0cmluZ2lmeShkYXRlOiBtb21lbnQuTW9tZW50KTogc3RyaW5nIHtcblx0XHRyZXR1cm4gZGF0ZS5mb3JtYXQodGhpcy5kYXRlRm9ybWF0KTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgcGFyc2UoZGF0ZVN0cmluZzogc3RyaW5nKTogbW9tZW50Lk1vbWVudCB7XG5cdFx0cmV0dXJuIG1vbWVudChkYXRlU3RyaW5nLCBEYXRlUGFyc2VyLmRhdGVGb3JtYXQpO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBnZXREZWZhdWx0RGF0ZSgpOiBtb21lbnQuTW9tZW50IHtcblx0XHRyZXR1cm4gbW9tZW50KGAke0RhdGVQYXJzZXIuZ2V0RGVmYXVsdFllYXJ9LSR7RGF0ZVBhcnNlci5nZXREZWZhdWx0TW9udGgoKX0tJHtEYXRlUGFyc2VyLmdldERlZmF1bHREYXkoKX1gKTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgZ2V0RGVmYXVsdERheSgpOiBudW1iZXIge1xuXHRcdHJldHVybiAxO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBnZXREZWZhdWx0TW9udGgoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gMTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgZ2V0RGVmYXVsdFllYXIoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gMjAyMjtcblx0fVxufVxuIiwgImltcG9ydCB7QWJzdHJhY3RJbnB1dEZpZWxkfSBmcm9tICcuL0Fic3RyYWN0SW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7RHJvcGRvd25Db21wb25lbnR9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHtJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZH0gZnJvbSAnLi4vSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQnO1xyXG5pbXBvcnQge1RpbWUsIFRpbWVQYXJzZXJ9IGZyb20gJy4uL3BhcnNlcnMvVGltZVBhcnNlcic7XHJcbmltcG9ydCB7TWV0YUJpbmRJbnRlcm5hbEVycm9yfSBmcm9tICcuLi91dGlscy9VdGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgVGltZUlucHV0RmllbGQgZXh0ZW5kcyBBYnN0cmFjdElucHV0RmllbGQge1xyXG5cdGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQgfCB1bmRlZmluZWQ7XHJcblx0dGltZTogVGltZTtcclxuXHJcblx0aG91cnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XHJcblx0bWludXRlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcclxuXHJcblx0aG91ckNvbXBvbmVudDogRHJvcGRvd25Db21wb25lbnQgfCB1bmRlZmluZWQ7XHJcblx0bWludXRlQ29tcG9uZW50OiBEcm9wZG93bkNvbXBvbmVudCB8IHVuZGVmaW5lZDtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgb25WYWx1ZUNoYW5nZTogKHZhbHVlOiBhbnkpID0+ICh2b2lkIHwgUHJvbWlzZTx2b2lkPikpIHtcclxuXHRcdHN1cGVyKGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBvblZhbHVlQ2hhbmdlKTtcclxuXHJcblx0XHR0aGlzLnRpbWUgPSBUaW1lUGFyc2VyLmdldERlZmF1bHRUaW1lKCk7XHJcblxyXG5cdFx0dGhpcy5ob3VycyA9IHt9O1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPD0gMjQ7IGkrKykge1xyXG5cdFx0XHR0aGlzLmhvdXJzW2kudG9TdHJpbmcoKV0gPSBpLnRvU3RyaW5nKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5taW51dGVzID0ge307XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8PSA1OTsgaSsrKSB7XHJcblx0XHRcdHRoaXMubWludXRlc1tpLnRvU3RyaW5nKCldID0gaS50b1N0cmluZygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHVibGljIGdldEh0bWxFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcclxuXHRcdGlmICghdGhpcy5jb250YWluZXIpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndGltZSBpbnB1dCBjb250YWluZXIgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuY29udGFpbmVyO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldFZhbHVlKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gVGltZVBhcnNlci5zdHJpbmdpZnkodGhpcy50aW1lKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXRWYWx1ZSh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRpZiAoIXRoaXMuaG91ckNvbXBvbmVudCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCd0aW1lIGlucHV0IGhvdXIgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCF0aGlzLm1pbnV0ZUNvbXBvbmVudCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCd0aW1lIGlucHV0IG1pbnV0ZSBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy50aW1lID0gVGltZVBhcnNlci5wYXJzZSh2YWx1ZSkgPz8gVGltZVBhcnNlci5nZXREZWZhdWx0VGltZSgpO1xyXG5cdFx0Ly8gY29uc29sZS5sb2codGhpcy50aW1lKTtcclxuXHRcdHRoaXMuaG91ckNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLnRpbWUuZ2V0SG91cigpLnRvU3RyaW5nKCkpO1xyXG5cdFx0dGhpcy5taW51dGVDb21wb25lbnQuc2V0VmFsdWUodGhpcy50aW1lLmdldE1pbnV0ZSgpLnRvU3RyaW5nKCkpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGlzRXF1YWxWYWx1ZSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdmFsdWUgPT0gdGhpcy5nZXRWYWx1ZSgpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldERlZmF1bHRWYWx1ZSgpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIFRpbWVQYXJzZXIuc3RyaW5naWZ5KFRpbWVQYXJzZXIuZ2V0RGVmYXVsdFRpbWUoKSk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgcmVuZGVyKGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMudGltZSA9IFRpbWVQYXJzZXIucGFyc2UodGhpcy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZC5nZXRJbml0aWFsVmFsdWUoKSkgPz8gVGltZVBhcnNlci5nZXREZWZhdWx0VGltZSgpO1xyXG5cclxuXHRcdGNvbnRhaW5lci5yZW1vdmVDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC13cmFwcGVyJyk7XHJcblx0XHRjb250YWluZXIuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4tZmxleC1pbnB1dC13cmFwcGVyJywgJ21ldGEtYmluZC1wbHVnaW4taW5wdXQtZWxlbWVudC1ncm91cCcpO1xyXG5cclxuXHRcdHRoaXMuaG91ckNvbXBvbmVudCA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250YWluZXIpO1xyXG5cdFx0dGhpcy5ob3VyQ29tcG9uZW50LmFkZE9wdGlvbnModGhpcy5ob3Vycyk7XHJcblx0XHR0aGlzLmhvdXJDb21wb25lbnQuc2V0VmFsdWUodGhpcy50aW1lLmdldEhvdXIoKS50b1N0cmluZygpKTtcclxuXHRcdHRoaXMuaG91ckNvbXBvbmVudC5vbkNoYW5nZSh0aGlzLm9uSG91ckNoYW5nZS5iaW5kKHRoaXMpKTtcclxuXHJcblx0XHR0aGlzLm1pbnV0ZUNvbXBvbmVudCA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250YWluZXIpO1xyXG5cdFx0dGhpcy5taW51dGVDb21wb25lbnQuYWRkT3B0aW9ucyh0aGlzLm1pbnV0ZXMpO1xyXG5cdFx0dGhpcy5taW51dGVDb21wb25lbnQuc2V0VmFsdWUodGhpcy50aW1lLmdldE1pbnV0ZSgpLnRvU3RyaW5nKCkpO1xyXG5cdFx0dGhpcy5taW51dGVDb21wb25lbnQub25DaGFuZ2UodGhpcy5vbk1pbnV0ZUNoYW5nZS5iaW5kKHRoaXMpKTtcclxuXHJcblx0XHR0aGlzLmhvdXJDb21wb25lbnQuc2VsZWN0RWwuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4taW5wdXQtZWxlbWVudC1ncm91cC1lbGVtZW50Jyk7XHJcblx0XHR0aGlzLm1pbnV0ZUNvbXBvbmVudC5zZWxlY3RFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC1lbGVtZW50LWdyb3VwLWVsZW1lbnQnKTtcclxuXHJcblx0XHR0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgb25Ib3VyQ2hhbmdlKHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdHRoaXMudGltZS5zZXRIb3VyRnJvbVN0cmluZyh2YWx1ZSk7XHJcblx0XHR0aGlzLm9uVmFsdWVDaGFuZ2UodGhpcy5nZXRWYWx1ZSgpKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgb25NaW51dGVDaGFuZ2UodmFsdWU6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0dGhpcy50aW1lLnNldE1pbnV0ZUZyb21TdHJpbmcodmFsdWUpO1xyXG5cdFx0dGhpcy5vblZhbHVlQ2hhbmdlKHRoaXMuZ2V0VmFsdWUoKSk7XHJcblx0fVxyXG59XHJcbiIsICJleHBvcnQgY2xhc3MgVGltZSB7XHJcblx0cHJpdmF0ZSBfaG91cjogbnVtYmVyO1xyXG5cdHByaXZhdGUgX21pbnV0ZTogbnVtYmVyO1xyXG5cclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHRoaXMuX2hvdXIgPSBUaW1lUGFyc2VyLmdldERlZmF1bHRIb3VyKCk7XHJcblx0XHR0aGlzLl9taW51dGUgPSBUaW1lUGFyc2VyLmdldERlZmF1bHRIb3VyKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0SG91cigpOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIHRoaXMuX2hvdXI7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0SG91cih2YWx1ZTogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRpZiAodmFsdWUgPCAwIHx8IHZhbHVlID4gMjQpIHtcclxuXHRcdFx0dGhpcy5faG91ciA9IFRpbWVQYXJzZXIuZ2V0RGVmYXVsdEhvdXIoKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5faG91ciA9IHZhbHVlO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldE1pbnV0ZSgpOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIHRoaXMuX21pbnV0ZTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXRNaW51dGUodmFsdWU6IG51bWJlcik6IHZvaWQgIHtcclxuXHRcdGlmICh2YWx1ZSA8IDAgfHwgdmFsdWUgPiA1OSkge1xyXG5cdFx0XHR0aGlzLl9taW51dGUgPSBUaW1lUGFyc2VyLmdldERlZmF1bHRNaW51dGUoKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fbWludXRlID0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0VW5pZm9ybUhvdXIoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiAoJzAwJyArIHRoaXMuZ2V0SG91cigpLnRvU3RyaW5nKCkpLnNsaWNlKC0yKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXRVbmlmb3JtTWludXRlKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gKCcwMCcgKyB0aGlzLmdldE1pbnV0ZSgpLnRvU3RyaW5nKCkpLnNsaWNlKC0yKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXRIb3VyRnJvbVN0cmluZyhzdHI6IHN0cmluZyk6IHZvaWQgIHtcclxuXHRcdGNvbnN0IHYgPSBOdW1iZXIucGFyc2VJbnQoc3RyKTtcclxuXHRcdHRoaXMuc2V0SG91cihOdW1iZXIuaXNOYU4odikgPyBUaW1lUGFyc2VyLmdldERlZmF1bHRIb3VyKCkgOiB2KTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXRNaW51dGVGcm9tU3RyaW5nKHN0cjogc3RyaW5nKTogdm9pZCAge1xyXG5cdFx0Y29uc3QgdiA9IE51bWJlci5wYXJzZUludChzdHIpO1xyXG5cdFx0dGhpcy5zZXRNaW51dGUoTnVtYmVyLmlzTmFOKHYpID8gVGltZVBhcnNlci5nZXREZWZhdWx0TWludXRlKCkgOiB2KTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUaW1lUGFyc2VyIHtcclxuXHRwdWJsaWMgc3RhdGljIHBhcnNlKHRpbWVTdHJpbmc6IHN0cmluZyk6IFRpbWUgfCB1bmRlZmluZWQge1xyXG5cdFx0Y29uc3QgdGltZTogVGltZSA9IFRpbWVQYXJzZXIuZ2V0RGVmYXVsdFRpbWUoKTtcclxuXHJcblx0XHRjb25zdCB0aW1lUGFydHMgPSB0aW1lU3RyaW5nLnNwbGl0KCc6Jyk7XHJcblx0XHRpZiAodGltZVBhcnRzLmxlbmd0aCAhPT0gMikge1xyXG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRpbWUuc2V0SG91ckZyb21TdHJpbmcodGltZVBhcnRzWzBdKTtcclxuXHRcdHRpbWUuc2V0TWludXRlRnJvbVN0cmluZyh0aW1lUGFydHNbMV0pO1xyXG5cclxuXHRcdHJldHVybiB0aW1lO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBzdHJpbmdpZnkodGltZTogVGltZSk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gYCR7dGltZS5nZXRVbmlmb3JtSG91cigpfToke3RpbWUuZ2V0VW5pZm9ybU1pbnV0ZSgpfWA7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIGdldERlZmF1bHRUaW1lKCk6IFRpbWUge1xyXG5cdFx0cmV0dXJuIG5ldyBUaW1lKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIGdldERlZmF1bHRIb3VyKCk6IG51bWJlciB7XHJcblx0XHRyZXR1cm4gMDtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgZ2V0RGVmYXVsdE1pbnV0ZSgpOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIDA7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQge2VxdWFsT3JJbmNsdWRlcywgaXNGYWxzeSwgTWV0YUJpbmRJbnRlcm5hbEVycm9yfSBmcm9tICcuL1V0aWxzJztcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgRW5jbG9zaW5nUGFpciB7XHJcblx0cmVhZG9ubHkgb3BlbmluZ0VxdWFsc0Nsb3Npbmc6IGJvb2xlYW47XHJcblx0cHJpdmF0ZSByZWFkb25seSBfb3BlbmluZ1N0cmluZzogc3RyaW5nO1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgX2Nsb3NpbmdTdHJpbmc6IHN0cmluZztcclxuXHJcblx0Y29uc3RydWN0b3Iob3BlbmluZ1N0cmluZzogc3RyaW5nLCBjbG9zaW5nU3RyaW5nPzogc3RyaW5nKSB7XHJcblx0XHRpZiAoaXNGYWxzeShvcGVuaW5nU3RyaW5nKSkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdvcGVuaW5nIHN0cmluZyBtdXN0IG5vdCBiZSBlbXB0eScpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMub3BlbmluZ0VxdWFsc0Nsb3NpbmcgPSBpc0ZhbHN5KGNsb3NpbmdTdHJpbmcpIHx8IG9wZW5pbmdTdHJpbmcgPT09IGNsb3NpbmdTdHJpbmc7XHJcblxyXG5cdFx0aWYgKHRoaXMub3BlbmluZ0VxdWFsc0Nsb3NpbmcpIHtcclxuXHRcdFx0dGhpcy5fb3BlbmluZ1N0cmluZyA9IG9wZW5pbmdTdHJpbmc7XHJcblx0XHRcdHRoaXMuX2Nsb3NpbmdTdHJpbmcgPSBvcGVuaW5nU3RyaW5nO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fb3BlbmluZ1N0cmluZyA9IG9wZW5pbmdTdHJpbmc7XHJcblx0XHRcdC8vIEB0cy1pZ25vcmUgdGhpcyBjYW4gbm90IGJlIHVuZGVmaW5lZCBoZXJlXHJcblx0XHRcdHRoaXMuX2Nsb3NpbmdTdHJpbmcgPSBjbG9zaW5nU3RyaW5nO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHVibGljIGdldCBvcGVuaW5nU3RyaW5nKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gdGhpcy5fb3BlbmluZ1N0cmluZztcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXQgY2xvc2luZ1N0cmluZygpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHRoaXMub3BlbmluZ0VxdWFsc0Nsb3NpbmcgPyB0aGlzLl9vcGVuaW5nU3RyaW5nIDogdGhpcy5fY2xvc2luZ1N0cmluZztcclxuXHR9XHJcblxyXG5cdG92ZXJsYXBzKG90aGVyOiBFbmNsb3NpbmdQYWlyKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gZXF1YWxPckluY2x1ZGVzKHRoaXMub3BlbmluZ1N0cmluZywgb3RoZXIub3BlbmluZ1N0cmluZykgfHxcclxuXHRcdFx0ZXF1YWxPckluY2x1ZGVzKHRoaXMub3BlbmluZ1N0cmluZywgb3RoZXIuY2xvc2luZ1N0cmluZykgfHxcclxuXHRcdFx0ZXF1YWxPckluY2x1ZGVzKHRoaXMuY2xvc2luZ1N0cmluZywgb3RoZXIub3BlbmluZ1N0cmluZykgfHxcclxuXHRcdFx0ZXF1YWxPckluY2x1ZGVzKHRoaXMuY2xvc2luZ1N0cmluZywgb3RoZXIuY2xvc2luZ1N0cmluZyk7XHJcblx0fVxyXG5cclxuXHRlcXVhbHMob3RoZXI6IEVuY2xvc2luZ1BhaXIpOiBib29sZWFuIHtcclxuXHRcdGlmIChpc0ZhbHN5KG90aGVyKSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gKHRoaXMub3BlbmluZ1N0cmluZyA9PT0gb3RoZXIub3BlbmluZ1N0cmluZykgJiYgKHRoaXMuY2xvc2luZ1N0cmluZyA9PT0gb3RoZXIuY2xvc2luZ1N0cmluZyk7XHJcblx0fVxyXG5cclxuXHR0b1N0cmluZygpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBhcnNlclV0aWxzIHtcclxuXHJcblx0Ly8gVE9ETzogcmVuYW1lIHN0dWZmXHJcblx0c3RhdGljIHNwbGl0KHN0cjogc3RyaW5nLCBzZXBhcmF0b3I6IHN0cmluZywgaWdub3JlPzogRW5jbG9zaW5nUGFpcik6IHN0cmluZ1tdIHtcclxuXHRcdGlmICghc3RyKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3N0cmluZyBtdXN0IG5vdCBiZSBlbXB0eScpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCFzZXBhcmF0b3IpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignc2VwYXJhdG9yIG11c3Qgbm90IGJlIGVtcHR5Jyk7XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IHN1YlN0cjogc3RyaW5nID0gJyc7XHJcblx0XHRjb25zdCBzdWJTdHJpbmdzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuXHRcdGlmIChpZ25vcmUpIHtcclxuXHRcdFx0bGV0IHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCA9IFBhcnNlclV0aWxzLm51bWJlck9mT2NjdXJyZW5jZXMoc3RyLCBpZ25vcmUub3BlbmluZ1N0cmluZyk7XHJcblx0XHRcdGxldCByZW1haW5pbmdDbG9zaW5nU3RyaW5nQ291bnQgPSBQYXJzZXJVdGlscy5udW1iZXJPZk9jY3VycmVuY2VzKHN0ciwgaWdub3JlLmNsb3NpbmdTdHJpbmcpO1xyXG5cclxuXHRcdFx0bGV0IGVuY2xvc2luZ0xldmVsOiBudW1iZXIgPSAwO1xyXG5cclxuXHRcdFx0c3RyTG9vcCA6IGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0Ly8gaWdub3JlIHNwZWNpZmllZFxyXG5cdFx0XHRcdGlmIChlbmNsb3NpbmdMZXZlbCA9PT0gMCAmJiBQYXJzZXJVdGlscy5pc1N0cmluZ0F0KHN0ciwgc2VwYXJhdG9yLCBpKSkge1xyXG5cdFx0XHRcdFx0c3ViU3RyaW5ncy5wdXNoKHN1YlN0cik7XHJcblx0XHRcdFx0XHRzdWJTdHIgPSAnJztcclxuXHRcdFx0XHRcdGkgKz0gc2VwYXJhdG9yLmxlbmd0aCAtIDE7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoaWdub3JlLm9wZW5pbmdFcXVhbHNDbG9zaW5nKSB7XHJcblx0XHRcdFx0XHRpZiAoUGFyc2VyVXRpbHMuaXNTdHJpbmdBdChzdHIsIGlnbm9yZS5vcGVuaW5nU3RyaW5nLCBpKSkge1xyXG5cdFx0XHRcdFx0XHRpZiAoZW5jbG9zaW5nTGV2ZWwgJSAyID09PSAwICYmIHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCA9PT0gMSkge1xyXG5cdFx0XHRcdFx0XHRcdC8vIG5vdCBpbiBhIHBhcnQgdGhhdCBzaG91bGQgYmUgcmVtb3ZlZCBhbmQgdGhlcmUgaXMgc3RpbGwgYW4gb3BlbmluZyBzdHJpbmcgbGVmdCwgc28gd2UgaWdub3JlIGl0XHJcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoZW5jbG9zaW5nTGV2ZWwgJSAyID09PSAwKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gb3BlbmluZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0XHRlbmNsb3NpbmdMZXZlbCArPSAxO1xyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBjb3B5IHRoZSBvcGVuaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRcdGZvciAobGV0IGogPSAxOyBqIDwgaWdub3JlLm9wZW5pbmdTdHJpbmcubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRcdFx0XHRcdGkgKz0gMTtcclxuXHRcdFx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGkgPj0gc3RyLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhayBzdHJMb29wO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBjbG9zaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRcdGVuY2xvc2luZ0xldmVsIC09IDE7XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIGNvcHkgdGhlIGNsb3Npbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdFx0Zm9yIChsZXQgaiA9IDE7IGogPCBpZ25vcmUuY2xvc2luZ1N0cmluZy5sZW5ndGg7IGorKykgeyAvLyAob3BlbmluZyBhbmQgY2xvc2luZyBzdHJpbmcgYXJlIHRoZSBzYW1lKVxyXG5cdFx0XHRcdFx0XHRcdFx0aSArPSAxO1xyXG5cdFx0XHRcdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoaSA+PSBzdHIubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrIHN0ckxvb3A7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCAtPSAxO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRpZiAoUGFyc2VyVXRpbHMuaXNTdHJpbmdBdChzdHIsIGlnbm9yZS5vcGVuaW5nU3RyaW5nLCBpKSkge1xyXG5cdFx0XHRcdFx0XHQvLyBvcGVuaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRpZiAocmVtYWluaW5nT3BlbmluZ1N0cmluZ0NvdW50IDw9IHJlbWFpbmluZ0Nsb3NpbmdTdHJpbmdDb3VudCkge1xyXG5cdFx0XHRcdFx0XHRcdC8vIHN0ciBzdGlsbCBoYXMgc3VmZmljaWVudCBjbG9zaW5nIHN0cmluZyB0byBmaW5kIHRoaXMgYSBwYXJ0bmVyXHJcblx0XHRcdFx0XHRcdFx0ZW5jbG9zaW5nTGV2ZWwgKz0gMTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly8gY29weSB0aGUgb3BlbmluZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0XHRmb3IgKGxldCBqID0gMTsgaiA8IGlnbm9yZS5vcGVuaW5nU3RyaW5nLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRpICs9IDE7XHJcblx0XHRcdFx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdGlmIChpID49IHN0ci5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWsgc3RyTG9vcDtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0cmVtYWluaW5nT3BlbmluZ1N0cmluZ0NvdW50IC09IDE7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBpZ25vcmUuY2xvc2luZ1N0cmluZywgaSkpIHtcclxuXHRcdFx0XHRcdFx0Ly8gY2xvc2luZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0aWYgKGVuY2xvc2luZ0xldmVsID4gMCkge1xyXG5cdFx0XHRcdFx0XHRcdC8vIHRoZXJlIHdhcyBhbiBvcGVuaW5nIHN0cmluZyBiZWZvcmUgdGhpc1xyXG5cdFx0XHRcdFx0XHRcdGVuY2xvc2luZ0xldmVsIC09IDE7XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIGNvcHkgdGhlIGNsb3Npbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdFx0Zm9yIChsZXQgaiA9IDE7IGogPCBpZ25vcmUuY2xvc2luZ1N0cmluZy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdFx0XHRcdFx0aSArPSAxO1xyXG5cdFx0XHRcdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoaSA+PSBzdHIubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrIHN0ckxvb3A7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHJlbWFpbmluZ0Nsb3NpbmdTdHJpbmdDb3VudCAtPSAxO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gbm8gaWdub3JlIHNwZWNpZmllZFxyXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG5cclxuXHRcdFx0XHRpZiAoUGFyc2VyVXRpbHMuaXNTdHJpbmdBdChzdHIsIHNlcGFyYXRvciwgaSkpIHtcclxuXHRcdFx0XHRcdHN1YlN0cmluZ3MucHVzaChzdWJTdHIpO1xyXG5cdFx0XHRcdFx0c3ViU3RyID0gJyc7XHJcblx0XHRcdFx0XHRpICs9IHNlcGFyYXRvci5sZW5ndGggLSAxO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHN1YlN0cmluZ3MucHVzaChzdWJTdHIpO1xyXG5cclxuXHRcdHJldHVybiBzdWJTdHJpbmdzO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIHJlbW92ZUluQmV0d2VlbihzdHI6IHN0cmluZywgZW5jbG9zaW5nUGFpcjogRW5jbG9zaW5nUGFpcik6IHN0cmluZyB7XHJcblx0XHRpZiAoIXN0cikge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdzdHJpbmcgbXVzdCBub3QgYmUgZW1wdHknKTtcclxuXHRcdH1cclxuXHJcblx0XHRsZXQgcmVtYWluaW5nT3BlbmluZ1N0cmluZ0NvdW50ID0gUGFyc2VyVXRpbHMubnVtYmVyT2ZPY2N1cnJlbmNlcyhzdHIsIGVuY2xvc2luZ1BhaXIub3BlbmluZ1N0cmluZyk7XHJcblx0XHRsZXQgcmVtYWluaW5nQ2xvc2luZ1N0cmluZ0NvdW50ID0gUGFyc2VyVXRpbHMubnVtYmVyT2ZPY2N1cnJlbmNlcyhzdHIsIGVuY2xvc2luZ1BhaXIuY2xvc2luZ1N0cmluZyk7XHJcblxyXG5cdFx0bGV0IGVuY2xvc2luZ0xldmVsOiBudW1iZXIgPSAwO1xyXG5cclxuXHRcdGxldCBzdWJTdHI6IHN0cmluZyA9ICcnO1xyXG5cclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGlmIChlbmNsb3NpbmdQYWlyLm9wZW5pbmdFcXVhbHNDbG9zaW5nKSB7XHJcblx0XHRcdFx0aWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBlbmNsb3NpbmdQYWlyLm9wZW5pbmdTdHJpbmcsIGkpKSB7XHJcblx0XHRcdFx0XHRpZiAoZW5jbG9zaW5nTGV2ZWwgJSAyID09PSAwICYmIHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCA9PT0gMSkge1xyXG5cdFx0XHRcdFx0XHQvLyBub3QgaW4gYSBwYXJ0IHRoYXQgc2hvdWxkIGJlIHJlbW92ZWQgYW5kIHRoZXJlIGlzIHN0aWxsIGFuIG9wZW5pbmcgc3RyaW5nIGxlZnQsIHNvIHdlIGlnbm9yZSBpdFxyXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChlbmNsb3NpbmdMZXZlbCAlIDIgPT09IDApIHtcclxuXHRcdFx0XHRcdFx0Ly8gb3BlbmluZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0ZW5jbG9zaW5nTGV2ZWwgKz0gMTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIHNraXAgdGhlIG9wZW5pbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdGkgKz0gZW5jbG9zaW5nUGFpci5vcGVuaW5nU3RyaW5nLmxlbmd0aDtcclxuXHRcdFx0XHRcdFx0aWYgKGkgPj0gc3RyLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHQvLyBjbG9zaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRlbmNsb3NpbmdMZXZlbCAtPSAxO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gc2tpcCB0aGUgY2xvc2luZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0aSArPSBlbmNsb3NpbmdQYWlyLmNsb3NpbmdTdHJpbmcubGVuZ3RoOyAvLyAob3BlbmluZyBhbmQgY2xvc2luZyBzdHJpbmcgYXJlIHRoZSBzYW1lKVxyXG5cdFx0XHRcdFx0XHRpZiAoaSA+PSBzdHIubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCAtPSAxO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpZiAoUGFyc2VyVXRpbHMuaXNTdHJpbmdBdChzdHIsIGVuY2xvc2luZ1BhaXIub3BlbmluZ1N0cmluZywgaSkpIHtcclxuXHRcdFx0XHRcdC8vIG9wZW5pbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRpZiAocmVtYWluaW5nT3BlbmluZ1N0cmluZ0NvdW50IDw9IHJlbWFpbmluZ0Nsb3NpbmdTdHJpbmdDb3VudCkge1xyXG5cdFx0XHRcdFx0XHQvLyBzdHIgc3RpbGwgaGFzIHN1ZmZpY2llbnQgY2xvc2luZyBzdHJpbmcgdG8gZmluZCB0aGlzIGEgcGFydG5lclxyXG5cdFx0XHRcdFx0XHRlbmNsb3NpbmdMZXZlbCArPSAxO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gc2tpcCB0aGUgb3BlbmluZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0aSArPSBlbmNsb3NpbmdQYWlyLm9wZW5pbmdTdHJpbmcubGVuZ3RoO1xyXG5cdFx0XHRcdFx0XHRpZiAoaSA+PSBzdHIubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCAtPSAxO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoUGFyc2VyVXRpbHMuaXNTdHJpbmdBdChzdHIsIGVuY2xvc2luZ1BhaXIuY2xvc2luZ1N0cmluZywgaSkpIHtcclxuXHRcdFx0XHRcdC8vIGNsb3Npbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRpZiAoZW5jbG9zaW5nTGV2ZWwgPiAwKSB7XHJcblx0XHRcdFx0XHRcdC8vIHRoZXJlIHdhcyBhbiBvcGVuaW5nIHN0cmluZyBiZWZvcmUgdGhpc1xyXG5cdFx0XHRcdFx0XHRlbmNsb3NpbmdMZXZlbCAtPSAxO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gc2tpcCB0aGUgY2xvc2luZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0aSArPSBlbmNsb3NpbmdQYWlyLmNsb3NpbmdTdHJpbmcubGVuZ3RoO1xyXG5cdFx0XHRcdFx0XHRpZiAoaSA+PSBzdHIubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJlbWFpbmluZ0Nsb3NpbmdTdHJpbmdDb3VudCAtPSAxO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKGVuY2xvc2luZ0xldmVsID09PSAwKSB7XHJcblx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBzdWJTdHI7XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgZ2V0SW5CZXR3ZWVuKHN0cjogc3RyaW5nLCBlbmNsb3NpbmdQYWlyOiBFbmNsb3NpbmdQYWlyKTogc3RyaW5nIHwgc3RyaW5nW10ge1xyXG5cdFx0aWYgKCFzdHIpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignc3RyaW5nIG11c3Qgbm90IGJlIGVtcHR5Jyk7XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCA9IFBhcnNlclV0aWxzLm51bWJlck9mT2NjdXJyZW5jZXMoc3RyLCBlbmNsb3NpbmdQYWlyLm9wZW5pbmdTdHJpbmcpO1xyXG5cdFx0bGV0IHJlbWFpbmluZ0Nsb3NpbmdTdHJpbmdDb3VudCA9IFBhcnNlclV0aWxzLm51bWJlck9mT2NjdXJyZW5jZXMoc3RyLCBlbmNsb3NpbmdQYWlyLmNsb3NpbmdTdHJpbmcpO1xyXG5cclxuXHRcdGxldCBlbmNsb3NpbmdMZXZlbDogbnVtYmVyID0gMDtcclxuXHJcblx0XHRsZXQgc3ViU3RyOiBzdHJpbmcgPSAnJztcclxuXHRcdGNvbnN0IHN1YlN0cmluZ3M6IHN0cmluZ1tdID0gW107XHJcblxyXG5cdFx0c3RyTG9vcCA6IGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGlmIChlbmNsb3NpbmdQYWlyLm9wZW5pbmdFcXVhbHNDbG9zaW5nKSB7XHJcblx0XHRcdFx0aWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBlbmNsb3NpbmdQYWlyLm9wZW5pbmdTdHJpbmcsIGkpKSB7XHJcblx0XHRcdFx0XHRpZiAoZW5jbG9zaW5nTGV2ZWwgJSAyID09PSAwICYmIHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCA9PT0gMSkge1xyXG5cdFx0XHRcdFx0XHQvLyBub3QgaW4gYSBwYXJ0IHRoYXQgc2hvdWxkIGJlIHJlbW92ZWQgYW5kIHRoZXJlIGlzIHN0aWxsIGFuIG9wZW5pbmcgc3RyaW5nIGxlZnQsIHNvIHdlIGlnbm9yZSBpdFxyXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChlbmNsb3NpbmdMZXZlbCAlIDIgPT09IDApIHtcclxuXHRcdFx0XHRcdFx0Ly8gb3BlbmluZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0ZW5jbG9zaW5nTGV2ZWwgKz0gMTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIHNraXAgdGhlIG9wZW5pbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblx0XHRcdFx0XHRcdGZvciAobGV0IGogPSAxOyBqIDwgZW5jbG9zaW5nUGFpci5vcGVuaW5nU3RyaW5nLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRcdFx0aSArPSAxO1xyXG5cdFx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmIChpID49IHN0ci5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrIHN0ckxvb3A7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHQvLyBjbG9zaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRlbmNsb3NpbmdMZXZlbCAtPSAxO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gc2tpcCB0aGUgY2xvc2luZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcclxuXHRcdFx0XHRcdFx0Zm9yIChsZXQgaiA9IDE7IGogPCBlbmNsb3NpbmdQYWlyLmNsb3NpbmdTdHJpbmcubGVuZ3RoOyBqKyspIHsgLy8gKG9wZW5pbmcgYW5kIGNsb3Npbmcgc3RyaW5nIGFyZSB0aGUgc2FtZSlcclxuXHRcdFx0XHRcdFx0XHRpICs9IDE7XHJcblx0XHRcdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcclxuXHJcblx0XHRcdFx0XHRcdFx0aWYgKGkgPiBzdHIubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRicmVhayBzdHJMb29wO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRzdWJTdHJpbmdzLnB1c2goc3ViU3RyKTtcclxuXHRcdFx0XHRcdFx0c3ViU3RyID0gJyc7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgLT0gMTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0aWYgKGVuY2xvc2luZ0xldmVsID49IDEpIHtcclxuXHRcdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBlbmNsb3NpbmdQYWlyLm9wZW5pbmdTdHJpbmcsIGkpKSB7XHJcblx0XHRcdFx0XHQvLyBvcGVuaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0aWYgKHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCA8PSByZW1haW5pbmdDbG9zaW5nU3RyaW5nQ291bnQpIHtcclxuXHRcdFx0XHRcdFx0Ly8gc3RyIHN0aWxsIGhhcyBzdWZmaWNpZW50IGNsb3Npbmcgc3RyaW5nIHRvIGZpbmQgdGhpcyBhIHBhcnRuZXJcclxuXHRcdFx0XHRcdFx0ZW5jbG9zaW5nTGV2ZWwgKz0gMTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIGNvcHkgdGhlIG9wZW5pbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblx0XHRcdFx0XHRcdGZvciAobGV0IGogPSAxOyBqIDwgZW5jbG9zaW5nUGFpci5vcGVuaW5nU3RyaW5nLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRcdFx0aSArPSAxO1xyXG5cdFx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmIChpID49IHN0ci5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrIHN0ckxvb3A7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgLT0gMTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBlbmNsb3NpbmdQYWlyLmNsb3NpbmdTdHJpbmcsIGkpKSB7XHJcblx0XHRcdFx0XHQvLyBjbG9zaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0aWYgKGVuY2xvc2luZ0xldmVsID4gMCkge1xyXG5cdFx0XHRcdFx0XHQvLyB0aGVyZSB3YXMgYW4gb3BlbmluZyBzdHJpbmcgYmVmb3JlIHRoaXNcclxuXHRcdFx0XHRcdFx0ZW5jbG9zaW5nTGV2ZWwgLT0gMTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIGNvcHkgdGhlIGNsb3Npbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblx0XHRcdFx0XHRcdGZvciAobGV0IGogPSAxOyBqIDwgZW5jbG9zaW5nUGFpci5jbG9zaW5nU3RyaW5nLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRcdFx0aSArPSAxO1xyXG5cdFx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmIChpID4gc3RyLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0YnJlYWsgc3RyTG9vcDtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdGlmIChlbmNsb3NpbmdMZXZlbCA9PT0gMCkge1xyXG5cdFx0XHRcdFx0XHRcdHN1YlN0cmluZ3MucHVzaChzdWJTdHIpO1xyXG5cdFx0XHRcdFx0XHRcdHN1YlN0ciA9ICcnO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZW1haW5pbmdDbG9zaW5nU3RyaW5nQ291bnQgLT0gMTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0aWYgKGVuY2xvc2luZ0xldmVsID49IDEpIHtcclxuXHRcdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoc3ViU3RyaW5ncy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0cmV0dXJuICcnO1xyXG5cdFx0fSBlbHNlIGlmIChzdWJTdHJpbmdzLmxlbmd0aCA9PT0gMSkge1xyXG5cdFx0XHRyZXR1cm4gc3ViU3RyaW5nc1swXS5zdWJzdHJpbmcoZW5jbG9zaW5nUGFpci5vcGVuaW5nU3RyaW5nLmxlbmd0aCwgc3ViU3RyaW5nc1swXS5sZW5ndGggLSBlbmNsb3NpbmdQYWlyLmNsb3NpbmdTdHJpbmcubGVuZ3RoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJldHVybiBzdWJTdHJpbmdzLm1hcCh4ID0+IHguc3Vic3RyaW5nKGVuY2xvc2luZ1BhaXIub3BlbmluZ1N0cmluZy5sZW5ndGgsIHgubGVuZ3RoIC0gZW5jbG9zaW5nUGFpci5jbG9zaW5nU3RyaW5nLmxlbmd0aCkpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c3RhdGljIGlzU3RyaW5nQXQoc3RyOiBzdHJpbmcsIHN1YlN0cjogc3RyaW5nLCBpbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XHJcblx0XHRpZiAoaW5kZXggPCAwKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ2luZGV4IG11c3QgYmUgZ3JlYXRlciB0aGFuIDAnKTtcclxuXHRcdH1cclxuXHRcdGlmIChpbmRleCA+PSBzdHIubGVuZ3RoKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ2luZGV4IG91dCBvZiBib3VuZHMgb2Ygc3RyaW5nJyk7XHJcblx0XHR9XHJcblx0XHRpZiAoIXN0cikge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdzdHJpbmcgbXVzdCBub3QgYmUgZW1wdHknKTtcclxuXHRcdH1cclxuXHRcdGlmICghc3ViU3RyKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3N1YiBzdHJpbmcgbXVzdCBub3QgYmUgZW1wdHknKTtcclxuXHRcdH1cclxuXHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHN1YlN0ci5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRpZiAoc3RyW2kgKyBpbmRleF0gIT09IHN1YlN0cltpXSkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGNvbnRhaW5zKHN0cjogc3RyaW5nLCBzdWJTdHI6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIFBhcnNlclV0aWxzLm51bWJlck9mT2NjdXJyZW5jZXMoc3RyLCBzdWJTdHIpID4gMDtcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBudW1iZXJPZk9jY3VycmVuY2VzKHN0cjogc3RyaW5nLCBzdWJTdHI6IHN0cmluZyk6IG51bWJlciB7XHJcblx0XHRpZiAoIXN0cikge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdzdHJpbmcgbXVzdCBub3QgYmUgZW1wdHknKTtcclxuXHRcdH1cclxuXHRcdGlmICghc3ViU3RyKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3N1YiBzdHJpbmcgbXVzdCBub3QgYmUgZW1wdHknKTtcclxuXHRcdH1cclxuXHJcblx0XHRsZXQgb2NjdXJyZW5jZXMgPSAwO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0aWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBzdWJTdHIsIGkpKSB7XHJcblx0XHRcdFx0b2NjdXJyZW5jZXMgKz0gMTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBvY2N1cnJlbmNlcztcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7RW5jbG9zaW5nUGFpciwgUGFyc2VyVXRpbHN9IGZyb20gJy4uL3V0aWxzL1BhcnNlclV0aWxzJztcclxuaW1wb3J0IHtpc1RydXRoeSwgTWV0YUJpbmRQYXJzaW5nRXJyb3J9IGZyb20gJy4uL3V0aWxzL1V0aWxzJztcclxuXHJcbmV4cG9ydCBlbnVtIElucHV0RmllbGRUeXBlIHtcclxuXHRUT0dHTEUgPSAndG9nZ2xlJyxcclxuXHRTTElERVIgPSAnc2xpZGVyJyxcclxuXHRURVhUID0gJ3RleHQnLFxyXG5cdFRFWFRfQVJFQSA9ICd0ZXh0X2FyZWEnLFxyXG5cdFNFTEVDVCA9ICdzZWxlY3QnLFxyXG5cdE1VTFRJX1NFTEVDVCA9ICdtdWx0aV9zZWxlY3QnLFxyXG5cdERBVEUgPSAnZGF0ZScsXHJcblx0VElNRSA9ICd0aW1lJyxcclxuXHRJTlZBTElEID0gJ2ludmFsaWQnLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElucHV0RmllbGREZWNsYXJhdGlvbiB7XHJcblx0ZnVsbERlY2xhcmF0aW9uOiBzdHJpbmc7XHJcblx0ZGVjbGFyYXRpb246IHN0cmluZztcclxuXHRpbnB1dEZpZWxkVHlwZTogSW5wdXRGaWVsZFR5cGU7XHJcblx0aXNCb3VuZDogYm9vbGVhbjtcclxuXHRiaW5kVGFyZ2V0OiBzdHJpbmc7XHJcblxyXG5cdGFyZ3VtZW50czogSW5wdXRGaWVsZEFyZ3VtZW50W107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW5wdXRGaWVsZEFyZ3VtZW50IHtcclxuXHRuYW1lOiBzdHJpbmc7XHJcblx0dmFsdWU6IGFueTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlciB7XHJcblx0c3RhdGljIHJvdW5kQnJhY2VzUGFpcjogRW5jbG9zaW5nUGFpciA9IG5ldyBFbmNsb3NpbmdQYWlyKCcoJywgJyknKTtcclxuXHRzdGF0aWMgc3F1YXJlQnJhY2VzUGFpcjogRW5jbG9zaW5nUGFpciA9IG5ldyBFbmNsb3NpbmdQYWlyKCdbJywgJ10nKTtcclxuXHRzdGF0aWMgY3VybHlCcmFjZXNQYWlyOiBFbmNsb3NpbmdQYWlyID0gbmV3IEVuY2xvc2luZ1BhaXIoJ3snLCAnfScpO1xyXG5cdHN0YXRpYyBhbGxCcmFjZXNQYWlyczogRW5jbG9zaW5nUGFpcltdID0gW1xyXG5cdFx0SW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLnJvdW5kQnJhY2VzUGFpcixcclxuXHRcdElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5zcXVhcmVCcmFjZXNQYWlyLFxyXG5cdFx0SW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLmN1cmx5QnJhY2VzUGFpcixcclxuXHRdO1xyXG5cclxuXHJcblx0c3RhdGljIHBhcnNlKGZ1bGxEZWNsYXJhdGlvbjogc3RyaW5nKTogSW5wdXRGaWVsZERlY2xhcmF0aW9uIHtcclxuXHRcdGNvbnN0IGlucHV0RmllbGREZWNsYXJhdGlvbjogSW5wdXRGaWVsZERlY2xhcmF0aW9uID0ge30gYXMgSW5wdXRGaWVsZERlY2xhcmF0aW9uO1xyXG5cclxuXHRcdC8vIGRlY2xhcmF0aW9uXHJcblx0XHRpbnB1dEZpZWxkRGVjbGFyYXRpb24uZnVsbERlY2xhcmF0aW9uID0gZnVsbERlY2xhcmF0aW9uO1xyXG5cdFx0aW5wdXRGaWVsZERlY2xhcmF0aW9uLmRlY2xhcmF0aW9uID0gUGFyc2VyVXRpbHMuZ2V0SW5CZXR3ZWVuKGZ1bGxEZWNsYXJhdGlvbiwgSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLnNxdWFyZUJyYWNlc1BhaXIpIGFzIHN0cmluZztcclxuXHJcblx0XHQvLyBkZWNsYXJhdGlvbiBwYXJ0c1xyXG5cdFx0Y29uc3QgZGVjbGFyYXRpb25QYXJ0czogc3RyaW5nW10gPSBQYXJzZXJVdGlscy5zcGxpdChpbnB1dEZpZWxkRGVjbGFyYXRpb24uZGVjbGFyYXRpb24sICc6JywgSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLnNxdWFyZUJyYWNlc1BhaXIpO1xyXG5cclxuXHRcdC8vIGJpbmQgdGFyZ2V0XHJcblx0XHRpbnB1dEZpZWxkRGVjbGFyYXRpb24uYmluZFRhcmdldCA9IGRlY2xhcmF0aW9uUGFydHNbMV0gPz8gJyc7XHJcblx0XHRpbnB1dEZpZWxkRGVjbGFyYXRpb24uaXNCb3VuZCA9IGlzVHJ1dGh5KGlucHV0RmllbGREZWNsYXJhdGlvbi5iaW5kVGFyZ2V0KTtcclxuXHJcblx0XHQvLyBpbnB1dCBmaWVsZCB0eXBlIGFuZCBhcmd1bWVudHNcclxuXHRcdGNvbnN0IGlucHV0RmllbGRUeXBlV2l0aEFyZ3VtZW50czogc3RyaW5nID0gZGVjbGFyYXRpb25QYXJ0c1swXTtcclxuXHRcdC8vIGlucHV0IGZpZWxkIHR5cGVcclxuXHRcdGNvbnN0IGlucHV0RmllbGRUeXBlU3RyaW5nID0gUGFyc2VyVXRpbHMucmVtb3ZlSW5CZXR3ZWVuKGlucHV0RmllbGRUeXBlV2l0aEFyZ3VtZW50cywgSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLnJvdW5kQnJhY2VzUGFpcik7XHJcblx0XHRpbnB1dEZpZWxkRGVjbGFyYXRpb24uaW5wdXRGaWVsZFR5cGUgPSBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIuZ2V0SW5wdXRGaWVsZFR5cGUoaW5wdXRGaWVsZFR5cGVTdHJpbmcpO1xyXG5cdFx0aWYgKGlucHV0RmllbGREZWNsYXJhdGlvbi5pbnB1dEZpZWxkVHlwZSA9PT0gSW5wdXRGaWVsZFR5cGUuSU5WQUxJRCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRQYXJzaW5nRXJyb3IoYHVua25vd24gaW5wdXQgZmllbGQgdHlwZSBcXCcke2lucHV0RmllbGRUeXBlU3RyaW5nfVxcJ2ApO1xyXG5cdFx0fVxyXG5cdFx0Ly8gYXJndW1lbnRzXHJcblx0XHRjb25zdCBpbnB1dEZpZWxkQXJndW1lbnRzU3RyaW5nOiBzdHJpbmcgPSBQYXJzZXJVdGlscy5nZXRJbkJldHdlZW4oaW5wdXRGaWVsZFR5cGVXaXRoQXJndW1lbnRzLCBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIucm91bmRCcmFjZXNQYWlyKSBhcyBzdHJpbmc7XHJcblx0XHQvLyBjb25zb2xlLmxvZyhpbnB1dEZpZWxkQXJndW1lbnRzU3RyaW5nKTtcclxuXHRcdGlmIChpbnB1dEZpZWxkQXJndW1lbnRzU3RyaW5nKSB7XHJcblx0XHRcdGlucHV0RmllbGREZWNsYXJhdGlvbi5hcmd1bWVudHMgPSBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIucGFyc2VBcmd1bWVudHMoaW5wdXRGaWVsZEFyZ3VtZW50c1N0cmluZywgaW5wdXRGaWVsZERlY2xhcmF0aW9uLmlucHV0RmllbGRUeXBlKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlucHV0RmllbGREZWNsYXJhdGlvbi5hcmd1bWVudHMgPSBbXTtcclxuXHRcdH1cclxuXHRcdC8vIGNvbnNvbGUubG9nKGlucHV0RmllbGREZWNsYXJhdGlvbi5hcmd1bWVudHMpO1xyXG5cclxuXHRcdHJldHVybiBpbnB1dEZpZWxkRGVjbGFyYXRpb247XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgcGFyc2VBcmd1bWVudHMoaW5wdXRGaWVsZEFyZ3VtZW50c1N0cmluZzogc3RyaW5nLCBpbnB1dEZpZWxkVHlwZTogSW5wdXRGaWVsZFR5cGUpOiBJbnB1dEZpZWxkQXJndW1lbnRbXSB7XHJcblx0XHQvLyBjb25zb2xlLmxvZygnaW5wdXRGaWVsZEFyZ3VtZW50c1N0cmluZycsIGlucHV0RmllbGRBcmd1bWVudHNTdHJpbmcpO1xyXG5cdFx0bGV0IGlucHV0RmllbGRBcmd1bWVudFN0cmluZ3M6IHN0cmluZ1tdID0gUGFyc2VyVXRpbHMuc3BsaXQoaW5wdXRGaWVsZEFyZ3VtZW50c1N0cmluZywgJywnLCBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIucm91bmRCcmFjZXNQYWlyKTtcclxuXHRcdGlucHV0RmllbGRBcmd1bWVudFN0cmluZ3MgPSBpbnB1dEZpZWxkQXJndW1lbnRTdHJpbmdzLm1hcCh4ID0+IHgudHJpbSgpKTtcclxuXHJcblx0XHRjb25zdCBpbnB1dEZpZWxkQXJndW1lbnRzOiBJbnB1dEZpZWxkQXJndW1lbnRbXSA9IFtdO1xyXG5cclxuXHRcdGZvciAoY29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50U3RyaW5nIG9mIGlucHV0RmllbGRBcmd1bWVudFN0cmluZ3MpIHtcclxuXHRcdFx0Y29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50TmFtZTogc3RyaW5nID0gSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLmV4dHJhY3RJbnB1dEZpZWxkQXJndW1lbnROYW1lKGlucHV0RmllbGRBcmd1bWVudFN0cmluZyk7XHJcblx0XHRcdC8vIGNvbnNvbGUubG9nKGlucHV0RmllbGRBcmd1bWVudE5hbWUpO1xyXG5cclxuXHRcdFx0aWYgKGlucHV0RmllbGRBcmd1bWVudE5hbWUgPT09ICdjbGFzcycpIHtcclxuXHRcdFx0XHRjb25zdCBpbnB1dEZpZWxkQXJndW1lbnRWYWx1ZTogc3RyaW5nID0gSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLmV4dHJhY3RJbnB1dEZpZWxkQXJndW1lbnRWYWx1ZShpbnB1dEZpZWxkQXJndW1lbnRTdHJpbmcpO1xyXG5cclxuXHRcdFx0XHRjb25zdCBpbnB1dEZpZWxkQ2xhc3NBcmd1bWVudDogSW5wdXRGaWVsZEFyZ3VtZW50ID0ge25hbWU6IGlucHV0RmllbGRBcmd1bWVudE5hbWUsIHZhbHVlOiBpbnB1dEZpZWxkQXJndW1lbnRWYWx1ZX07XHJcblx0XHRcdFx0aW5wdXRGaWVsZEFyZ3VtZW50cy5wdXNoKGlucHV0RmllbGRDbGFzc0FyZ3VtZW50KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZWxzZSBpZiAoaW5wdXRGaWVsZEFyZ3VtZW50TmFtZSA9PT0gJ2FkZExhYmVscycpIHtcclxuXHRcdFx0XHRpZiAoaW5wdXRGaWVsZFR5cGUgIT09IElucHV0RmllbGRUeXBlLlNMSURFUikge1xyXG5cdFx0XHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kUGFyc2luZ0Vycm9yKGBhcmd1bWVudCBcXCcke2lucHV0RmllbGRBcmd1bWVudE5hbWV9XFwnIGlzIG9ubHkgYXBwbGljYWJsZSB0byBzbGlkZXIgaW5wdXQgZmllbGRzYCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpbnB1dEZpZWxkQXJndW1lbnRzLnB1c2goe25hbWU6ICdsYWJlbHMnLCB2YWx1ZTogdHJ1ZX0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRlbHNlIGlmIChpbnB1dEZpZWxkQXJndW1lbnROYW1lID09PSAnbWluVmFsdWUnKSB7XHJcblx0XHRcdFx0aWYgKGlucHV0RmllbGRUeXBlICE9PSBJbnB1dEZpZWxkVHlwZS5TTElERVIpIHtcclxuXHRcdFx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcihgYXJndW1lbnQgXFwnJHtpbnB1dEZpZWxkQXJndW1lbnROYW1lfVxcJyBpcyBvbmx5IGFwcGxpY2FibGUgdG8gc2xpZGVyIGlucHV0IGZpZWxkc2ApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50VmFsdWU6IHN0cmluZyA9IElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5leHRyYWN0SW5wdXRGaWVsZEFyZ3VtZW50VmFsdWUoaW5wdXRGaWVsZEFyZ3VtZW50U3RyaW5nKTtcclxuXHRcdFx0XHRjb25zdCBpbnB1dEZpZWxkQXJndW1lbnRWYWx1ZUFzTnVtYmVyOiBudW1iZXIgPSBOdW1iZXIucGFyc2VJbnQoaW5wdXRGaWVsZEFyZ3VtZW50VmFsdWUpO1xyXG5cclxuXHRcdFx0XHRpZiAoTnVtYmVyLmlzTmFOKGlucHV0RmllbGRBcmd1bWVudFZhbHVlQXNOdW1iZXIpKSB7XHJcblx0XHRcdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRQYXJzaW5nRXJyb3IoYGFyZ3VtZW50IFxcJyR7aW5wdXRGaWVsZEFyZ3VtZW50TmFtZX1cXCcgdmFsdWUgbXVzdCBiZSBvZiB0eXBlIG51bWJlcmApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50T2JqZWN0OiBJbnB1dEZpZWxkQXJndW1lbnQgPSB7bmFtZTogaW5wdXRGaWVsZEFyZ3VtZW50TmFtZSwgdmFsdWU6IGlucHV0RmllbGRBcmd1bWVudFZhbHVlQXNOdW1iZXJ9O1xyXG5cdFx0XHRcdGlucHV0RmllbGRBcmd1bWVudHMucHVzaChpbnB1dEZpZWxkQXJndW1lbnRPYmplY3QpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRlbHNlIGlmIChpbnB1dEZpZWxkQXJndW1lbnROYW1lID09PSAnbWF4VmFsdWUnKSB7XHJcblx0XHRcdFx0aWYgKGlucHV0RmllbGRUeXBlICE9PSBJbnB1dEZpZWxkVHlwZS5TTElERVIpIHtcclxuXHRcdFx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcihgYXJndW1lbnQgXFwnJHtpbnB1dEZpZWxkQXJndW1lbnROYW1lfVxcJyBpcyBvbmx5IGFwcGxpY2FibGUgdG8gc2xpZGVyIGlucHV0IGZpZWxkc2ApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50VmFsdWU6IHN0cmluZyA9IElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5leHRyYWN0SW5wdXRGaWVsZEFyZ3VtZW50VmFsdWUoaW5wdXRGaWVsZEFyZ3VtZW50U3RyaW5nKTtcclxuXHRcdFx0XHRjb25zdCBpbnB1dEZpZWxkQXJndW1lbnRWYWx1ZUFzTnVtYmVyOiBudW1iZXIgPSBOdW1iZXIucGFyc2VJbnQoaW5wdXRGaWVsZEFyZ3VtZW50VmFsdWUpO1xyXG5cclxuXHRcdFx0XHRpZiAoTnVtYmVyLmlzTmFOKGlucHV0RmllbGRBcmd1bWVudFZhbHVlQXNOdW1iZXIpKSB7XHJcblx0XHRcdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRQYXJzaW5nRXJyb3IoYGFyZ3VtZW50IFxcJyR7aW5wdXRGaWVsZEFyZ3VtZW50TmFtZX1cXCcgdmFsdWUgbXVzdCBiZSBvZiB0eXBlIG51bWJlcmApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50T2JqZWN0OiBJbnB1dEZpZWxkQXJndW1lbnQgPSB7bmFtZTogaW5wdXRGaWVsZEFyZ3VtZW50TmFtZSwgdmFsdWU6IGlucHV0RmllbGRBcmd1bWVudFZhbHVlQXNOdW1iZXJ9O1xyXG5cdFx0XHRcdGlucHV0RmllbGRBcmd1bWVudHMucHVzaChpbnB1dEZpZWxkQXJndW1lbnRPYmplY3QpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRlbHNlIGlmIChpbnB1dEZpZWxkQXJndW1lbnROYW1lID09PSAnb3B0aW9uJykge1xyXG5cdFx0XHRcdGlmIChpbnB1dEZpZWxkVHlwZSAhPT0gSW5wdXRGaWVsZFR5cGUuU0VMRUNUICYmIGlucHV0RmllbGRUeXBlICE9PSBJbnB1dEZpZWxkVHlwZS5NVUxUSV9TRUxFQ1QpIHtcclxuXHRcdFx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcihgYXJndW1lbnQgXFwnJHtpbnB1dEZpZWxkQXJndW1lbnROYW1lfVxcJyBpcyBvbmx5IGFwcGxpY2FibGUgdG8gc2VsZWN0IGFuZCBtdWx0aS1zZWxlY3QgaW5wdXQgZmllbGRzYCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjb25zdCBpbnB1dEZpZWxkQXJndW1lbnRWYWx1ZTogc3RyaW5nID0gSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLmV4dHJhY3RJbnB1dEZpZWxkQXJndW1lbnRWYWx1ZShpbnB1dEZpZWxkQXJndW1lbnRTdHJpbmcpO1xyXG5cclxuXHRcdFx0XHRjb25zdCBpbnB1dEZpZWxkQXJndW1lbnRPYmplY3Q6IElucHV0RmllbGRBcmd1bWVudCA9IHtuYW1lOiBpbnB1dEZpZWxkQXJndW1lbnROYW1lLCB2YWx1ZTogaW5wdXRGaWVsZEFyZ3VtZW50VmFsdWV9O1xyXG5cdFx0XHRcdGlucHV0RmllbGRBcmd1bWVudHMucHVzaChpbnB1dEZpZWxkQXJndW1lbnRPYmplY3QpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRlbHNlIGlmIChpbnB1dEZpZWxkQXJndW1lbnROYW1lID09PSAndGl0bGUnKSB7XHJcblx0XHRcdFx0aWYgKGlucHV0RmllbGRUeXBlICE9PSBJbnB1dEZpZWxkVHlwZS5TRUxFQ1QgJiYgaW5wdXRGaWVsZFR5cGUgIT09IElucHV0RmllbGRUeXBlLk1VTFRJX1NFTEVDVCkge1xyXG5cdFx0XHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kUGFyc2luZ0Vycm9yKGBhcmd1bWVudCBcXCcke2lucHV0RmllbGRBcmd1bWVudE5hbWV9XFwnIGlzIG9ubHkgYXBwbGljYWJsZSB0byBzZWxlY3QgYW5kIG11bHRpLXNlbGVjdCBpbnB1dCBmaWVsZHNgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGNvbnN0IGlucHV0RmllbGRBcmd1bWVudFZhbHVlOiBzdHJpbmcgPSBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIuZXh0cmFjdElucHV0RmllbGRBcmd1bWVudFZhbHVlKGlucHV0RmllbGRBcmd1bWVudFN0cmluZyk7XHJcblxyXG5cdFx0XHRcdGNvbnN0IGlucHV0RmllbGRBcmd1bWVudE9iamVjdDogSW5wdXRGaWVsZEFyZ3VtZW50ID0ge25hbWU6IGlucHV0RmllbGRBcmd1bWVudE5hbWUsIHZhbHVlOiBpbnB1dEZpZWxkQXJndW1lbnRWYWx1ZX07XHJcblx0XHRcdFx0aW5wdXRGaWVsZEFyZ3VtZW50cy5wdXNoKGlucHV0RmllbGRBcmd1bWVudE9iamVjdCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcihgdW5rbm93biBhcmd1bWVudCBcXCcke2lucHV0RmllbGRBcmd1bWVudE5hbWV9XFwnYCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gaW5wdXRGaWVsZEFyZ3VtZW50cztcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBleHRyYWN0SW5wdXRGaWVsZEFyZ3VtZW50TmFtZShhcmd1bWVudFN0cmluZzogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBQYXJzZXJVdGlscy5yZW1vdmVJbkJldHdlZW4oYXJndW1lbnRTdHJpbmcsIElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5yb3VuZEJyYWNlc1BhaXIpO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGV4dHJhY3RJbnB1dEZpZWxkQXJndW1lbnRWYWx1ZShhcmd1bWVudFN0cmluZzogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdGNvbnN0IGFyZ3VtZW50TmFtZSA9IHRoaXMuZXh0cmFjdElucHV0RmllbGRBcmd1bWVudE5hbWUoYXJndW1lbnRTdHJpbmcpO1xyXG5cclxuXHRcdGNvbnN0IGFyZ3VtZW50VmFsdWUgPSBQYXJzZXJVdGlscy5nZXRJbkJldHdlZW4oYXJndW1lbnRTdHJpbmcsIElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5yb3VuZEJyYWNlc1BhaXIpIGFzIHN0cmluZztcclxuXHRcdGlmICghYXJndW1lbnRWYWx1ZSkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRQYXJzaW5nRXJyb3IoYGFyZ3VtZW50IFxcJyR7YXJndW1lbnROYW1lfVxcJyByZXF1aXJlcyBhIG5vbiBlbXB0eSB2YWx1ZWApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBhcmd1bWVudFZhbHVlO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGdldElucHV0RmllbGRUeXBlKHN0cjogc3RyaW5nKTogSW5wdXRGaWVsZFR5cGUge1xyXG5cdFx0Zm9yIChjb25zdCBlbnRyeSBvZiBPYmplY3QuZW50cmllcyhJbnB1dEZpZWxkVHlwZSkpIHtcclxuXHRcdFx0aWYgKGVudHJ5WzFdID09PSBzdHIpIHtcclxuXHRcdFx0XHRyZXR1cm4gZW50cnlbMV07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gSW5wdXRGaWVsZFR5cGUuSU5WQUxJRDtcclxuXHR9XHJcblxyXG59XHJcbiIsICJpbXBvcnQge1RvZ2dsZUlucHV0RmllbGR9IGZyb20gJy4vVG9nZ2xlSW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7SW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZX0gZnJvbSAnLi4vSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQnO1xyXG5pbXBvcnQge1RleHRJbnB1dEZpZWxkfSBmcm9tICcuL1RleHRJbnB1dEZpZWxkJztcclxuaW1wb3J0IHtTbGlkZXJJbnB1dEZpZWxkfSBmcm9tICcuL1NsaWRlcklucHV0RmllbGQnO1xyXG5pbXBvcnQge1RleHRBcmVhSW5wdXRGaWVsZH0gZnJvbSAnLi9UZXh0QXJlYUlucHV0RmllbGQnO1xyXG5pbXBvcnQge1NlbGVjdElucHV0RmllbGR9IGZyb20gJy4vU2VsZWN0SW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7TXVsdGlTZWxlY3RJbnB1dEZpZWxkfSBmcm9tICcuL011bHRpU2VsZWN0SW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7RGF0ZUlucHV0RmllbGR9IGZyb20gJy4vRGF0ZUlucHV0RmllbGQnO1xyXG5pbXBvcnQge1RpbWVJbnB1dEZpZWxkfSBmcm9tICcuL1RpbWVJbnB1dEZpZWxkJztcclxuaW1wb3J0IHtNZXRhQmluZFBhcnNpbmdFcnJvcn0gZnJvbSAnLi4vdXRpbHMvVXRpbHMnO1xyXG5pbXBvcnQge0Fic3RyYWN0SW5wdXRGaWVsZH0gZnJvbSAnLi9BYnN0cmFjdElucHV0RmllbGQnO1xyXG5pbXBvcnQge0lucHV0RmllbGRUeXBlfSBmcm9tICcuLi9wYXJzZXJzL0lucHV0RmllbGREZWNsYXJhdGlvblBhcnNlcic7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIElucHV0RmllbGRGYWN0b3J5IHtcclxuXHRzdGF0aWMgYWxsb3dDb2RlQmxvY2tNYXA6IFJlY29yZDxzdHJpbmcsIHsgY29kZUJsb2NrOiBib29sZWFuLCBpbmxpbmVDb2RlQmxvY2s6IGJvb2xlYW4gfT4gPSB7XHJcblx0XHRbSW5wdXRGaWVsZFR5cGUuVE9HR0xFXTogeyBjb2RlQmxvY2s6IFRvZ2dsZUlucHV0RmllbGQuYWxsb3dDb2RlQmxvY2ssIGlubGluZUNvZGVCbG9jazogVG9nZ2xlSW5wdXRGaWVsZC5hbGxvd0lubGluZUNvZGVCbG9jayB9LFxyXG5cdFx0W0lucHV0RmllbGRUeXBlLlNMSURFUl06IHsgY29kZUJsb2NrOiBTbGlkZXJJbnB1dEZpZWxkLmFsbG93Q29kZUJsb2NrLCBpbmxpbmVDb2RlQmxvY2s6IFNsaWRlcklucHV0RmllbGQuYWxsb3dJbmxpbmVDb2RlQmxvY2sgfSxcclxuXHRcdFtJbnB1dEZpZWxkVHlwZS5URVhUXTogeyBjb2RlQmxvY2s6IFRleHRJbnB1dEZpZWxkLmFsbG93Q29kZUJsb2NrLCBpbmxpbmVDb2RlQmxvY2s6IFRleHRJbnB1dEZpZWxkLmFsbG93SW5saW5lQ29kZUJsb2NrIH0sXHJcblx0XHRbSW5wdXRGaWVsZFR5cGUuVEVYVF9BUkVBXTogeyBjb2RlQmxvY2s6IFRleHRBcmVhSW5wdXRGaWVsZC5hbGxvd0NvZGVCbG9jaywgaW5saW5lQ29kZUJsb2NrOiBUZXh0QXJlYUlucHV0RmllbGQuYWxsb3dJbmxpbmVDb2RlQmxvY2sgfSxcclxuXHRcdFtJbnB1dEZpZWxkVHlwZS5TRUxFQ1RdOiB7IGNvZGVCbG9jazogU2VsZWN0SW5wdXRGaWVsZC5hbGxvd0NvZGVCbG9jaywgaW5saW5lQ29kZUJsb2NrOiBTZWxlY3RJbnB1dEZpZWxkLmFsbG93SW5saW5lQ29kZUJsb2NrIH0sXHJcblx0XHRbSW5wdXRGaWVsZFR5cGUuTVVMVElfU0VMRUNUXTogeyBjb2RlQmxvY2s6IE11bHRpU2VsZWN0SW5wdXRGaWVsZC5hbGxvd0NvZGVCbG9jaywgaW5saW5lQ29kZUJsb2NrOiBNdWx0aVNlbGVjdElucHV0RmllbGQuYWxsb3dJbmxpbmVDb2RlQmxvY2sgfSxcclxuXHRcdFtJbnB1dEZpZWxkVHlwZS5EQVRFXTogeyBjb2RlQmxvY2s6IERhdGVJbnB1dEZpZWxkLmFsbG93Q29kZUJsb2NrLCBpbmxpbmVDb2RlQmxvY2s6IERhdGVJbnB1dEZpZWxkLmFsbG93SW5saW5lQ29kZUJsb2NrIH0sXHJcblx0XHRbSW5wdXRGaWVsZFR5cGUuVElNRV06IHsgY29kZUJsb2NrOiBUaW1lSW5wdXRGaWVsZC5hbGxvd0NvZGVCbG9jaywgaW5saW5lQ29kZUJsb2NrOiBUaW1lSW5wdXRGaWVsZC5hbGxvd0lubGluZUNvZGVCbG9jayB9LFxyXG5cdH1cclxuXHJcblx0c3RhdGljIGNyZWF0ZUlucHV0RmllbGQoaW5wdXRGaWVsZFR5cGU6IElucHV0RmllbGRUeXBlLCBhcmdzOiB7IHR5cGU6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZSwgaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBvblZhbHVlQ2hhbmdlZDogKHZhbHVlOiBhbnkpID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+IH0pOiBBYnN0cmFjdElucHV0RmllbGQgfCB1bmRlZmluZWQge1xyXG5cdFx0aWYgKGlucHV0RmllbGRUeXBlID09PSBJbnB1dEZpZWxkVHlwZS5UT0dHTEUpIHtcclxuXHRcdFx0SW5wdXRGaWVsZEZhY3RvcnkuY2hlY2tJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGVBbGxvd2VkKGlucHV0RmllbGRUeXBlLCBhcmdzLnR5cGUpO1xyXG5cdFx0XHRyZXR1cm4gbmV3IFRvZ2dsZUlucHV0RmllbGQoYXJncy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgYXJncy5vblZhbHVlQ2hhbmdlZCk7XHJcblx0XHR9IGVsc2UgaWYgKGlucHV0RmllbGRUeXBlID09PSBJbnB1dEZpZWxkVHlwZS5TTElERVIpIHtcclxuXHRcdFx0SW5wdXRGaWVsZEZhY3RvcnkuY2hlY2tJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGVBbGxvd2VkKGlucHV0RmllbGRUeXBlLCBhcmdzLnR5cGUpO1xyXG5cdFx0XHRyZXR1cm4gbmV3IFNsaWRlcklucHV0RmllbGQoYXJncy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgYXJncy5vblZhbHVlQ2hhbmdlZCk7XHJcblx0XHR9IGVsc2UgaWYgKGlucHV0RmllbGRUeXBlID09PSBJbnB1dEZpZWxkVHlwZS5URVhUKSB7XHJcblx0XHRcdElucHV0RmllbGRGYWN0b3J5LmNoZWNrSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlQWxsb3dlZChpbnB1dEZpZWxkVHlwZSwgYXJncy50eXBlKTtcclxuXHRcdFx0cmV0dXJuIG5ldyBUZXh0SW5wdXRGaWVsZChhcmdzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBhcmdzLm9uVmFsdWVDaGFuZ2VkKTtcclxuXHRcdH0gZWxzZSBpZiAoaW5wdXRGaWVsZFR5cGUgPT09IElucHV0RmllbGRUeXBlLlRFWFRfQVJFQSkge1xyXG5cdFx0XHRJbnB1dEZpZWxkRmFjdG9yeS5jaGVja0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZUFsbG93ZWQoaW5wdXRGaWVsZFR5cGUsIGFyZ3MudHlwZSk7XHJcblx0XHRcdHJldHVybiBuZXcgVGV4dEFyZWFJbnB1dEZpZWxkKGFyZ3MuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIGFyZ3Mub25WYWx1ZUNoYW5nZWQpO1xyXG5cdFx0fSBlbHNlIGlmIChpbnB1dEZpZWxkVHlwZSA9PT0gSW5wdXRGaWVsZFR5cGUuU0VMRUNUKSB7XHJcblx0XHRcdElucHV0RmllbGRGYWN0b3J5LmNoZWNrSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlQWxsb3dlZChpbnB1dEZpZWxkVHlwZSwgYXJncy50eXBlKTtcclxuXHRcdFx0cmV0dXJuIG5ldyBTZWxlY3RJbnB1dEZpZWxkKGFyZ3MuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIGFyZ3Mub25WYWx1ZUNoYW5nZWQpO1xyXG5cdFx0fSBlbHNlIGlmIChpbnB1dEZpZWxkVHlwZSA9PT0gSW5wdXRGaWVsZFR5cGUuTVVMVElfU0VMRUNUKSB7XHJcblx0XHRcdElucHV0RmllbGRGYWN0b3J5LmNoZWNrSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlQWxsb3dlZChpbnB1dEZpZWxkVHlwZSwgYXJncy50eXBlKTtcclxuXHRcdFx0cmV0dXJuIG5ldyBNdWx0aVNlbGVjdElucHV0RmllbGQoYXJncy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgYXJncy5vblZhbHVlQ2hhbmdlZCk7XHJcblx0XHR9IGVsc2UgaWYgKGlucHV0RmllbGRUeXBlID09PSBJbnB1dEZpZWxkVHlwZS5EQVRFKSB7XHJcblx0XHRcdElucHV0RmllbGRGYWN0b3J5LmNoZWNrSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlQWxsb3dlZChpbnB1dEZpZWxkVHlwZSwgYXJncy50eXBlKTtcclxuXHRcdFx0cmV0dXJuIG5ldyBEYXRlSW5wdXRGaWVsZChhcmdzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBhcmdzLm9uVmFsdWVDaGFuZ2VkKTtcclxuXHRcdH0gZWxzZSBpZiAoaW5wdXRGaWVsZFR5cGUgPT09IElucHV0RmllbGRUeXBlLlRJTUUpIHtcclxuXHRcdFx0SW5wdXRGaWVsZEZhY3RvcnkuY2hlY2tJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGVBbGxvd2VkKGlucHV0RmllbGRUeXBlLCBhcmdzLnR5cGUpO1xyXG5cdFx0XHRyZXR1cm4gbmV3IFRpbWVJbnB1dEZpZWxkKGFyZ3MuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIGFyZ3Mub25WYWx1ZUNoYW5nZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB1bmRlZmluZWQ7XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgY2hlY2tJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGVBbGxvd2VkKGlucHV0RmllbGRUeXBlOiBJbnB1dEZpZWxkVHlwZSwgdHlwZTogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlKTogdm9pZCB7XHJcblx0XHRjb25zdCBhbGxvd0NvZGVCbG9jazogeyBjb2RlQmxvY2s6IGJvb2xlYW47IGlubGluZUNvZGVCbG9jazogYm9vbGVhbiB9ID0gSW5wdXRGaWVsZEZhY3RvcnkuYWxsb3dDb2RlQmxvY2tNYXBbaW5wdXRGaWVsZFR5cGVdO1xyXG5cdFx0aWYgKHR5cGUgPT09IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZS5DT0RFX0JMT0NLICYmICFhbGxvd0NvZGVCbG9jay5jb2RlQmxvY2spIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kUGFyc2luZ0Vycm9yKGBcXCcke2lucHV0RmllbGRUeXBlfVxcJyBpcyBub3QgYWxsb3dlZCBhcyBjb2RlIGJsb2NrYCk7XHJcblx0XHR9XHJcblx0XHRpZiAodHlwZSA9PT0gSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlLklOTElORV9DT0RFX0JMT0NLICYmICFhbGxvd0NvZGVCbG9jay5pbmxpbmVDb2RlQmxvY2spIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kUGFyc2luZ0Vycm9yKGBcXCcke2lucHV0RmllbGRUeXBlfVxcJyBpcyBub3QgYWxsb3dlZCBhcyBpbmxpbmUgY29kZSBibG9ja2ApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcbn1cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHdCQUFzRDs7O0FDQXRELHNCQUE2QztBQVl0QyxJQUFNLG1CQUEyQztBQUFBLEVBQ3ZELFNBQVM7QUFBQSxFQUNULHFCQUFxQjtBQUFBLEVBQ3JCLHFCQUFxQjtBQUFBLEVBQ3JCLGNBQWM7QUFBQSxFQUNkLGlCQUFpQjtBQUFBLEVBQ2pCLGlCQUFpQjtBQUNsQjtBQUVPLElBQU0scUJBQU4sY0FBaUMsaUNBQWlCO0FBQUEsRUFHeEQsWUFBWSxLQUFVLFFBQXdCO0FBQzdDLFVBQU0sS0FBSyxNQUFNO0FBQ2pCLFNBQUssU0FBUztBQUFBLEVBQ2Y7QUFBQSxFQUVBLFVBQWdCO0FBQ2YsVUFBTSxFQUFDLGdCQUFlO0FBRXRCLGdCQUFZLE1BQU07QUFFbEIsZ0JBQVksU0FBUyxNQUFNLEVBQUMsTUFBTSw0QkFBMkIsQ0FBQztBQUU5RCxRQUFJLHdCQUFRLFdBQVcsRUFDckIsUUFBUSxlQUFlLEVBQ3ZCLFFBQVEseUpBQXlKLGlCQUFpQiwwQkFBMEIsaUJBQWlCLDZCQUE2QixpQkFBaUIsaUJBQWlCLEVBQzVSLFFBQVEsUUFBTTtBQUNkLFNBQUcsU0FBUyxLQUFLLE9BQU8sU0FBUyxhQUFhLFNBQVMsQ0FBQztBQUN4RCxTQUFHLFNBQVMsVUFBUTtBQUNuQixhQUFLLE9BQU8sU0FBUyxlQUFlLE9BQU8sU0FBUyxJQUFJO0FBQ3hELFlBQUksT0FBTyxNQUFNLEtBQUssT0FBTyxTQUFTLFlBQVksR0FBRztBQUNwRCxlQUFLLE9BQU8sU0FBUyxlQUFlLGlCQUFpQjtBQUFBLFFBQ3REO0FBQ0EsWUFBSSxLQUFLLE9BQU8sU0FBUyxlQUFlLGlCQUFpQixpQkFBaUI7QUFDekUsZUFBSyxPQUFPLFNBQVMsZUFBZSxpQkFBaUI7QUFBQSxRQUN0RDtBQUNB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
