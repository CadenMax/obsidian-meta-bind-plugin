"use strict";
/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod2) => __copyProps(__defProp({}, "__esModule", { value: true }), mod2);
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MetaBindPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian10 = require("obsidian");

// src/settings/Settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  devMode: false,
  preferredDateFormat: "YYYY-MM-DD",
  useUsDateInputOrder: false,
  syncInterval: 200,
  minSyncInterval: 50,
  maxSyncInterval: 1e3
};
var MetaBindSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Meta Bind Plugin Settings" });
    new import_obsidian.Setting(containerEl).setName("Sync interval").setDesc(`The interval in milli-seconds between disk writes. Changing this number is not recommended except if your hard drive is exceptionally slow. Standard: ${DEFAULT_SETTINGS.syncInterval}; Minimum: ${DEFAULT_SETTINGS.minSyncInterval}; Maximum: ${DEFAULT_SETTINGS.maxSyncInterval}`).addText((cb) => {
      cb.setValue(this.plugin.settings.syncInterval.toString());
      cb.onChange((data) => {
        this.plugin.settings.syncInterval = Number.parseInt(data);
        if (Number.isNaN(this.plugin.settings.syncInterval)) {
          this.plugin.settings.syncInterval = DEFAULT_SETTINGS.syncInterval;
        }
        if (this.plugin.settings.syncInterval < DEFAULT_SETTINGS.minSyncInterval) {
          this.plugin.settings.syncInterval = DEFAULT_SETTINGS.minSyncInterval;
        }
        if (this.plugin.settings.syncInterval > DEFAULT_SETTINGS.maxSyncInterval) {
          this.plugin.settings.syncInterval = DEFAULT_SETTINGS.maxSyncInterval;
        }
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Date format").setDesc(`The date format to be used by this plugin.`).addText((cb) => {
      cb.setValue(this.plugin.settings.preferredDateFormat);
      cb.onChange((data) => {
        this.plugin.settings.preferredDateFormat = data;
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Use US date input field order").setDesc(`When enabled the month input is before the day input.`).addToggle((cb) => {
      cb.setValue(this.plugin.settings.useUsDateInputOrder);
      cb.onChange((data) => {
        this.plugin.settings.useUsDateInputOrder = data;
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Dev Mode").setDesc("Enable dev mode. Not recommended unless you want to debug this plugin.").addToggle((cb) => {
      cb.setValue(this.plugin.settings.devMode);
      cb.onChange((data) => {
        this.plugin.settings.devMode = data;
        this.plugin.saveSettings();
      });
    });
  }
};

// src/InputFieldMarkdownRenderChild.ts
var import_obsidian9 = require("obsidian");

// src/utils/Logger.ts
var _Logger = class {
  static log(...data) {
    console.log(this.prefix, ...data);
  }
  static logDebug(...data) {
    if (this.devMode) {
      _Logger.log(...data);
    }
  }
  static logWarning(...data) {
    console.warn(this.prefix, data);
  }
  static logError(...data) {
    console.error(this.prefix, data);
  }
};
var Logger = _Logger;
Logger.prefix = "meta-bind |";

// src/inputFields/AbstractInputField.ts
var AbstractInputField = class {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    this.inputFieldMarkdownRenderChild = inputFieldMarkdownRenderChild;
    this.onValueChange = onValueChange;
  }
};
AbstractInputField.allowCodeBlock = true;
AbstractInputField.allowInlineCodeBlock = true;

// src/inputFields/ToggleInputField.ts
var import_obsidian2 = require("obsidian");

// src/utils/Utils.ts
var MetaBindInternalError = class extends Error {
  constructor(message) {
    super(`[MB_INTERNAL_ERROR - please report this error here https://github.com/mProjectsCode/obsidian-meta-bind-plugin/issues] ${message}`);
  }
};
var MetaBindParsingError = class extends Error {
  constructor(message) {
    super(`[MB_PARSING_ERROR] ${message}`);
  }
};
var MetaBindBindTargetError = class extends Error {
  constructor(message) {
    super(`[MB_BIND_TARGET_ERROR] ${message}`);
  }
};
function getFileName(path) {
  var _a;
  return (_a = path.split("/").at(-1)) != null ? _a : path;
}
function isPath(path) {
  return path.split("/").length > 1;
}
function removeFileEnding(fileName) {
  const fileNameParts = fileName.split(".");
  if (fileNameParts.length === 1) {
    return fileName;
  } else {
    let newFileName = fileNameParts[0];
    for (let i = 1; i < fileNameParts.length - 1; i++) {
      newFileName += "." + fileNameParts[i];
    }
    return newFileName;
  }
}
function mod(n, m) {
  return (n % m + m) % m;
}
function arrayEquals(arr1, arr2) {
  if (arr1.length !== arr2.length) {
    return false;
  }
  for (const arr1Element of arr1) {
    if (!arr2.contains(arr1Element)) {
      return false;
    }
  }
  return true;
}
function isTruthy(value) {
  return !!value;
}
function isFalsy(value) {
  return !value;
}
function equalOrIncludes(str1, str2) {
  return str1 === str2 || str1.includes(str2) || str2.includes(str1);
}

// src/inputFields/ToggleInputField.ts
var ToggleInputField = class extends AbstractInputField {
  getValue() {
    if (!this.toggleComponent) {
      throw new MetaBindInternalError("toggle input component is undefined");
    }
    return this.toggleComponent.getValue();
  }
  setValue(value) {
    if (!this.toggleComponent) {
      throw new MetaBindInternalError("toggle input component is undefined");
    }
    if (value != null && typeof value == "boolean") {
      this.toggleComponent.setValue(value);
    } else {
      Logger.logWarning(`can not set value of toggle to '${value}'`);
      this.toggleComponent.setValue(false);
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return false;
  }
  getHtmlElement() {
    if (!this.toggleComponent) {
      throw new MetaBindInternalError("toggle input component is undefined");
    }
    return this.toggleComponent.toggleEl;
  }
  render(container) {
    const component = new import_obsidian2.ToggleComponent(container);
    component.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
    component.onChange(this.onValueChange);
    this.toggleComponent = component;
  }
};

// src/inputFields/TextInputField.ts
var import_obsidian3 = require("obsidian");
var TextInputField = class extends AbstractInputField {
  getValue() {
    if (!this.textComponent) {
      throw new MetaBindInternalError("text input component is undefined");
    }
    return this.textComponent.getValue();
  }
  setValue(value) {
    if (!this.textComponent) {
      throw new MetaBindInternalError("text input component is undefined");
    }
    if (value != null && typeof value == "string") {
      this.textComponent.setValue(value);
    } else {
      Logger.logWarning(`can not set value of text input to '${value}'`);
      this.textComponent.setValue("");
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return "";
  }
  getHtmlElement() {
    if (!this.textComponent) {
      throw new MetaBindInternalError("text input component is undefined");
    }
    return this.textComponent.inputEl;
  }
  render(container) {
    const component = new import_obsidian3.TextComponent(container);
    component.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
    component.onChange(this.onValueChange);
    this.textComponent = component;
  }
};

// src/inputFields/SliderInputField.ts
var import_obsidian4 = require("obsidian");
var SliderInputField = class extends AbstractInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    var _a, _b, _c, _d;
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.minValue = (_b = (_a = inputFieldMarkdownRenderChild.getArgument("minValue")) == null ? void 0 : _a.value) != null ? _b : 0;
    this.maxValue = (_d = (_c = inputFieldMarkdownRenderChild.getArgument("maxValue")) == null ? void 0 : _c.value) != null ? _d : 100;
  }
  getValue() {
    if (!this.sliderComponent) {
      throw new MetaBindInternalError("slider input component is undefined");
    }
    return this.sliderComponent.getValue();
  }
  setValue(value) {
    if (!this.sliderComponent) {
      throw new MetaBindInternalError("slider input component is undefined");
    }
    if (value != null && typeof value == "number") {
      if (value >= this.minValue && value <= this.maxValue) {
        this.sliderComponent.setValue(value);
      }
    } else {
      Logger.logWarning(`can not set value of slider to '${value}'`);
      this.sliderComponent.setValue(this.getDefaultValue());
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return this.minValue;
  }
  getHtmlElement() {
    if (!this.sliderComponent) {
      throw new MetaBindInternalError("slider input component is undefined");
    }
    return this.sliderComponent.sliderEl;
  }
  render(container) {
    container.removeClass("meta-bind-plugin-input-wrapper");
    container.addClass("meta-bind-plugin-flex-input-wrapper");
    const labelArgument = this.inputFieldMarkdownRenderChild.getArgument("labels");
    if (labelArgument && labelArgument.value === true) {
      container.createSpan({ text: this.minValue.toString(), cls: "meta-bind-plugin-slider-input-label" });
    }
    const component = new import_obsidian4.SliderComponent(container);
    component.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
    component.onChange(this.onValueChange);
    component.setDynamicTooltip();
    component.setLimits(this.minValue, this.maxValue, 1);
    component.sliderEl.addClass("meta-bind-plugin-slider-input");
    if (labelArgument && labelArgument.value === true) {
      container.createSpan({ text: this.maxValue.toString(), cls: "meta-bind-plugin-slider-input-label" });
    }
    this.sliderComponent = component;
  }
};

// src/inputFields/TextAreaInputField.ts
var import_obsidian5 = require("obsidian");
var TextAreaInputField = class extends AbstractInputField {
  getValue() {
    if (!this.textAreaComponent) {
      throw new MetaBindInternalError("text area input component is undefined");
    }
    return this.textAreaComponent.getValue();
  }
  setValue(value) {
    if (!this.textAreaComponent) {
      throw new MetaBindInternalError("text area input component is undefined");
    }
    if (value != null && typeof value == "string") {
      this.textAreaComponent.setValue(value);
    } else {
      Logger.logWarning(`can not set value of text area input to '${value}'`);
      this.textAreaComponent.setValue("");
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return "";
  }
  getHtmlElement() {
    if (!this.textAreaComponent) {
      throw new MetaBindInternalError("text area input component is undefined");
    }
    return this.textAreaComponent.inputEl;
  }
  render(container) {
    const component = new import_obsidian5.TextAreaComponent(container);
    component.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
    component.onChange(this.onValueChange);
    this.textAreaComponent = component;
  }
};

// src/inputFields/SelectInputFieldElement.ts
var SelectInputFieldElement = class {
  constructor(value, parentElement, id, multiSelectInputField, active = false) {
    this.value = value;
    this.id = id;
    this.active = active;
    this.highlighted = false;
    this.selectInputField = multiSelectInputField;
    this.cssClass = "meta-bind-plugin-select-input-element";
    this.activeClass = "meta-bind-plugin-select-input-element-selected";
    this.hoverClass = "meta-bind-plugin-select-input-element-hover";
    this.element = parentElement.createDiv({ cls: this.cssClass });
    this.element.id = this.getHTMLId();
    this.element.on("click", "#" + this.getHTMLId(), () => {
      this.setActive(!this.active);
      if (!this.selectInputField.allowMultiSelect) {
        this.selectInputField.disableAllOtherElements(this.id);
      }
    });
    this.element.on("mouseenter", "#" + this.getHTMLId(), () => {
      this.setHighlighted(true);
    });
    this.element.on("mouseleave", "#" + this.getHTMLId(), () => {
      this.setHighlighted(false);
    });
  }
  getHTMLId() {
    return `meta-bind-select-input-element-${this.selectInputField.inputFieldMarkdownRenderChild.uid}-${this.id}`;
  }
  isHighlighted() {
    return this.highlighted;
  }
  setHighlighted(value) {
    this.highlighted = value;
    if (this.highlighted) {
      this.addClass(this.hoverClass);
      this.selectInputField.deHighlightAllOtherElements(this.id);
    } else {
      this.removeClass(this.hoverClass);
    }
  }
  isActive() {
    return this.active;
  }
  setActive(active, updateParent = true) {
    this.active = active;
    this.update(updateParent);
  }
  update(updateParent) {
    if (this.active) {
      this.addClass(this.activeClass);
    } else {
      this.removeClass(this.activeClass);
    }
    if (updateParent) {
      this.selectInputField.onChange();
    }
  }
  addClass(cssClass) {
    if (!this.element.hasClass(cssClass)) {
      this.element.addClass(cssClass);
    }
  }
  removeClass(cssClass) {
    if (this.element.hasClass(cssClass)) {
      this.element.removeClass(cssClass);
    }
  }
  render() {
    this.element.createEl("div", { text: this.value });
  }
};

// src/inputFields/SelectInputField.ts
var SelectInputField = class extends AbstractInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.elements = [];
    this.allowMultiSelect = false;
  }
  getHtmlElement() {
    if (!this.container) {
      throw new MetaBindInternalError("select input container is undefined");
    }
    return this.container;
  }
  getValue() {
    var _a, _b;
    return (_b = (_a = this.elements.filter((x) => x.isActive()).first()) == null ? void 0 : _a.value) != null ? _b : "";
  }
  setValue(value) {
    for (const element of this.elements) {
      if (value === element.value) {
        element.setActive(true, false);
      } else {
        element.setActive(false, false);
      }
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return "";
  }
  onChange() {
    this.onValueChange(this.getValue());
  }
  render(container) {
    container.addClass("meta-bind-plugin-select-input-bg");
    this.container = container;
    const elementWrapper = container.createDiv({ cls: "meta-bind-plugin-select-input-wrapper" });
    const titleArgument = this.inputFieldMarkdownRenderChild.getArgument("title");
    if (titleArgument) {
      elementWrapper.createEl("div", { text: titleArgument.value, cls: "meta-bind-plugin-select-input-header" });
    }
    const elementArguments = this.inputFieldMarkdownRenderChild.getArguments("option");
    let i = 0;
    for (const elementArgument of elementArguments) {
      const selectInputFieldElement = new SelectInputFieldElement(elementArgument.value, elementWrapper, i, this, false);
      this.elements.push(selectInputFieldElement);
      selectInputFieldElement.render();
      i += 1;
    }
    this.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
  }
  disableAllOtherElements(elementId) {
    for (const selectModalElement of this.elements) {
      if (selectModalElement.id !== elementId) {
        selectModalElement.setActive(false);
      }
    }
  }
  deHighlightAllOtherElements(elementId) {
    for (const selectModalElement of this.elements) {
      if (selectModalElement.id !== elementId) {
        selectModalElement.setHighlighted(false);
      }
    }
  }
  activateHighlighted() {
    for (const selectModalElement of this.elements) {
      if (selectModalElement.isHighlighted()) {
        selectModalElement.setActive(!selectModalElement.isActive());
        if (!this.allowMultiSelect) {
          this.disableAllOtherElements(selectModalElement.id);
        }
      }
    }
  }
  highlightUp() {
    var _a, _b;
    for (const selectModalElement of this.elements) {
      if (selectModalElement.isHighlighted()) {
        (_a = this.getPreviousSelectModalElement(selectModalElement)) == null ? void 0 : _a.setHighlighted(true);
        return;
      }
    }
    (_b = this.elements.at(-1)) == null ? void 0 : _b.setHighlighted(true);
  }
  highlightDown() {
    var _a, _b;
    for (const selectModalElement of this.elements) {
      if (selectModalElement.isHighlighted()) {
        (_a = this.getNextSelectModalElement(selectModalElement)) == null ? void 0 : _a.setHighlighted(true);
        return;
      }
    }
    (_b = this.elements.at(0)) == null ? void 0 : _b.setHighlighted(true);
  }
  getNextSelectModalElement(element) {
    let nextId = element.id + 1;
    nextId = mod(nextId, this.elements.length);
    return this.elements.filter((x) => x.id === nextId).at(0);
  }
  getPreviousSelectModalElement(element) {
    let nextId = element.id - 1;
    nextId = mod(nextId, this.elements.length);
    return this.elements.filter((x) => x.id === nextId).at(0);
  }
};
SelectInputField.allowInlineCodeBlock = false;

// src/inputFields/MultiSelectInputField.ts
var MultiSelectInputField = class extends SelectInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.allowMultiSelect = true;
  }
  getValue() {
    return this.elements.filter((x) => x.isActive()).map((x) => x.value);
  }
  setValue(value) {
    if (value.length === 0) {
      for (const element of this.elements) {
        element.setActive(false, false);
      }
      return;
    }
    elementLoop:
      for (const element of this.elements) {
        for (const valueElement of value) {
          if (valueElement === element.value) {
            element.setActive(true, false);
            continue elementLoop;
          }
        }
        element.setActive(false, false);
      }
  }
  isEqualValue(value) {
    if (!Array.isArray(value)) {
      return false;
    }
    return arrayEquals(this.getValue(), value);
  }
  getDefaultValue() {
    return [];
  }
};

// src/inputFields/DateInputField.ts
var import_obsidian7 = require("obsidian");

// src/parsers/DateParser.ts
var import_obsidian6 = require("obsidian");
var DateParser = class {
  static stringify(date) {
    return date.format(this.dateFormat);
  }
  static parse(dateString) {
    return (0, import_obsidian6.moment)(dateString, DateParser.dateFormat);
  }
  static getDefaultDate() {
    return (0, import_obsidian6.moment)(`${DateParser.getDefaultYear}-${DateParser.getDefaultMonth()}-${DateParser.getDefaultDay()}`);
  }
  static getDefaultDay() {
    return 1;
  }
  static getDefaultMonth() {
    return 1;
  }
  static getDefaultYear() {
    return 2022;
  }
};

// src/inputFields/DateInputField.ts
var DateInputField = class extends AbstractInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.months = {
      "0": "January",
      "1": "February",
      "2": "March",
      "3": "April",
      "4": "May",
      "5": "June",
      "6": "July",
      "7": "August",
      "8": "September",
      "9": "October",
      "10": "November",
      "11": "December"
    };
    this.date = DateParser.getDefaultDate();
    this.days = {};
    for (let i = 1; i <= 31; i++) {
      this.days[i.toString()] = i.toString();
    }
  }
  getHtmlElement() {
    if (!this.container) {
      throw new MetaBindInternalError("toggle input container is undefined");
    }
    return this.container;
  }
  getValue() {
    return DateParser.stringify(this.date);
  }
  setValue(value) {
    var _a;
    if (!this.monthComponent) {
      throw new MetaBindInternalError("date input month component is undefined");
    }
    if (!this.dayComponent) {
      throw new MetaBindInternalError("date input day component is undefined");
    }
    if (!this.yearComponent) {
      throw new MetaBindInternalError("date input hour component is undefined");
    }
    this.date = (_a = DateParser.parse(value)) != null ? _a : DateParser.getDefaultDate();
    this.monthComponent.setValue(this.date.month().toString());
    this.dayComponent.setValue(this.date.date().toString());
    this.yearComponent.setValue(this.date.year().toString());
  }
  isEqualValue(value) {
    return value == this.getValue();
  }
  getDefaultValue() {
    return DateParser.stringify(DateParser.getDefaultDate());
  }
  render(container) {
    var _a;
    this.date = (_a = DateParser.parse(this.inputFieldMarkdownRenderChild.getInitialValue())) != null ? _a : DateParser.getDefaultDate();
    let useUsInputOrder = this.inputFieldMarkdownRenderChild.plugin.settings.useUsDateInputOrder;
    container.removeClass("meta-bind-plugin-input-wrapper");
    container.addClass("meta-bind-plugin-flex-input-wrapper", "meta-bind-plugin-input-element-group");
    if (!useUsInputOrder) {
      this.dayComponent = new import_obsidian7.DropdownComponent(container);
      this.dayComponent.addOptions(this.days);
      this.dayComponent.setValue(this.date.date().toString());
      this.dayComponent.onChange(this.onDayChange.bind(this));
      this.monthComponent = new import_obsidian7.DropdownComponent(container);
      this.monthComponent.addOptions(this.months);
      this.monthComponent.setValue(this.date.month().toString());
      this.monthComponent.onChange(this.onMonthChange.bind(this));
      this.dayComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
      this.monthComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
    } else {
      this.monthComponent = new import_obsidian7.DropdownComponent(container);
      this.monthComponent.addOptions(this.months);
      this.monthComponent.setValue(this.date.month().toString());
      this.monthComponent.onChange(this.onMonthChange.bind(this));
      this.dayComponent = new import_obsidian7.DropdownComponent(container);
      this.dayComponent.addOptions(this.days);
      this.dayComponent.setValue(this.date.date().toString());
      this.dayComponent.onChange(this.onDayChange.bind(this));
      this.dayComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
      this.monthComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
    }
    this.yearComponent = new import_obsidian7.TextComponent(container);
    this.yearComponent.setValue(this.date.year().toString());
    this.yearComponent.onChange(this.onYearChange.bind(this));
    this.yearComponent.inputEl.addClass("meta-bind-plugin-date-input-year-input");
    this.yearComponent.inputEl.addClass("meta-bind-plugin-input-element-group-element");
    this.yearComponent.inputEl.type = "number";
    this.yearComponent.inputEl.max = "9999";
    this.container = container;
  }
  onMonthChange(value) {
    var _a;
    this.date.month(value);
    const clampedDay = this.clampDay(this.date.date());
    (_a = this.dayComponent) == null ? void 0 : _a.setValue(clampedDay.toString());
    this.date.date(clampedDay);
    this.onValueChange(this.getValue());
  }
  onDayChange(value) {
    var _a;
    const day = Number.parseInt(value);
    const clampedDay = this.clampDay(day);
    if (clampedDay !== day) {
      (_a = this.dayComponent) == null ? void 0 : _a.setValue(clampedDay.toString());
    }
    this.date.date(clampedDay);
    this.onValueChange(this.getValue());
  }
  onYearChange(value) {
    const year = Number.parseInt(value);
    this.date.year(Number.isNaN(year) ? DateParser.getDefaultYear() : year);
    this.onValueChange(this.getValue());
  }
  clampDay(day) {
    if (Number.isNaN(day)) {
      return DateParser.getDefaultDay();
    } else if (day < 1) {
      return 1;
    } else if (day > this.date.daysInMonth()) {
      return this.date.daysInMonth();
    }
    return day;
  }
};

// src/inputFields/TimeInputField.ts
var import_obsidian8 = require("obsidian");

// src/parsers/TimeParser.ts
var Time = class {
  constructor() {
    this._hour = TimeParser.getDefaultHour();
    this._minute = TimeParser.getDefaultHour();
  }
  getHour() {
    return this._hour;
  }
  setHour(value) {
    if (value < 0 || value > 24) {
      this._hour = TimeParser.getDefaultHour();
      return;
    }
    this._hour = value;
  }
  getMinute() {
    return this._minute;
  }
  setMinute(value) {
    if (value < 0 || value > 59) {
      this._minute = TimeParser.getDefaultMinute();
      return;
    }
    this._minute = value;
  }
  getUniformHour() {
    return ("00" + this.getHour().toString()).slice(-2);
  }
  getUniformMinute() {
    return ("00" + this.getMinute().toString()).slice(-2);
  }
  setHourFromString(str) {
    const v = Number.parseInt(str);
    this.setHour(Number.isNaN(v) ? TimeParser.getDefaultHour() : v);
  }
  setMinuteFromString(str) {
    const v = Number.parseInt(str);
    this.setMinute(Number.isNaN(v) ? TimeParser.getDefaultMinute() : v);
  }
};
var TimeParser = class {
  static parse(timeString) {
    const time = TimeParser.getDefaultTime();
    const timeParts = timeString.split(":");
    if (timeParts.length !== 2) {
      return void 0;
    }
    time.setHourFromString(timeParts[0]);
    time.setMinuteFromString(timeParts[1]);
    return time;
  }
  static stringify(time) {
    return `${time.getUniformHour()}:${time.getUniformMinute()}`;
  }
  static getDefaultTime() {
    return new Time();
  }
  static getDefaultHour() {
    return 0;
  }
  static getDefaultMinute() {
    return 0;
  }
};

// src/inputFields/TimeInputField.ts
var TimeInputField = class extends AbstractInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.time = TimeParser.getDefaultTime();
    this.hours = {};
    for (let i = 0; i <= 24; i++) {
      this.hours[i.toString()] = i.toString();
    }
    this.minutes = {};
    for (let i = 0; i <= 59; i++) {
      this.minutes[i.toString()] = i.toString();
    }
  }
  getHtmlElement() {
    if (!this.container) {
      throw new MetaBindInternalError("time input container is undefined");
    }
    return this.container;
  }
  getValue() {
    return TimeParser.stringify(this.time);
  }
  setValue(value) {
    var _a;
    if (!this.hourComponent) {
      throw new MetaBindInternalError("time input hour component is undefined");
    }
    if (!this.minuteComponent) {
      throw new MetaBindInternalError("time input minute component is undefined");
    }
    this.time = (_a = TimeParser.parse(value)) != null ? _a : TimeParser.getDefaultTime();
    this.hourComponent.setValue(this.time.getHour().toString());
    this.minuteComponent.setValue(this.time.getMinute().toString());
  }
  isEqualValue(value) {
    return value == this.getValue();
  }
  getDefaultValue() {
    return TimeParser.stringify(TimeParser.getDefaultTime());
  }
  render(container) {
    var _a;
    this.time = (_a = TimeParser.parse(this.inputFieldMarkdownRenderChild.getInitialValue())) != null ? _a : TimeParser.getDefaultTime();
    container.removeClass("meta-bind-plugin-input-wrapper");
    container.addClass("meta-bind-plugin-flex-input-wrapper", "meta-bind-plugin-input-element-group");
    this.hourComponent = new import_obsidian8.DropdownComponent(container);
    this.hourComponent.addOptions(this.hours);
    this.hourComponent.setValue(this.time.getHour().toString());
    this.hourComponent.onChange(this.onHourChange.bind(this));
    this.minuteComponent = new import_obsidian8.DropdownComponent(container);
    this.minuteComponent.addOptions(this.minutes);
    this.minuteComponent.setValue(this.time.getMinute().toString());
    this.minuteComponent.onChange(this.onMinuteChange.bind(this));
    this.hourComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
    this.minuteComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
    this.container = container;
  }
  onHourChange(value) {
    this.time.setHourFromString(value);
    this.onValueChange(this.getValue());
  }
  onMinuteChange(value) {
    this.time.setMinuteFromString(value);
    this.onValueChange(this.getValue());
  }
};

// src/utils/ParserUtils.ts
var EnclosingPair = class {
  constructor(openingString, closingString) {
    if (isFalsy(openingString)) {
      throw new MetaBindInternalError("opening string must not be empty");
    }
    this.openingEqualsClosing = isFalsy(closingString) || openingString === closingString;
    if (this.openingEqualsClosing) {
      this._openingString = openingString;
      this._closingString = openingString;
    } else {
      this._openingString = openingString;
      this._closingString = closingString;
    }
  }
  get openingString() {
    return this._openingString;
  }
  get closingString() {
    return this.openingEqualsClosing ? this._openingString : this._closingString;
  }
  overlaps(other) {
    return equalOrIncludes(this.openingString, other.openingString) || equalOrIncludes(this.openingString, other.closingString) || equalOrIncludes(this.closingString, other.openingString) || equalOrIncludes(this.closingString, other.closingString);
  }
  equals(other) {
    if (isFalsy(other)) {
      return false;
    }
    return this.openingString === other.openingString && this.closingString === other.closingString;
  }
  toString() {
    return JSON.stringify(this);
  }
};
var ParserUtils = class {
  static split(str, separator, ignore) {
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    if (!separator) {
      throw new MetaBindInternalError("separator must not be empty");
    }
    let subStr = "";
    const subStrings = [];
    if (ignore) {
      let remainingOpeningStringCount = ParserUtils.numberOfOccurrences(str, ignore.openingString);
      let remainingClosingStringCount = ParserUtils.numberOfOccurrences(str, ignore.closingString);
      let enclosingLevel = 0;
      strLoop:
        for (let i = 0; i < str.length; i++) {
          if (enclosingLevel === 0 && ParserUtils.isStringAt(str, separator, i)) {
            subStrings.push(subStr);
            subStr = "";
            i += separator.length - 1;
          } else {
            subStr += str[i];
          }
          if (ignore.openingEqualsClosing) {
            if (ParserUtils.isStringAt(str, ignore.openingString, i)) {
              if (enclosingLevel % 2 === 0 && remainingOpeningStringCount === 1) {
              } else if (enclosingLevel % 2 === 0) {
                enclosingLevel += 1;
                for (let j = 1; j < ignore.openingString.length; j++) {
                  i += 1;
                  subStr += str[i];
                  if (i >= str.length) {
                    break strLoop;
                  }
                }
              } else {
                enclosingLevel -= 1;
                for (let j = 1; j < ignore.closingString.length; j++) {
                  i += 1;
                  subStr += str[i];
                  if (i >= str.length) {
                    break strLoop;
                  }
                }
              }
              remainingOpeningStringCount -= 1;
            }
          } else {
            if (ParserUtils.isStringAt(str, ignore.openingString, i)) {
              if (remainingOpeningStringCount <= remainingClosingStringCount) {
                enclosingLevel += 1;
                for (let j = 1; j < ignore.openingString.length; j++) {
                  i += 1;
                  subStr += str[i];
                  if (i >= str.length) {
                    break strLoop;
                  }
                }
              }
              remainingOpeningStringCount -= 1;
            } else if (ParserUtils.isStringAt(str, ignore.closingString, i)) {
              if (enclosingLevel > 0) {
                enclosingLevel -= 1;
                for (let j = 1; j < ignore.closingString.length; j++) {
                  i += 1;
                  subStr += str[i];
                  if (i >= str.length) {
                    break strLoop;
                  }
                }
              }
              remainingClosingStringCount -= 1;
            }
          }
        }
    } else {
      for (let i = 0; i < str.length; i++) {
        if (ParserUtils.isStringAt(str, separator, i)) {
          subStrings.push(subStr);
          subStr = "";
          i += separator.length - 1;
        } else {
          subStr += str[i];
        }
      }
    }
    subStrings.push(subStr);
    return subStrings;
  }
  static removeInBetween(str, enclosingPair) {
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    let remainingOpeningStringCount = ParserUtils.numberOfOccurrences(str, enclosingPair.openingString);
    let remainingClosingStringCount = ParserUtils.numberOfOccurrences(str, enclosingPair.closingString);
    let enclosingLevel = 0;
    let subStr = "";
    for (let i = 0; i < str.length; i++) {
      if (enclosingPair.openingEqualsClosing) {
        if (ParserUtils.isStringAt(str, enclosingPair.openingString, i)) {
          if (enclosingLevel % 2 === 0 && remainingOpeningStringCount === 1) {
          } else if (enclosingLevel % 2 === 0) {
            enclosingLevel += 1;
            i += enclosingPair.openingString.length;
            if (i >= str.length) {
              break;
            }
          } else {
            enclosingLevel -= 1;
            i += enclosingPair.closingString.length;
            if (i >= str.length) {
              break;
            }
          }
          remainingOpeningStringCount -= 1;
        }
      } else {
        if (ParserUtils.isStringAt(str, enclosingPair.openingString, i)) {
          if (remainingOpeningStringCount <= remainingClosingStringCount) {
            enclosingLevel += 1;
            i += enclosingPair.openingString.length;
            if (i >= str.length) {
              break;
            }
          }
          remainingOpeningStringCount -= 1;
        } else if (ParserUtils.isStringAt(str, enclosingPair.closingString, i)) {
          if (enclosingLevel > 0) {
            enclosingLevel -= 1;
            i += enclosingPair.closingString.length;
            if (i >= str.length) {
              break;
            }
          }
          remainingClosingStringCount -= 1;
        }
      }
      if (enclosingLevel === 0) {
        subStr += str[i];
      }
    }
    return subStr;
  }
  static getInBetween(str, enclosingPair) {
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    let remainingOpeningStringCount = ParserUtils.numberOfOccurrences(str, enclosingPair.openingString);
    let remainingClosingStringCount = ParserUtils.numberOfOccurrences(str, enclosingPair.closingString);
    let enclosingLevel = 0;
    let subStr = "";
    const subStrings = [];
    strLoop:
      for (let i = 0; i < str.length; i++) {
        if (enclosingPair.openingEqualsClosing) {
          if (ParserUtils.isStringAt(str, enclosingPair.openingString, i)) {
            if (enclosingLevel % 2 === 0 && remainingOpeningStringCount === 1) {
            } else if (enclosingLevel % 2 === 0) {
              enclosingLevel += 1;
              subStr += str[i];
              for (let j = 1; j < enclosingPair.openingString.length; j++) {
                i += 1;
                subStr += str[i];
                if (i >= str.length) {
                  break strLoop;
                }
              }
            } else {
              enclosingLevel -= 1;
              subStr += str[i];
              for (let j = 1; j < enclosingPair.closingString.length; j++) {
                i += 1;
                subStr += str[i];
                if (i > str.length) {
                  break strLoop;
                }
              }
              subStrings.push(subStr);
              subStr = "";
            }
            remainingOpeningStringCount -= 1;
          } else {
            if (enclosingLevel >= 1) {
              subStr += str[i];
            }
          }
        } else {
          if (ParserUtils.isStringAt(str, enclosingPair.openingString, i)) {
            if (remainingOpeningStringCount <= remainingClosingStringCount) {
              enclosingLevel += 1;
              subStr += str[i];
              for (let j = 1; j < enclosingPair.openingString.length; j++) {
                i += 1;
                subStr += str[i];
                if (i >= str.length) {
                  break strLoop;
                }
              }
            }
            remainingOpeningStringCount -= 1;
          } else if (ParserUtils.isStringAt(str, enclosingPair.closingString, i)) {
            if (enclosingLevel > 0) {
              enclosingLevel -= 1;
              subStr += str[i];
              for (let j = 1; j < enclosingPair.closingString.length; j++) {
                i += 1;
                subStr += str[i];
                if (i > str.length) {
                  break strLoop;
                }
              }
              if (enclosingLevel === 0) {
                subStrings.push(subStr);
                subStr = "";
              }
            }
            remainingClosingStringCount -= 1;
          } else {
            if (enclosingLevel >= 1) {
              subStr += str[i];
            }
          }
        }
      }
    if (subStrings.length === 0) {
      return "";
    } else if (subStrings.length === 1) {
      return subStrings[0].substring(enclosingPair.openingString.length, subStrings[0].length - enclosingPair.closingString.length);
    } else {
      return subStrings.map((x) => x.substring(enclosingPair.openingString.length, x.length - enclosingPair.closingString.length));
    }
  }
  static isStringAt(str, subStr, index) {
    if (index < 0) {
      throw new MetaBindInternalError("index must be greater than 0");
    }
    if (index >= str.length) {
      throw new MetaBindInternalError("index out of bounds of string");
    }
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    if (!subStr) {
      throw new MetaBindInternalError("sub string must not be empty");
    }
    for (let i = 0; i < subStr.length; i++) {
      if (str[i + index] !== subStr[i]) {
        return false;
      }
    }
    return true;
  }
  static contains(str, subStr) {
    return ParserUtils.numberOfOccurrences(str, subStr) > 0;
  }
  static numberOfOccurrences(str, subStr) {
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    if (!subStr) {
      throw new MetaBindInternalError("sub string must not be empty");
    }
    let occurrences = 0;
    for (let i = 0; i < str.length; i++) {
      if (ParserUtils.isStringAt(str, subStr, i)) {
        occurrences += 1;
      }
    }
    return occurrences;
  }
};

// src/parsers/InputFieldDeclarationParser.ts
var InputFieldType = /* @__PURE__ */ ((InputFieldType2) => {
  InputFieldType2["TOGGLE"] = "toggle";
  InputFieldType2["SLIDER"] = "slider";
  InputFieldType2["TEXT"] = "text";
  InputFieldType2["TEXT_AREA"] = "text_area";
  InputFieldType2["SELECT"] = "select";
  InputFieldType2["MULTI_SELECT"] = "multi_select";
  InputFieldType2["DATE"] = "date";
  InputFieldType2["TIME"] = "time";
  InputFieldType2["INVALID"] = "invalid";
  return InputFieldType2;
})(InputFieldType || {});
var _InputFieldDeclarationParser = class {
  static parse(fullDeclaration) {
    var _a;
    const inputFieldDeclaration = {};
    inputFieldDeclaration.fullDeclaration = fullDeclaration;
    inputFieldDeclaration.declaration = ParserUtils.getInBetween(fullDeclaration, _InputFieldDeclarationParser.squareBracesPair);
    const declarationParts = ParserUtils.split(inputFieldDeclaration.declaration, ":", _InputFieldDeclarationParser.squareBracesPair);
    inputFieldDeclaration.bindTarget = (_a = declarationParts[1]) != null ? _a : "";
    inputFieldDeclaration.isBound = isTruthy(inputFieldDeclaration.bindTarget);
    const inputFieldTypeWithArguments = declarationParts[0];
    const inputFieldTypeString = ParserUtils.removeInBetween(inputFieldTypeWithArguments, _InputFieldDeclarationParser.roundBracesPair);
    inputFieldDeclaration.inputFieldType = _InputFieldDeclarationParser.getInputFieldType(inputFieldTypeString);
    if (inputFieldDeclaration.inputFieldType === "invalid" /* INVALID */) {
      throw new MetaBindParsingError(`unknown input field type '${inputFieldTypeString}'`);
    }
    const inputFieldArgumentsString = ParserUtils.getInBetween(inputFieldTypeWithArguments, _InputFieldDeclarationParser.roundBracesPair);
    if (inputFieldArgumentsString) {
      inputFieldDeclaration.arguments = _InputFieldDeclarationParser.parseArguments(inputFieldArgumentsString, inputFieldDeclaration.inputFieldType);
    } else {
      inputFieldDeclaration.arguments = [];
    }
    return inputFieldDeclaration;
  }
  static parseArguments(inputFieldArgumentsString, inputFieldType) {
    let inputFieldArgumentStrings = ParserUtils.split(inputFieldArgumentsString, ",", _InputFieldDeclarationParser.roundBracesPair);
    inputFieldArgumentStrings = inputFieldArgumentStrings.map((x) => x.trim());
    const inputFieldArguments = [];
    for (const inputFieldArgumentString of inputFieldArgumentStrings) {
      const inputFieldArgumentName = _InputFieldDeclarationParser.extractInputFieldArgumentName(inputFieldArgumentString);
      if (inputFieldArgumentName === "class") {
        const inputFieldArgumentValue = _InputFieldDeclarationParser.extractInputFieldArgumentValue(inputFieldArgumentString);
        const inputFieldClassArgument = { name: inputFieldArgumentName, value: inputFieldArgumentValue };
        inputFieldArguments.push(inputFieldClassArgument);
      } else if (inputFieldArgumentName === "addLabels") {
        if (inputFieldType !== "slider" /* SLIDER */) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' is only applicable to slider input fields`);
        }
        inputFieldArguments.push({ name: "labels", value: true });
      } else if (inputFieldArgumentName === "minValue") {
        if (inputFieldType !== "slider" /* SLIDER */) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' is only applicable to slider input fields`);
        }
        const inputFieldArgumentValue = _InputFieldDeclarationParser.extractInputFieldArgumentValue(inputFieldArgumentString);
        const inputFieldArgumentValueAsNumber = Number.parseInt(inputFieldArgumentValue);
        if (Number.isNaN(inputFieldArgumentValueAsNumber)) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' value must be of type number`);
        }
        const inputFieldArgumentObject = { name: inputFieldArgumentName, value: inputFieldArgumentValueAsNumber };
        inputFieldArguments.push(inputFieldArgumentObject);
      } else if (inputFieldArgumentName === "maxValue") {
        if (inputFieldType !== "slider" /* SLIDER */) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' is only applicable to slider input fields`);
        }
        const inputFieldArgumentValue = _InputFieldDeclarationParser.extractInputFieldArgumentValue(inputFieldArgumentString);
        const inputFieldArgumentValueAsNumber = Number.parseInt(inputFieldArgumentValue);
        if (Number.isNaN(inputFieldArgumentValueAsNumber)) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' value must be of type number`);
        }
        const inputFieldArgumentObject = { name: inputFieldArgumentName, value: inputFieldArgumentValueAsNumber };
        inputFieldArguments.push(inputFieldArgumentObject);
      } else if (inputFieldArgumentName === "option") {
        if (inputFieldType !== "select" /* SELECT */ && inputFieldType !== "multi_select" /* MULTI_SELECT */) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' is only applicable to select and multi-select input fields`);
        }
        const inputFieldArgumentValue = _InputFieldDeclarationParser.extractInputFieldArgumentValue(inputFieldArgumentString);
        const inputFieldArgumentObject = { name: inputFieldArgumentName, value: inputFieldArgumentValue };
        inputFieldArguments.push(inputFieldArgumentObject);
      } else if (inputFieldArgumentName === "title") {
        if (inputFieldType !== "select" /* SELECT */ && inputFieldType !== "multi_select" /* MULTI_SELECT */) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' is only applicable to select and multi-select input fields`);
        }
        const inputFieldArgumentValue = _InputFieldDeclarationParser.extractInputFieldArgumentValue(inputFieldArgumentString);
        const inputFieldArgumentObject = { name: inputFieldArgumentName, value: inputFieldArgumentValue };
        inputFieldArguments.push(inputFieldArgumentObject);
      } else {
        throw new MetaBindParsingError(`unknown argument '${inputFieldArgumentName}'`);
      }
    }
    return inputFieldArguments;
  }
  static extractInputFieldArgumentName(argumentString) {
    return ParserUtils.removeInBetween(argumentString, _InputFieldDeclarationParser.roundBracesPair);
  }
  static extractInputFieldArgumentValue(argumentString) {
    const argumentName = this.extractInputFieldArgumentName(argumentString);
    const argumentValue = ParserUtils.getInBetween(argumentString, _InputFieldDeclarationParser.roundBracesPair);
    if (!argumentValue) {
      throw new MetaBindParsingError(`argument '${argumentName}' requires a non empty value`);
    }
    return argumentValue;
  }
  static getInputFieldType(str) {
    for (const entry of Object.entries(InputFieldType)) {
      if (entry[1] === str) {
        return entry[1];
      }
    }
    return "invalid" /* INVALID */;
  }
};
var InputFieldDeclarationParser = _InputFieldDeclarationParser;
InputFieldDeclarationParser.roundBracesPair = new EnclosingPair("(", ")");
InputFieldDeclarationParser.squareBracesPair = new EnclosingPair("[", "]");
InputFieldDeclarationParser.curlyBracesPair = new EnclosingPair("{", "}");
InputFieldDeclarationParser.allBracesPairs = [
  _InputFieldDeclarationParser.roundBracesPair,
  _InputFieldDeclarationParser.squareBracesPair,
  _InputFieldDeclarationParser.curlyBracesPair
];

// src/inputFields/InputFieldFactory.ts
var _InputFieldFactory = class {
  static createInputField(inputFieldType, args) {
    if (inputFieldType === "toggle" /* TOGGLE */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new ToggleInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "slider" /* SLIDER */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new SliderInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "text" /* TEXT */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new TextInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "text_area" /* TEXT_AREA */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new TextAreaInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "select" /* SELECT */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new SelectInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "multi_select" /* MULTI_SELECT */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new MultiSelectInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "date" /* DATE */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new DateInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "time" /* TIME */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new TimeInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    }
    return void 0;
  }
  static checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, type) {
    const allowCodeBlock = _InputFieldFactory.allowCodeBlockMap[inputFieldType];
    if (type === 1 /* CODE_BLOCK */ && !allowCodeBlock.codeBlock) {
      throw new MetaBindParsingError(`'${inputFieldType}' is not allowed as code block`);
    }
    if (type === 0 /* INLINE_CODE_BLOCK */ && !allowCodeBlock.inlineCodeBlock) {
      throw new MetaBindParsingError(`'${inputFieldType}' is not allowed as inline code block`);
    }
  }
};
var InputFieldFactory = _InputFieldFactory;
InputFieldFactory.allowCodeBlockMap = {
  ["toggle" /* TOGGLE */]: { codeBlock: ToggleInputField.allowCodeBlock, inlineCodeBlock: ToggleInputField.allowInlineCodeBlock },
  ["slider" /* SLIDER */]: { codeBlock: SliderInputField.allowCodeBlock, inlineCodeBlock: SliderInputField.allowInlineCodeBlock },
  ["text" /* TEXT */]: { codeBlock: TextInputField.allowCodeBlock, inlineCodeBlock: TextInputField.allowInlineCodeBlock },
  ["text_area" /* TEXT_AREA */]: { codeBlock: TextAreaInputField.allowCodeBlock, inlineCodeBlock: TextAreaInputField.allowInlineCodeBlock },
  ["select" /* SELECT */]: { codeBlock: SelectInputField.allowCodeBlock, inlineCodeBlock: SelectInputField.allowInlineCodeBlock },
  ["multi_select" /* MULTI_SELECT */]: { codeBlock: MultiSelectInputField.allowCodeBlock, inlineCodeBlock: MultiSelectInputField.allowInlineCodeBlock },
  ["date" /* DATE */]: { codeBlock: DateInputField.allowCodeBlock, inlineCodeBlock: DateInputField.allowInlineCodeBlock },
  ["time" /* TIME */]: { codeBlock: TimeInputField.allowCodeBlock, inlineCodeBlock: TimeInputField.allowInlineCodeBlock }
};

// src/InputFieldMarkdownRenderChild.ts
var InputFieldMarkdownRenderChild2 = class extends import_obsidian9.MarkdownRenderChild {
  constructor(containerEl, type, fullDeclaration, plugin, filePath, uid) {
    super(containerEl);
    this.error = "";
    this.filePath = filePath;
    this.uid = uid;
    this.plugin = plugin;
    this.valueQueue = [];
    this.intervalCounter = 0;
    try {
      this.inputFieldDeclaration = InputFieldDeclarationParser.parse(fullDeclaration);
      if (this.inputFieldDeclaration.isBound) {
        this.parseBindTarget();
        this.metaData = this.plugin.getMetaDataForFile(this.bindTargetFile);
      }
      this.inputField = InputFieldFactory.createInputField(this.inputFieldDeclaration.inputFieldType, {
        type,
        inputFieldMarkdownRenderChild: this,
        onValueChanged: this.pushToValueQueue.bind(this)
      });
      this.limitInterval = window.setInterval(() => this.applyValueQueueToMetadata(), this.plugin.settings.syncInterval);
    } catch (e) {
      this.error = e.message;
      Logger.logWarning(e);
    }
  }
  parseBindTarget() {
    if (!this.inputFieldDeclaration) {
      throw new MetaBindInternalError("inputFieldDeclaration is undefined, can not parse bind target");
    }
    const bindTargetParts = this.inputFieldDeclaration.bindTarget.split("#");
    if (bindTargetParts.length === 1) {
      this.bindTargetMetadataField = this.inputFieldDeclaration.bindTarget;
      const files = this.plugin.getFilesByName(this.filePath);
      if (files.length === 0) {
        throw new MetaBindBindTargetError("bind target file not found");
      } else if (files.length === 1) {
        this.bindTargetFile = files[0];
      } else {
        throw new MetaBindBindTargetError("bind target resolves to multiple files, please also specify the file path");
      }
    } else if (bindTargetParts.length === 2) {
      this.bindTargetMetadataField = bindTargetParts[1];
      const files = this.plugin.getFilesByName(bindTargetParts[0]);
      if (files.length === 0) {
        throw new MetaBindBindTargetError("bind target file not found");
      } else if (files.length === 1) {
        this.bindTargetFile = files[0];
      } else {
        throw new MetaBindBindTargetError("bind target resolves to multiple files, please also specify the file path");
      }
    } else {
      throw new MetaBindBindTargetError("bind target may only contain one '#' to specify the metadata field");
    }
  }
  applyValueQueueToMetadata() {
    return __async(this, null, function* () {
      if (!this.inputFieldDeclaration) {
        throw new MetaBindInternalError("inputFieldDeclaration is undefined, can not update metadata");
      }
      if (!this.inputFieldDeclaration.isBound) {
        return;
      }
      if (!this.bindTargetMetadataField || !this.bindTargetFile) {
        throw new MetaBindInternalError("bindTargetMetadataField or bindTargetFile is undefined, can not update metadata");
      }
      if (this.valueQueue.length > 0) {
        yield this.plugin.updateMetaData(this.bindTargetMetadataField, this.valueQueue.at(-1), this.bindTargetFile);
        this.valueQueue = [];
      }
    });
  }
  pushToValueQueue(value) {
    return __async(this, null, function* () {
      var _a;
      if ((_a = this.inputFieldDeclaration) == null ? void 0 : _a.isBound) {
        this.valueQueue.push(value);
      }
    });
  }
  updateValue(value) {
    if (!this.inputField) {
      throw new MetaBindInternalError("inputField is undefined, can not update value");
    }
    if (value == null) {
      value = this.inputField.getDefaultValue();
    }
    if (!this.inputField.isEqualValue(value) && this.valueQueue.length === 0) {
      Logger.logDebug(`updating input field ${this.uid} to`, value);
      this.inputField.setValue(value);
    }
  }
  getInitialValue() {
    var _a, _b, _c, _d;
    if ((_a = this.inputFieldDeclaration) == null ? void 0 : _a.isBound) {
      return (_d = this.metaData[(_b = this.bindTargetMetadataField) != null ? _b : ""]) != null ? _d : (_c = this.inputField) == null ? void 0 : _c.getDefaultValue();
    }
  }
  getArguments(name) {
    if (!this.inputFieldDeclaration) {
      throw new MetaBindInternalError("inputFieldDeclaration is undefined, can not retrieve arguments");
    }
    return this.inputFieldDeclaration.arguments.filter((x) => x.name === name);
  }
  getArgument(name) {
    return this.getArguments(name).at(0);
  }
  onload() {
    return __async(this, null, function* () {
      Logger.logDebug("load", this);
      this.metaData = yield this.metaData;
      const container = this.containerEl.createDiv();
      container.addClass("meta-bind-plugin-input-wrapper");
      this.containerEl.addClass("meta-bind-plugin-input");
      if (this.error) {
        container.innerText = ` -> ERROR: ${this.error}`;
        container.addClass("meta-bind-plugin-error");
        this.containerEl.appendChild(container);
        return;
      }
      if (!this.inputField) {
        container.innerText = ` -> ERROR: ${new MetaBindInternalError("input field is undefined and error is empty").message}`;
        container.addClass("meta-bind-plugin-error");
        this.containerEl.appendChild(container);
        return;
      }
      this.plugin.registerInputFieldMarkdownRenderChild(this);
      this.inputField.render(container);
      const classArgument = this.getArguments("class");
      if (classArgument) {
        this.inputField.getHtmlElement().addClasses(classArgument.map((x) => x.value));
      }
      this.containerEl.empty();
      this.containerEl.appendChild(container);
    });
  }
  onunload() {
    Logger.logDebug("unload", this);
    this.plugin.unregisterInputFieldMarkdownRenderChild(this);
    super.onunload();
    window.clearInterval(this.limitInterval);
  }
};

// src/main.ts
var MetaBindPlugin = class extends import_obsidian10.Plugin {
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      Logger.devMode = this.settings.devMode;
      DateParser.dateFormat = this.settings.preferredDateFormat;
      this.activeMarkdownInputFields = [];
      this.markDownInputFieldIndex = 0;
      this.registerMarkdownPostProcessor((element, context) => {
        const codeBlocks = element.querySelectorAll("code");
        for (let index = 0; index < codeBlocks.length; index++) {
          const codeBlock = codeBlocks.item(index);
          const text = codeBlock.innerText;
          const isInputField = text.startsWith("INPUT[") && text.endsWith("]");
          if (isInputField) {
            context.addChild(new InputFieldMarkdownRenderChild2(codeBlock, 0 /* INLINE_CODE_BLOCK */, text, this, context.sourcePath, this.markDownInputFieldIndex));
            this.markDownInputFieldIndex += 1;
          }
        }
      });
      this.registerMarkdownCodeBlockProcessor("meta-bind", (source, el, ctx) => {
        const codeBlock = el;
        const text = source.replace(/\n/g, "");
        const isInputField = text.startsWith("INPUT[") && text.endsWith("]");
        if (isInputField) {
          ctx.addChild(new InputFieldMarkdownRenderChild2(codeBlock, 1 /* CODE_BLOCK */, text, this, ctx.sourcePath, this.markDownInputFieldIndex));
          this.markDownInputFieldIndex += 1;
        }
      });
      this.registerEvent(this.app.vault.on("modify", (abstractFile) => __async(this, null, function* () {
        if (abstractFile instanceof import_obsidian10.TFile) {
          yield this.updateMarkdownInputFieldsOnFileChange(abstractFile);
        }
      })));
      this.addSettingTab(new MetaBindSettingTab(this.app, this));
    });
  }
  onunload() {
    for (const activeMarkdownInputField of this.activeMarkdownInputFields) {
      activeMarkdownInputField.unload();
    }
  }
  registerInputFieldMarkdownRenderChild(inputFieldMarkdownRenderChild) {
    this.activeMarkdownInputFields.push(inputFieldMarkdownRenderChild);
  }
  unregisterInputFieldMarkdownRenderChild(inputFieldMarkdownRenderChild) {
    this.activeMarkdownInputFields = this.activeMarkdownInputFields.filter((x) => x.uid !== inputFieldMarkdownRenderChild.uid);
  }
  updateMarkdownInputFieldsOnFileChange(file) {
    return __async(this, null, function* () {
      var _a;
      let metadata = void 0;
      for (const activeMarkdownInputField of this.activeMarkdownInputFields) {
        if (!((_a = activeMarkdownInputField.inputFieldDeclaration) == null ? void 0 : _a.isBound) || !activeMarkdownInputField.bindTargetFile || !activeMarkdownInputField.bindTargetMetadataField) {
          continue;
        }
        if (activeMarkdownInputField.bindTargetFile.path === file.path) {
          if (metadata === void 0) {
            metadata = yield this.getMetaDataForFile(file);
          }
          activeMarkdownInputField.updateValue(metadata[activeMarkdownInputField.bindTargetMetadataField]);
        }
      }
    });
  }
  updateMetaData(key, value, file) {
    return __async(this, null, function* () {
      Logger.logDebug(`updating `, key, `: `, value, ` in '${file.path}'`);
      if (!file) {
        console.log("no file");
        return;
      }
      let fileContent = yield this.app.vault.read(file);
      const metadata = yield this.getMetaDataForFileContent(fileContent);
      if (!metadata) {
        return;
      }
      const regExp = new RegExp("^(---)\\n[\\s\\S]*\\n---");
      fileContent = fileContent.replace(regExp, "");
      metadata[key] = value;
      fileContent = `---
${(0, import_obsidian10.stringifyYaml)(metadata)}---` + fileContent;
      yield this.app.vault.modify(file, fileContent);
    });
  }
  getFilesByName(name) {
    const fileNameIsPath = isPath(name);
    const processedFileName = fileNameIsPath ? removeFileEnding(name) : getFileName(removeFileEnding(name));
    const allFiles = this.app.vault.getMarkdownFiles();
    const files = [];
    for (const file of allFiles) {
      if (fileNameIsPath) {
        if (removeFileEnding(file.path) === processedFileName) {
          files.push(file);
        }
      } else {
        if (getFileName(removeFileEnding(file.name)) === processedFileName) {
          files.push(file);
        }
      }
    }
    return files;
  }
  getMetaDataForFile(file) {
    return __async(this, null, function* () {
      if (!file) {
        return void 0;
      }
      const fileContent = yield this.app.vault.read(file);
      return yield this.getMetaDataForFileContent(fileContent);
    });
  }
  getMetaDataForFileContent(fileContent) {
    return __async(this, null, function* () {
      let metadata;
      const regExp = new RegExp("^(---)\\n[\\s\\S]*\\n---");
      const frontMatterRegExpResult = regExp.exec(fileContent);
      if (!frontMatterRegExpResult) {
        return {};
      }
      let frontMatter = frontMatterRegExpResult[0];
      if (!frontMatter) {
        return {};
      }
      frontMatter = frontMatter.substring(4);
      frontMatter = frontMatter.substring(0, frontMatter.length - 3);
      metadata = (0, import_obsidian10.parseYaml)(frontMatter);
      if (!metadata) {
        metadata = {};
      }
      return metadata;
    });
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      DateParser.dateFormat = this.settings.preferredDateFormat;
      Logger.devMode = this.settings.devMode;
      yield this.saveData(this.settings);
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vc3JjL21haW4udHMiLCAiLi4vLi4vLi4vLi4vc3JjL3NldHRpbmdzL1NldHRpbmdzLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvdXRpbHMvTG9nZ2VyLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9BYnN0cmFjdElucHV0RmllbGQudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2lucHV0RmllbGRzL1RvZ2dsZUlucHV0RmllbGQudHMiLCAiLi4vLi4vLi4vLi4vc3JjL3V0aWxzL1V0aWxzLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9UZXh0SW5wdXRGaWVsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvaW5wdXRGaWVsZHMvU2xpZGVySW5wdXRGaWVsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvaW5wdXRGaWVsZHMvVGV4dEFyZWFJbnB1dEZpZWxkLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9TZWxlY3RJbnB1dEZpZWxkRWxlbWVudC50cyIsICIuLi8uLi8uLi8uLi9zcmMvaW5wdXRGaWVsZHMvU2VsZWN0SW5wdXRGaWVsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvaW5wdXRGaWVsZHMvTXVsdGlTZWxlY3RJbnB1dEZpZWxkLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9EYXRlSW5wdXRGaWVsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvcGFyc2Vycy9EYXRlUGFyc2VyLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9UaW1lSW5wdXRGaWVsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvcGFyc2Vycy9UaW1lUGFyc2VyLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy91dGlscy9QYXJzZXJVdGlscy50cyIsICIuLi8uLi8uLi8uLi9zcmMvcGFyc2Vycy9JbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2lucHV0RmllbGRzL0lucHV0RmllbGRGYWN0b3J5LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge3BhcnNlWWFtbCwgUGx1Z2luLCBzdHJpbmdpZnlZYW1sLCBURmlsZX0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQge0RFRkFVTFRfU0VUVElOR1MsIE1ldGFCaW5kUGx1Z2luU2V0dGluZ3MsIE1ldGFCaW5kU2V0dGluZ1RhYn0gZnJvbSAnLi9zZXR0aW5ncy9TZXR0aW5ncyc7XHJcbmltcG9ydCB7SW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZX0gZnJvbSAnLi9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCc7XHJcbmltcG9ydCB7Z2V0RmlsZU5hbWUsIGlzUGF0aCwgcmVtb3ZlRmlsZUVuZGluZ30gZnJvbSAnLi91dGlscy9VdGlscyc7XHJcbmltcG9ydCB7TG9nZ2VyfSBmcm9tICcuL3V0aWxzL0xvZ2dlcic7XHJcbmltcG9ydCB7RGF0ZVBhcnNlcn0gZnJvbSAnLi9wYXJzZXJzL0RhdGVQYXJzZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWV0YUJpbmRQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdC8vIEB0cy1pZ25vcmUgZGVmaW5lZCBpbiBgb25sb2FkYFxyXG5cdHNldHRpbmdzOiBNZXRhQmluZFBsdWdpblNldHRpbmdzO1xyXG5cclxuXHQvLyBAdHMtaWdub3JlIGRlZmluZWQgaW4gYG9ubG9hZGBcclxuXHRhY3RpdmVNYXJrZG93bklucHV0RmllbGRzOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFtdO1xyXG5cdC8vIEB0cy1pZ25vcmUgZGVmaW5lZCBpbiBgb25sb2FkYFxyXG5cdG1hcmtEb3duSW5wdXRGaWVsZEluZGV4OiBudW1iZXI7XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG5cdFx0TG9nZ2VyLmRldk1vZGUgPSB0aGlzLnNldHRpbmdzLmRldk1vZGU7XHJcblx0XHREYXRlUGFyc2VyLmRhdGVGb3JtYXQgPSB0aGlzLnNldHRpbmdzLnByZWZlcnJlZERhdGVGb3JtYXQ7XHJcblxyXG5cdFx0dGhpcy5hY3RpdmVNYXJrZG93bklucHV0RmllbGRzID0gW107XHJcblx0XHR0aGlzLm1hcmtEb3duSW5wdXRGaWVsZEluZGV4ID0gMDtcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyTWFya2Rvd25Qb3N0UHJvY2Vzc29yKChlbGVtZW50LCBjb250ZXh0KSA9PiB7XHJcblx0XHRcdGNvbnN0IGNvZGVCbG9ja3MgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2NvZGUnKTtcclxuXHRcdFx0Zm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGNvZGVCbG9ja3MubGVuZ3RoOyBpbmRleCsrKSB7XHJcblx0XHRcdFx0Y29uc3QgY29kZUJsb2NrID0gY29kZUJsb2Nrcy5pdGVtKGluZGV4KTtcclxuXHRcdFx0XHRjb25zdCB0ZXh0ID0gY29kZUJsb2NrLmlubmVyVGV4dDtcclxuXHRcdFx0XHRjb25zdCBpc0lucHV0RmllbGQgPSB0ZXh0LnN0YXJ0c1dpdGgoJ0lOUFVUWycpICYmIHRleHQuZW5kc1dpdGgoJ10nKTtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhjb250ZXh0LnNvdXJjZVBhdGgpO1xyXG5cdFx0XHRcdGlmIChpc0lucHV0RmllbGQpIHtcclxuXHRcdFx0XHRcdGNvbnRleHQuYWRkQ2hpbGQobmV3IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkKFxyXG5cdFx0XHRcdFx0XHRjb2RlQmxvY2ssXHJcblx0XHRcdFx0XHRcdElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZS5JTkxJTkVfQ09ERV9CTE9DSyxcclxuXHRcdFx0XHRcdFx0dGV4dCwgdGhpcyxcclxuXHRcdFx0XHRcdFx0Y29udGV4dC5zb3VyY2VQYXRoLFxyXG5cdFx0XHRcdFx0XHR0aGlzLm1hcmtEb3duSW5wdXRGaWVsZEluZGV4XHJcblx0XHRcdFx0XHQpKTtcclxuXHRcdFx0XHRcdHRoaXMubWFya0Rvd25JbnB1dEZpZWxkSW5kZXggKz0gMTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvcignbWV0YS1iaW5kJywgKHNvdXJjZSwgZWwsIGN0eCkgPT4ge1xyXG5cdFx0XHRjb25zdCBjb2RlQmxvY2sgPSBlbDtcclxuXHRcdFx0Y29uc3QgdGV4dCA9IHNvdXJjZS5yZXBsYWNlKC9cXG4vZywgJycpO1xyXG5cdFx0XHRjb25zdCBpc0lucHV0RmllbGQgPSB0ZXh0LnN0YXJ0c1dpdGgoJ0lOUFVUWycpICYmIHRleHQuZW5kc1dpdGgoJ10nKTtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coY29udGV4dC5zb3VyY2VQYXRoKTtcclxuXHRcdFx0aWYgKGlzSW5wdXRGaWVsZCkge1xyXG5cdFx0XHRcdGN0eC5hZGRDaGlsZChuZXcgSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQoXHJcblx0XHRcdFx0XHRjb2RlQmxvY2ssXHJcblx0XHRcdFx0XHRJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGUuQ09ERV9CTE9DSyxcclxuXHRcdFx0XHRcdHRleHQsXHJcblx0XHRcdFx0XHR0aGlzLFxyXG5cdFx0XHRcdFx0Y3R4LnNvdXJjZVBhdGgsXHJcblx0XHRcdFx0XHR0aGlzLm1hcmtEb3duSW5wdXRGaWVsZEluZGV4KSk7XHJcblx0XHRcdFx0dGhpcy5tYXJrRG93bklucHV0RmllbGRJbmRleCArPSAxO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oJ21vZGlmeScsIGFzeW5jIGFic3RyYWN0RmlsZSA9PiB7XHJcblx0XHRcdGlmIChhYnN0cmFjdEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMudXBkYXRlTWFya2Rvd25JbnB1dEZpZWxkc09uRmlsZUNoYW5nZShhYnN0cmFjdEZpbGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9KSk7XHJcblxyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBNZXRhQmluZFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHR9XHJcblxyXG5cdG9udW5sb2FkKCk6IHZvaWQge1xyXG5cdFx0Zm9yIChjb25zdCBhY3RpdmVNYXJrZG93bklucHV0RmllbGQgb2YgdGhpcy5hY3RpdmVNYXJrZG93bklucHV0RmllbGRzKSB7XHJcblx0XHRcdGFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZC51bmxvYWQoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJlZ2lzdGVySW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQoaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkKTogdm9pZCB7XHJcblx0XHR0aGlzLmFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZHMucHVzaChpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCk7XHJcblx0fVxyXG5cclxuXHR1bnJlZ2lzdGVySW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQoaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkKTogdm9pZCB7XHJcblx0XHR0aGlzLmFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZHMgPSB0aGlzLmFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZHMuZmlsdGVyKHggPT4geC51aWQgIT09IGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLnVpZCk7XHJcblx0fVxyXG5cclxuXHRhc3luYyB1cGRhdGVNYXJrZG93bklucHV0RmllbGRzT25GaWxlQ2hhbmdlKGZpbGU6IFRGaWxlKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRsZXQgbWV0YWRhdGE6IGFueSA9IHVuZGVmaW5lZDtcclxuXHJcblx0XHRmb3IgKGNvbnN0IGFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZCBvZiB0aGlzLmFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZHMpIHtcclxuXHRcdFx0aWYgKCFhY3RpdmVNYXJrZG93bklucHV0RmllbGQuaW5wdXRGaWVsZERlY2xhcmF0aW9uPy5pc0JvdW5kIHx8ICFhY3RpdmVNYXJrZG93bklucHV0RmllbGQuYmluZFRhcmdldEZpbGUgfHwgIWFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZC5iaW5kVGFyZ2V0TWV0YWRhdGFGaWVsZCkge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoYWN0aXZlTWFya2Rvd25JbnB1dEZpZWxkLmJpbmRUYXJnZXRGaWxlLnBhdGggPT09IGZpbGUucGF0aCkge1xyXG5cdFx0XHRcdGlmIChtZXRhZGF0YSA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0XHRtZXRhZGF0YSA9IGF3YWl0IHRoaXMuZ2V0TWV0YURhdGFGb3JGaWxlKGZpbGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRhY3RpdmVNYXJrZG93bklucHV0RmllbGQudXBkYXRlVmFsdWUobWV0YWRhdGFbYWN0aXZlTWFya2Rvd25JbnB1dEZpZWxkLmJpbmRUYXJnZXRNZXRhZGF0YUZpZWxkXSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIHVwZGF0ZU1ldGFEYXRhKGtleTogc3RyaW5nLCB2YWx1ZTogYW55LCBmaWxlOiBURmlsZSk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0TG9nZ2VyLmxvZ0RlYnVnKGB1cGRhdGluZyBgLCBrZXksIGA6IGAsIHZhbHVlLCBgIGluICcke2ZpbGUucGF0aH0nYCk7XHJcblxyXG5cdFx0aWYgKCFmaWxlKSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKCdubyBmaWxlJyk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRsZXQgZmlsZUNvbnRlbnQ6IHN0cmluZyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcblxyXG5cdFx0Y29uc3QgbWV0YWRhdGE6IGFueSA9IGF3YWl0IHRoaXMuZ2V0TWV0YURhdGFGb3JGaWxlQ29udGVudChmaWxlQ29udGVudCk7XHJcblx0XHQvLyBjb25zb2xlLmxvZyhtZXRhZGF0YSk7XHJcblx0XHRpZiAoIW1ldGFkYXRhKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCByZWdFeHAgPSBuZXcgUmVnRXhwKCdeKC0tLSlcXFxcbltcXFxcc1xcXFxTXSpcXFxcbi0tLScpO1xyXG5cdFx0ZmlsZUNvbnRlbnQgPSBmaWxlQ29udGVudC5yZXBsYWNlKHJlZ0V4cCwgJycpO1xyXG5cclxuXHRcdG1ldGFkYXRhW2tleV0gPSB2YWx1ZTtcclxuXHRcdC8vIGNvbnNvbGUubG9nKG1ldGFkYXRhKTtcclxuXHJcblx0XHRmaWxlQ29udGVudCA9IGAtLS1cXG4ke3N0cmluZ2lmeVlhbWwobWV0YWRhdGEpfS0tLWAgKyBmaWxlQ29udGVudDtcclxuXHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBmaWxlQ29udGVudCk7XHJcblx0fVxyXG5cclxuXHRnZXRGaWxlc0J5TmFtZShuYW1lOiBzdHJpbmcpOiBURmlsZVtdIHtcclxuXHRcdC8vIGNvbnNvbGUubG9nKGdldEZpbGVOYW1lKHJlbW92ZUZpbGVFbmRpbmcobmFtZSkpKVxyXG5cdFx0Y29uc3QgZmlsZU5hbWVJc1BhdGggPSBpc1BhdGgobmFtZSk7XHJcblx0XHRjb25zdCBwcm9jZXNzZWRGaWxlTmFtZSA9IGZpbGVOYW1lSXNQYXRoID8gcmVtb3ZlRmlsZUVuZGluZyhuYW1lKSA6IGdldEZpbGVOYW1lKHJlbW92ZUZpbGVFbmRpbmcobmFtZSkpO1xyXG5cclxuXHRcdGNvbnN0IGFsbEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xyXG5cdFx0Y29uc3QgZmlsZXM6IFRGaWxlW10gPSBbXTtcclxuXHRcdGZvciAoY29uc3QgZmlsZSBvZiBhbGxGaWxlcykge1xyXG5cdFx0XHQvLyBjb25zb2xlLmxvZyhyZW1vdmVGaWxlRW5kaW5nKGZpbGUucGF0aCkpO1xyXG5cdFx0XHRpZiAoZmlsZU5hbWVJc1BhdGgpIHtcclxuXHRcdFx0XHRpZiAocmVtb3ZlRmlsZUVuZGluZyhmaWxlLnBhdGgpID09PSBwcm9jZXNzZWRGaWxlTmFtZSkge1xyXG5cdFx0XHRcdFx0ZmlsZXMucHVzaChmaWxlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aWYgKGdldEZpbGVOYW1lKHJlbW92ZUZpbGVFbmRpbmcoZmlsZS5uYW1lKSkgPT09IHByb2Nlc3NlZEZpbGVOYW1lKSB7XHJcblx0XHRcdFx0XHRmaWxlcy5wdXNoKGZpbGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmaWxlcztcclxuXHR9XHJcblxyXG5cdGFzeW5jIGdldE1ldGFEYXRhRm9yRmlsZShmaWxlOiBURmlsZSk6IFByb21pc2U8YW55PiB7XHJcblx0XHRpZiAoIWZpbGUpIHtcclxuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBmaWxlQ29udGVudDogc3RyaW5nID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcclxuXHRcdHJldHVybiBhd2FpdCB0aGlzLmdldE1ldGFEYXRhRm9yRmlsZUNvbnRlbnQoZmlsZUNvbnRlbnQpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgZ2V0TWV0YURhdGFGb3JGaWxlQ29udGVudChmaWxlQ29udGVudDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuXHRcdC8vIExvZ2dlci5sb2dEZWJ1ZyhgcmVhZGluZyBtZXRhZGF0YSBmb3IgJHtmaWxlLnBhdGh9YCk7XHJcblx0XHRsZXQgbWV0YWRhdGE6IGFueTtcclxuXHJcblx0XHRjb25zdCByZWdFeHAgPSBuZXcgUmVnRXhwKCdeKC0tLSlcXFxcbltcXFxcc1xcXFxTXSpcXFxcbi0tLScpO1xyXG5cdFx0Y29uc3QgZnJvbnRNYXR0ZXJSZWdFeHBSZXN1bHQgPSByZWdFeHAuZXhlYyhmaWxlQ29udGVudCk7XHJcblx0XHRpZiAoIWZyb250TWF0dGVyUmVnRXhwUmVzdWx0KSB7XHJcblx0XHRcdHJldHVybiB7fTtcclxuXHRcdH1cclxuXHRcdGxldCBmcm9udE1hdHRlciA9IGZyb250TWF0dGVyUmVnRXhwUmVzdWx0WzBdO1xyXG5cdFx0aWYgKCFmcm9udE1hdHRlcikge1xyXG5cdFx0XHRyZXR1cm4ge307XHJcblx0XHR9XHJcblx0XHQvLyBjb25zb2xlLmxvZyhmcm9udE1hdHRlcik7XHJcblx0XHRmcm9udE1hdHRlciA9IGZyb250TWF0dGVyLnN1YnN0cmluZyg0KTtcclxuXHRcdGZyb250TWF0dGVyID0gZnJvbnRNYXR0ZXIuc3Vic3RyaW5nKDAsIGZyb250TWF0dGVyLmxlbmd0aCAtIDMpO1xyXG5cdFx0Ly8gY29uc29sZS5sb2coZnJvbnRNYXR0ZXIpO1xyXG5cclxuXHRcdG1ldGFkYXRhID0gcGFyc2VZYW1sKGZyb250TWF0dGVyKTtcclxuXHJcblx0XHRpZiAoIW1ldGFkYXRhKSB7XHJcblx0XHRcdG1ldGFkYXRhID0ge307XHJcblx0XHR9XHJcblxyXG5cdFx0Ly9jb25zb2xlLmxvZyhtZXRhZGF0YSk7XHJcblxyXG5cdFx0cmV0dXJuIG1ldGFkYXRhO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHREYXRlUGFyc2VyLmRhdGVGb3JtYXQgPSB0aGlzLnNldHRpbmdzLnByZWZlcnJlZERhdGVGb3JtYXQ7XHJcblx0XHRMb2dnZXIuZGV2TW9kZSA9IHRoaXMuc2V0dGluZ3MuZGV2TW9kZTtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQge0FwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZ30gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgTWV0YUJpbmRQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE1ldGFCaW5kUGx1Z2luU2V0dGluZ3Mge1xyXG5cdGRldk1vZGU6IGJvb2xlYW47XHJcblx0cHJlZmVycmVkRGF0ZUZvcm1hdDogc3RyaW5nO1xyXG5cdHVzZVVzRGF0ZUlucHV0T3JkZXI6IGJvb2xlYW47XHJcblx0c3luY0ludGVydmFsOiBudW1iZXI7XHJcblx0bWF4U3luY0ludGVydmFsOiBudW1iZXI7XHJcblx0bWluU3luY0ludGVydmFsOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNZXRhQmluZFBsdWdpblNldHRpbmdzID0ge1xyXG5cdGRldk1vZGU6IGZhbHNlLFxyXG5cdHByZWZlcnJlZERhdGVGb3JtYXQ6ICdZWVlZLU1NLUREJyxcclxuXHR1c2VVc0RhdGVJbnB1dE9yZGVyOiBmYWxzZSxcclxuXHRzeW5jSW50ZXJ2YWw6IDIwMCxcclxuXHRtaW5TeW5jSW50ZXJ2YWw6IDUwLFxyXG5cdG1heFN5bmNJbnRlcnZhbDogMTAwMCxcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBNZXRhQmluZFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IE1ldGFCaW5kUGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNZXRhQmluZFBsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ01ldGEgQmluZCBQbHVnaW4gU2V0dGluZ3MnfSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdTeW5jIGludGVydmFsJylcclxuXHRcdFx0LnNldERlc2MoYFRoZSBpbnRlcnZhbCBpbiBtaWxsaS1zZWNvbmRzIGJldHdlZW4gZGlzayB3cml0ZXMuIENoYW5naW5nIHRoaXMgbnVtYmVyIGlzIG5vdCByZWNvbW1lbmRlZCBleGNlcHQgaWYgeW91ciBoYXJkIGRyaXZlIGlzIGV4Y2VwdGlvbmFsbHkgc2xvdy4gU3RhbmRhcmQ6ICR7REVGQVVMVF9TRVRUSU5HUy5zeW5jSW50ZXJ2YWx9OyBNaW5pbXVtOiAke0RFRkFVTFRfU0VUVElOR1MubWluU3luY0ludGVydmFsfTsgTWF4aW11bTogJHtERUZBVUxUX1NFVFRJTkdTLm1heFN5bmNJbnRlcnZhbH1gKVxyXG5cdFx0XHQuYWRkVGV4dChjYiA9PiB7XHJcblx0XHRcdFx0Y2Iuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc3luY0ludGVydmFsLnRvU3RyaW5nKCkpO1xyXG5cdFx0XHRcdGNiLm9uQ2hhbmdlKGRhdGEgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3luY0ludGVydmFsID0gTnVtYmVyLnBhcnNlSW50KGRhdGEpO1xyXG5cdFx0XHRcdFx0aWYgKE51bWJlci5pc05hTih0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeW5jSW50ZXJ2YWwpKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA9IERFRkFVTFRfU0VUVElOR1Muc3luY0ludGVydmFsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA8IERFRkFVTFRfU0VUVElOR1MubWluU3luY0ludGVydmFsKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA9IERFRkFVTFRfU0VUVElOR1MubWluU3luY0ludGVydmFsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA+IERFRkFVTFRfU0VUVElOR1MubWF4U3luY0ludGVydmFsKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA9IERFRkFVTFRfU0VUVElOR1MubWF4U3luY0ludGVydmFsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnRGF0ZSBmb3JtYXQnKVxyXG5cdFx0XHQuc2V0RGVzYyhgVGhlIGRhdGUgZm9ybWF0IHRvIGJlIHVzZWQgYnkgdGhpcyBwbHVnaW4uYClcclxuXHRcdFx0LmFkZFRleHQoY2IgPT4ge1xyXG5cdFx0XHRcdGNiLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZlcnJlZERhdGVGb3JtYXQpO1xyXG5cdFx0XHRcdGNiLm9uQ2hhbmdlKGRhdGEgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlZmVycmVkRGF0ZUZvcm1hdCA9IGRhdGE7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdVc2UgVVMgZGF0ZSBpbnB1dCBmaWVsZCBvcmRlcicpXHJcblx0XHRcdC5zZXREZXNjKGBXaGVuIGVuYWJsZWQgdGhlIG1vbnRoIGlucHV0IGlzIGJlZm9yZSB0aGUgZGF5IGlucHV0LmApXHJcblx0XHRcdC5hZGRUb2dnbGUoY2IgPT4ge1xyXG5cdFx0XHRcdGNiLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZVVzRGF0ZUlucHV0T3JkZXIpO1xyXG5cdFx0XHRcdGNiLm9uQ2hhbmdlKGRhdGEgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlVXNEYXRlSW5wdXRPcmRlciA9IGRhdGE7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdEZXYgTW9kZScpXHJcblx0XHRcdC5zZXREZXNjKCdFbmFibGUgZGV2IG1vZGUuIE5vdCByZWNvbW1lbmRlZCB1bmxlc3MgeW91IHdhbnQgdG8gZGVidWcgdGhpcyBwbHVnaW4uJylcclxuXHRcdFx0LmFkZFRvZ2dsZShjYiA9PiB7XHJcblx0XHRcdFx0Y2Iuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGV2TW9kZSk7XHJcblx0XHRcdFx0Y2Iub25DaGFuZ2UoZGF0YSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZXZNb2RlID0gZGF0YTtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7TWFya2Rvd25SZW5kZXJDaGlsZCwgVEZpbGV9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBNZXRhQmluZFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHtMb2dnZXJ9IGZyb20gJy4vdXRpbHMvTG9nZ2VyJztcbmltcG9ydCB7QWJzdHJhY3RJbnB1dEZpZWxkfSBmcm9tICcuL2lucHV0RmllbGRzL0Fic3RyYWN0SW5wdXRGaWVsZCc7XG5pbXBvcnQge0lucHV0RmllbGRGYWN0b3J5fSBmcm9tICcuL2lucHV0RmllbGRzL0lucHV0RmllbGRGYWN0b3J5JztcbmltcG9ydCB7SW5wdXRGaWVsZEFyZ3VtZW50LCBJbnB1dEZpZWxkRGVjbGFyYXRpb24sIElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlcn0gZnJvbSAnLi9wYXJzZXJzL0lucHV0RmllbGREZWNsYXJhdGlvblBhcnNlcic7XG5pbXBvcnQge01ldGFCaW5kQmluZFRhcmdldEVycm9yLCBNZXRhQmluZEludGVybmFsRXJyb3J9IGZyb20gJy4vdXRpbHMvVXRpbHMnO1xuXG5leHBvcnQgZW51bSBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGUge1xuXHRJTkxJTkVfQ09ERV9CTE9DSyxcblx0Q09ERV9CTE9DSyxcbn1cblxuZXhwb3J0IGNsYXNzIElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkIGV4dGVuZHMgTWFya2Rvd25SZW5kZXJDaGlsZCB7XG5cdHBsdWdpbjogTWV0YUJpbmRQbHVnaW47XG5cdG1ldGFEYXRhOiBhbnk7XG5cdGZpbGVQYXRoOiBzdHJpbmc7XG5cdHVpZDogbnVtYmVyO1xuXHRpbnB1dEZpZWxkOiBBYnN0cmFjdElucHV0RmllbGQgfCB1bmRlZmluZWQ7XG5cdGVycm9yOiBzdHJpbmc7XG5cblx0aW5wdXRGaWVsZERlY2xhcmF0aW9uOiBJbnB1dEZpZWxkRGVjbGFyYXRpb24gfCB1bmRlZmluZWQ7XG5cdGJpbmRUYXJnZXRGaWxlOiBURmlsZSB8IHVuZGVmaW5lZDtcblx0YmluZFRhcmdldE1ldGFkYXRhRmllbGQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuXHRsaW1pdEludGVydmFsOiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cdGludGVydmFsQ291bnRlcjogbnVtYmVyO1xuXHR2YWx1ZVF1ZXVlOiBhbnlbXTtcblxuXHRjb25zdHJ1Y3Rvcihjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHR5cGU6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZSwgZnVsbERlY2xhcmF0aW9uOiBzdHJpbmcsIHBsdWdpbjogTWV0YUJpbmRQbHVnaW4sIGZpbGVQYXRoOiBzdHJpbmcsIHVpZDogbnVtYmVyKSB7XG5cdFx0c3VwZXIoY29udGFpbmVyRWwpO1xuXG5cdFx0dGhpcy5lcnJvciA9ICcnO1xuXHRcdHRoaXMuZmlsZVBhdGggPSBmaWxlUGF0aDtcblx0XHR0aGlzLnVpZCA9IHVpZDtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblxuXHRcdHRoaXMudmFsdWVRdWV1ZSA9IFtdO1xuXHRcdHRoaXMuaW50ZXJ2YWxDb3VudGVyID0gMDtcblxuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLmlucHV0RmllbGREZWNsYXJhdGlvbiA9IElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5wYXJzZShmdWxsRGVjbGFyYXRpb24pO1xuXG5cdFx0XHRpZiAodGhpcy5pbnB1dEZpZWxkRGVjbGFyYXRpb24uaXNCb3VuZCkge1xuXHRcdFx0XHR0aGlzLnBhcnNlQmluZFRhcmdldCgpO1xuXHRcdFx0XHQvLyBAdHMtaWdub3JlIGBwYXJzZUJpbmRUYXJnZXRgIHNldHMgYGJpbmRUYXJnZXRGaWxlYCBhbmQgYGJpbmRUYXJnZXRNZXRhZGF0YUZpZWxkYCBvciB0aHJvd3MgYW4gZXJyb3IuXG5cdFx0XHRcdHRoaXMubWV0YURhdGEgPSB0aGlzLnBsdWdpbi5nZXRNZXRhRGF0YUZvckZpbGUodGhpcy5iaW5kVGFyZ2V0RmlsZSk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuaW5wdXRGaWVsZCA9IElucHV0RmllbGRGYWN0b3J5LmNyZWF0ZUlucHV0RmllbGQodGhpcy5pbnB1dEZpZWxkRGVjbGFyYXRpb24uaW5wdXRGaWVsZFR5cGUsIHtcblx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0aW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ6IHRoaXMsXG5cdFx0XHRcdG9uVmFsdWVDaGFuZ2VkOiB0aGlzLnB1c2hUb1ZhbHVlUXVldWUuYmluZCh0aGlzKSxcblx0XHRcdH0pO1xuXG5cdFx0XHR0aGlzLmxpbWl0SW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4gdGhpcy5hcHBseVZhbHVlUXVldWVUb01ldGFkYXRhKCksIHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCk7XG5cdFx0fSBjYXRjaCAoZTogYW55KSB7XG5cdFx0XHR0aGlzLmVycm9yID0gZS5tZXNzYWdlO1xuXHRcdFx0TG9nZ2VyLmxvZ1dhcm5pbmcoZSk7XG5cdFx0fVxuXHR9XG5cblx0cGFyc2VCaW5kVGFyZ2V0KCk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5pbnB1dEZpZWxkRGVjbGFyYXRpb24pIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ2lucHV0RmllbGREZWNsYXJhdGlvbiBpcyB1bmRlZmluZWQsIGNhbiBub3QgcGFyc2UgYmluZCB0YXJnZXQnKTtcblx0XHR9XG5cblx0XHRjb25zdCBiaW5kVGFyZ2V0UGFydHMgPSB0aGlzLmlucHV0RmllbGREZWNsYXJhdGlvbi5iaW5kVGFyZ2V0LnNwbGl0KCcjJyk7XG5cblx0XHRpZiAoYmluZFRhcmdldFBhcnRzLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0Ly8gdGhlIGJpbmQgdGFyZ2V0IGlzIGluIHRoZSBzYW1lIGZpbGVcblx0XHRcdHRoaXMuYmluZFRhcmdldE1ldGFkYXRhRmllbGQgPSB0aGlzLmlucHV0RmllbGREZWNsYXJhdGlvbi5iaW5kVGFyZ2V0O1xuXG5cdFx0XHRjb25zdCBmaWxlczogVEZpbGVbXSA9IHRoaXMucGx1Z2luLmdldEZpbGVzQnlOYW1lKHRoaXMuZmlsZVBhdGgpO1xuXHRcdFx0aWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRCaW5kVGFyZ2V0RXJyb3IoJ2JpbmQgdGFyZ2V0IGZpbGUgbm90IGZvdW5kJyk7XG5cdFx0XHR9IGVsc2UgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHR0aGlzLmJpbmRUYXJnZXRGaWxlID0gZmlsZXNbMF07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRCaW5kVGFyZ2V0RXJyb3IoJ2JpbmQgdGFyZ2V0IHJlc29sdmVzIHRvIG11bHRpcGxlIGZpbGVzLCBwbGVhc2UgYWxzbyBzcGVjaWZ5IHRoZSBmaWxlIHBhdGgnKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGJpbmRUYXJnZXRQYXJ0cy5sZW5ndGggPT09IDIpIHtcblx0XHRcdC8vIHRoZSBiaW5kIHRhcmdldCBpcyBpbiBhbm90aGVyIGZpbGVcblx0XHRcdHRoaXMuYmluZFRhcmdldE1ldGFkYXRhRmllbGQgPSBiaW5kVGFyZ2V0UGFydHNbMV07XG5cblx0XHRcdGNvbnN0IGZpbGVzOiBURmlsZVtdID0gdGhpcy5wbHVnaW4uZ2V0RmlsZXNCeU5hbWUoYmluZFRhcmdldFBhcnRzWzBdKTtcblx0XHRcdGlmIChmaWxlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kQmluZFRhcmdldEVycm9yKCdiaW5kIHRhcmdldCBmaWxlIG5vdCBmb3VuZCcpO1xuXHRcdFx0fSBlbHNlIGlmIChmaWxlcy5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0dGhpcy5iaW5kVGFyZ2V0RmlsZSA9IGZpbGVzWzBdO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kQmluZFRhcmdldEVycm9yKCdiaW5kIHRhcmdldCByZXNvbHZlcyB0byBtdWx0aXBsZSBmaWxlcywgcGxlYXNlIGFsc28gc3BlY2lmeSB0aGUgZmlsZSBwYXRoJyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEJpbmRUYXJnZXRFcnJvcignYmluZCB0YXJnZXQgbWF5IG9ubHkgY29udGFpbiBvbmUgXFwnI1xcJyB0byBzcGVjaWZ5IHRoZSBtZXRhZGF0YSBmaWVsZCcpO1xuXHRcdH1cblx0fVxuXG5cdC8vIHVzZSB0aGlzIGludGVydmFsIHRvIHJlZHVjZSB3cml0aW5nIG9wZXJhdGlvbnNcblx0YXN5bmMgYXBwbHlWYWx1ZVF1ZXVlVG9NZXRhZGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpZiAoIXRoaXMuaW5wdXRGaWVsZERlY2xhcmF0aW9uKSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdpbnB1dEZpZWxkRGVjbGFyYXRpb24gaXMgdW5kZWZpbmVkLCBjYW4gbm90IHVwZGF0ZSBtZXRhZGF0YScpO1xuXHRcdH1cblx0XHRpZiAoIXRoaXMuaW5wdXRGaWVsZERlY2xhcmF0aW9uLmlzQm91bmQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKCF0aGlzLmJpbmRUYXJnZXRNZXRhZGF0YUZpZWxkIHx8ICF0aGlzLmJpbmRUYXJnZXRGaWxlKSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdiaW5kVGFyZ2V0TWV0YWRhdGFGaWVsZCBvciBiaW5kVGFyZ2V0RmlsZSBpcyB1bmRlZmluZWQsIGNhbiBub3QgdXBkYXRlIG1ldGFkYXRhJyk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMudmFsdWVRdWV1ZS5sZW5ndGggPiAwKSB7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyh0aGlzLnZhbHVlUXVldWUuYXQoLTEpKVxuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4udXBkYXRlTWV0YURhdGEodGhpcy5iaW5kVGFyZ2V0TWV0YWRhdGFGaWVsZCwgdGhpcy52YWx1ZVF1ZXVlLmF0KC0xKSwgdGhpcy5iaW5kVGFyZ2V0RmlsZSk7XG5cdFx0XHR0aGlzLnZhbHVlUXVldWUgPSBbXTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBwdXNoVG9WYWx1ZVF1ZXVlKHZhbHVlOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpZiAodGhpcy5pbnB1dEZpZWxkRGVjbGFyYXRpb24/LmlzQm91bmQpIHtcblx0XHRcdHRoaXMudmFsdWVRdWV1ZS5wdXNoKHZhbHVlKTtcblx0XHR9XG5cdH1cblxuXHR1cGRhdGVWYWx1ZSh2YWx1ZTogYW55KTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLmlucHV0RmllbGQpIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ2lucHV0RmllbGQgaXMgdW5kZWZpbmVkLCBjYW4gbm90IHVwZGF0ZSB2YWx1ZScpO1xuXHRcdH1cblxuXHRcdGlmICh2YWx1ZSA9PSBudWxsKSB7XG5cdFx0XHR2YWx1ZSA9IHRoaXMuaW5wdXRGaWVsZC5nZXREZWZhdWx0VmFsdWUoKTtcblx0XHR9XG5cblx0XHRpZiAoIXRoaXMuaW5wdXRGaWVsZC5pc0VxdWFsVmFsdWUodmFsdWUpICYmIHRoaXMudmFsdWVRdWV1ZS5sZW5ndGggPT09IDApIHtcblx0XHRcdExvZ2dlci5sb2dEZWJ1ZyhgdXBkYXRpbmcgaW5wdXQgZmllbGQgJHt0aGlzLnVpZH0gdG9gLCB2YWx1ZSk7XG5cdFx0XHR0aGlzLmlucHV0RmllbGQuc2V0VmFsdWUodmFsdWUpO1xuXHRcdH1cblx0fVxuXG5cdGdldEluaXRpYWxWYWx1ZSgpOiBhbnkgfCB1bmRlZmluZWQge1xuXHRcdGlmICh0aGlzLmlucHV0RmllbGREZWNsYXJhdGlvbj8uaXNCb3VuZCkge1xuXHRcdFx0cmV0dXJuIHRoaXMubWV0YURhdGFbdGhpcy5iaW5kVGFyZ2V0TWV0YWRhdGFGaWVsZCA/PyAnJ10gPz8gdGhpcy5pbnB1dEZpZWxkPy5nZXREZWZhdWx0VmFsdWUoKTtcblx0XHR9XG5cdH1cblxuXHRnZXRBcmd1bWVudHMobmFtZTogc3RyaW5nKTogSW5wdXRGaWVsZEFyZ3VtZW50W10ge1xuXHRcdGlmICghdGhpcy5pbnB1dEZpZWxkRGVjbGFyYXRpb24pIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ2lucHV0RmllbGREZWNsYXJhdGlvbiBpcyB1bmRlZmluZWQsIGNhbiBub3QgcmV0cmlldmUgYXJndW1lbnRzJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuaW5wdXRGaWVsZERlY2xhcmF0aW9uLmFyZ3VtZW50cy5maWx0ZXIoeCA9PiB4Lm5hbWUgPT09IG5hbWUpO1xuXHR9XG5cblx0Z2V0QXJndW1lbnQobmFtZTogc3RyaW5nKTogSW5wdXRGaWVsZEFyZ3VtZW50IHwgdW5kZWZpbmVkIHtcblx0XHRyZXR1cm4gdGhpcy5nZXRBcmd1bWVudHMobmFtZSkuYXQoMCk7XG5cdH1cblxuXHRhc3luYyBvbmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0TG9nZ2VyLmxvZ0RlYnVnKCdsb2FkJywgdGhpcyk7XG5cblx0XHR0aGlzLm1ldGFEYXRhID0gYXdhaXQgdGhpcy5tZXRhRGF0YTtcblxuXHRcdGNvbnN0IGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuXHRcdGNvbnRhaW5lci5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC13cmFwcGVyJyk7XG5cdFx0dGhpcy5jb250YWluZXJFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dCcpO1xuXG5cdFx0aWYgKHRoaXMuZXJyb3IpIHtcblx0XHRcdGNvbnRhaW5lci5pbm5lclRleHQgPSBgIC0+IEVSUk9SOiAke3RoaXMuZXJyb3J9YDtcblx0XHRcdGNvbnRhaW5lci5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1lcnJvcicpO1xuXHRcdFx0dGhpcy5jb250YWluZXJFbC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICghdGhpcy5pbnB1dEZpZWxkKSB7XG5cdFx0XHRjb250YWluZXIuaW5uZXJUZXh0ID0gYCAtPiBFUlJPUjogJHsobmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignaW5wdXQgZmllbGQgaXMgdW5kZWZpbmVkIGFuZCBlcnJvciBpcyBlbXB0eScpLm1lc3NhZ2UpfWA7XG5cdFx0XHRjb250YWluZXIuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4tZXJyb3InKTtcblx0XHRcdHRoaXMuY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlcklucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkKHRoaXMpO1xuXG5cdFx0dGhpcy5pbnB1dEZpZWxkLnJlbmRlcihjb250YWluZXIpO1xuXG5cdFx0Y29uc3QgY2xhc3NBcmd1bWVudCA9IHRoaXMuZ2V0QXJndW1lbnRzKCdjbGFzcycpO1xuXHRcdGlmIChjbGFzc0FyZ3VtZW50KSB7XG5cdFx0XHR0aGlzLmlucHV0RmllbGQuZ2V0SHRtbEVsZW1lbnQoKS5hZGRDbGFzc2VzKGNsYXNzQXJndW1lbnQubWFwKHggPT4geC52YWx1ZSkpO1xuXHRcdH1cblxuXG5cdFx0dGhpcy5jb250YWluZXJFbC5lbXB0eSgpO1xuXHRcdHRoaXMuY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblx0fVxuXG5cdG9udW5sb2FkKCk6IHZvaWQge1xuXHRcdExvZ2dlci5sb2dEZWJ1ZygndW5sb2FkJywgdGhpcyk7XG5cblx0XHR0aGlzLnBsdWdpbi51bnJlZ2lzdGVySW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQodGhpcyk7XG5cblx0XHRzdXBlci5vbnVubG9hZCgpO1xuXG5cdFx0Ly9jb25zb2xlLmxvZygndW5sb2FkJywgdGhpcyk7XG5cdFx0d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5saW1pdEludGVydmFsKTtcblx0fVxufVxuIiwgImV4cG9ydCBjbGFzcyBMb2dnZXIge1xyXG5cdHN0YXRpYyBkZXZNb2RlOiBib29sZWFuO1xyXG5cdHN0YXRpYyBwcmVmaXg6IHN0cmluZyA9ICdtZXRhLWJpbmQgfCc7XHJcblxyXG5cdC8qKlxyXG5cdCAqIExvZ3MgdG8gdGhlIGNvbnNvbGUgd2l0aCB0aGUgcGx1Z2luIHByZWZpeFxyXG5cdCAqXHJcblx0ICogQHBhcmFtIGRhdGFcclxuXHQgKi9cclxuXHRzdGF0aWMgbG9nKC4uLmRhdGE6IGFueSk6IHZvaWQge1xyXG5cdFx0Y29uc29sZS5sb2codGhpcy5wcmVmaXgsIC4uLmRhdGEpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogTG9ncyB0byB0aGUgY29uc29sZSB3aXRoIHRoZSBwbHVnaW4gcHJlZml4LCBpZiBkZXYgbW9kZSBpcyB0dXJuZWQgb24gaW4gdGhlIHBsdWdpbiBzZXR0aW5nc1xyXG5cdCAqXHJcblx0ICogQHBhcmFtIGRhdGFcclxuXHQgKi9cclxuXHRzdGF0aWMgbG9nRGVidWcoLi4uZGF0YTogYW55KTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5kZXZNb2RlKSB7XHJcblx0XHRcdExvZ2dlci5sb2coLi4uZGF0YSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBMb2dzIGEgd2FybmluZyB0byB0aGUgY29uc29sZSB3aXRoIHRoZSBwbHVnaW4gcHJlZml4XHJcblx0ICpcclxuXHQgKiBAcGFyYW0gZGF0YVxyXG5cdCAqL1xyXG5cdHN0YXRpYyBsb2dXYXJuaW5nKC4uLmRhdGE6IGFueSk6IHZvaWQge1xyXG5cdFx0Y29uc29sZS53YXJuKHRoaXMucHJlZml4LCBkYXRhKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIExvZ3MgYW4gZXJyb3IgdG8gdGhlIGNvbnNvbGUgd2l0aCB0aGUgcGx1Z2luIHByZWZpeFxyXG5cdCAqXHJcblx0ICogQHBhcmFtIGRhdGFcclxuXHQgKi9cclxuXHRzdGF0aWMgbG9nRXJyb3IoLi4uZGF0YTogYW55KTogdm9pZCB7XHJcblx0XHRjb25zb2xlLmVycm9yKHRoaXMucHJlZml4LCBkYXRhKTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7SW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGR9IGZyb20gJy4uL0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkJztcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdElucHV0RmllbGQge1xyXG5cdHN0YXRpYyBhbGxvd0NvZGVCbG9jazogYm9vbGVhbiA9IHRydWU7XHJcblx0c3RhdGljIGFsbG93SW5saW5lQ29kZUJsb2NrOiBib29sZWFuID0gdHJ1ZTtcclxuXHRpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ7XHJcblx0b25WYWx1ZUNoYW5nZTogKHZhbHVlOiBhbnkpID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIG9uVmFsdWVDaGFuZ2U6ICh2YWx1ZTogYW55KSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPikge1xyXG5cdFx0dGhpcy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCA9IGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkO1xyXG5cdFx0dGhpcy5vblZhbHVlQ2hhbmdlID0gb25WYWx1ZUNoYW5nZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgdGhlIGN1cnJlbnQgY29udGVudCBvZiB0aGUgaW5wdXQgZmllbGRcclxuXHQgKi9cclxuXHRhYnN0cmFjdCBnZXRWYWx1ZSgpOiBhbnk7XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldHMgdGhlIHZhbHVlIG9uIHRoaXMgaW5wdXQgZmllbGQsIG92ZXJyaWRpbmcgdGhlIGN1cnJlbnQgY29udGVudFxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHZhbHVlXHJcblx0ICovXHJcblx0YWJzdHJhY3Qgc2V0VmFsdWUodmFsdWU6IGFueSk6IHZvaWQ7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrcyBpZiB0aGUgdmFsdWUgaXMgdGhlIHNhbWUgYXMgdGhlIHZhbHVlIG9mIHRoaXMgaW5wdXQgZmllbGRcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB2YWx1ZVxyXG5cdCAqL1xyXG5cdGFic3RyYWN0IGlzRXF1YWxWYWx1ZSh2YWx1ZTogYW55KTogYm9vbGVhbjtcclxuXHJcblx0LyoqXHJcblx0ICogUmV0dXJucyB0aGUgZGVmYXVsdCB2YWx1ZSBvZiB0aGlzIGlucHV0IGZpZWxkXHJcblx0ICovXHJcblx0YWJzdHJhY3QgZ2V0RGVmYXVsdFZhbHVlKCk6IGFueTtcclxuXHJcblx0LyoqXHJcblx0ICogUmV0dXJucyB0aGUgSFRNTCBlbGVtZW50IHRoaXMgaW5wdXQgZmllbGQgaXMgd3JhcHBlZCBpblxyXG5cdCAqL1xyXG5cdGFic3RyYWN0IGdldEh0bWxFbGVtZW50KCk6IEhUTUxFbGVtZW50O1xyXG5cclxuXHQvKipcclxuXHQgKiBSZW5kZXJzIHRoZSBpbnB1dCBmaWVsZCBhcyBhIGNoaWxkIG9mIHRoZSBjb250YWluZXJcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBjb250YWluZXJcclxuXHQgKi9cclxuXHRhYnN0cmFjdCByZW5kZXIoY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCk6IHZvaWQ7XHJcbn1cclxuIiwgImltcG9ydCB7QWJzdHJhY3RJbnB1dEZpZWxkfSBmcm9tICcuL0Fic3RyYWN0SW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7VG9nZ2xlQ29tcG9uZW50fSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7TG9nZ2VyfSBmcm9tICcuLi91dGlscy9Mb2dnZXInO1xyXG5pbXBvcnQge01ldGFCaW5kSW50ZXJuYWxFcnJvcn0gZnJvbSAnLi4vdXRpbHMvVXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRvZ2dsZUlucHV0RmllbGQgZXh0ZW5kcyBBYnN0cmFjdElucHV0RmllbGQge1xyXG5cdHRvZ2dsZUNvbXBvbmVudDogVG9nZ2xlQ29tcG9uZW50IHwgdW5kZWZpbmVkO1xyXG5cclxuXHRnZXRWYWx1ZSgpOiBhbnkge1xyXG5cdFx0aWYgKCF0aGlzLnRvZ2dsZUNvbXBvbmVudCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCd0b2dnbGUgaW5wdXQgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHRoaXMudG9nZ2xlQ29tcG9uZW50LmdldFZhbHVlKCk7XHJcblx0fVxyXG5cclxuXHRzZXRWYWx1ZSh2YWx1ZTogYW55KTogdm9pZCB7XHJcblx0XHRpZiAoIXRoaXMudG9nZ2xlQ29tcG9uZW50KSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3RvZ2dsZSBpbnB1dCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlID09ICdib29sZWFuJykge1xyXG5cdFx0XHR0aGlzLnRvZ2dsZUNvbXBvbmVudC5zZXRWYWx1ZSh2YWx1ZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRMb2dnZXIubG9nV2FybmluZyhgY2FuIG5vdCBzZXQgdmFsdWUgb2YgdG9nZ2xlIHRvIFxcJyR7dmFsdWV9XFwnYCk7XHJcblx0XHRcdHRoaXMudG9nZ2xlQ29tcG9uZW50LnNldFZhbHVlKGZhbHNlKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlzRXF1YWxWYWx1ZSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdGhpcy5nZXRWYWx1ZSgpID09IHZhbHVlO1xyXG5cdH1cclxuXHJcblx0Z2V0RGVmYXVsdFZhbHVlKCk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0Z2V0SHRtbEVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xyXG5cdFx0aWYgKCF0aGlzLnRvZ2dsZUNvbXBvbmVudCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCd0b2dnbGUgaW5wdXQgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLnRvZ2dsZUNvbXBvbmVudC50b2dnbGVFbDtcclxuXHR9XHJcblxyXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBjb21wb25lbnQgPSBuZXcgVG9nZ2xlQ29tcG9uZW50KGNvbnRhaW5lcik7XHJcblx0XHRjb21wb25lbnQuc2V0VmFsdWUodGhpcy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZC5nZXRJbml0aWFsVmFsdWUoKSk7XHJcblx0XHRjb21wb25lbnQub25DaGFuZ2UodGhpcy5vblZhbHVlQ2hhbmdlKTtcclxuXHRcdHRoaXMudG9nZ2xlQ29tcG9uZW50ID0gY29tcG9uZW50O1xyXG5cdH1cclxuXHJcbn1cclxuIiwgImV4cG9ydCBjbGFzcyBNZXRhQmluZEludGVybmFsRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcblx0Y29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XHJcblx0XHRzdXBlcihgW01CX0lOVEVSTkFMX0VSUk9SIC0gcGxlYXNlIHJlcG9ydCB0aGlzIGVycm9yIGhlcmUgaHR0cHM6Ly9naXRodWIuY29tL21Qcm9qZWN0c0NvZGUvb2JzaWRpYW4tbWV0YS1iaW5kLXBsdWdpbi9pc3N1ZXNdICR7bWVzc2FnZX1gKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBNZXRhQmluZFBhcnNpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcclxuXHRjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcpIHtcclxuXHRcdHN1cGVyKGBbTUJfUEFSU0lOR19FUlJPUl0gJHttZXNzYWdlfWApO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE1ldGFCaW5kQmluZFRhcmdldEVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG5cdGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZykge1xyXG5cdFx0c3VwZXIoYFtNQl9CSU5EX1RBUkdFVF9FUlJPUl0gJHttZXNzYWdlfWApO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldHMgdGhlIGZpbGUgbmFtZSBmcm9tIGEgcGF0aFxyXG4gKlxyXG4gKiBAcGFyYW0gcGF0aFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVOYW1lKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0cmV0dXJuIHBhdGguc3BsaXQoJy8nKS5hdCgtMSkgPz8gcGF0aDtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBpZiBhIHBhdGggaXMgYSBwYXRoIG9yIGEgZmlsZSBuYW1lXHJcbiAqXHJcbiAqIEBwYXJhbSBwYXRoXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNQYXRoKHBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdHJldHVybiBwYXRoLnNwbGl0KCcvJykubGVuZ3RoID4gMTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbW92ZXMgdGhlIGZpbGUgZW5kaW5nIG9mIGEgZmlsZSBuYW1lXHJcbiAqXHJcbiAqIEBwYXJhbSBmaWxlTmFtZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUZpbGVFbmRpbmcoZmlsZU5hbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0Y29uc3QgZmlsZU5hbWVQYXJ0cyA9IGZpbGVOYW1lLnNwbGl0KCcuJyk7XHJcblx0aWYgKGZpbGVOYW1lUGFydHMubGVuZ3RoID09PSAxKSB7XHJcblx0XHRyZXR1cm4gZmlsZU5hbWU7XHJcblx0fSBlbHNlIHtcclxuXHRcdGxldCBuZXdGaWxlTmFtZSA9IGZpbGVOYW1lUGFydHNbMF07XHJcblx0XHRmb3IgKGxldCBpID0gMTsgaSA8IGZpbGVOYW1lUGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XHJcblx0XHRcdG5ld0ZpbGVOYW1lICs9ICcuJyArIGZpbGVOYW1lUGFydHNbaV07XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbmV3RmlsZU5hbWU7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogQ2xhbXAsIHVudXNlZFxyXG4gKlxyXG4gKiBAcGFyYW0gbnVtXHJcbiAqIEBwYXJhbSBtaW5cclxuICogQHBhcmFtIG1heFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNsYW1wKG51bTogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIge1xyXG5cdHJldHVybiBNYXRoLm1pbihNYXRoLm1heChudW0sIG1pbiksIG1heCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBqcyBjYW4ndCBldmVuIGltcGxlbWVudCBtb2R1bG8gY29ycmVjdGx5Li4uXHJcbiAqXHJcbiAqIEBwYXJhbSBuXHJcbiAqIEBwYXJhbSBtXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbW9kKG46IG51bWJlciwgbTogbnVtYmVyKTogbnVtYmVyIHtcclxuXHRyZXR1cm4gKChuICUgbSkgKyBtKSAlIG07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgMiBhcnJheXMgYXJlIGVxdWFsLCB0aGUgYXJyYXlzIHNob3VsZCBoYXZlIHRoZSBzYW1lIGRhdGF0eXBlXHJcbiAqXHJcbiAqIEBwYXJhbSBhcnIxXHJcbiAqIEBwYXJhbSBhcnIyXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlFcXVhbHMoYXJyMTogYW55W10sIGFycjI6IGFueVtdKTogYm9vbGVhbiB7XHJcblx0aWYgKGFycjEubGVuZ3RoICE9PSBhcnIyLmxlbmd0aCkge1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0Zm9yIChjb25zdCBhcnIxRWxlbWVudCBvZiBhcnIxKSB7XHJcblx0XHRpZiAoIWFycjIuY29udGFpbnMoYXJyMUVsZW1lbnQpKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICogVGVtcGxhdGUgXCJlbmdpbmVcIiBmcm9tIG15IG1lZGlhIGRiIHBsdWdpblxyXG4gKlxyXG4gKiBAcGFyYW0gdGVtcGxhdGVcclxuICogQHBhcmFtIGRhdGFNb2RlbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VUYWdzKHRlbXBsYXRlOiBzdHJpbmcsIGRhdGFNb2RlbDogYW55KTogc3RyaW5nIHtcclxuXHRjb25zdCByZXNvbHZlZFRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZShuZXcgUmVnRXhwKCd7ey4qP319JywgJ2cnKSwgKG1hdGNoOiBzdHJpbmcpID0+IHJlcGxhY2VUYWcobWF0Y2gsIGRhdGFNb2RlbCkpO1xyXG5cclxuXHRyZXR1cm4gcmVzb2x2ZWRUZW1wbGF0ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRha2VzIGluIGEgdGVtcGxhdGUgbWF0Y2ggYW5kIHJldHVybnMgdGhlIHJlcGxhY2VtZW50IGRhdGFcclxuICpcclxuICogQHBhcmFtIG1hdGNoXHJcbiAqIEBwYXJhbSBkYXRhTW9kZWxcclxuICovXHJcbmZ1bmN0aW9uIHJlcGxhY2VUYWcobWF0Y2g6IHN0cmluZywgZGF0YU1vZGVsOiBhbnkpOiBzdHJpbmcge1xyXG5cdGxldCB0YWcgPSBtYXRjaDtcclxuXHR0YWcgPSB0YWcuc3Vic3RyaW5nKDIpO1xyXG5cdHRhZyA9IHRhZy5zdWJzdHJpbmcoMCwgdGFnLmxlbmd0aCAtIDIpO1xyXG5cdHRhZyA9IHRhZy50cmltKCk7XHJcblxyXG5cdGNvbnN0IHBhcnRzID0gdGFnLnNwbGl0KCc6Jyk7XHJcblx0aWYgKHBhcnRzLmxlbmd0aCA9PT0gMSkge1xyXG5cdFx0Y29uc3QgcGF0aCA9IHBhcnRzWzBdLnNwbGl0KCcuJyk7XHJcblxyXG5cdFx0Y29uc3Qgb2JqID0gdHJhdmVyc2VPYmplY3QocGF0aCwgZGF0YU1vZGVsKTtcclxuXHJcblx0XHRpZiAob2JqID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0cmV0dXJuICd7eyBJTlZBTElEIFRFTVBMQVRFIFRBRyAtIG9iamVjdCB1bmRlZmluZWQgfX0nO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBvYmo7XHJcblx0fSBlbHNlIGlmIChwYXJ0cy5sZW5ndGggPT09IDIpIHtcclxuXHRcdGNvbnN0IG9wZXJhdG9yID0gcGFydHNbMF07XHJcblxyXG5cdFx0Y29uc3QgcGF0aCA9IHBhcnRzWzFdLnNwbGl0KCcuJyk7XHJcblxyXG5cdFx0Y29uc3Qgb2JqID0gdHJhdmVyc2VPYmplY3QocGF0aCwgZGF0YU1vZGVsKTtcclxuXHJcblx0XHRpZiAob2JqID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0cmV0dXJuICd7eyBJTlZBTElEIFRFTVBMQVRFIFRBRyAtIG9iamVjdCB1bmRlZmluZWQgfX0nO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChvcGVyYXRvciA9PT0gJ0xJU1QnKSB7XHJcblx0XHRcdGlmICghQXJyYXkuaXNBcnJheShvYmopKSB7XHJcblx0XHRcdFx0cmV0dXJuICd7eyBJTlZBTElEIFRFTVBMQVRFIFRBRyAtIG9wZXJhdG9yIExJU1QgaXMgb25seSBhcHBsaWNhYmxlIG9uIGFuIGFycmF5IH19JztcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gb2JqLm1hcCgoZTogYW55KSA9PiBgLSAke2V9YCkuam9pbignXFxuJyk7XHJcblx0XHR9IGVsc2UgaWYgKG9wZXJhdG9yID09PSAnRU5VTScpIHtcclxuXHRcdFx0aWYgKCFBcnJheS5pc0FycmF5KG9iaikpIHtcclxuXHRcdFx0XHRyZXR1cm4gJ3t7IElOVkFMSUQgVEVNUExBVEUgVEFHIC0gb3BlcmF0b3IgRU5VTSBpcyBvbmx5IGFwcGxpY2FibGUgb24gYW4gYXJyYXkgfX0nO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBvYmouam9pbignLCAnKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gYHt7IElOVkFMSUQgVEVNUExBVEUgVEFHIC0gdW5rbm93biBvcGVyYXRvciAke29wZXJhdG9yfSB9fWA7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gJ3t7IElOVkFMSUQgVEVNUExBVEUgVEFHIH19JztcclxufVxyXG5cclxuLyoqXHJcbiAqIFRyYXZlcnNlcyB0aGUgb2JqZWN0IGFsb25nIGEgcHJvcGVydHkgcGF0aFxyXG4gKlxyXG4gKiBAcGFyYW0gcGF0aFxyXG4gKiBAcGFyYW0gb2JqXHJcbiAqL1xyXG5mdW5jdGlvbiB0cmF2ZXJzZU9iamVjdChwYXRoOiBBcnJheTxzdHJpbmc+LCBvYmo6IGFueSk6IGFueSB7XHJcblx0Zm9yIChjb25zdCBwYXJ0IG9mIHBhdGgpIHtcclxuXHRcdGlmIChvYmogIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRvYmogPSBvYmpbcGFydF07XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gb2JqO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNUcnV0aHkodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xyXG5cdHJldHVybiAhIXZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNGYWxzeSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XHJcblx0cmV0dXJuICF2YWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFsT3JJbmNsdWRlcyhzdHIxOiBzdHJpbmcsIHN0cjI6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdHJldHVybiBzdHIxID09PSBzdHIyIHx8IHN0cjEuaW5jbHVkZXMoc3RyMikgfHwgc3RyMi5pbmNsdWRlcyhzdHIxKTtcclxufVxyXG4iLCAiaW1wb3J0IHtBYnN0cmFjdElucHV0RmllbGR9IGZyb20gJy4vQWJzdHJhY3RJbnB1dEZpZWxkJztcclxuaW1wb3J0IHtUZXh0Q29tcG9uZW50fSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7TG9nZ2VyfSBmcm9tICcuLi91dGlscy9Mb2dnZXInO1xyXG5pbXBvcnQge01ldGFCaW5kSW50ZXJuYWxFcnJvcn0gZnJvbSAnLi4vdXRpbHMvVXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRleHRJbnB1dEZpZWxkIGV4dGVuZHMgQWJzdHJhY3RJbnB1dEZpZWxkIHtcclxuXHR0ZXh0Q29tcG9uZW50OiBUZXh0Q29tcG9uZW50IHwgdW5kZWZpbmVkO1xyXG5cclxuXHRnZXRWYWx1ZSgpOiBhbnkge1xyXG5cdFx0aWYgKCF0aGlzLnRleHRDb21wb25lbnQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndGV4dCBpbnB1dCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMudGV4dENvbXBvbmVudC5nZXRWYWx1ZSgpO1xyXG5cdH1cclxuXHJcblx0c2V0VmFsdWUodmFsdWU6IGFueSk6IHZvaWQge1xyXG5cdFx0aWYgKCF0aGlzLnRleHRDb21wb25lbnQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndGV4dCBpbnB1dCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XHJcblx0XHRcdHRoaXMudGV4dENvbXBvbmVudC5zZXRWYWx1ZSh2YWx1ZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRMb2dnZXIubG9nV2FybmluZyhgY2FuIG5vdCBzZXQgdmFsdWUgb2YgdGV4dCBpbnB1dCB0byBcXCcke3ZhbHVlfVxcJ2ApO1xyXG5cdFx0XHR0aGlzLnRleHRDb21wb25lbnQuc2V0VmFsdWUoJycpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aXNFcXVhbFZhbHVlKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmdldFZhbHVlKCkgPT0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHRnZXREZWZhdWx0VmFsdWUoKTogYW55IHtcclxuXHRcdHJldHVybiAnJztcclxuXHR9XHJcblxyXG5cdGdldEh0bWxFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcclxuXHRcdGlmICghdGhpcy50ZXh0Q29tcG9uZW50KSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3RleHQgaW5wdXQgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLnRleHRDb21wb25lbnQuaW5wdXRFbDtcclxuXHR9XHJcblxyXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBjb21wb25lbnQgPSBuZXcgVGV4dENvbXBvbmVudChjb250YWluZXIpO1xyXG5cdFx0Y29tcG9uZW50LnNldFZhbHVlKHRoaXMuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0SW5pdGlhbFZhbHVlKCkpO1xyXG5cdFx0Y29tcG9uZW50Lm9uQ2hhbmdlKHRoaXMub25WYWx1ZUNoYW5nZSk7XHJcblx0XHR0aGlzLnRleHRDb21wb25lbnQgPSBjb21wb25lbnQ7XHJcblx0fVxyXG5cclxufVxyXG4iLCAiaW1wb3J0IHtBYnN0cmFjdElucHV0RmllbGR9IGZyb20gJy4vQWJzdHJhY3RJbnB1dEZpZWxkJztcclxuaW1wb3J0IHtTbGlkZXJDb21wb25lbnR9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHtMb2dnZXJ9IGZyb20gJy4uL3V0aWxzL0xvZ2dlcic7XHJcbmltcG9ydCB7SW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGR9IGZyb20gJy4uL0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkJztcclxuaW1wb3J0IHtNZXRhQmluZEludGVybmFsRXJyb3J9IGZyb20gJy4uL3V0aWxzL1V0aWxzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTbGlkZXJJbnB1dEZpZWxkIGV4dGVuZHMgQWJzdHJhY3RJbnB1dEZpZWxkIHtcclxuXHRzbGlkZXJDb21wb25lbnQ6IFNsaWRlckNvbXBvbmVudCB8IHVuZGVmaW5lZDtcclxuXHRtaW5WYWx1ZTogbnVtYmVyO1xyXG5cdG1heFZhbHVlOiBudW1iZXI7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIG9uVmFsdWVDaGFuZ2U6ICh2YWx1ZTogYW55KSA9PiAodm9pZCB8IFByb21pc2U8dm9pZD4pKSB7XHJcblx0XHRzdXBlcihpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgb25WYWx1ZUNoYW5nZSk7XHJcblx0XHR0aGlzLm1pblZhbHVlID0gaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0QXJndW1lbnQoJ21pblZhbHVlJyk/LnZhbHVlID8/IDA7XHJcblx0XHR0aGlzLm1heFZhbHVlID0gaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0QXJndW1lbnQoJ21heFZhbHVlJyk/LnZhbHVlID8/IDEwMDtcclxuXHR9XHJcblxyXG5cdGdldFZhbHVlKCk6IGFueSB7XHJcblx0XHRpZiAoIXRoaXMuc2xpZGVyQ29tcG9uZW50KSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3NsaWRlciBpbnB1dCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuc2xpZGVyQ29tcG9uZW50LmdldFZhbHVlKCk7XHJcblx0fVxyXG5cclxuXHRzZXRWYWx1ZSh2YWx1ZTogYW55KTogdm9pZCB7XHJcblx0XHRpZiAoIXRoaXMuc2xpZGVyQ29tcG9uZW50KSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3NsaWRlciBpbnB1dCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XHJcblx0XHRcdGlmICh2YWx1ZSA+PSB0aGlzLm1pblZhbHVlICYmIHZhbHVlIDw9IHRoaXMubWF4VmFsdWUpIHtcclxuXHRcdFx0XHR0aGlzLnNsaWRlckNvbXBvbmVudC5zZXRWYWx1ZSh2YWx1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdExvZ2dlci5sb2dXYXJuaW5nKGBjYW4gbm90IHNldCB2YWx1ZSBvZiBzbGlkZXIgdG8gXFwnJHt2YWx1ZX1cXCdgKTtcclxuXHRcdFx0dGhpcy5zbGlkZXJDb21wb25lbnQuc2V0VmFsdWUodGhpcy5nZXREZWZhdWx0VmFsdWUoKSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRpc0VxdWFsVmFsdWUodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuZ2V0VmFsdWUoKSA9PSB2YWx1ZTtcclxuXHR9XHJcblxyXG5cdGdldERlZmF1bHRWYWx1ZSgpOiBhbnkge1xyXG5cdFx0cmV0dXJuIHRoaXMubWluVmFsdWU7XHJcblx0fVxyXG5cclxuXHRnZXRIdG1sRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcblx0XHRpZiAoIXRoaXMuc2xpZGVyQ29tcG9uZW50KSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3NsaWRlciBpbnB1dCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuc2xpZGVyQ29tcG9uZW50LnNsaWRlckVsO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyKGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnRhaW5lci5yZW1vdmVDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC13cmFwcGVyJyk7XHJcblx0XHRjb250YWluZXIuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4tZmxleC1pbnB1dC13cmFwcGVyJyk7XHJcblxyXG5cdFx0Y29uc3QgbGFiZWxBcmd1bWVudCA9IHRoaXMuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0QXJndW1lbnQoJ2xhYmVscycpO1xyXG5cdFx0aWYgKGxhYmVsQXJndW1lbnQgJiYgbGFiZWxBcmd1bWVudC52YWx1ZSA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRjb250YWluZXIuY3JlYXRlU3Bhbih7dGV4dDogdGhpcy5taW5WYWx1ZS50b1N0cmluZygpLCBjbHM6ICdtZXRhLWJpbmQtcGx1Z2luLXNsaWRlci1pbnB1dC1sYWJlbCd9KTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBjb21wb25lbnQgPSBuZXcgU2xpZGVyQ29tcG9uZW50KGNvbnRhaW5lcik7XHJcblx0XHRjb21wb25lbnQuc2V0VmFsdWUodGhpcy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZC5nZXRJbml0aWFsVmFsdWUoKSk7XHJcblx0XHRjb21wb25lbnQub25DaGFuZ2UodGhpcy5vblZhbHVlQ2hhbmdlKTtcclxuXHRcdGNvbXBvbmVudC5zZXREeW5hbWljVG9vbHRpcCgpO1xyXG5cdFx0Y29tcG9uZW50LnNldExpbWl0cyh0aGlzLm1pblZhbHVlLCB0aGlzLm1heFZhbHVlLCAxKTtcclxuXHRcdGNvbXBvbmVudC5zbGlkZXJFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1zbGlkZXItaW5wdXQnKTtcclxuXHJcblx0XHRpZiAobGFiZWxBcmd1bWVudCAmJiBsYWJlbEFyZ3VtZW50LnZhbHVlID09PSB0cnVlKSB7XHJcblx0XHRcdGNvbnRhaW5lci5jcmVhdGVTcGFuKHt0ZXh0OiB0aGlzLm1heFZhbHVlLnRvU3RyaW5nKCksIGNsczogJ21ldGEtYmluZC1wbHVnaW4tc2xpZGVyLWlucHV0LWxhYmVsJ30pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuc2xpZGVyQ29tcG9uZW50ID0gY29tcG9uZW50O1xyXG5cdH1cclxuXHJcbn1cclxuIiwgImltcG9ydCB7QWJzdHJhY3RJbnB1dEZpZWxkfSBmcm9tICcuL0Fic3RyYWN0SW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7VGV4dEFyZWFDb21wb25lbnR9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHtMb2dnZXJ9IGZyb20gJy4uL3V0aWxzL0xvZ2dlcic7XHJcbmltcG9ydCB7TWV0YUJpbmRJbnRlcm5hbEVycm9yfSBmcm9tICcuLi91dGlscy9VdGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgVGV4dEFyZWFJbnB1dEZpZWxkIGV4dGVuZHMgQWJzdHJhY3RJbnB1dEZpZWxkIHtcclxuXHR0ZXh0QXJlYUNvbXBvbmVudDogVGV4dEFyZWFDb21wb25lbnQgfCB1bmRlZmluZWQ7XHJcblxyXG5cdGdldFZhbHVlKCk6IGFueSB7XHJcblx0XHRpZiAoIXRoaXMudGV4dEFyZWFDb21wb25lbnQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndGV4dCBhcmVhIGlucHV0IGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy50ZXh0QXJlYUNvbXBvbmVudC5nZXRWYWx1ZSgpO1xyXG5cdH1cclxuXHJcblx0c2V0VmFsdWUodmFsdWU6IGFueSk6IHZvaWQge1xyXG5cdFx0aWYgKCF0aGlzLnRleHRBcmVhQ29tcG9uZW50KSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3RleHQgYXJlYSBpbnB1dCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XHJcblx0XHRcdHRoaXMudGV4dEFyZWFDb21wb25lbnQuc2V0VmFsdWUodmFsdWUpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0TG9nZ2VyLmxvZ1dhcm5pbmcoYGNhbiBub3Qgc2V0IHZhbHVlIG9mIHRleHQgYXJlYSBpbnB1dCB0byBcXCcke3ZhbHVlfVxcJ2ApO1xyXG5cdFx0XHR0aGlzLnRleHRBcmVhQ29tcG9uZW50LnNldFZhbHVlKCcnKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlzRXF1YWxWYWx1ZSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdGhpcy5nZXRWYWx1ZSgpID09IHZhbHVlO1xyXG5cdH1cclxuXHJcblx0Z2V0RGVmYXVsdFZhbHVlKCk6IGFueSB7XHJcblx0XHRyZXR1cm4gJyc7XHJcblx0fVxyXG5cclxuXHRnZXRIdG1sRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcblx0XHRpZiAoIXRoaXMudGV4dEFyZWFDb21wb25lbnQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndGV4dCBhcmVhIGlucHV0IGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy50ZXh0QXJlYUNvbXBvbmVudC5pbnB1dEVsO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyKGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGNvbXBvbmVudCA9IG5ldyBUZXh0QXJlYUNvbXBvbmVudChjb250YWluZXIpO1xyXG5cdFx0Y29tcG9uZW50LnNldFZhbHVlKHRoaXMuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0SW5pdGlhbFZhbHVlKCkpO1xyXG5cdFx0Y29tcG9uZW50Lm9uQ2hhbmdlKHRoaXMub25WYWx1ZUNoYW5nZSk7XHJcblx0XHR0aGlzLnRleHRBcmVhQ29tcG9uZW50ID0gY29tcG9uZW50O1xyXG5cdH1cclxuXHJcbn1cclxuIiwgImltcG9ydCB7U2VsZWN0SW5wdXRGaWVsZH0gZnJvbSAnLi9TZWxlY3RJbnB1dEZpZWxkJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTZWxlY3RJbnB1dEZpZWxkRWxlbWVudCB7XHJcblx0dmFsdWU6IHN0cmluZztcclxuXHRzZWxlY3RJbnB1dEZpZWxkOiBTZWxlY3RJbnB1dEZpZWxkO1xyXG5cdHJlYWRvbmx5IGlkOiBudW1iZXI7XHJcblx0ZWxlbWVudDogSFRNTERpdkVsZW1lbnQ7XHJcblxyXG5cdGNzc0NsYXNzOiBzdHJpbmc7XHJcblx0YWN0aXZlQ2xhc3M6IHN0cmluZztcclxuXHRob3ZlckNsYXNzOiBzdHJpbmc7XHJcblxyXG5cdHByaXZhdGUgYWN0aXZlOiBib29sZWFuO1xyXG5cdHByaXZhdGUgaGlnaGxpZ2h0ZWQ6IGJvb2xlYW47XHJcblxyXG5cdGNvbnN0cnVjdG9yKHZhbHVlOiBzdHJpbmcsIHBhcmVudEVsZW1lbnQ6IEhUTUxFbGVtZW50LCBpZDogbnVtYmVyLCBtdWx0aVNlbGVjdElucHV0RmllbGQ6IFNlbGVjdElucHV0RmllbGQsIGFjdGl2ZTogYm9vbGVhbiA9IGZhbHNlKSB7XHJcblx0XHR0aGlzLnZhbHVlID0gdmFsdWU7XHJcblx0XHR0aGlzLmlkID0gaWQ7XHJcblx0XHR0aGlzLmFjdGl2ZSA9IGFjdGl2ZTtcclxuXHRcdHRoaXMuaGlnaGxpZ2h0ZWQgPSBmYWxzZTtcclxuXHRcdHRoaXMuc2VsZWN0SW5wdXRGaWVsZCA9IG11bHRpU2VsZWN0SW5wdXRGaWVsZDtcclxuXHJcblx0XHR0aGlzLmNzc0NsYXNzID0gJ21ldGEtYmluZC1wbHVnaW4tc2VsZWN0LWlucHV0LWVsZW1lbnQnO1xyXG5cdFx0dGhpcy5hY3RpdmVDbGFzcyA9ICdtZXRhLWJpbmQtcGx1Z2luLXNlbGVjdC1pbnB1dC1lbGVtZW50LXNlbGVjdGVkJztcclxuXHRcdHRoaXMuaG92ZXJDbGFzcyA9ICdtZXRhLWJpbmQtcGx1Z2luLXNlbGVjdC1pbnB1dC1lbGVtZW50LWhvdmVyJztcclxuXHJcblx0XHR0aGlzLmVsZW1lbnQgPSBwYXJlbnRFbGVtZW50LmNyZWF0ZURpdih7Y2xzOiB0aGlzLmNzc0NsYXNzfSk7XHJcblx0XHR0aGlzLmVsZW1lbnQuaWQgPSB0aGlzLmdldEhUTUxJZCgpO1xyXG5cdFx0dGhpcy5lbGVtZW50Lm9uKCdjbGljaycsICcjJyArIHRoaXMuZ2V0SFRNTElkKCksICgpID0+IHtcclxuXHRcdFx0dGhpcy5zZXRBY3RpdmUoIXRoaXMuYWN0aXZlKTtcclxuXHRcdFx0aWYgKCF0aGlzLnNlbGVjdElucHV0RmllbGQuYWxsb3dNdWx0aVNlbGVjdCkge1xyXG5cdFx0XHRcdHRoaXMuc2VsZWN0SW5wdXRGaWVsZC5kaXNhYmxlQWxsT3RoZXJFbGVtZW50cyh0aGlzLmlkKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHR0aGlzLmVsZW1lbnQub24oJ21vdXNlZW50ZXInLCAnIycgKyB0aGlzLmdldEhUTUxJZCgpLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuc2V0SGlnaGxpZ2h0ZWQodHJ1ZSk7XHJcblx0XHR9KTtcclxuXHRcdHRoaXMuZWxlbWVudC5vbignbW91c2VsZWF2ZScsICcjJyArIHRoaXMuZ2V0SFRNTElkKCksICgpID0+IHtcclxuXHRcdFx0dGhpcy5zZXRIaWdobGlnaHRlZChmYWxzZSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGdldEhUTUxJZCgpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIGBtZXRhLWJpbmQtc2VsZWN0LWlucHV0LWVsZW1lbnQtJHt0aGlzLnNlbGVjdElucHV0RmllbGQuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQudWlkfS0ke3RoaXMuaWR9YDtcclxuXHR9XHJcblxyXG5cdGlzSGlnaGxpZ2h0ZWQoKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdGhpcy5oaWdobGlnaHRlZDtcclxuXHR9XHJcblxyXG5cdHNldEhpZ2hsaWdodGVkKHZhbHVlOiBib29sZWFuKTogdm9pZCB7XHJcblx0XHR0aGlzLmhpZ2hsaWdodGVkID0gdmFsdWU7XHJcblx0XHRpZiAodGhpcy5oaWdobGlnaHRlZCkge1xyXG5cdFx0XHR0aGlzLmFkZENsYXNzKHRoaXMuaG92ZXJDbGFzcyk7XHJcblx0XHRcdHRoaXMuc2VsZWN0SW5wdXRGaWVsZC5kZUhpZ2hsaWdodEFsbE90aGVyRWxlbWVudHModGhpcy5pZCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnJlbW92ZUNsYXNzKHRoaXMuaG92ZXJDbGFzcyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRpc0FjdGl2ZSgpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmFjdGl2ZTtcclxuXHR9XHJcblxyXG5cdHNldEFjdGl2ZShhY3RpdmU6IGJvb2xlYW4sIHVwZGF0ZVBhcmVudDogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcclxuXHRcdHRoaXMuYWN0aXZlID0gYWN0aXZlO1xyXG5cdFx0dGhpcy51cGRhdGUodXBkYXRlUGFyZW50KTtcclxuXHR9XHJcblxyXG5cdHVwZGF0ZSh1cGRhdGVQYXJlbnQ6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLmFjdGl2ZSkge1xyXG5cdFx0XHR0aGlzLmFkZENsYXNzKHRoaXMuYWN0aXZlQ2xhc3MpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5yZW1vdmVDbGFzcyh0aGlzLmFjdGl2ZUNsYXNzKTtcclxuXHRcdH1cclxuXHRcdGlmICh1cGRhdGVQYXJlbnQpIHtcclxuXHRcdFx0dGhpcy5zZWxlY3RJbnB1dEZpZWxkLm9uQ2hhbmdlKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhZGRDbGFzcyhjc3NDbGFzczogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRpZiAoIXRoaXMuZWxlbWVudC5oYXNDbGFzcyhjc3NDbGFzcykpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKGNzc0NsYXNzKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJlbW92ZUNsYXNzKGNzc0NsYXNzOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLmVsZW1lbnQuaGFzQ2xhc3MoY3NzQ2xhc3MpKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhjc3NDbGFzcyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZW5kZXIoKTogdm9pZCB7XHJcblx0XHR0aGlzLmVsZW1lbnQuY3JlYXRlRWwoJ2RpdicsIHt0ZXh0OiB0aGlzLnZhbHVlfSk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQge0Fic3RyYWN0SW5wdXRGaWVsZH0gZnJvbSAnLi9BYnN0cmFjdElucHV0RmllbGQnO1xyXG5pbXBvcnQge1NlbGVjdElucHV0RmllbGRFbGVtZW50fSBmcm9tICcuL1NlbGVjdElucHV0RmllbGRFbGVtZW50JztcclxuaW1wb3J0IHtNZXRhQmluZEludGVybmFsRXJyb3IsIG1vZH0gZnJvbSAnLi4vdXRpbHMvVXRpbHMnO1xyXG5pbXBvcnQge0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkfSBmcm9tICcuLi9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCc7XHJcblxyXG5leHBvcnQgY2xhc3MgU2VsZWN0SW5wdXRGaWVsZCBleHRlbmRzIEFic3RyYWN0SW5wdXRGaWVsZCB7XHJcblx0c3RhdGljIGFsbG93SW5saW5lQ29kZUJsb2NrOiBib29sZWFuID0gZmFsc2U7XHJcblx0ZWxlbWVudHM6IFNlbGVjdElucHV0RmllbGRFbGVtZW50W107XHJcblx0YWxsb3dNdWx0aVNlbGVjdDogYm9vbGVhbjtcclxuXHRjb250YWluZXI6IEhUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIG9uVmFsdWVDaGFuZ2U6ICh2YWx1ZTogYW55KSA9PiAodm9pZCB8IFByb21pc2U8dm9pZD4pKSB7XHJcblx0XHRzdXBlcihpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgb25WYWx1ZUNoYW5nZSk7XHJcblx0XHR0aGlzLmVsZW1lbnRzID0gW107XHJcblx0XHR0aGlzLmFsbG93TXVsdGlTZWxlY3QgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdGdldEh0bWxFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcclxuXHRcdGlmICghdGhpcy5jb250YWluZXIpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignc2VsZWN0IGlucHV0IGNvbnRhaW5lciBpcyB1bmRlZmluZWQnKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy5jb250YWluZXI7XHJcblx0fVxyXG5cclxuXHRnZXRWYWx1ZSgpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHRoaXMuZWxlbWVudHMuZmlsdGVyKHggPT4geC5pc0FjdGl2ZSgpKS5maXJzdCgpPy52YWx1ZSA/PyAnJztcclxuXHR9XHJcblxyXG5cdHNldFZhbHVlKHZhbHVlOiBhbnkpOiB2b2lkIHtcclxuXHRcdGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLmVsZW1lbnRzKSB7XHJcblx0XHRcdGlmICh2YWx1ZSA9PT0gZWxlbWVudC52YWx1ZSkge1xyXG5cdFx0XHRcdGVsZW1lbnQuc2V0QWN0aXZlKHRydWUsIGZhbHNlKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRlbGVtZW50LnNldEFjdGl2ZShmYWxzZSwgZmFsc2UpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRpc0VxdWFsVmFsdWUodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuZ2V0VmFsdWUoKSA9PSB2YWx1ZTtcclxuXHR9XHJcblxyXG5cdGdldERlZmF1bHRWYWx1ZSgpOiBhbnkge1xyXG5cdFx0cmV0dXJuICcnO1xyXG5cdH1cclxuXHJcblx0b25DaGFuZ2UoKTogdm9pZCB7XHJcblx0XHR0aGlzLm9uVmFsdWVDaGFuZ2UodGhpcy5nZXRWYWx1ZSgpKTtcclxuXHR9XHJcblxyXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb250YWluZXIuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4tc2VsZWN0LWlucHV0LWJnJyk7XHJcblx0XHR0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuXHJcblx0XHRjb25zdCBlbGVtZW50V3JhcHBlciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoe2NsczogJ21ldGEtYmluZC1wbHVnaW4tc2VsZWN0LWlucHV0LXdyYXBwZXInfSk7XHJcblxyXG5cdFx0Y29uc3QgdGl0bGVBcmd1bWVudCA9IHRoaXMuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0QXJndW1lbnQoJ3RpdGxlJyk7XHJcblx0XHRpZiAodGl0bGVBcmd1bWVudCkge1xyXG5cdFx0XHRlbGVtZW50V3JhcHBlci5jcmVhdGVFbCgnZGl2Jywge3RleHQ6IHRpdGxlQXJndW1lbnQudmFsdWUsIGNsczogJ21ldGEtYmluZC1wbHVnaW4tc2VsZWN0LWlucHV0LWhlYWRlcid9KTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBlbGVtZW50QXJndW1lbnRzOiB7IG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9W10gPSB0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEFyZ3VtZW50cygnb3B0aW9uJyk7XHJcblxyXG5cdFx0bGV0IGkgPSAwO1xyXG5cdFx0Zm9yIChjb25zdCBlbGVtZW50QXJndW1lbnQgb2YgZWxlbWVudEFyZ3VtZW50cykge1xyXG5cdFx0XHRjb25zdCBzZWxlY3RJbnB1dEZpZWxkRWxlbWVudCA9IG5ldyBTZWxlY3RJbnB1dEZpZWxkRWxlbWVudChlbGVtZW50QXJndW1lbnQudmFsdWUsIGVsZW1lbnRXcmFwcGVyLCBpLCB0aGlzLCBmYWxzZSk7XHJcblxyXG5cdFx0XHR0aGlzLmVsZW1lbnRzLnB1c2goc2VsZWN0SW5wdXRGaWVsZEVsZW1lbnQpO1xyXG5cclxuXHRcdFx0c2VsZWN0SW5wdXRGaWVsZEVsZW1lbnQucmVuZGVyKCk7XHJcblxyXG5cdFx0XHRpICs9IDE7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5zZXRWYWx1ZSh0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEluaXRpYWxWYWx1ZSgpKTtcclxuXHR9XHJcblxyXG5cdGRpc2FibGVBbGxPdGhlckVsZW1lbnRzKGVsZW1lbnRJZDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRmb3IgKGNvbnN0IHNlbGVjdE1vZGFsRWxlbWVudCBvZiB0aGlzLmVsZW1lbnRzKSB7XHJcblx0XHRcdGlmIChzZWxlY3RNb2RhbEVsZW1lbnQuaWQgIT09IGVsZW1lbnRJZCkge1xyXG5cdFx0XHRcdHNlbGVjdE1vZGFsRWxlbWVudC5zZXRBY3RpdmUoZmFsc2UpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRkZUhpZ2hsaWdodEFsbE90aGVyRWxlbWVudHMoZWxlbWVudElkOiBudW1iZXIpOiB2b2lkIHtcclxuXHRcdGZvciAoY29uc3Qgc2VsZWN0TW9kYWxFbGVtZW50IG9mIHRoaXMuZWxlbWVudHMpIHtcclxuXHRcdFx0aWYgKHNlbGVjdE1vZGFsRWxlbWVudC5pZCAhPT0gZWxlbWVudElkKSB7XHJcblx0XHRcdFx0c2VsZWN0TW9kYWxFbGVtZW50LnNldEhpZ2hsaWdodGVkKGZhbHNlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YWN0aXZhdGVIaWdobGlnaHRlZCgpOiB2b2lkIHtcclxuXHRcdGZvciAoY29uc3Qgc2VsZWN0TW9kYWxFbGVtZW50IG9mIHRoaXMuZWxlbWVudHMpIHtcclxuXHRcdFx0aWYgKHNlbGVjdE1vZGFsRWxlbWVudC5pc0hpZ2hsaWdodGVkKCkpIHtcclxuXHRcdFx0XHRzZWxlY3RNb2RhbEVsZW1lbnQuc2V0QWN0aXZlKCFzZWxlY3RNb2RhbEVsZW1lbnQuaXNBY3RpdmUoKSk7XHJcblx0XHRcdFx0aWYgKCF0aGlzLmFsbG93TXVsdGlTZWxlY3QpIHtcclxuXHRcdFx0XHRcdHRoaXMuZGlzYWJsZUFsbE90aGVyRWxlbWVudHMoc2VsZWN0TW9kYWxFbGVtZW50LmlkKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGhpZ2hsaWdodFVwKCk6IHZvaWQge1xyXG5cdFx0Zm9yIChjb25zdCBzZWxlY3RNb2RhbEVsZW1lbnQgb2YgdGhpcy5lbGVtZW50cykge1xyXG5cdFx0XHRpZiAoc2VsZWN0TW9kYWxFbGVtZW50LmlzSGlnaGxpZ2h0ZWQoKSkge1xyXG5cdFx0XHRcdHRoaXMuZ2V0UHJldmlvdXNTZWxlY3RNb2RhbEVsZW1lbnQoc2VsZWN0TW9kYWxFbGVtZW50KT8uc2V0SGlnaGxpZ2h0ZWQodHJ1ZSk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gbm90aGluZyBpcyBoaWdobGlnaHRlZFxyXG5cdFx0dGhpcy5lbGVtZW50cy5hdCgtMSk/LnNldEhpZ2hsaWdodGVkKHRydWUpO1xyXG5cdH1cclxuXHJcblx0aGlnaGxpZ2h0RG93bigpOiB2b2lkIHtcclxuXHRcdGZvciAoY29uc3Qgc2VsZWN0TW9kYWxFbGVtZW50IG9mIHRoaXMuZWxlbWVudHMpIHtcclxuXHRcdFx0aWYgKHNlbGVjdE1vZGFsRWxlbWVudC5pc0hpZ2hsaWdodGVkKCkpIHtcclxuXHRcdFx0XHR0aGlzLmdldE5leHRTZWxlY3RNb2RhbEVsZW1lbnQoc2VsZWN0TW9kYWxFbGVtZW50KT8uc2V0SGlnaGxpZ2h0ZWQodHJ1ZSk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gbm90aGluZyBpcyBoaWdobGlnaHRlZFxyXG5cdFx0dGhpcy5lbGVtZW50cy5hdCgwKT8uc2V0SGlnaGxpZ2h0ZWQodHJ1ZSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGdldE5leHRTZWxlY3RNb2RhbEVsZW1lbnQoZWxlbWVudDogU2VsZWN0SW5wdXRGaWVsZEVsZW1lbnQpOiBTZWxlY3RJbnB1dEZpZWxkRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcblx0XHRsZXQgbmV4dElkID0gZWxlbWVudC5pZCArIDE7XHJcblx0XHRuZXh0SWQgPSBtb2QobmV4dElkLCB0aGlzLmVsZW1lbnRzLmxlbmd0aCk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuZWxlbWVudHMuZmlsdGVyKHggPT4geC5pZCA9PT0gbmV4dElkKS5hdCgwKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2V0UHJldmlvdXNTZWxlY3RNb2RhbEVsZW1lbnQoZWxlbWVudDogU2VsZWN0SW5wdXRGaWVsZEVsZW1lbnQpOiBTZWxlY3RJbnB1dEZpZWxkRWxlbWVudCB8IHVuZGVmaW5lZCB7XHJcblx0XHRsZXQgbmV4dElkID0gZWxlbWVudC5pZCAtIDE7XHJcblx0XHRuZXh0SWQgPSBtb2QobmV4dElkLCB0aGlzLmVsZW1lbnRzLmxlbmd0aCk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuZWxlbWVudHMuZmlsdGVyKHggPT4geC5pZCA9PT0gbmV4dElkKS5hdCgwKTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7U2VsZWN0SW5wdXRGaWVsZH0gZnJvbSAnLi9TZWxlY3RJbnB1dEZpZWxkJztcclxuaW1wb3J0IHtJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZH0gZnJvbSAnLi4vSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQnO1xyXG5pbXBvcnQge2FycmF5RXF1YWxzfSBmcm9tICcuLi91dGlscy9VdGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgTXVsdGlTZWxlY3RJbnB1dEZpZWxkIGV4dGVuZHMgU2VsZWN0SW5wdXRGaWVsZCB7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgb25WYWx1ZUNoYW5nZTogKHZhbHVlOiBhbnkpID0+ICh2b2lkIHwgUHJvbWlzZTx2b2lkPikpIHtcclxuXHRcdHN1cGVyKGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBvblZhbHVlQ2hhbmdlKTtcclxuXHRcdHRoaXMuYWxsb3dNdWx0aVNlbGVjdCA9IHRydWU7XHJcblx0fVxyXG5cclxuXHRnZXRWYWx1ZSgpOiBhbnkge1xyXG5cdFx0cmV0dXJuIHRoaXMuZWxlbWVudHMuZmlsdGVyKHggPT4geC5pc0FjdGl2ZSgpKS5tYXAoeCA9PiB4LnZhbHVlKTtcclxuXHR9XHJcblxyXG5cdHNldFZhbHVlKHZhbHVlOiBzdHJpbmdbXSk6IHZvaWQge1xyXG5cdFx0aWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy5lbGVtZW50cykge1xyXG5cdFx0XHRcdGVsZW1lbnQuc2V0QWN0aXZlKGZhbHNlLCBmYWxzZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGVsZW1lbnRMb29wIDogZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMuZWxlbWVudHMpIHtcclxuXHRcdFx0Zm9yIChjb25zdCB2YWx1ZUVsZW1lbnQgb2YgdmFsdWUpIHtcclxuXHRcdFx0XHRpZiAodmFsdWVFbGVtZW50ID09PSBlbGVtZW50LnZhbHVlKSB7XHJcblx0XHRcdFx0XHRlbGVtZW50LnNldEFjdGl2ZSh0cnVlLCBmYWxzZSk7XHJcblx0XHRcdFx0XHRjb250aW51ZSBlbGVtZW50TG9vcDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxlbWVudC5zZXRBY3RpdmUoZmFsc2UsIGZhbHNlKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlzRXF1YWxWYWx1ZSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XHJcblx0XHRpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gYXJyYXlFcXVhbHModGhpcy5nZXRWYWx1ZSgpLCB2YWx1ZSk7XHJcblx0fVxyXG5cclxuXHRnZXREZWZhdWx0VmFsdWUoKTogc3RyaW5nW10ge1xyXG5cdFx0cmV0dXJuIFtdO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHtBYnN0cmFjdElucHV0RmllbGR9IGZyb20gJy4vQWJzdHJhY3RJbnB1dEZpZWxkJztcclxuaW1wb3J0IHtEcm9wZG93bkNvbXBvbmVudCwgVGV4dENvbXBvbmVudH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQge0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkfSBmcm9tICcuLi9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCc7XHJcbmltcG9ydCB7RGF0ZVBhcnNlcn0gZnJvbSAnLi4vcGFyc2Vycy9EYXRlUGFyc2VyJztcclxuaW1wb3J0IHtNZXRhQmluZEludGVybmFsRXJyb3J9IGZyb20gJy4uL3V0aWxzL1V0aWxzJztcclxuaW1wb3J0IHttb21lbnR9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBjbGFzcyBEYXRlSW5wdXRGaWVsZCBleHRlbmRzIEFic3RyYWN0SW5wdXRGaWVsZCB7XHJcblx0Y29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCB8IHVuZGVmaW5lZDtcclxuXHRkYXRlOiBtb21lbnQuTW9tZW50O1xyXG5cclxuXHRtb250aHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XHJcblx0XHQnMCc6ICdKYW51YXJ5JyxcclxuXHRcdCcxJzogJ0ZlYnJ1YXJ5JyxcclxuXHRcdCcyJzogJ01hcmNoJyxcclxuXHRcdCczJzogJ0FwcmlsJyxcclxuXHRcdCc0JzogJ01heScsXHJcblx0XHQnNSc6ICdKdW5lJyxcclxuXHRcdCc2JzogJ0p1bHknLFxyXG5cdFx0JzcnOiAnQXVndXN0JyxcclxuXHRcdCc4JzogJ1NlcHRlbWJlcicsXHJcblx0XHQnOSc6ICdPY3RvYmVyJyxcclxuXHRcdCcxMCc6ICdOb3ZlbWJlcicsXHJcblx0XHQnMTEnOiAnRGVjZW1iZXInLFxyXG5cdH07XHJcblx0ZGF5czogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcclxuXHJcblx0bW9udGhDb21wb25lbnQ6IERyb3Bkb3duQ29tcG9uZW50IHwgdW5kZWZpbmVkO1xyXG5cdGRheUNvbXBvbmVudDogRHJvcGRvd25Db21wb25lbnQgfCB1bmRlZmluZWQ7XHJcblx0eWVhckNvbXBvbmVudDogVGV4dENvbXBvbmVudCB8IHVuZGVmaW5lZDtcclxuXHJcblxyXG5cdGNvbnN0cnVjdG9yKGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgb25WYWx1ZUNoYW5nZTogKHZhbHVlOiBhbnkpID0+ICh2b2lkIHwgUHJvbWlzZTx2b2lkPikpIHtcclxuXHRcdHN1cGVyKGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBvblZhbHVlQ2hhbmdlKTtcclxuXHJcblx0XHR0aGlzLmRhdGUgPSBEYXRlUGFyc2VyLmdldERlZmF1bHREYXRlKCk7XHJcblxyXG5cdFx0dGhpcy5kYXlzID0ge307XHJcblx0XHRmb3IgKGxldCBpID0gMTsgaSA8PSAzMTsgaSsrKSB7XHJcblx0XHRcdHRoaXMuZGF5c1tpLnRvU3RyaW5nKCldID0gaS50b1N0cmluZygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHVibGljIGdldEh0bWxFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcclxuXHRcdGlmICghdGhpcy5jb250YWluZXIpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndG9nZ2xlIGlucHV0IGNvbnRhaW5lciBpcyB1bmRlZmluZWQnKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy5jb250YWluZXI7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0VmFsdWUoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBEYXRlUGFyc2VyLnN0cmluZ2lmeSh0aGlzLmRhdGUpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldFZhbHVlKHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy5tb250aENvbXBvbmVudCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdkYXRlIGlucHV0IG1vbnRoIGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcclxuXHRcdH1cclxuXHRcdGlmICghdGhpcy5kYXlDb21wb25lbnQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignZGF0ZSBpbnB1dCBkYXkgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCF0aGlzLnllYXJDb21wb25lbnQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignZGF0ZSBpbnB1dCBob3VyIGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmRhdGUgPSBEYXRlUGFyc2VyLnBhcnNlKHZhbHVlKSA/PyBEYXRlUGFyc2VyLmdldERlZmF1bHREYXRlKCk7XHJcblx0XHQvLyBjb25zb2xlLmxvZyh0aGlzLmRhdGUpO1xyXG5cdFx0dGhpcy5tb250aENvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmRhdGUubW9udGgoKS50b1N0cmluZygpKTtcclxuXHRcdHRoaXMuZGF5Q29tcG9uZW50LnNldFZhbHVlKHRoaXMuZGF0ZS5kYXRlKCkudG9TdHJpbmcoKSk7XHJcblx0XHR0aGlzLnllYXJDb21wb25lbnQuc2V0VmFsdWUodGhpcy5kYXRlLnllYXIoKS50b1N0cmluZygpKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBpc0VxdWFsVmFsdWUodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHZhbHVlID09IHRoaXMuZ2V0VmFsdWUoKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXREZWZhdWx0VmFsdWUoKTogYW55IHtcclxuXHRcdHJldHVybiBEYXRlUGFyc2VyLnN0cmluZ2lmeShEYXRlUGFyc2VyLmdldERlZmF1bHREYXRlKCkpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHJlbmRlcihjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XHJcblx0XHR0aGlzLmRhdGUgPSBEYXRlUGFyc2VyLnBhcnNlKHRoaXMuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0SW5pdGlhbFZhbHVlKCkpID8/IERhdGVQYXJzZXIuZ2V0RGVmYXVsdERhdGUoKTtcclxuXHRcdGxldCB1c2VVc0lucHV0T3JkZXIgPSB0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLnBsdWdpbi5zZXR0aW5ncy51c2VVc0RhdGVJbnB1dE9yZGVyO1xyXG5cclxuXHRcdGNvbnRhaW5lci5yZW1vdmVDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC13cmFwcGVyJyk7XHJcblx0XHRjb250YWluZXIuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4tZmxleC1pbnB1dC13cmFwcGVyJywgJ21ldGEtYmluZC1wbHVnaW4taW5wdXQtZWxlbWVudC1ncm91cCcpO1xyXG5cclxuXHRcdGlmICghdXNlVXNJbnB1dE9yZGVyKSB7XHJcblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50ID0gbmV3IERyb3Bkb3duQ29tcG9uZW50KGNvbnRhaW5lcik7XHJcblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50LmFkZE9wdGlvbnModGhpcy5kYXlzKTtcclxuXHRcdFx0dGhpcy5kYXlDb21wb25lbnQuc2V0VmFsdWUodGhpcy5kYXRlLmRhdGUoKS50b1N0cmluZygpKTtcclxuXHRcdFx0dGhpcy5kYXlDb21wb25lbnQub25DaGFuZ2UodGhpcy5vbkRheUNoYW5nZS5iaW5kKHRoaXMpKTtcclxuXHJcblx0XHRcdHRoaXMubW9udGhDb21wb25lbnQgPSBuZXcgRHJvcGRvd25Db21wb25lbnQoY29udGFpbmVyKTtcclxuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5hZGRPcHRpb25zKHRoaXMubW9udGhzKTtcclxuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmRhdGUubW9udGgoKS50b1N0cmluZygpKTtcclxuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5vbkNoYW5nZSh0aGlzLm9uTW9udGhDaGFuZ2UuYmluZCh0aGlzKSk7XHJcblxyXG5cdFx0XHR0aGlzLmRheUNvbXBvbmVudC5zZWxlY3RFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC1lbGVtZW50LWdyb3VwLWVsZW1lbnQnKTtcclxuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5zZWxlY3RFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC1lbGVtZW50LWdyb3VwLWVsZW1lbnQnKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMubW9udGhDb21wb25lbnQgPSBuZXcgRHJvcGRvd25Db21wb25lbnQoY29udGFpbmVyKTtcclxuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5hZGRPcHRpb25zKHRoaXMubW9udGhzKTtcclxuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmRhdGUubW9udGgoKS50b1N0cmluZygpKTtcclxuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5vbkNoYW5nZSh0aGlzLm9uTW9udGhDaGFuZ2UuYmluZCh0aGlzKSk7XHJcblxyXG5cdFx0XHR0aGlzLmRheUNvbXBvbmVudCA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250YWluZXIpO1xyXG5cdFx0XHR0aGlzLmRheUNvbXBvbmVudC5hZGRPcHRpb25zKHRoaXMuZGF5cyk7XHJcblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50LnNldFZhbHVlKHRoaXMuZGF0ZS5kYXRlKCkudG9TdHJpbmcoKSk7XHJcblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50Lm9uQ2hhbmdlKHRoaXMub25EYXlDaGFuZ2UuYmluZCh0aGlzKSk7XHJcblxyXG5cdFx0XHR0aGlzLmRheUNvbXBvbmVudC5zZWxlY3RFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC1lbGVtZW50LWdyb3VwLWVsZW1lbnQnKTtcclxuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5zZWxlY3RFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC1lbGVtZW50LWdyb3VwLWVsZW1lbnQnKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnllYXJDb21wb25lbnQgPSBuZXcgVGV4dENvbXBvbmVudChjb250YWluZXIpO1xyXG5cdFx0dGhpcy55ZWFyQ29tcG9uZW50LnNldFZhbHVlKHRoaXMuZGF0ZS55ZWFyKCkudG9TdHJpbmcoKSk7XHJcblx0XHR0aGlzLnllYXJDb21wb25lbnQub25DaGFuZ2UodGhpcy5vblllYXJDaGFuZ2UuYmluZCh0aGlzKSk7XHJcblxyXG5cdFx0dGhpcy55ZWFyQ29tcG9uZW50LmlucHV0RWwuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4tZGF0ZS1pbnB1dC15ZWFyLWlucHV0Jyk7XHJcblx0XHR0aGlzLnllYXJDb21wb25lbnQuaW5wdXRFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC1lbGVtZW50LWdyb3VwLWVsZW1lbnQnKTtcclxuXHRcdHRoaXMueWVhckNvbXBvbmVudC5pbnB1dEVsLnR5cGUgPSAnbnVtYmVyJztcclxuXHRcdHRoaXMueWVhckNvbXBvbmVudC5pbnB1dEVsLm1heCA9ICc5OTk5JztcclxuXHJcblx0XHR0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgb25Nb250aENoYW5nZSh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHR0aGlzLmRhdGUubW9udGgodmFsdWUpO1xyXG5cclxuXHRcdGNvbnN0IGNsYW1wZWREYXkgPSB0aGlzLmNsYW1wRGF5KHRoaXMuZGF0ZS5kYXRlKCkpO1xyXG5cdFx0dGhpcy5kYXlDb21wb25lbnQ/LnNldFZhbHVlKGNsYW1wZWREYXkudG9TdHJpbmcoKSk7XHJcblx0XHR0aGlzLmRhdGUuZGF0ZShjbGFtcGVkRGF5KTtcclxuXHJcblx0XHR0aGlzLm9uVmFsdWVDaGFuZ2UodGhpcy5nZXRWYWx1ZSgpKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgb25EYXlDaGFuZ2UodmFsdWU6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0Y29uc3QgZGF5ID0gTnVtYmVyLnBhcnNlSW50KHZhbHVlKTtcclxuXHRcdGNvbnN0IGNsYW1wZWREYXkgPSB0aGlzLmNsYW1wRGF5KGRheSk7XHJcblx0XHRpZiAoY2xhbXBlZERheSAhPT0gZGF5KSB7XHJcblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50Py5zZXRWYWx1ZShjbGFtcGVkRGF5LnRvU3RyaW5nKCkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZGF0ZS5kYXRlKGNsYW1wZWREYXkpO1xyXG5cdFx0dGhpcy5vblZhbHVlQ2hhbmdlKHRoaXMuZ2V0VmFsdWUoKSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIG9uWWVhckNoYW5nZSh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRjb25zdCB5ZWFyID0gTnVtYmVyLnBhcnNlSW50KHZhbHVlKTtcclxuXHRcdHRoaXMuZGF0ZS55ZWFyKE51bWJlci5pc05hTih5ZWFyKSA/IERhdGVQYXJzZXIuZ2V0RGVmYXVsdFllYXIoKSA6IHllYXIpO1xyXG5cdFx0dGhpcy5vblZhbHVlQ2hhbmdlKHRoaXMuZ2V0VmFsdWUoKSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNsYW1wRGF5KGRheTogbnVtYmVyKTogbnVtYmVyIHtcclxuXHRcdGlmIChOdW1iZXIuaXNOYU4oZGF5KSkge1xyXG5cdFx0XHRyZXR1cm4gRGF0ZVBhcnNlci5nZXREZWZhdWx0RGF5KCk7XHJcblx0XHR9IGVsc2UgaWYgKGRheSA8IDEpIHtcclxuXHRcdFx0cmV0dXJuIDE7XHJcblx0XHR9IGVsc2UgaWYgKGRheSA+IHRoaXMuZGF0ZS5kYXlzSW5Nb250aCgpKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLmRhdGUuZGF5c0luTW9udGgoKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBkYXk7XHJcblx0fVxyXG5cclxufVxyXG4iLCAiaW1wb3J0IHttb21lbnR9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBjbGFzcyBEYXRlUGFyc2VyIHtcclxuXHRwdWJsaWMgc3RhdGljIGRhdGVGb3JtYXQ6IHN0cmluZztcclxuXHJcblx0cHVibGljIHN0YXRpYyBzdHJpbmdpZnkoZGF0ZTogbW9tZW50Lk1vbWVudCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gZGF0ZS5mb3JtYXQodGhpcy5kYXRlRm9ybWF0KTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgcGFyc2UoZGF0ZVN0cmluZzogc3RyaW5nKTogbW9tZW50Lk1vbWVudCB7XHJcblx0XHRyZXR1cm4gbW9tZW50KGRhdGVTdHJpbmcsIERhdGVQYXJzZXIuZGF0ZUZvcm1hdCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIGdldERlZmF1bHREYXRlKCk6IG1vbWVudC5Nb21lbnQge1xyXG5cdFx0cmV0dXJuIG1vbWVudChgJHtEYXRlUGFyc2VyLmdldERlZmF1bHRZZWFyfS0ke0RhdGVQYXJzZXIuZ2V0RGVmYXVsdE1vbnRoKCl9LSR7RGF0ZVBhcnNlci5nZXREZWZhdWx0RGF5KCl9YCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIGdldERlZmF1bHREYXkoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiAxO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBnZXREZWZhdWx0TW9udGgoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiAxO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBnZXREZWZhdWx0WWVhcigpOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIDIwMjI7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQge0Fic3RyYWN0SW5wdXRGaWVsZH0gZnJvbSAnLi9BYnN0cmFjdElucHV0RmllbGQnO1xyXG5pbXBvcnQge0Ryb3Bkb3duQ29tcG9uZW50fSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7SW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGR9IGZyb20gJy4uL0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkJztcclxuaW1wb3J0IHtUaW1lLCBUaW1lUGFyc2VyfSBmcm9tICcuLi9wYXJzZXJzL1RpbWVQYXJzZXInO1xyXG5pbXBvcnQge01ldGFCaW5kSW50ZXJuYWxFcnJvcn0gZnJvbSAnLi4vdXRpbHMvVXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRpbWVJbnB1dEZpZWxkIGV4dGVuZHMgQWJzdHJhY3RJbnB1dEZpZWxkIHtcclxuXHRjb250YWluZXI6IEhUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkO1xyXG5cdHRpbWU6IFRpbWU7XHJcblxyXG5cdGhvdXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xyXG5cdG1pbnV0ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XHJcblxyXG5cdGhvdXJDb21wb25lbnQ6IERyb3Bkb3duQ29tcG9uZW50IHwgdW5kZWZpbmVkO1xyXG5cdG1pbnV0ZUNvbXBvbmVudDogRHJvcGRvd25Db21wb25lbnQgfCB1bmRlZmluZWQ7XHJcblxyXG5cclxuXHRjb25zdHJ1Y3RvcihpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIG9uVmFsdWVDaGFuZ2U6ICh2YWx1ZTogYW55KSA9PiAodm9pZCB8IFByb21pc2U8dm9pZD4pKSB7XHJcblx0XHRzdXBlcihpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgb25WYWx1ZUNoYW5nZSk7XHJcblxyXG5cdFx0dGhpcy50aW1lID0gVGltZVBhcnNlci5nZXREZWZhdWx0VGltZSgpO1xyXG5cclxuXHRcdHRoaXMuaG91cnMgPSB7fTtcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDw9IDI0OyBpKyspIHtcclxuXHRcdFx0dGhpcy5ob3Vyc1tpLnRvU3RyaW5nKCldID0gaS50b1N0cmluZygpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMubWludXRlcyA9IHt9O1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPD0gNTk7IGkrKykge1xyXG5cdFx0XHR0aGlzLm1pbnV0ZXNbaS50b1N0cmluZygpXSA9IGkudG9TdHJpbmcoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXRIdG1sRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcblx0XHRpZiAoIXRoaXMuY29udGFpbmVyKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3RpbWUgaW5wdXQgY29udGFpbmVyIGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLmNvbnRhaW5lcjtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXRWYWx1ZSgpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIFRpbWVQYXJzZXIuc3RyaW5naWZ5KHRoaXMudGltZSk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0VmFsdWUodmFsdWU6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0aWYgKCF0aGlzLmhvdXJDb21wb25lbnQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndGltZSBpbnB1dCBob3VyIGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcclxuXHRcdH1cclxuXHRcdGlmICghdGhpcy5taW51dGVDb21wb25lbnQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndGltZSBpbnB1dCBtaW51dGUgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMudGltZSA9IFRpbWVQYXJzZXIucGFyc2UodmFsdWUpID8/IFRpbWVQYXJzZXIuZ2V0RGVmYXVsdFRpbWUoKTtcclxuXHRcdC8vIGNvbnNvbGUubG9nKHRoaXMudGltZSk7XHJcblx0XHR0aGlzLmhvdXJDb21wb25lbnQuc2V0VmFsdWUodGhpcy50aW1lLmdldEhvdXIoKS50b1N0cmluZygpKTtcclxuXHRcdHRoaXMubWludXRlQ29tcG9uZW50LnNldFZhbHVlKHRoaXMudGltZS5nZXRNaW51dGUoKS50b1N0cmluZygpKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBpc0VxdWFsVmFsdWUodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHZhbHVlID09IHRoaXMuZ2V0VmFsdWUoKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXREZWZhdWx0VmFsdWUoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBUaW1lUGFyc2VyLnN0cmluZ2lmeShUaW1lUGFyc2VyLmdldERlZmF1bHRUaW1lKCkpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHJlbmRlcihjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XHJcblx0XHR0aGlzLnRpbWUgPSBUaW1lUGFyc2VyLnBhcnNlKHRoaXMuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0SW5pdGlhbFZhbHVlKCkpID8/IFRpbWVQYXJzZXIuZ2V0RGVmYXVsdFRpbWUoKTtcclxuXHJcblx0XHRjb250YWluZXIucmVtb3ZlQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4taW5wdXQtd3JhcHBlcicpO1xyXG5cdFx0Y29udGFpbmVyLmFkZENsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLWZsZXgtaW5wdXQtd3JhcHBlcicsICdtZXRhLWJpbmQtcGx1Z2luLWlucHV0LWVsZW1lbnQtZ3JvdXAnKTtcclxuXHJcblx0XHR0aGlzLmhvdXJDb21wb25lbnQgPSBuZXcgRHJvcGRvd25Db21wb25lbnQoY29udGFpbmVyKTtcclxuXHRcdHRoaXMuaG91ckNvbXBvbmVudC5hZGRPcHRpb25zKHRoaXMuaG91cnMpO1xyXG5cdFx0dGhpcy5ob3VyQ29tcG9uZW50LnNldFZhbHVlKHRoaXMudGltZS5nZXRIb3VyKCkudG9TdHJpbmcoKSk7XHJcblx0XHR0aGlzLmhvdXJDb21wb25lbnQub25DaGFuZ2UodGhpcy5vbkhvdXJDaGFuZ2UuYmluZCh0aGlzKSk7XHJcblxyXG5cdFx0dGhpcy5taW51dGVDb21wb25lbnQgPSBuZXcgRHJvcGRvd25Db21wb25lbnQoY29udGFpbmVyKTtcclxuXHRcdHRoaXMubWludXRlQ29tcG9uZW50LmFkZE9wdGlvbnModGhpcy5taW51dGVzKTtcclxuXHRcdHRoaXMubWludXRlQ29tcG9uZW50LnNldFZhbHVlKHRoaXMudGltZS5nZXRNaW51dGUoKS50b1N0cmluZygpKTtcclxuXHRcdHRoaXMubWludXRlQ29tcG9uZW50Lm9uQ2hhbmdlKHRoaXMub25NaW51dGVDaGFuZ2UuYmluZCh0aGlzKSk7XHJcblxyXG5cdFx0dGhpcy5ob3VyQ29tcG9uZW50LnNlbGVjdEVsLmFkZENsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLWlucHV0LWVsZW1lbnQtZ3JvdXAtZWxlbWVudCcpO1xyXG5cdFx0dGhpcy5taW51dGVDb21wb25lbnQuc2VsZWN0RWwuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4taW5wdXQtZWxlbWVudC1ncm91cC1lbGVtZW50Jyk7XHJcblxyXG5cdFx0dGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIG9uSG91ckNoYW5nZSh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHR0aGlzLnRpbWUuc2V0SG91ckZyb21TdHJpbmcodmFsdWUpO1xyXG5cdFx0dGhpcy5vblZhbHVlQ2hhbmdlKHRoaXMuZ2V0VmFsdWUoKSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIG9uTWludXRlQ2hhbmdlKHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdHRoaXMudGltZS5zZXRNaW51dGVGcm9tU3RyaW5nKHZhbHVlKTtcclxuXHRcdHRoaXMub25WYWx1ZUNoYW5nZSh0aGlzLmdldFZhbHVlKCkpO1xyXG5cdH1cclxufVxyXG4iLCAiZXhwb3J0IGNsYXNzIFRpbWUge1xyXG5cdHByaXZhdGUgX2hvdXI6IG51bWJlcjtcclxuXHRwcml2YXRlIF9taW51dGU6IG51bWJlcjtcclxuXHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHR0aGlzLl9ob3VyID0gVGltZVBhcnNlci5nZXREZWZhdWx0SG91cigpO1xyXG5cdFx0dGhpcy5fbWludXRlID0gVGltZVBhcnNlci5nZXREZWZhdWx0SG91cigpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldEhvdXIoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiB0aGlzLl9ob3VyO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldEhvdXIodmFsdWU6IG51bWJlcik6IHZvaWQge1xyXG5cdFx0aWYgKHZhbHVlIDwgMCB8fCB2YWx1ZSA+IDI0KSB7XHJcblx0XHRcdHRoaXMuX2hvdXIgPSBUaW1lUGFyc2VyLmdldERlZmF1bHRIb3VyKCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdHRoaXMuX2hvdXIgPSB2YWx1ZTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXRNaW51dGUoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiB0aGlzLl9taW51dGU7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0TWludXRlKHZhbHVlOiBudW1iZXIpOiB2b2lkICB7XHJcblx0XHRpZiAodmFsdWUgPCAwIHx8IHZhbHVlID4gNTkpIHtcclxuXHRcdFx0dGhpcy5fbWludXRlID0gVGltZVBhcnNlci5nZXREZWZhdWx0TWludXRlKCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdHRoaXMuX21pbnV0ZSA9IHZhbHVlO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldFVuaWZvcm1Ib3VyKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gKCcwMCcgKyB0aGlzLmdldEhvdXIoKS50b1N0cmluZygpKS5zbGljZSgtMik7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0VW5pZm9ybU1pbnV0ZSgpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuICgnMDAnICsgdGhpcy5nZXRNaW51dGUoKS50b1N0cmluZygpKS5zbGljZSgtMik7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0SG91ckZyb21TdHJpbmcoc3RyOiBzdHJpbmcpOiB2b2lkICB7XHJcblx0XHRjb25zdCB2ID0gTnVtYmVyLnBhcnNlSW50KHN0cik7XHJcblx0XHR0aGlzLnNldEhvdXIoTnVtYmVyLmlzTmFOKHYpID8gVGltZVBhcnNlci5nZXREZWZhdWx0SG91cigpIDogdik7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0TWludXRlRnJvbVN0cmluZyhzdHI6IHN0cmluZyk6IHZvaWQgIHtcclxuXHRcdGNvbnN0IHYgPSBOdW1iZXIucGFyc2VJbnQoc3RyKTtcclxuXHRcdHRoaXMuc2V0TWludXRlKE51bWJlci5pc05hTih2KSA/IFRpbWVQYXJzZXIuZ2V0RGVmYXVsdE1pbnV0ZSgpIDogdik7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGltZVBhcnNlciB7XHJcblx0cHVibGljIHN0YXRpYyBwYXJzZSh0aW1lU3RyaW5nOiBzdHJpbmcpOiBUaW1lIHwgdW5kZWZpbmVkIHtcclxuXHRcdGNvbnN0IHRpbWU6IFRpbWUgPSBUaW1lUGFyc2VyLmdldERlZmF1bHRUaW1lKCk7XHJcblxyXG5cdFx0Y29uc3QgdGltZVBhcnRzID0gdGltZVN0cmluZy5zcGxpdCgnOicpO1xyXG5cdFx0aWYgKHRpbWVQYXJ0cy5sZW5ndGggIT09IDIpIHtcclxuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcclxuXHRcdH1cclxuXHJcblx0XHR0aW1lLnNldEhvdXJGcm9tU3RyaW5nKHRpbWVQYXJ0c1swXSk7XHJcblx0XHR0aW1lLnNldE1pbnV0ZUZyb21TdHJpbmcodGltZVBhcnRzWzFdKTtcclxuXHJcblx0XHRyZXR1cm4gdGltZTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgc3RyaW5naWZ5KHRpbWU6IFRpbWUpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIGAke3RpbWUuZ2V0VW5pZm9ybUhvdXIoKX06JHt0aW1lLmdldFVuaWZvcm1NaW51dGUoKX1gO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBnZXREZWZhdWx0VGltZSgpOiBUaW1lIHtcclxuXHRcdHJldHVybiBuZXcgVGltZSgpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBnZXREZWZhdWx0SG91cigpOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIDA7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIGdldERlZmF1bHRNaW51dGUoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiAwO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHtlcXVhbE9ySW5jbHVkZXMsIGlzRmFsc3ksIE1ldGFCaW5kSW50ZXJuYWxFcnJvcn0gZnJvbSAnLi9VdGlscyc7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEVuY2xvc2luZ1BhaXIge1xyXG5cdHJlYWRvbmx5IG9wZW5pbmdFcXVhbHNDbG9zaW5nOiBib29sZWFuO1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgX29wZW5pbmdTdHJpbmc6IHN0cmluZztcclxuXHRwcml2YXRlIHJlYWRvbmx5IF9jbG9zaW5nU3RyaW5nOiBzdHJpbmc7XHJcblxyXG5cdGNvbnN0cnVjdG9yKG9wZW5pbmdTdHJpbmc6IHN0cmluZywgY2xvc2luZ1N0cmluZz86IHN0cmluZykge1xyXG5cdFx0aWYgKGlzRmFsc3kob3BlbmluZ1N0cmluZykpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignb3BlbmluZyBzdHJpbmcgbXVzdCBub3QgYmUgZW1wdHknKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLm9wZW5pbmdFcXVhbHNDbG9zaW5nID0gaXNGYWxzeShjbG9zaW5nU3RyaW5nKSB8fCBvcGVuaW5nU3RyaW5nID09PSBjbG9zaW5nU3RyaW5nO1xyXG5cclxuXHRcdGlmICh0aGlzLm9wZW5pbmdFcXVhbHNDbG9zaW5nKSB7XHJcblx0XHRcdHRoaXMuX29wZW5pbmdTdHJpbmcgPSBvcGVuaW5nU3RyaW5nO1xyXG5cdFx0XHR0aGlzLl9jbG9zaW5nU3RyaW5nID0gb3BlbmluZ1N0cmluZztcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX29wZW5pbmdTdHJpbmcgPSBvcGVuaW5nU3RyaW5nO1xyXG5cdFx0XHQvLyBAdHMtaWdub3JlIHRoaXMgY2FuIG5vdCBiZSB1bmRlZmluZWQgaGVyZVxyXG5cdFx0XHR0aGlzLl9jbG9zaW5nU3RyaW5nID0gY2xvc2luZ1N0cmluZztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXQgb3BlbmluZ1N0cmluZygpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHRoaXMuX29wZW5pbmdTdHJpbmc7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0IGNsb3NpbmdTdHJpbmcoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiB0aGlzLm9wZW5pbmdFcXVhbHNDbG9zaW5nID8gdGhpcy5fb3BlbmluZ1N0cmluZyA6IHRoaXMuX2Nsb3NpbmdTdHJpbmc7XHJcblx0fVxyXG5cclxuXHRvdmVybGFwcyhvdGhlcjogRW5jbG9zaW5nUGFpcik6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIGVxdWFsT3JJbmNsdWRlcyh0aGlzLm9wZW5pbmdTdHJpbmcsIG90aGVyLm9wZW5pbmdTdHJpbmcpIHx8XHJcblx0XHRcdGVxdWFsT3JJbmNsdWRlcyh0aGlzLm9wZW5pbmdTdHJpbmcsIG90aGVyLmNsb3NpbmdTdHJpbmcpIHx8XHJcblx0XHRcdGVxdWFsT3JJbmNsdWRlcyh0aGlzLmNsb3NpbmdTdHJpbmcsIG90aGVyLm9wZW5pbmdTdHJpbmcpIHx8XHJcblx0XHRcdGVxdWFsT3JJbmNsdWRlcyh0aGlzLmNsb3NpbmdTdHJpbmcsIG90aGVyLmNsb3NpbmdTdHJpbmcpO1xyXG5cdH1cclxuXHJcblx0ZXF1YWxzKG90aGVyOiBFbmNsb3NpbmdQYWlyKTogYm9vbGVhbiB7XHJcblx0XHRpZiAoaXNGYWxzeShvdGhlcikpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuICh0aGlzLm9wZW5pbmdTdHJpbmcgPT09IG90aGVyLm9wZW5pbmdTdHJpbmcpICYmICh0aGlzLmNsb3NpbmdTdHJpbmcgPT09IG90aGVyLmNsb3NpbmdTdHJpbmcpO1xyXG5cdH1cclxuXHJcblx0dG9TdHJpbmcoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQYXJzZXJVdGlscyB7XHJcblxyXG5cdC8vIFRPRE86IHJlbmFtZSBzdHVmZlxyXG5cdHN0YXRpYyBzcGxpdChzdHI6IHN0cmluZywgc2VwYXJhdG9yOiBzdHJpbmcsIGlnbm9yZT86IEVuY2xvc2luZ1BhaXIpOiBzdHJpbmdbXSB7XHJcblx0XHRpZiAoIXN0cikge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdzdHJpbmcgbXVzdCBub3QgYmUgZW1wdHknKTtcclxuXHRcdH1cclxuXHRcdGlmICghc2VwYXJhdG9yKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3NlcGFyYXRvciBtdXN0IG5vdCBiZSBlbXB0eScpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxldCBzdWJTdHI6IHN0cmluZyA9ICcnO1xyXG5cdFx0Y29uc3Qgc3ViU3RyaW5nczogc3RyaW5nW10gPSBbXTtcclxuXHJcblx0XHRpZiAoaWdub3JlKSB7XHJcblx0XHRcdGxldCByZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgPSBQYXJzZXJVdGlscy5udW1iZXJPZk9jY3VycmVuY2VzKHN0ciwgaWdub3JlLm9wZW5pbmdTdHJpbmcpO1xyXG5cdFx0XHRsZXQgcmVtYWluaW5nQ2xvc2luZ1N0cmluZ0NvdW50ID0gUGFyc2VyVXRpbHMubnVtYmVyT2ZPY2N1cnJlbmNlcyhzdHIsIGlnbm9yZS5jbG9zaW5nU3RyaW5nKTtcclxuXHJcblx0XHRcdGxldCBlbmNsb3NpbmdMZXZlbDogbnVtYmVyID0gMDtcclxuXHJcblx0XHRcdHN0ckxvb3AgOiBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdC8vIGlnbm9yZSBzcGVjaWZpZWRcclxuXHRcdFx0XHRpZiAoZW5jbG9zaW5nTGV2ZWwgPT09IDAgJiYgUGFyc2VyVXRpbHMuaXNTdHJpbmdBdChzdHIsIHNlcGFyYXRvciwgaSkpIHtcclxuXHRcdFx0XHRcdHN1YlN0cmluZ3MucHVzaChzdWJTdHIpO1xyXG5cdFx0XHRcdFx0c3ViU3RyID0gJyc7XHJcblx0XHRcdFx0XHRpICs9IHNlcGFyYXRvci5sZW5ndGggLSAxO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKGlnbm9yZS5vcGVuaW5nRXF1YWxzQ2xvc2luZykge1xyXG5cdFx0XHRcdFx0aWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBpZ25vcmUub3BlbmluZ1N0cmluZywgaSkpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGVuY2xvc2luZ0xldmVsICUgMiA9PT0gMCAmJiByZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgPT09IDEpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBub3QgaW4gYSBwYXJ0IHRoYXQgc2hvdWxkIGJlIHJlbW92ZWQgYW5kIHRoZXJlIGlzIHN0aWxsIGFuIG9wZW5pbmcgc3RyaW5nIGxlZnQsIHNvIHdlIGlnbm9yZSBpdFxyXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGVuY2xvc2luZ0xldmVsICUgMiA9PT0gMCkge1xyXG5cdFx0XHRcdFx0XHRcdC8vIG9wZW5pbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdFx0ZW5jbG9zaW5nTGV2ZWwgKz0gMTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly8gY29weSB0aGUgb3BlbmluZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0XHRmb3IgKGxldCBqID0gMTsgaiA8IGlnbm9yZS5vcGVuaW5nU3RyaW5nLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRpICs9IDE7XHJcblx0XHRcdFx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdGlmIChpID49IHN0ci5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWsgc3RyTG9vcDtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gY2xvc2luZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0XHRlbmNsb3NpbmdMZXZlbCAtPSAxO1xyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBjb3B5IHRoZSBjbG9zaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRcdGZvciAobGV0IGogPSAxOyBqIDwgaWdub3JlLmNsb3NpbmdTdHJpbmcubGVuZ3RoOyBqKyspIHsgLy8gKG9wZW5pbmcgYW5kIGNsb3Npbmcgc3RyaW5nIGFyZSB0aGUgc2FtZSlcclxuXHRcdFx0XHRcdFx0XHRcdGkgKz0gMTtcclxuXHRcdFx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGkgPj0gc3RyLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhayBzdHJMb29wO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRyZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgLT0gMTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0aWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBpZ25vcmUub3BlbmluZ1N0cmluZywgaSkpIHtcclxuXHRcdFx0XHRcdFx0Ly8gb3BlbmluZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0aWYgKHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCA8PSByZW1haW5pbmdDbG9zaW5nU3RyaW5nQ291bnQpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBzdHIgc3RpbGwgaGFzIHN1ZmZpY2llbnQgY2xvc2luZyBzdHJpbmcgdG8gZmluZCB0aGlzIGEgcGFydG5lclxyXG5cdFx0XHRcdFx0XHRcdGVuY2xvc2luZ0xldmVsICs9IDE7XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIGNvcHkgdGhlIG9wZW5pbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdFx0Zm9yIChsZXQgaiA9IDE7IGogPCBpZ25vcmUub3BlbmluZ1N0cmluZy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdFx0XHRcdFx0aSArPSAxO1xyXG5cdFx0XHRcdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoaSA+PSBzdHIubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrIHN0ckxvb3A7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCAtPSAxO1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChQYXJzZXJVdGlscy5pc1N0cmluZ0F0KHN0ciwgaWdub3JlLmNsb3NpbmdTdHJpbmcsIGkpKSB7XHJcblx0XHRcdFx0XHRcdC8vIGNsb3Npbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdGlmIChlbmNsb3NpbmdMZXZlbCA+IDApIHtcclxuXHRcdFx0XHRcdFx0XHQvLyB0aGVyZSB3YXMgYW4gb3BlbmluZyBzdHJpbmcgYmVmb3JlIHRoaXNcclxuXHRcdFx0XHRcdFx0XHRlbmNsb3NpbmdMZXZlbCAtPSAxO1xyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBjb3B5IHRoZSBjbG9zaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRcdGZvciAobGV0IGogPSAxOyBqIDwgaWdub3JlLmNsb3NpbmdTdHJpbmcubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRcdFx0XHRcdGkgKz0gMTtcclxuXHRcdFx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGkgPj0gc3RyLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhayBzdHJMb29wO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRyZW1haW5pbmdDbG9zaW5nU3RyaW5nQ291bnQgLT0gMTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIG5vIGlnbm9yZSBzcGVjaWZpZWRcclxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuXHJcblx0XHRcdFx0aWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBzZXBhcmF0b3IsIGkpKSB7XHJcblx0XHRcdFx0XHRzdWJTdHJpbmdzLnB1c2goc3ViU3RyKTtcclxuXHRcdFx0XHRcdHN1YlN0ciA9ICcnO1xyXG5cdFx0XHRcdFx0aSArPSBzZXBhcmF0b3IubGVuZ3RoIC0gMTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRzdWJTdHJpbmdzLnB1c2goc3ViU3RyKTtcclxuXHJcblx0XHRyZXR1cm4gc3ViU3RyaW5ncztcclxuXHR9XHJcblxyXG5cdHN0YXRpYyByZW1vdmVJbkJldHdlZW4oc3RyOiBzdHJpbmcsIGVuY2xvc2luZ1BhaXI6IEVuY2xvc2luZ1BhaXIpOiBzdHJpbmcge1xyXG5cdFx0aWYgKCFzdHIpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignc3RyaW5nIG11c3Qgbm90IGJlIGVtcHR5Jyk7XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCA9IFBhcnNlclV0aWxzLm51bWJlck9mT2NjdXJyZW5jZXMoc3RyLCBlbmNsb3NpbmdQYWlyLm9wZW5pbmdTdHJpbmcpO1xyXG5cdFx0bGV0IHJlbWFpbmluZ0Nsb3NpbmdTdHJpbmdDb3VudCA9IFBhcnNlclV0aWxzLm51bWJlck9mT2NjdXJyZW5jZXMoc3RyLCBlbmNsb3NpbmdQYWlyLmNsb3NpbmdTdHJpbmcpO1xyXG5cclxuXHRcdGxldCBlbmNsb3NpbmdMZXZlbDogbnVtYmVyID0gMDtcclxuXHJcblx0XHRsZXQgc3ViU3RyOiBzdHJpbmcgPSAnJztcclxuXHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRpZiAoZW5jbG9zaW5nUGFpci5vcGVuaW5nRXF1YWxzQ2xvc2luZykge1xyXG5cdFx0XHRcdGlmIChQYXJzZXJVdGlscy5pc1N0cmluZ0F0KHN0ciwgZW5jbG9zaW5nUGFpci5vcGVuaW5nU3RyaW5nLCBpKSkge1xyXG5cdFx0XHRcdFx0aWYgKGVuY2xvc2luZ0xldmVsICUgMiA9PT0gMCAmJiByZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgPT09IDEpIHtcclxuXHRcdFx0XHRcdFx0Ly8gbm90IGluIGEgcGFydCB0aGF0IHNob3VsZCBiZSByZW1vdmVkIGFuZCB0aGVyZSBpcyBzdGlsbCBhbiBvcGVuaW5nIHN0cmluZyBsZWZ0LCBzbyB3ZSBpZ25vcmUgaXRcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoZW5jbG9zaW5nTGV2ZWwgJSAyID09PSAwKSB7XHJcblx0XHRcdFx0XHRcdC8vIG9wZW5pbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdGVuY2xvc2luZ0xldmVsICs9IDE7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBza2lwIHRoZSBvcGVuaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRpICs9IGVuY2xvc2luZ1BhaXIub3BlbmluZ1N0cmluZy5sZW5ndGg7XHJcblx0XHRcdFx0XHRcdGlmIChpID49IHN0ci5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0Ly8gY2xvc2luZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0ZW5jbG9zaW5nTGV2ZWwgLT0gMTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIHNraXAgdGhlIGNsb3Npbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdGkgKz0gZW5jbG9zaW5nUGFpci5jbG9zaW5nU3RyaW5nLmxlbmd0aDsgLy8gKG9wZW5pbmcgYW5kIGNsb3Npbmcgc3RyaW5nIGFyZSB0aGUgc2FtZSlcclxuXHRcdFx0XHRcdFx0aWYgKGkgPj0gc3RyLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgLT0gMTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBlbmNsb3NpbmdQYWlyLm9wZW5pbmdTdHJpbmcsIGkpKSB7XHJcblx0XHRcdFx0XHQvLyBvcGVuaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0aWYgKHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCA8PSByZW1haW5pbmdDbG9zaW5nU3RyaW5nQ291bnQpIHtcclxuXHRcdFx0XHRcdFx0Ly8gc3RyIHN0aWxsIGhhcyBzdWZmaWNpZW50IGNsb3Npbmcgc3RyaW5nIHRvIGZpbmQgdGhpcyBhIHBhcnRuZXJcclxuXHRcdFx0XHRcdFx0ZW5jbG9zaW5nTGV2ZWwgKz0gMTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIHNraXAgdGhlIG9wZW5pbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdGkgKz0gZW5jbG9zaW5nUGFpci5vcGVuaW5nU3RyaW5nLmxlbmd0aDtcclxuXHRcdFx0XHRcdFx0aWYgKGkgPj0gc3RyLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgLT0gMTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBlbmNsb3NpbmdQYWlyLmNsb3NpbmdTdHJpbmcsIGkpKSB7XHJcblx0XHRcdFx0XHQvLyBjbG9zaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0aWYgKGVuY2xvc2luZ0xldmVsID4gMCkge1xyXG5cdFx0XHRcdFx0XHQvLyB0aGVyZSB3YXMgYW4gb3BlbmluZyBzdHJpbmcgYmVmb3JlIHRoaXNcclxuXHRcdFx0XHRcdFx0ZW5jbG9zaW5nTGV2ZWwgLT0gMTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIHNraXAgdGhlIGNsb3Npbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdGkgKz0gZW5jbG9zaW5nUGFpci5jbG9zaW5nU3RyaW5nLmxlbmd0aDtcclxuXHRcdFx0XHRcdFx0aWYgKGkgPj0gc3RyLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZW1haW5pbmdDbG9zaW5nU3RyaW5nQ291bnQgLT0gMTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChlbmNsb3NpbmdMZXZlbCA9PT0gMCkge1xyXG5cdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gc3ViU3RyO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGdldEluQmV0d2VlbihzdHI6IHN0cmluZywgZW5jbG9zaW5nUGFpcjogRW5jbG9zaW5nUGFpcik6IHN0cmluZyB8IHN0cmluZ1tdIHtcclxuXHRcdGlmICghc3RyKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3N0cmluZyBtdXN0IG5vdCBiZSBlbXB0eScpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxldCByZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgPSBQYXJzZXJVdGlscy5udW1iZXJPZk9jY3VycmVuY2VzKHN0ciwgZW5jbG9zaW5nUGFpci5vcGVuaW5nU3RyaW5nKTtcclxuXHRcdGxldCByZW1haW5pbmdDbG9zaW5nU3RyaW5nQ291bnQgPSBQYXJzZXJVdGlscy5udW1iZXJPZk9jY3VycmVuY2VzKHN0ciwgZW5jbG9zaW5nUGFpci5jbG9zaW5nU3RyaW5nKTtcclxuXHJcblx0XHRsZXQgZW5jbG9zaW5nTGV2ZWw6IG51bWJlciA9IDA7XHJcblxyXG5cdFx0bGV0IHN1YlN0cjogc3RyaW5nID0gJyc7XHJcblx0XHRjb25zdCBzdWJTdHJpbmdzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuXHRcdHN0ckxvb3AgOiBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRpZiAoZW5jbG9zaW5nUGFpci5vcGVuaW5nRXF1YWxzQ2xvc2luZykge1xyXG5cdFx0XHRcdGlmIChQYXJzZXJVdGlscy5pc1N0cmluZ0F0KHN0ciwgZW5jbG9zaW5nUGFpci5vcGVuaW5nU3RyaW5nLCBpKSkge1xyXG5cdFx0XHRcdFx0aWYgKGVuY2xvc2luZ0xldmVsICUgMiA9PT0gMCAmJiByZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgPT09IDEpIHtcclxuXHRcdFx0XHRcdFx0Ly8gbm90IGluIGEgcGFydCB0aGF0IHNob3VsZCBiZSByZW1vdmVkIGFuZCB0aGVyZSBpcyBzdGlsbCBhbiBvcGVuaW5nIHN0cmluZyBsZWZ0LCBzbyB3ZSBpZ25vcmUgaXRcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoZW5jbG9zaW5nTGV2ZWwgJSAyID09PSAwKSB7XHJcblx0XHRcdFx0XHRcdC8vIG9wZW5pbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdGVuY2xvc2luZ0xldmVsICs9IDE7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBza2lwIHRoZSBvcGVuaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xyXG5cdFx0XHRcdFx0XHRmb3IgKGxldCBqID0gMTsgaiA8IGVuY2xvc2luZ1BhaXIub3BlbmluZ1N0cmluZy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdFx0XHRcdGkgKz0gMTtcclxuXHRcdFx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRpZiAoaSA+PSBzdHIubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRicmVhayBzdHJMb29wO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0Ly8gY2xvc2luZyBzdHJpbmdcclxuXHRcdFx0XHRcdFx0ZW5jbG9zaW5nTGV2ZWwgLT0gMTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIHNraXAgdGhlIGNsb3Npbmcgc3RyaW5nXHJcblx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblx0XHRcdFx0XHRcdGZvciAobGV0IGogPSAxOyBqIDwgZW5jbG9zaW5nUGFpci5jbG9zaW5nU3RyaW5nLmxlbmd0aDsgaisrKSB7IC8vIChvcGVuaW5nIGFuZCBjbG9zaW5nIHN0cmluZyBhcmUgdGhlIHNhbWUpXHJcblx0XHRcdFx0XHRcdFx0aSArPSAxO1xyXG5cdFx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmIChpID4gc3RyLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0YnJlYWsgc3RyTG9vcDtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0c3ViU3RyaW5ncy5wdXNoKHN1YlN0cik7XHJcblx0XHRcdFx0XHRcdHN1YlN0ciA9ICcnO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmVtYWluaW5nT3BlbmluZ1N0cmluZ0NvdW50IC09IDE7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGlmIChlbmNsb3NpbmdMZXZlbCA+PSAxKSB7XHJcblx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGlmIChQYXJzZXJVdGlscy5pc1N0cmluZ0F0KHN0ciwgZW5jbG9zaW5nUGFpci5vcGVuaW5nU3RyaW5nLCBpKSkge1xyXG5cdFx0XHRcdFx0Ly8gb3BlbmluZyBzdHJpbmdcclxuXHRcdFx0XHRcdGlmIChyZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgPD0gcmVtYWluaW5nQ2xvc2luZ1N0cmluZ0NvdW50KSB7XHJcblx0XHRcdFx0XHRcdC8vIHN0ciBzdGlsbCBoYXMgc3VmZmljaWVudCBjbG9zaW5nIHN0cmluZyB0byBmaW5kIHRoaXMgYSBwYXJ0bmVyXHJcblx0XHRcdFx0XHRcdGVuY2xvc2luZ0xldmVsICs9IDE7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBjb3B5IHRoZSBvcGVuaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xyXG5cdFx0XHRcdFx0XHRmb3IgKGxldCBqID0gMTsgaiA8IGVuY2xvc2luZ1BhaXIub3BlbmluZ1N0cmluZy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdFx0XHRcdGkgKz0gMTtcclxuXHRcdFx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRpZiAoaSA+PSBzdHIubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRicmVhayBzdHJMb29wO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmVtYWluaW5nT3BlbmluZ1N0cmluZ0NvdW50IC09IDE7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChQYXJzZXJVdGlscy5pc1N0cmluZ0F0KHN0ciwgZW5jbG9zaW5nUGFpci5jbG9zaW5nU3RyaW5nLCBpKSkge1xyXG5cdFx0XHRcdFx0Ly8gY2xvc2luZyBzdHJpbmdcclxuXHRcdFx0XHRcdGlmIChlbmNsb3NpbmdMZXZlbCA+IDApIHtcclxuXHRcdFx0XHRcdFx0Ly8gdGhlcmUgd2FzIGFuIG9wZW5pbmcgc3RyaW5nIGJlZm9yZSB0aGlzXHJcblx0XHRcdFx0XHRcdGVuY2xvc2luZ0xldmVsIC09IDE7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBjb3B5IHRoZSBjbG9zaW5nIHN0cmluZ1xyXG5cdFx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xyXG5cdFx0XHRcdFx0XHRmb3IgKGxldCBqID0gMTsgaiA8IGVuY2xvc2luZ1BhaXIuY2xvc2luZ1N0cmluZy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdFx0XHRcdGkgKz0gMTtcclxuXHRcdFx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRpZiAoaSA+IHN0ci5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrIHN0ckxvb3A7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRpZiAoZW5jbG9zaW5nTGV2ZWwgPT09IDApIHtcclxuXHRcdFx0XHRcdFx0XHRzdWJTdHJpbmdzLnB1c2goc3ViU3RyKTtcclxuXHRcdFx0XHRcdFx0XHRzdWJTdHIgPSAnJztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmVtYWluaW5nQ2xvc2luZ1N0cmluZ0NvdW50IC09IDE7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGlmIChlbmNsb3NpbmdMZXZlbCA+PSAxKSB7XHJcblx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHN1YlN0cmluZ3MubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdHJldHVybiAnJztcclxuXHRcdH0gZWxzZSBpZiAoc3ViU3RyaW5ncy5sZW5ndGggPT09IDEpIHtcclxuXHRcdFx0cmV0dXJuIHN1YlN0cmluZ3NbMF0uc3Vic3RyaW5nKGVuY2xvc2luZ1BhaXIub3BlbmluZ1N0cmluZy5sZW5ndGgsIHN1YlN0cmluZ3NbMF0ubGVuZ3RoIC0gZW5jbG9zaW5nUGFpci5jbG9zaW5nU3RyaW5nLmxlbmd0aCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZXR1cm4gc3ViU3RyaW5ncy5tYXAoeCA9PiB4LnN1YnN0cmluZyhlbmNsb3NpbmdQYWlyLm9wZW5pbmdTdHJpbmcubGVuZ3RoLCB4Lmxlbmd0aCAtIGVuY2xvc2luZ1BhaXIuY2xvc2luZ1N0cmluZy5sZW5ndGgpKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHN0YXRpYyBpc1N0cmluZ0F0KHN0cjogc3RyaW5nLCBzdWJTdHI6IHN0cmluZywgaW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xyXG5cdFx0aWYgKGluZGV4IDwgMCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdpbmRleCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7XHJcblx0XHR9XHJcblx0XHRpZiAoaW5kZXggPj0gc3RyLmxlbmd0aCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdpbmRleCBvdXQgb2YgYm91bmRzIG9mIHN0cmluZycpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCFzdHIpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignc3RyaW5nIG11c3Qgbm90IGJlIGVtcHR5Jyk7XHJcblx0XHR9XHJcblx0XHRpZiAoIXN1YlN0cikge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdzdWIgc3RyaW5nIG11c3Qgbm90IGJlIGVtcHR5Jyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBzdWJTdHIubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0aWYgKHN0cltpICsgaW5kZXhdICE9PSBzdWJTdHJbaV0pIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBjb250YWlucyhzdHI6IHN0cmluZywgc3ViU3RyOiBzdHJpbmcpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiBQYXJzZXJVdGlscy5udW1iZXJPZk9jY3VycmVuY2VzKHN0ciwgc3ViU3RyKSA+IDA7XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgbnVtYmVyT2ZPY2N1cnJlbmNlcyhzdHI6IHN0cmluZywgc3ViU3RyOiBzdHJpbmcpOiBudW1iZXIge1xyXG5cdFx0aWYgKCFzdHIpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignc3RyaW5nIG11c3Qgbm90IGJlIGVtcHR5Jyk7XHJcblx0XHR9XHJcblx0XHRpZiAoIXN1YlN0cikge1xyXG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdzdWIgc3RyaW5nIG11c3Qgbm90IGJlIGVtcHR5Jyk7XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IG9jY3VycmVuY2VzID0gMDtcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGlmIChQYXJzZXJVdGlscy5pc1N0cmluZ0F0KHN0ciwgc3ViU3RyLCBpKSkge1xyXG5cdFx0XHRcdG9jY3VycmVuY2VzICs9IDE7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gb2NjdXJyZW5jZXM7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQge0VuY2xvc2luZ1BhaXIsIFBhcnNlclV0aWxzfSBmcm9tICcuLi91dGlscy9QYXJzZXJVdGlscyc7XHJcbmltcG9ydCB7aXNUcnV0aHksIE1ldGFCaW5kUGFyc2luZ0Vycm9yfSBmcm9tICcuLi91dGlscy9VdGlscyc7XHJcblxyXG5leHBvcnQgZW51bSBJbnB1dEZpZWxkVHlwZSB7XHJcblx0VE9HR0xFID0gJ3RvZ2dsZScsXHJcblx0U0xJREVSID0gJ3NsaWRlcicsXHJcblx0VEVYVCA9ICd0ZXh0JyxcclxuXHRURVhUX0FSRUEgPSAndGV4dF9hcmVhJyxcclxuXHRTRUxFQ1QgPSAnc2VsZWN0JyxcclxuXHRNVUxUSV9TRUxFQ1QgPSAnbXVsdGlfc2VsZWN0JyxcclxuXHREQVRFID0gJ2RhdGUnLFxyXG5cdFRJTUUgPSAndGltZScsXHJcblx0SU5WQUxJRCA9ICdpbnZhbGlkJyxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJbnB1dEZpZWxkRGVjbGFyYXRpb24ge1xyXG5cdGZ1bGxEZWNsYXJhdGlvbjogc3RyaW5nO1xyXG5cdGRlY2xhcmF0aW9uOiBzdHJpbmc7XHJcblx0aW5wdXRGaWVsZFR5cGU6IElucHV0RmllbGRUeXBlO1xyXG5cdGlzQm91bmQ6IGJvb2xlYW47XHJcblx0YmluZFRhcmdldDogc3RyaW5nO1xyXG5cclxuXHRhcmd1bWVudHM6IElucHV0RmllbGRBcmd1bWVudFtdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElucHV0RmllbGRBcmd1bWVudCB7XHJcblx0bmFtZTogc3RyaW5nO1xyXG5cdHZhbHVlOiBhbnk7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIge1xyXG5cdHN0YXRpYyByb3VuZEJyYWNlc1BhaXI6IEVuY2xvc2luZ1BhaXIgPSBuZXcgRW5jbG9zaW5nUGFpcignKCcsICcpJyk7XHJcblx0c3RhdGljIHNxdWFyZUJyYWNlc1BhaXI6IEVuY2xvc2luZ1BhaXIgPSBuZXcgRW5jbG9zaW5nUGFpcignWycsICddJyk7XHJcblx0c3RhdGljIGN1cmx5QnJhY2VzUGFpcjogRW5jbG9zaW5nUGFpciA9IG5ldyBFbmNsb3NpbmdQYWlyKCd7JywgJ30nKTtcclxuXHRzdGF0aWMgYWxsQnJhY2VzUGFpcnM6IEVuY2xvc2luZ1BhaXJbXSA9IFtcclxuXHRcdElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5yb3VuZEJyYWNlc1BhaXIsXHJcblx0XHRJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIuc3F1YXJlQnJhY2VzUGFpcixcclxuXHRcdElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5jdXJseUJyYWNlc1BhaXIsXHJcblx0XTtcclxuXHJcblxyXG5cdHN0YXRpYyBwYXJzZShmdWxsRGVjbGFyYXRpb246IHN0cmluZyk6IElucHV0RmllbGREZWNsYXJhdGlvbiB7XHJcblx0XHRjb25zdCBpbnB1dEZpZWxkRGVjbGFyYXRpb246IElucHV0RmllbGREZWNsYXJhdGlvbiA9IHt9IGFzIElucHV0RmllbGREZWNsYXJhdGlvbjtcclxuXHJcblx0XHQvLyBkZWNsYXJhdGlvblxyXG5cdFx0aW5wdXRGaWVsZERlY2xhcmF0aW9uLmZ1bGxEZWNsYXJhdGlvbiA9IGZ1bGxEZWNsYXJhdGlvbjtcclxuXHRcdGlucHV0RmllbGREZWNsYXJhdGlvbi5kZWNsYXJhdGlvbiA9IFBhcnNlclV0aWxzLmdldEluQmV0d2VlbihmdWxsRGVjbGFyYXRpb24sIElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5zcXVhcmVCcmFjZXNQYWlyKSBhcyBzdHJpbmc7XHJcblxyXG5cdFx0Ly8gZGVjbGFyYXRpb24gcGFydHNcclxuXHRcdGNvbnN0IGRlY2xhcmF0aW9uUGFydHM6IHN0cmluZ1tdID0gUGFyc2VyVXRpbHMuc3BsaXQoaW5wdXRGaWVsZERlY2xhcmF0aW9uLmRlY2xhcmF0aW9uLCAnOicsIElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5zcXVhcmVCcmFjZXNQYWlyKTtcclxuXHJcblx0XHQvLyBiaW5kIHRhcmdldFxyXG5cdFx0aW5wdXRGaWVsZERlY2xhcmF0aW9uLmJpbmRUYXJnZXQgPSBkZWNsYXJhdGlvblBhcnRzWzFdID8/ICcnO1xyXG5cdFx0aW5wdXRGaWVsZERlY2xhcmF0aW9uLmlzQm91bmQgPSBpc1RydXRoeShpbnB1dEZpZWxkRGVjbGFyYXRpb24uYmluZFRhcmdldCk7XHJcblxyXG5cdFx0Ly8gaW5wdXQgZmllbGQgdHlwZSBhbmQgYXJndW1lbnRzXHJcblx0XHRjb25zdCBpbnB1dEZpZWxkVHlwZVdpdGhBcmd1bWVudHM6IHN0cmluZyA9IGRlY2xhcmF0aW9uUGFydHNbMF07XHJcblx0XHQvLyBpbnB1dCBmaWVsZCB0eXBlXHJcblx0XHRjb25zdCBpbnB1dEZpZWxkVHlwZVN0cmluZyA9IFBhcnNlclV0aWxzLnJlbW92ZUluQmV0d2VlbihpbnB1dEZpZWxkVHlwZVdpdGhBcmd1bWVudHMsIElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5yb3VuZEJyYWNlc1BhaXIpO1xyXG5cdFx0aW5wdXRGaWVsZERlY2xhcmF0aW9uLmlucHV0RmllbGRUeXBlID0gSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLmdldElucHV0RmllbGRUeXBlKGlucHV0RmllbGRUeXBlU3RyaW5nKTtcclxuXHRcdGlmIChpbnB1dEZpZWxkRGVjbGFyYXRpb24uaW5wdXRGaWVsZFR5cGUgPT09IElucHV0RmllbGRUeXBlLklOVkFMSUQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kUGFyc2luZ0Vycm9yKGB1bmtub3duIGlucHV0IGZpZWxkIHR5cGUgXFwnJHtpbnB1dEZpZWxkVHlwZVN0cmluZ31cXCdgKTtcclxuXHRcdH1cclxuXHRcdC8vIGFyZ3VtZW50c1xyXG5cdFx0Y29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50c1N0cmluZzogc3RyaW5nID0gUGFyc2VyVXRpbHMuZ2V0SW5CZXR3ZWVuKGlucHV0RmllbGRUeXBlV2l0aEFyZ3VtZW50cywgSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLnJvdW5kQnJhY2VzUGFpcikgYXMgc3RyaW5nO1xyXG5cdFx0Ly8gY29uc29sZS5sb2coaW5wdXRGaWVsZEFyZ3VtZW50c1N0cmluZyk7XHJcblx0XHRpZiAoaW5wdXRGaWVsZEFyZ3VtZW50c1N0cmluZykge1xyXG5cdFx0XHRpbnB1dEZpZWxkRGVjbGFyYXRpb24uYXJndW1lbnRzID0gSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLnBhcnNlQXJndW1lbnRzKGlucHV0RmllbGRBcmd1bWVudHNTdHJpbmcsIGlucHV0RmllbGREZWNsYXJhdGlvbi5pbnB1dEZpZWxkVHlwZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpbnB1dEZpZWxkRGVjbGFyYXRpb24uYXJndW1lbnRzID0gW107XHJcblx0XHR9XHJcblx0XHQvLyBjb25zb2xlLmxvZyhpbnB1dEZpZWxkRGVjbGFyYXRpb24uYXJndW1lbnRzKTtcclxuXHJcblx0XHRyZXR1cm4gaW5wdXRGaWVsZERlY2xhcmF0aW9uO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIHBhcnNlQXJndW1lbnRzKGlucHV0RmllbGRBcmd1bWVudHNTdHJpbmc6IHN0cmluZywgaW5wdXRGaWVsZFR5cGU6IElucHV0RmllbGRUeXBlKTogSW5wdXRGaWVsZEFyZ3VtZW50W10ge1xyXG5cdFx0Ly8gY29uc29sZS5sb2coJ2lucHV0RmllbGRBcmd1bWVudHNTdHJpbmcnLCBpbnB1dEZpZWxkQXJndW1lbnRzU3RyaW5nKTtcclxuXHRcdGxldCBpbnB1dEZpZWxkQXJndW1lbnRTdHJpbmdzOiBzdHJpbmdbXSA9IFBhcnNlclV0aWxzLnNwbGl0KGlucHV0RmllbGRBcmd1bWVudHNTdHJpbmcsICcsJywgSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLnJvdW5kQnJhY2VzUGFpcik7XHJcblx0XHRpbnB1dEZpZWxkQXJndW1lbnRTdHJpbmdzID0gaW5wdXRGaWVsZEFyZ3VtZW50U3RyaW5ncy5tYXAoeCA9PiB4LnRyaW0oKSk7XHJcblxyXG5cdFx0Y29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50czogSW5wdXRGaWVsZEFyZ3VtZW50W10gPSBbXTtcclxuXHJcblx0XHRmb3IgKGNvbnN0IGlucHV0RmllbGRBcmd1bWVudFN0cmluZyBvZiBpbnB1dEZpZWxkQXJndW1lbnRTdHJpbmdzKSB7XHJcblx0XHRcdGNvbnN0IGlucHV0RmllbGRBcmd1bWVudE5hbWU6IHN0cmluZyA9IElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5leHRyYWN0SW5wdXRGaWVsZEFyZ3VtZW50TmFtZShpbnB1dEZpZWxkQXJndW1lbnRTdHJpbmcpO1xyXG5cdFx0XHQvLyBjb25zb2xlLmxvZyhpbnB1dEZpZWxkQXJndW1lbnROYW1lKTtcclxuXHJcblx0XHRcdGlmIChpbnB1dEZpZWxkQXJndW1lbnROYW1lID09PSAnY2xhc3MnKSB7XHJcblx0XHRcdFx0Y29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50VmFsdWU6IHN0cmluZyA9IElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5leHRyYWN0SW5wdXRGaWVsZEFyZ3VtZW50VmFsdWUoaW5wdXRGaWVsZEFyZ3VtZW50U3RyaW5nKTtcclxuXHJcblx0XHRcdFx0Y29uc3QgaW5wdXRGaWVsZENsYXNzQXJndW1lbnQ6IElucHV0RmllbGRBcmd1bWVudCA9IHtuYW1lOiBpbnB1dEZpZWxkQXJndW1lbnROYW1lLCB2YWx1ZTogaW5wdXRGaWVsZEFyZ3VtZW50VmFsdWV9O1xyXG5cdFx0XHRcdGlucHV0RmllbGRBcmd1bWVudHMucHVzaChpbnB1dEZpZWxkQ2xhc3NBcmd1bWVudCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGVsc2UgaWYgKGlucHV0RmllbGRBcmd1bWVudE5hbWUgPT09ICdhZGRMYWJlbHMnKSB7XHJcblx0XHRcdFx0aWYgKGlucHV0RmllbGRUeXBlICE9PSBJbnB1dEZpZWxkVHlwZS5TTElERVIpIHtcclxuXHRcdFx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcihgYXJndW1lbnQgXFwnJHtpbnB1dEZpZWxkQXJndW1lbnROYW1lfVxcJyBpcyBvbmx5IGFwcGxpY2FibGUgdG8gc2xpZGVyIGlucHV0IGZpZWxkc2ApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aW5wdXRGaWVsZEFyZ3VtZW50cy5wdXNoKHtuYW1lOiAnbGFiZWxzJywgdmFsdWU6IHRydWV9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZWxzZSBpZiAoaW5wdXRGaWVsZEFyZ3VtZW50TmFtZSA9PT0gJ21pblZhbHVlJykge1xyXG5cdFx0XHRcdGlmIChpbnB1dEZpZWxkVHlwZSAhPT0gSW5wdXRGaWVsZFR5cGUuU0xJREVSKSB7XHJcblx0XHRcdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRQYXJzaW5nRXJyb3IoYGFyZ3VtZW50IFxcJyR7aW5wdXRGaWVsZEFyZ3VtZW50TmFtZX1cXCcgaXMgb25seSBhcHBsaWNhYmxlIHRvIHNsaWRlciBpbnB1dCBmaWVsZHNgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGNvbnN0IGlucHV0RmllbGRBcmd1bWVudFZhbHVlOiBzdHJpbmcgPSBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIuZXh0cmFjdElucHV0RmllbGRBcmd1bWVudFZhbHVlKGlucHV0RmllbGRBcmd1bWVudFN0cmluZyk7XHJcblx0XHRcdFx0Y29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50VmFsdWVBc051bWJlcjogbnVtYmVyID0gTnVtYmVyLnBhcnNlSW50KGlucHV0RmllbGRBcmd1bWVudFZhbHVlKTtcclxuXHJcblx0XHRcdFx0aWYgKE51bWJlci5pc05hTihpbnB1dEZpZWxkQXJndW1lbnRWYWx1ZUFzTnVtYmVyKSkge1xyXG5cdFx0XHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kUGFyc2luZ0Vycm9yKGBhcmd1bWVudCBcXCcke2lucHV0RmllbGRBcmd1bWVudE5hbWV9XFwnIHZhbHVlIG11c3QgYmUgb2YgdHlwZSBudW1iZXJgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGNvbnN0IGlucHV0RmllbGRBcmd1bWVudE9iamVjdDogSW5wdXRGaWVsZEFyZ3VtZW50ID0ge25hbWU6IGlucHV0RmllbGRBcmd1bWVudE5hbWUsIHZhbHVlOiBpbnB1dEZpZWxkQXJndW1lbnRWYWx1ZUFzTnVtYmVyfTtcclxuXHRcdFx0XHRpbnB1dEZpZWxkQXJndW1lbnRzLnB1c2goaW5wdXRGaWVsZEFyZ3VtZW50T2JqZWN0KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZWxzZSBpZiAoaW5wdXRGaWVsZEFyZ3VtZW50TmFtZSA9PT0gJ21heFZhbHVlJykge1xyXG5cdFx0XHRcdGlmIChpbnB1dEZpZWxkVHlwZSAhPT0gSW5wdXRGaWVsZFR5cGUuU0xJREVSKSB7XHJcblx0XHRcdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRQYXJzaW5nRXJyb3IoYGFyZ3VtZW50IFxcJyR7aW5wdXRGaWVsZEFyZ3VtZW50TmFtZX1cXCcgaXMgb25seSBhcHBsaWNhYmxlIHRvIHNsaWRlciBpbnB1dCBmaWVsZHNgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGNvbnN0IGlucHV0RmllbGRBcmd1bWVudFZhbHVlOiBzdHJpbmcgPSBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIuZXh0cmFjdElucHV0RmllbGRBcmd1bWVudFZhbHVlKGlucHV0RmllbGRBcmd1bWVudFN0cmluZyk7XHJcblx0XHRcdFx0Y29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50VmFsdWVBc051bWJlcjogbnVtYmVyID0gTnVtYmVyLnBhcnNlSW50KGlucHV0RmllbGRBcmd1bWVudFZhbHVlKTtcclxuXHJcblx0XHRcdFx0aWYgKE51bWJlci5pc05hTihpbnB1dEZpZWxkQXJndW1lbnRWYWx1ZUFzTnVtYmVyKSkge1xyXG5cdFx0XHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kUGFyc2luZ0Vycm9yKGBhcmd1bWVudCBcXCcke2lucHV0RmllbGRBcmd1bWVudE5hbWV9XFwnIHZhbHVlIG11c3QgYmUgb2YgdHlwZSBudW1iZXJgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGNvbnN0IGlucHV0RmllbGRBcmd1bWVudE9iamVjdDogSW5wdXRGaWVsZEFyZ3VtZW50ID0ge25hbWU6IGlucHV0RmllbGRBcmd1bWVudE5hbWUsIHZhbHVlOiBpbnB1dEZpZWxkQXJndW1lbnRWYWx1ZUFzTnVtYmVyfTtcclxuXHRcdFx0XHRpbnB1dEZpZWxkQXJndW1lbnRzLnB1c2goaW5wdXRGaWVsZEFyZ3VtZW50T2JqZWN0KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZWxzZSBpZiAoaW5wdXRGaWVsZEFyZ3VtZW50TmFtZSA9PT0gJ29wdGlvbicpIHtcclxuXHRcdFx0XHRpZiAoaW5wdXRGaWVsZFR5cGUgIT09IElucHV0RmllbGRUeXBlLlNFTEVDVCAmJiBpbnB1dEZpZWxkVHlwZSAhPT0gSW5wdXRGaWVsZFR5cGUuTVVMVElfU0VMRUNUKSB7XHJcblx0XHRcdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRQYXJzaW5nRXJyb3IoYGFyZ3VtZW50IFxcJyR7aW5wdXRGaWVsZEFyZ3VtZW50TmFtZX1cXCcgaXMgb25seSBhcHBsaWNhYmxlIHRvIHNlbGVjdCBhbmQgbXVsdGktc2VsZWN0IGlucHV0IGZpZWxkc2ApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50VmFsdWU6IHN0cmluZyA9IElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5leHRyYWN0SW5wdXRGaWVsZEFyZ3VtZW50VmFsdWUoaW5wdXRGaWVsZEFyZ3VtZW50U3RyaW5nKTtcclxuXHJcblx0XHRcdFx0Y29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50T2JqZWN0OiBJbnB1dEZpZWxkQXJndW1lbnQgPSB7bmFtZTogaW5wdXRGaWVsZEFyZ3VtZW50TmFtZSwgdmFsdWU6IGlucHV0RmllbGRBcmd1bWVudFZhbHVlfTtcclxuXHRcdFx0XHRpbnB1dEZpZWxkQXJndW1lbnRzLnB1c2goaW5wdXRGaWVsZEFyZ3VtZW50T2JqZWN0KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZWxzZSBpZiAoaW5wdXRGaWVsZEFyZ3VtZW50TmFtZSA9PT0gJ3RpdGxlJykge1xyXG5cdFx0XHRcdGlmIChpbnB1dEZpZWxkVHlwZSAhPT0gSW5wdXRGaWVsZFR5cGUuU0VMRUNUICYmIGlucHV0RmllbGRUeXBlICE9PSBJbnB1dEZpZWxkVHlwZS5NVUxUSV9TRUxFQ1QpIHtcclxuXHRcdFx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcihgYXJndW1lbnQgXFwnJHtpbnB1dEZpZWxkQXJndW1lbnROYW1lfVxcJyBpcyBvbmx5IGFwcGxpY2FibGUgdG8gc2VsZWN0IGFuZCBtdWx0aS1zZWxlY3QgaW5wdXQgZmllbGRzYCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjb25zdCBpbnB1dEZpZWxkQXJndW1lbnRWYWx1ZTogc3RyaW5nID0gSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLmV4dHJhY3RJbnB1dEZpZWxkQXJndW1lbnRWYWx1ZShpbnB1dEZpZWxkQXJndW1lbnRTdHJpbmcpO1xyXG5cclxuXHRcdFx0XHRjb25zdCBpbnB1dEZpZWxkQXJndW1lbnRPYmplY3Q6IElucHV0RmllbGRBcmd1bWVudCA9IHtuYW1lOiBpbnB1dEZpZWxkQXJndW1lbnROYW1lLCB2YWx1ZTogaW5wdXRGaWVsZEFyZ3VtZW50VmFsdWV9O1xyXG5cdFx0XHRcdGlucHV0RmllbGRBcmd1bWVudHMucHVzaChpbnB1dEZpZWxkQXJndW1lbnRPYmplY3QpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRQYXJzaW5nRXJyb3IoYHVua25vd24gYXJndW1lbnQgXFwnJHtpbnB1dEZpZWxkQXJndW1lbnROYW1lfVxcJ2ApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGlucHV0RmllbGRBcmd1bWVudHM7XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgZXh0cmFjdElucHV0RmllbGRBcmd1bWVudE5hbWUoYXJndW1lbnRTdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gUGFyc2VyVXRpbHMucmVtb3ZlSW5CZXR3ZWVuKGFyZ3VtZW50U3RyaW5nLCBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIucm91bmRCcmFjZXNQYWlyKTtcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBleHRyYWN0SW5wdXRGaWVsZEFyZ3VtZW50VmFsdWUoYXJndW1lbnRTdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHRjb25zdCBhcmd1bWVudE5hbWUgPSB0aGlzLmV4dHJhY3RJbnB1dEZpZWxkQXJndW1lbnROYW1lKGFyZ3VtZW50U3RyaW5nKTtcclxuXHJcblx0XHRjb25zdCBhcmd1bWVudFZhbHVlID0gUGFyc2VyVXRpbHMuZ2V0SW5CZXR3ZWVuKGFyZ3VtZW50U3RyaW5nLCBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIucm91bmRCcmFjZXNQYWlyKSBhcyBzdHJpbmc7XHJcblx0XHRpZiAoIWFyZ3VtZW50VmFsdWUpIHtcclxuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kUGFyc2luZ0Vycm9yKGBhcmd1bWVudCBcXCcke2FyZ3VtZW50TmFtZX1cXCcgcmVxdWlyZXMgYSBub24gZW1wdHkgdmFsdWVgKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gYXJndW1lbnRWYWx1ZTtcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBnZXRJbnB1dEZpZWxkVHlwZShzdHI6IHN0cmluZyk6IElucHV0RmllbGRUeXBlIHtcclxuXHRcdGZvciAoY29uc3QgZW50cnkgb2YgT2JqZWN0LmVudHJpZXMoSW5wdXRGaWVsZFR5cGUpKSB7XHJcblx0XHRcdGlmIChlbnRyeVsxXSA9PT0gc3RyKSB7XHJcblx0XHRcdFx0cmV0dXJuIGVudHJ5WzFdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIElucHV0RmllbGRUeXBlLklOVkFMSUQ7XHJcblx0fVxyXG5cclxufVxyXG4iLCAiaW1wb3J0IHtUb2dnbGVJbnB1dEZpZWxkfSBmcm9tICcuL1RvZ2dsZUlucHV0RmllbGQnO1xyXG5pbXBvcnQge0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGV9IGZyb20gJy4uL0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkJztcclxuaW1wb3J0IHtUZXh0SW5wdXRGaWVsZH0gZnJvbSAnLi9UZXh0SW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7U2xpZGVySW5wdXRGaWVsZH0gZnJvbSAnLi9TbGlkZXJJbnB1dEZpZWxkJztcclxuaW1wb3J0IHtUZXh0QXJlYUlucHV0RmllbGR9IGZyb20gJy4vVGV4dEFyZWFJbnB1dEZpZWxkJztcclxuaW1wb3J0IHtTZWxlY3RJbnB1dEZpZWxkfSBmcm9tICcuL1NlbGVjdElucHV0RmllbGQnO1xyXG5pbXBvcnQge011bHRpU2VsZWN0SW5wdXRGaWVsZH0gZnJvbSAnLi9NdWx0aVNlbGVjdElucHV0RmllbGQnO1xyXG5pbXBvcnQge0RhdGVJbnB1dEZpZWxkfSBmcm9tICcuL0RhdGVJbnB1dEZpZWxkJztcclxuaW1wb3J0IHtUaW1lSW5wdXRGaWVsZH0gZnJvbSAnLi9UaW1lSW5wdXRGaWVsZCc7XHJcbmltcG9ydCB7TWV0YUJpbmRQYXJzaW5nRXJyb3J9IGZyb20gJy4uL3V0aWxzL1V0aWxzJztcclxuaW1wb3J0IHtBYnN0cmFjdElucHV0RmllbGR9IGZyb20gJy4vQWJzdHJhY3RJbnB1dEZpZWxkJztcclxuaW1wb3J0IHtJbnB1dEZpZWxkVHlwZX0gZnJvbSAnLi4vcGFyc2Vycy9JbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXInO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBJbnB1dEZpZWxkRmFjdG9yeSB7XHJcblx0c3RhdGljIGFsbG93Q29kZUJsb2NrTWFwOiBSZWNvcmQ8c3RyaW5nLCB7IGNvZGVCbG9jazogYm9vbGVhbiwgaW5saW5lQ29kZUJsb2NrOiBib29sZWFuIH0+ID0ge1xyXG5cdFx0W0lucHV0RmllbGRUeXBlLlRPR0dMRV06IHsgY29kZUJsb2NrOiBUb2dnbGVJbnB1dEZpZWxkLmFsbG93Q29kZUJsb2NrLCBpbmxpbmVDb2RlQmxvY2s6IFRvZ2dsZUlucHV0RmllbGQuYWxsb3dJbmxpbmVDb2RlQmxvY2sgfSxcclxuXHRcdFtJbnB1dEZpZWxkVHlwZS5TTElERVJdOiB7IGNvZGVCbG9jazogU2xpZGVySW5wdXRGaWVsZC5hbGxvd0NvZGVCbG9jaywgaW5saW5lQ29kZUJsb2NrOiBTbGlkZXJJbnB1dEZpZWxkLmFsbG93SW5saW5lQ29kZUJsb2NrIH0sXHJcblx0XHRbSW5wdXRGaWVsZFR5cGUuVEVYVF06IHsgY29kZUJsb2NrOiBUZXh0SW5wdXRGaWVsZC5hbGxvd0NvZGVCbG9jaywgaW5saW5lQ29kZUJsb2NrOiBUZXh0SW5wdXRGaWVsZC5hbGxvd0lubGluZUNvZGVCbG9jayB9LFxyXG5cdFx0W0lucHV0RmllbGRUeXBlLlRFWFRfQVJFQV06IHsgY29kZUJsb2NrOiBUZXh0QXJlYUlucHV0RmllbGQuYWxsb3dDb2RlQmxvY2ssIGlubGluZUNvZGVCbG9jazogVGV4dEFyZWFJbnB1dEZpZWxkLmFsbG93SW5saW5lQ29kZUJsb2NrIH0sXHJcblx0XHRbSW5wdXRGaWVsZFR5cGUuU0VMRUNUXTogeyBjb2RlQmxvY2s6IFNlbGVjdElucHV0RmllbGQuYWxsb3dDb2RlQmxvY2ssIGlubGluZUNvZGVCbG9jazogU2VsZWN0SW5wdXRGaWVsZC5hbGxvd0lubGluZUNvZGVCbG9jayB9LFxyXG5cdFx0W0lucHV0RmllbGRUeXBlLk1VTFRJX1NFTEVDVF06IHsgY29kZUJsb2NrOiBNdWx0aVNlbGVjdElucHV0RmllbGQuYWxsb3dDb2RlQmxvY2ssIGlubGluZUNvZGVCbG9jazogTXVsdGlTZWxlY3RJbnB1dEZpZWxkLmFsbG93SW5saW5lQ29kZUJsb2NrIH0sXHJcblx0XHRbSW5wdXRGaWVsZFR5cGUuREFURV06IHsgY29kZUJsb2NrOiBEYXRlSW5wdXRGaWVsZC5hbGxvd0NvZGVCbG9jaywgaW5saW5lQ29kZUJsb2NrOiBEYXRlSW5wdXRGaWVsZC5hbGxvd0lubGluZUNvZGVCbG9jayB9LFxyXG5cdFx0W0lucHV0RmllbGRUeXBlLlRJTUVdOiB7IGNvZGVCbG9jazogVGltZUlucHV0RmllbGQuYWxsb3dDb2RlQmxvY2ssIGlubGluZUNvZGVCbG9jazogVGltZUlucHV0RmllbGQuYWxsb3dJbmxpbmVDb2RlQmxvY2sgfSxcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBjcmVhdGVJbnB1dEZpZWxkKGlucHV0RmllbGRUeXBlOiBJbnB1dEZpZWxkVHlwZSwgYXJnczogeyB0eXBlOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGUsIGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgb25WYWx1ZUNoYW5nZWQ6ICh2YWx1ZTogYW55KSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPiB9KTogQWJzdHJhY3RJbnB1dEZpZWxkIHwgdW5kZWZpbmVkIHtcclxuXHRcdGlmIChpbnB1dEZpZWxkVHlwZSA9PT0gSW5wdXRGaWVsZFR5cGUuVE9HR0xFKSB7XHJcblx0XHRcdElucHV0RmllbGRGYWN0b3J5LmNoZWNrSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlQWxsb3dlZChpbnB1dEZpZWxkVHlwZSwgYXJncy50eXBlKTtcclxuXHRcdFx0cmV0dXJuIG5ldyBUb2dnbGVJbnB1dEZpZWxkKGFyZ3MuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIGFyZ3Mub25WYWx1ZUNoYW5nZWQpO1xyXG5cdFx0fSBlbHNlIGlmIChpbnB1dEZpZWxkVHlwZSA9PT0gSW5wdXRGaWVsZFR5cGUuU0xJREVSKSB7XHJcblx0XHRcdElucHV0RmllbGRGYWN0b3J5LmNoZWNrSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlQWxsb3dlZChpbnB1dEZpZWxkVHlwZSwgYXJncy50eXBlKTtcclxuXHRcdFx0cmV0dXJuIG5ldyBTbGlkZXJJbnB1dEZpZWxkKGFyZ3MuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIGFyZ3Mub25WYWx1ZUNoYW5nZWQpO1xyXG5cdFx0fSBlbHNlIGlmIChpbnB1dEZpZWxkVHlwZSA9PT0gSW5wdXRGaWVsZFR5cGUuVEVYVCkge1xyXG5cdFx0XHRJbnB1dEZpZWxkRmFjdG9yeS5jaGVja0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZUFsbG93ZWQoaW5wdXRGaWVsZFR5cGUsIGFyZ3MudHlwZSk7XHJcblx0XHRcdHJldHVybiBuZXcgVGV4dElucHV0RmllbGQoYXJncy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgYXJncy5vblZhbHVlQ2hhbmdlZCk7XHJcblx0XHR9IGVsc2UgaWYgKGlucHV0RmllbGRUeXBlID09PSBJbnB1dEZpZWxkVHlwZS5URVhUX0FSRUEpIHtcclxuXHRcdFx0SW5wdXRGaWVsZEZhY3RvcnkuY2hlY2tJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGVBbGxvd2VkKGlucHV0RmllbGRUeXBlLCBhcmdzLnR5cGUpO1xyXG5cdFx0XHRyZXR1cm4gbmV3IFRleHRBcmVhSW5wdXRGaWVsZChhcmdzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBhcmdzLm9uVmFsdWVDaGFuZ2VkKTtcclxuXHRcdH0gZWxzZSBpZiAoaW5wdXRGaWVsZFR5cGUgPT09IElucHV0RmllbGRUeXBlLlNFTEVDVCkge1xyXG5cdFx0XHRJbnB1dEZpZWxkRmFjdG9yeS5jaGVja0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZUFsbG93ZWQoaW5wdXRGaWVsZFR5cGUsIGFyZ3MudHlwZSk7XHJcblx0XHRcdHJldHVybiBuZXcgU2VsZWN0SW5wdXRGaWVsZChhcmdzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBhcmdzLm9uVmFsdWVDaGFuZ2VkKTtcclxuXHRcdH0gZWxzZSBpZiAoaW5wdXRGaWVsZFR5cGUgPT09IElucHV0RmllbGRUeXBlLk1VTFRJX1NFTEVDVCkge1xyXG5cdFx0XHRJbnB1dEZpZWxkRmFjdG9yeS5jaGVja0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZUFsbG93ZWQoaW5wdXRGaWVsZFR5cGUsIGFyZ3MudHlwZSk7XHJcblx0XHRcdHJldHVybiBuZXcgTXVsdGlTZWxlY3RJbnB1dEZpZWxkKGFyZ3MuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIGFyZ3Mub25WYWx1ZUNoYW5nZWQpO1xyXG5cdFx0fSBlbHNlIGlmIChpbnB1dEZpZWxkVHlwZSA9PT0gSW5wdXRGaWVsZFR5cGUuREFURSkge1xyXG5cdFx0XHRJbnB1dEZpZWxkRmFjdG9yeS5jaGVja0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZUFsbG93ZWQoaW5wdXRGaWVsZFR5cGUsIGFyZ3MudHlwZSk7XHJcblx0XHRcdHJldHVybiBuZXcgRGF0ZUlucHV0RmllbGQoYXJncy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgYXJncy5vblZhbHVlQ2hhbmdlZCk7XHJcblx0XHR9IGVsc2UgaWYgKGlucHV0RmllbGRUeXBlID09PSBJbnB1dEZpZWxkVHlwZS5USU1FKSB7XHJcblx0XHRcdElucHV0RmllbGRGYWN0b3J5LmNoZWNrSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlQWxsb3dlZChpbnB1dEZpZWxkVHlwZSwgYXJncy50eXBlKTtcclxuXHRcdFx0cmV0dXJuIG5ldyBUaW1lSW5wdXRGaWVsZChhcmdzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBhcmdzLm9uVmFsdWVDaGFuZ2VkKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdW5kZWZpbmVkO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGNoZWNrSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlQWxsb3dlZChpbnB1dEZpZWxkVHlwZTogSW5wdXRGaWVsZFR5cGUsIHR5cGU6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZSk6IHZvaWQge1xyXG5cdFx0Y29uc3QgYWxsb3dDb2RlQmxvY2s6IHsgY29kZUJsb2NrOiBib29sZWFuOyBpbmxpbmVDb2RlQmxvY2s6IGJvb2xlYW4gfSA9IElucHV0RmllbGRGYWN0b3J5LmFsbG93Q29kZUJsb2NrTWFwW2lucHV0RmllbGRUeXBlXTtcclxuXHRcdGlmICh0eXBlID09PSBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGUuQ09ERV9CTE9DSyAmJiAhYWxsb3dDb2RlQmxvY2suY29kZUJsb2NrKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcihgXFwnJHtpbnB1dEZpZWxkVHlwZX1cXCcgaXMgbm90IGFsbG93ZWQgYXMgY29kZSBibG9ja2ApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHR5cGUgPT09IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZS5JTkxJTkVfQ09ERV9CTE9DSyAmJiAhYWxsb3dDb2RlQmxvY2suaW5saW5lQ29kZUJsb2NrKSB7XHJcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcihgXFwnJHtpbnB1dEZpZWxkVHlwZX1cXCcgaXMgbm90IGFsbG93ZWQgYXMgaW5saW5lIGNvZGUgYmxvY2tgKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSx3QkFBc0Q7OztBQ0F0RCxzQkFBNkM7QUFZdEMsSUFBTSxtQkFBMkM7QUFBQSxFQUN2RCxTQUFTO0FBQUEsRUFDVCxxQkFBcUI7QUFBQSxFQUNyQixxQkFBcUI7QUFBQSxFQUNyQixjQUFjO0FBQUEsRUFDZCxpQkFBaUI7QUFBQSxFQUNqQixpQkFBaUI7QUFDbEI7QUFFTyxJQUFNLHFCQUFOLGNBQWlDLGlDQUFpQjtBQUFBLEVBR3hELFlBQVksS0FBVSxRQUF3QjtBQUM3QyxVQUFNLEtBQUssTUFBTTtBQUNqQixTQUFLLFNBQVM7QUFBQSxFQUNmO0FBQUEsRUFFQSxVQUFnQjtBQUNmLFVBQU0sRUFBQyxnQkFBZTtBQUV0QixnQkFBWSxNQUFNO0FBRWxCLGdCQUFZLFNBQVMsTUFBTSxFQUFDLE1BQU0sNEJBQTJCLENBQUM7QUFFOUQsUUFBSSx3QkFBUSxXQUFXLEVBQ3JCLFFBQVEsZUFBZSxFQUN2QixRQUFRLHlKQUF5SixpQkFBaUIsMEJBQTBCLGlCQUFpQiw2QkFBNkIsaUJBQWlCLGlCQUFpQixFQUM1UixRQUFRLFFBQU07QUFDZCxTQUFHLFNBQVMsS0FBSyxPQUFPLFNBQVMsYUFBYSxTQUFTLENBQUM7QUFDeEQsU0FBRyxTQUFTLFVBQVE7QUFDbkIsYUFBSyxPQUFPLFNBQVMsZUFBZSxPQUFPLFNBQVMsSUFBSTtBQUN4RCxZQUFJLE9BQU8sTUFBTSxLQUFLLE9BQU8sU0FBUyxZQUFZLEdBQUc7QUFDcEQsZUFBSyxPQUFPLFNBQVMsZUFBZSxpQkFBaUI7QUFBQSxRQUN0RDtBQUNBLFlBQUksS0FBSyxPQUFPLFNB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
