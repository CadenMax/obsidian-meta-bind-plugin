"use strict";
/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod2) => __copyProps(__defProp({}, "__esModule", { value: true }), mod2);
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MetaBindPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian9 = require("obsidian");

// src/settings/Settings.ts
var import_obsidian = require("obsidian");

// src/utils/Utils.ts
var MetaBindInternalError = class extends Error {
  constructor(message) {
    super(`[MB_INTERNAL_ERROR - please report this error here https://github.com/mProjectsCode/obsidian-meta-bind-plugin/issues] ${message}`);
  }
};
var MetaBindParsingError = class extends Error {
  constructor(message) {
    super(`[MB_PARSING_ERROR] ${message}`);
  }
};
var MetaBindBindTargetError = class extends Error {
  constructor(message) {
    super(`[MB_BIND_TARGET_ERROR] ${message}`);
  }
};
function getFileName(path) {
  var _a;
  return (_a = path.split("/").at(-1)) != null ? _a : path;
}
function isPath(path) {
  return path.split("/").length > 1;
}
function removeFileEnding(fileName) {
  const fileNameParts = fileName.split(".");
  if (fileNameParts.length === 1) {
    return fileName;
  } else {
    let newFileName = fileNameParts[0];
    for (let i = 1; i < fileNameParts.length - 1; i++) {
      newFileName += "." + fileNameParts[i];
    }
    return newFileName;
  }
}
function mod(n, m) {
  return (n % m + m) % m;
}
function arrayEquals(arr1, arr2) {
  if (arr1.length !== arr2.length) {
    return false;
  }
  for (const arr1Element of arr1) {
    if (!arr2.contains(arr1Element)) {
      return false;
    }
  }
  return true;
}
function isTruthy(value) {
  return !!value;
}
function isFalsy(value) {
  return !value;
}
function equalOrIncludes(str1, str2) {
  return str1 === str2 || str1.includes(str2) || str2.includes(str1);
}

// src/parsers/DateParser.ts
var Date = class {
  constructor() {
    this._monthMap = {
      1: "January",
      2: "February",
      3: "March",
      4: "April",
      5: "May",
      6: "June",
      7: "July",
      8: "August",
      9: "September",
      10: "October",
      11: "November",
      12: "December"
    };
    this._monthMapShort = {
      1: "Jan",
      2: "Feb",
      3: "Mar",
      4: "Apr",
      5: "May",
      6: "Jun",
      7: "Jul",
      8: "Aug",
      9: "Sep",
      10: "Oct",
      11: "Nov",
      12: "Dec"
    };
    this._day = DateParser.getDefaultDay();
    this._month = DateParser.getDefaultMonth();
    this._year = DateParser.getDefaultYear();
  }
  getDay() {
    return this._day;
  }
  setDay(value) {
    if (value < 1 || value > 31) {
      return;
    }
    this._day = value;
  }
  getMonth() {
    return this._month;
  }
  setMonth(value) {
    if (value < 1 || value > 12) {
      return;
    }
    this._month = value;
  }
  getYear() {
    return this._year;
  }
  setYear(value) {
    this._year = value;
  }
  getUniformDay() {
    return ("00" + this.getDay().toString()).slice(-2);
  }
  getUniformMonth() {
    return ("00" + this.getMonth().toString()).slice(-2);
  }
  getUniformYear() {
    return ("0000" + this.getYear().toString()).slice(-4);
  }
  setDayFromString(str) {
    const v = Number.parseInt(str);
    this.setDay(Number.isNaN(v) ? DateParser.getDefaultDay() : v);
  }
  setMonthFromString(str) {
    const v = Number.parseInt(str);
    this.setMonth(Number.isNaN(v) ? DateParser.getDefaultMonth() : v);
  }
  setYearFromString(str) {
    const v = Number.parseInt(str);
    this.setYear(Number.isNaN(v) ? DateParser.getDefaultYear() : v);
  }
  getMonthName() {
    return this._monthMap[this.getMonth()];
  }
  getMonthNameShort() {
    return this._monthMapShort[this.getMonth()];
  }
  setMonthFromName(name) {
    for (const [key, value] of Object.entries(this._monthMap)) {
      if (value === name) {
        this.setMonthFromString(key);
        return;
      }
    }
    for (const [key, value] of Object.entries(this._monthMapShort)) {
      if (value === name) {
        this.setMonthFromString(key);
        return;
      }
    }
  }
};
var DateParser = class {
  static stringify(date) {
    if (DateParser.dateFormat === "us" /* US */) {
      return DateParser.stringifyUsDate(date);
    } else if (DateParser.dateFormat === "eu" /* EU */) {
      return DateParser.stringifyEuDate(date);
    } else if (DateParser.dateFormat === "f_us" /* FANCY_US */) {
      return DateParser.stringifyUsFancyDate(date);
    } else if (DateParser.dateFormat === "fs_us" /* FANCY_SHORT_US */) {
      return DateParser.stringifyUsFancyDateShort(date);
    }
    throw new MetaBindInternalError("date format setting does not match any supported date format");
  }
  static parse(dateString) {
    if (DateParser.dateFormat === "us" /* US */) {
      return DateParser.parseUsDate(dateString);
    } else if (DateParser.dateFormat === "eu" /* EU */) {
      return DateParser.parseEuDate(dateString);
    } else if (DateParser.dateFormat === "f_us" /* FANCY_US */) {
      return DateParser.parseUsFancyDate(dateString);
    } else if (DateParser.dateFormat === "fs_us" /* FANCY_SHORT_US */) {
      return DateParser.parseUsFancyDate(dateString);
    }
    throw new MetaBindInternalError("date format setting does not match any supported date format");
  }
  static stringifyEuDate(date) {
    return `${date.getUniformDay()}/${date.getUniformMonth()}/${date.getUniformYear()}`;
  }
  static parseEuDate(dateString) {
    const date = DateParser.getDefaultDate();
    const dateParts = dateString.split("/");
    if (dateParts.length !== 3) {
      return void 0;
    }
    date.setDayFromString(dateParts[0]);
    date.setMonthFromString(dateParts[1]);
    date.setYearFromString(dateParts[2]);
    return date;
  }
  static stringifyUsDate(date) {
    return `${date.getUniformMonth()}/${date.getUniformDay()}/${date.getUniformYear()}`;
  }
  static parseUsDate(dateString) {
    const date = DateParser.getDefaultDate();
    const dateParts = dateString.split("/");
    if (dateParts.length !== 3) {
      return void 0;
    }
    date.setMonthFromString(dateParts[0]);
    date.setDayFromString(dateParts[1]);
    date.setYearFromString(dateParts[2]);
    return date;
  }
  static stringifyUsFancyDate(date) {
    return `${date.getMonthName()} ${date.getDay().toString()}, ${date.getYear().toString()}`;
  }
  static stringifyUsFancyDateShort(date) {
    return `${date.getMonthNameShort()} ${date.getDay().toString()}, ${date.getYear().toString()}`;
  }
  static parseUsFancyDate(dateString) {
    const date = DateParser.getDefaultDate();
    const dateParts = dateString.split(",").map((x) => x.trim());
    if (dateParts.length !== 2) {
      return void 0;
    }
    const datePartsParts = dateParts[0].split(" ");
    if (datePartsParts.length !== 2) {
      return void 0;
    }
    date.setMonthFromName(datePartsParts[0]);
    date.setDayFromString(datePartsParts[1]);
    date.setYearFromString(dateParts[1]);
    return date;
  }
  static getDefaultDate() {
    return new Date();
  }
  static getDefaultDay() {
    return 1;
  }
  static getDefaultMonth() {
    return 1;
  }
  static getDefaultYear() {
    return 2022;
  }
};

// src/settings/Settings.ts
var DEFAULT_SETTINGS = {
  devMode: false,
  dateFormat: "us" /* US */,
  syncInterval: 200,
  minSyncInterval: 50,
  maxSyncInterval: 1e3
};
var MetaBindSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Meta Bind Plugin Settings" });
    new import_obsidian.Setting(containerEl).setName("Sync Interval").setDesc(`The interval in milli-seconds between disk writes. Changing this number is not recommended except if your hard drive is exceptionally slow. Standard: ${DEFAULT_SETTINGS.syncInterval}; Minimum: ${DEFAULT_SETTINGS.minSyncInterval}; Maximum: ${DEFAULT_SETTINGS.maxSyncInterval}`).addText((cb) => {
      cb.setValue(this.plugin.settings.syncInterval.toString());
      cb.onChange((data) => {
        this.plugin.settings.syncInterval = Number.parseInt(data);
        if (Number.isNaN(this.plugin.settings.syncInterval)) {
          this.plugin.settings.syncInterval = DEFAULT_SETTINGS.syncInterval;
        }
        if (this.plugin.settings.syncInterval < DEFAULT_SETTINGS.minSyncInterval) {
          this.plugin.settings.syncInterval = DEFAULT_SETTINGS.minSyncInterval;
        }
        if (this.plugin.settings.syncInterval > DEFAULT_SETTINGS.maxSyncInterval) {
          this.plugin.settings.syncInterval = DEFAULT_SETTINGS.maxSyncInterval;
        }
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Date format").setDesc(`The date format to be used by this plugin.`).addDropdown((cb) => {
      cb.addOptions({
        "us": "US date format (1/30/2022)",
        "eu": "EU date format (30/1/2022)",
        "f_us": "US date format (January 30, 2022)",
        "fs_us": "US date format (Jan 30, 2022)"
      });
      cb.onChange((data) => {
        this.plugin.settings.dateFormat = data;
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Dev Mode").setDesc("Enable dev mode. Not recommended unless you want to debug this plugin.").addToggle((cb) => {
      cb.setValue(this.plugin.settings.devMode);
      cb.onChange((data) => {
        this.plugin.settings.devMode = data;
        this.plugin.saveSettings();
      });
    });
  }
};

// src/InputFieldMarkdownRenderChild.ts
var import_obsidian8 = require("obsidian");

// src/utils/Logger.ts
var _Logger = class {
  static log(...data) {
    console.log(this.prefix, ...data);
  }
  static logDebug(...data) {
    if (this.devMode) {
      _Logger.log(...data);
    }
  }
  static logWarning(...data) {
    console.warn(this.prefix, data);
  }
  static logError(...data) {
    console.error(this.prefix, data);
  }
};
var Logger = _Logger;
Logger.prefix = "meta-bind |";

// src/inputFields/AbstractInputField.ts
var AbstractInputField = class {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    this.inputFieldMarkdownRenderChild = inputFieldMarkdownRenderChild;
    this.onValueChange = onValueChange;
  }
};
AbstractInputField.allowCodeBlock = true;
AbstractInputField.allowInlineCodeBlock = true;

// src/inputFields/ToggleInputField.ts
var import_obsidian2 = require("obsidian");
var ToggleInputField = class extends AbstractInputField {
  getValue() {
    if (!this.toggleComponent) {
      throw new MetaBindInternalError("toggle input component is undefined");
    }
    return this.toggleComponent.getValue();
  }
  setValue(value) {
    if (!this.toggleComponent) {
      throw new MetaBindInternalError("toggle input component is undefined");
    }
    if (value != null && typeof value == "boolean") {
      this.toggleComponent.setValue(value);
    } else {
      Logger.logWarning(`can not set value of toggle to '${value}'`);
      this.toggleComponent.setValue(false);
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return false;
  }
  getHtmlElement() {
    if (!this.toggleComponent) {
      throw new MetaBindInternalError("toggle input component is undefined");
    }
    return this.toggleComponent.toggleEl;
  }
  render(container) {
    const component = new import_obsidian2.ToggleComponent(container);
    component.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
    component.onChange(this.onValueChange);
    this.toggleComponent = component;
  }
};

// src/inputFields/TextInputField.ts
var import_obsidian3 = require("obsidian");
var TextInputField = class extends AbstractInputField {
  getValue() {
    if (!this.textComponent) {
      throw new MetaBindInternalError("text input component is undefined");
    }
    return this.textComponent.getValue();
  }
  setValue(value) {
    if (!this.textComponent) {
      throw new MetaBindInternalError("text input component is undefined");
    }
    if (value != null && typeof value == "string") {
      this.textComponent.setValue(value);
    } else {
      Logger.logWarning(`can not set value of text input to '${value}'`);
      this.textComponent.setValue("");
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return "";
  }
  getHtmlElement() {
    if (!this.textComponent) {
      throw new MetaBindInternalError("text input component is undefined");
    }
    return this.textComponent.inputEl;
  }
  render(container) {
    const component = new import_obsidian3.TextComponent(container);
    component.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
    component.onChange(this.onValueChange);
    this.textComponent = component;
  }
};

// src/inputFields/SliderInputField.ts
var import_obsidian4 = require("obsidian");
var SliderInputField = class extends AbstractInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    var _a, _b, _c, _d;
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.minValue = (_b = (_a = inputFieldMarkdownRenderChild.getArgument("minValue")) == null ? void 0 : _a.value) != null ? _b : 0;
    this.maxValue = (_d = (_c = inputFieldMarkdownRenderChild.getArgument("maxValue")) == null ? void 0 : _c.value) != null ? _d : 100;
  }
  getValue() {
    if (!this.sliderComponent) {
      throw new MetaBindInternalError("slider input component is undefined");
    }
    return this.sliderComponent.getValue();
  }
  setValue(value) {
    if (!this.sliderComponent) {
      throw new MetaBindInternalError("slider input component is undefined");
    }
    if (value != null && typeof value == "number") {
      if (value >= this.minValue && value <= this.maxValue) {
        this.sliderComponent.setValue(value);
      }
    } else {
      Logger.logWarning(`can not set value of slider to '${value}'`);
      this.sliderComponent.setValue(this.getDefaultValue());
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return this.minValue;
  }
  getHtmlElement() {
    if (!this.sliderComponent) {
      throw new MetaBindInternalError("slider input component is undefined");
    }
    return this.sliderComponent.sliderEl;
  }
  render(container) {
    container.removeClass("meta-bind-plugin-input-wrapper");
    container.addClass("meta-bind-plugin-flex-input-wrapper");
    const labelArgument = this.inputFieldMarkdownRenderChild.getArgument("labels");
    if (labelArgument && labelArgument.value === true) {
      container.createSpan({ text: this.minValue.toString(), cls: "meta-bind-plugin-slider-input-label" });
    }
    const component = new import_obsidian4.SliderComponent(container);
    component.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
    component.onChange(this.onValueChange);
    component.setDynamicTooltip();
    component.setLimits(this.minValue, this.maxValue, 1);
    component.sliderEl.addClass("meta-bind-plugin-slider-input");
    if (labelArgument && labelArgument.value === true) {
      container.createSpan({ text: this.maxValue.toString(), cls: "meta-bind-plugin-slider-input-label" });
    }
    this.sliderComponent = component;
  }
};

// src/inputFields/TextAreaInputField.ts
var import_obsidian5 = require("obsidian");
var TextAreaInputField = class extends AbstractInputField {
  getValue() {
    if (!this.textAreaComponent) {
      throw new MetaBindInternalError("text area input component is undefined");
    }
    return this.textAreaComponent.getValue();
  }
  setValue(value) {
    if (!this.textAreaComponent) {
      throw new MetaBindInternalError("text area input component is undefined");
    }
    if (value != null && typeof value == "string") {
      this.textAreaComponent.setValue(value);
    } else {
      Logger.logWarning(`can not set value of text area input to '${value}'`);
      this.textAreaComponent.setValue("");
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return "";
  }
  getHtmlElement() {
    if (!this.textAreaComponent) {
      throw new MetaBindInternalError("text area input component is undefined");
    }
    return this.textAreaComponent.inputEl;
  }
  render(container) {
    const component = new import_obsidian5.TextAreaComponent(container);
    component.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
    component.onChange(this.onValueChange);
    this.textAreaComponent = component;
  }
};

// src/inputFields/SelectInputFieldElement.ts
var SelectInputFieldElement = class {
  constructor(value, parentElement, id, multiSelectInputField, active = false) {
    this.value = value;
    this.id = id;
    this.active = active;
    this.highlighted = false;
    this.selectInputField = multiSelectInputField;
    this.cssClass = "meta-bind-plugin-select-input-element";
    this.activeClass = "meta-bind-plugin-select-input-element-selected";
    this.hoverClass = "meta-bind-plugin-select-input-element-hover";
    this.element = parentElement.createDiv({ cls: this.cssClass });
    this.element.id = this.getHTMLId();
    this.element.on("click", "#" + this.getHTMLId(), () => {
      this.setActive(!this.active);
      if (!this.selectInputField.allowMultiSelect) {
        this.selectInputField.disableAllOtherElements(this.id);
      }
    });
    this.element.on("mouseenter", "#" + this.getHTMLId(), () => {
      this.setHighlighted(true);
    });
    this.element.on("mouseleave", "#" + this.getHTMLId(), () => {
      this.setHighlighted(false);
    });
  }
  getHTMLId() {
    return `meta-bind-select-input-element-${this.selectInputField.inputFieldMarkdownRenderChild.uid}-${this.id}`;
  }
  isHighlighted() {
    return this.highlighted;
  }
  setHighlighted(value) {
    this.highlighted = value;
    if (this.highlighted) {
      this.addClass(this.hoverClass);
      this.selectInputField.deHighlightAllOtherElements(this.id);
    } else {
      this.removeClass(this.hoverClass);
    }
  }
  isActive() {
    return this.active;
  }
  setActive(active, updateParent = true) {
    this.active = active;
    this.update(updateParent);
  }
  update(updateParent) {
    if (this.active) {
      this.addClass(this.activeClass);
    } else {
      this.removeClass(this.activeClass);
    }
    if (updateParent) {
      this.selectInputField.onChange();
    }
  }
  addClass(cssClass) {
    if (!this.element.hasClass(cssClass)) {
      this.element.addClass(cssClass);
    }
  }
  removeClass(cssClass) {
    if (this.element.hasClass(cssClass)) {
      this.element.removeClass(cssClass);
    }
  }
  render() {
    this.element.createEl("div", { text: this.value });
  }
};

// src/inputFields/SelectInputField.ts
var SelectInputField = class extends AbstractInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.elements = [];
    this.allowMultiSelect = false;
  }
  getHtmlElement() {
    if (!this.container) {
      throw new MetaBindInternalError("select input container is undefined");
    }
    return this.container;
  }
  getValue() {
    var _a, _b;
    return (_b = (_a = this.elements.filter((x) => x.isActive()).first()) == null ? void 0 : _a.value) != null ? _b : "";
  }
  setValue(value) {
    for (const element of this.elements) {
      if (value === element.value) {
        element.setActive(true, false);
      } else {
        element.setActive(false, false);
      }
    }
  }
  isEqualValue(value) {
    return this.getValue() == value;
  }
  getDefaultValue() {
    return "";
  }
  onChange() {
    this.onValueChange(this.getValue());
  }
  render(container) {
    container.addClass("meta-bind-plugin-select-input-bg");
    this.container = container;
    const elementWrapper = container.createDiv({ cls: "meta-bind-plugin-select-input-wrapper" });
    const titleArgument = this.inputFieldMarkdownRenderChild.getArgument("title");
    if (titleArgument) {
      elementWrapper.createEl("div", { text: titleArgument.value, cls: "meta-bind-plugin-select-input-header" });
    }
    const elementArguments = this.inputFieldMarkdownRenderChild.getArguments("option");
    let i = 0;
    for (const elementArgument of elementArguments) {
      const selectInputFieldElement = new SelectInputFieldElement(elementArgument.value, elementWrapper, i, this, false);
      this.elements.push(selectInputFieldElement);
      selectInputFieldElement.render();
      i += 1;
    }
    this.setValue(this.inputFieldMarkdownRenderChild.getInitialValue());
  }
  disableAllOtherElements(elementId) {
    for (const selectModalElement of this.elements) {
      if (selectModalElement.id !== elementId) {
        selectModalElement.setActive(false);
      }
    }
  }
  deHighlightAllOtherElements(elementId) {
    for (const selectModalElement of this.elements) {
      if (selectModalElement.id !== elementId) {
        selectModalElement.setHighlighted(false);
      }
    }
  }
  activateHighlighted() {
    for (const selectModalElement of this.elements) {
      if (selectModalElement.isHighlighted()) {
        selectModalElement.setActive(!selectModalElement.isActive());
        if (!this.allowMultiSelect) {
          this.disableAllOtherElements(selectModalElement.id);
        }
      }
    }
  }
  highlightUp() {
    var _a, _b;
    for (const selectModalElement of this.elements) {
      if (selectModalElement.isHighlighted()) {
        (_a = this.getPreviousSelectModalElement(selectModalElement)) == null ? void 0 : _a.setHighlighted(true);
        return;
      }
    }
    (_b = this.elements.at(-1)) == null ? void 0 : _b.setHighlighted(true);
  }
  highlightDown() {
    var _a, _b;
    for (const selectModalElement of this.elements) {
      if (selectModalElement.isHighlighted()) {
        (_a = this.getNextSelectModalElement(selectModalElement)) == null ? void 0 : _a.setHighlighted(true);
        return;
      }
    }
    (_b = this.elements.at(0)) == null ? void 0 : _b.setHighlighted(true);
  }
  getNextSelectModalElement(element) {
    let nextId = element.id + 1;
    nextId = mod(nextId, this.elements.length);
    return this.elements.filter((x) => x.id === nextId).at(0);
  }
  getPreviousSelectModalElement(element) {
    let nextId = element.id - 1;
    nextId = mod(nextId, this.elements.length);
    return this.elements.filter((x) => x.id === nextId).at(0);
  }
};
SelectInputField.allowInlineCodeBlock = false;

// src/inputFields/MultiSelectInputField.ts
var MultiSelectInputField = class extends SelectInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.allowMultiSelect = true;
  }
  getValue() {
    return this.elements.filter((x) => x.isActive()).map((x) => x.value);
  }
  setValue(value) {
    if (value.length === 0) {
      for (const element of this.elements) {
        element.setActive(false, false);
      }
      return;
    }
    elementLoop:
      for (const element of this.elements) {
        for (const valueElement of value) {
          if (valueElement === element.value) {
            element.setActive(true, false);
            continue elementLoop;
          }
        }
        element.setActive(false, false);
      }
  }
  isEqualValue(value) {
    if (!Array.isArray(value)) {
      return false;
    }
    return arrayEquals(this.getValue(), value);
  }
  getDefaultValue() {
    return [];
  }
};

// src/inputFields/DateInputField.ts
var import_obsidian6 = require("obsidian");
var DateInputField = class extends AbstractInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.months = {
      "1": "January",
      "2": "February",
      "3": "March",
      "4": "April",
      "5": "May",
      "6": "June",
      "7": "July",
      "8": "August",
      "9": "September",
      "10": "October",
      "11": "November",
      "12": "December"
    };
    this.date = DateParser.getDefaultDate();
    this.days = {};
    for (let i = 1; i <= 31; i++) {
      this.days[i.toString()] = i.toString();
    }
  }
  getHtmlElement() {
    if (!this.container) {
      throw new MetaBindInternalError("toggle input container is undefined");
    }
    return this.container;
  }
  getValue() {
    return DateParser.stringify(this.date);
  }
  setValue(value) {
    var _a;
    if (!this.monthComponent) {
      throw new MetaBindInternalError("date input month component is undefined");
    }
    if (!this.dayComponent) {
      throw new MetaBindInternalError("date input day component is undefined");
    }
    if (!this.yearComponent) {
      throw new MetaBindInternalError("date input hour component is undefined");
    }
    this.date = (_a = DateParser.parse(value)) != null ? _a : DateParser.getDefaultDate();
    this.monthComponent.setValue(this.date.getMonth().toString());
    this.dayComponent.setValue(this.date.getDay().toString());
    this.yearComponent.setValue(this.date.getYear().toString());
  }
  isEqualValue(value) {
    return value == this.getValue();
  }
  getDefaultValue() {
    return DateParser.stringify(DateParser.getDefaultDate());
  }
  render(container) {
    var _a;
    this.date = (_a = DateParser.parse(this.inputFieldMarkdownRenderChild.getInitialValue())) != null ? _a : DateParser.getDefaultDate();
    container.removeClass("meta-bind-plugin-input-wrapper");
    container.addClass("meta-bind-plugin-flex-input-wrapper", "meta-bind-plugin-input-element-group");
    if (DateParser.dateFormat === "eu" /* EU */) {
      this.dayComponent = new import_obsidian6.DropdownComponent(container);
      this.dayComponent.addOptions(this.days);
      this.dayComponent.setValue(this.date.getDay().toString());
      this.dayComponent.onChange(this.onDayChange.bind(this));
      this.monthComponent = new import_obsidian6.DropdownComponent(container);
      this.monthComponent.addOptions(this.months);
      this.monthComponent.setValue(this.date.getMonth().toString());
      this.monthComponent.onChange(this.onMonthChange.bind(this));
      this.dayComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
      this.monthComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
    } else {
      this.monthComponent = new import_obsidian6.DropdownComponent(container);
      this.monthComponent.addOptions(this.months);
      this.monthComponent.setValue(this.date.getMonth().toString());
      this.monthComponent.onChange(this.onMonthChange.bind(this));
      this.dayComponent = new import_obsidian6.DropdownComponent(container);
      this.dayComponent.addOptions(this.days);
      this.dayComponent.setValue(this.date.getDay().toString());
      this.dayComponent.onChange(this.onDayChange.bind(this));
      this.dayComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
      this.monthComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
    }
    this.yearComponent = new import_obsidian6.TextComponent(container);
    this.yearComponent.setValue(this.date.getYear().toString());
    this.yearComponent.onChange(this.onYearChange.bind(this));
    this.yearComponent.inputEl.addClass("meta-bind-plugin-date-input-year-input");
    this.yearComponent.inputEl.addClass("meta-bind-plugin-input-element-group-element");
    this.yearComponent.inputEl.type = "number";
    this.yearComponent.inputEl.max = "9999";
    this.container = container;
  }
  onMonthChange(value) {
    this.date.setMonthFromString(value);
    this.onValueChange(this.getValue());
  }
  onDayChange(value) {
    this.date.setDayFromString(value);
    this.onValueChange(this.getValue());
  }
  onYearChange(value) {
    this.date.setYearFromString(value);
    this.onValueChange(this.getValue());
  }
};

// src/inputFields/TimeInputField.ts
var import_obsidian7 = require("obsidian");

// src/parsers/TimeParser.ts
var Time = class {
  constructor() {
    this._hour = TimeParser.getDefaultHour();
    this._minute = TimeParser.getDefaultHour();
  }
  getHour() {
    return this._hour;
  }
  setHour(value) {
    if (value < 0 || value > 24) {
      this._hour = TimeParser.getDefaultHour();
      return;
    }
    this._hour = value;
  }
  getMinute() {
    return this._minute;
  }
  setMinute(value) {
    if (value < 0 || value > 59) {
      this._minute = TimeParser.getDefaultMinute();
      return;
    }
    this._minute = value;
  }
  getUniformHour() {
    return ("00" + this.getHour().toString()).slice(-2);
  }
  getUniformMinute() {
    return ("00" + this.getMinute().toString()).slice(-2);
  }
  setHourFromString(str) {
    const v = Number.parseInt(str);
    this.setHour(Number.isNaN(v) ? TimeParser.getDefaultHour() : v);
  }
  setMinuteFromString(str) {
    const v = Number.parseInt(str);
    this.setMinute(Number.isNaN(v) ? TimeParser.getDefaultMinute() : v);
  }
};
var TimeParser = class {
  static parse(timeString) {
    const time = TimeParser.getDefaultTime();
    const timeParts = timeString.split(":");
    if (timeParts.length !== 2) {
      return void 0;
    }
    time.setHourFromString(timeParts[0]);
    time.setMinuteFromString(timeParts[1]);
    return time;
  }
  static stringify(time) {
    return `${time.getUniformHour()}:${time.getUniformMinute()}`;
  }
  static getDefaultTime() {
    return new Time();
  }
  static getDefaultHour() {
    return 0;
  }
  static getDefaultMinute() {
    return 0;
  }
};

// src/inputFields/TimeInputField.ts
var TimeInputField = class extends AbstractInputField {
  constructor(inputFieldMarkdownRenderChild, onValueChange) {
    super(inputFieldMarkdownRenderChild, onValueChange);
    this.time = TimeParser.getDefaultTime();
    this.hours = {};
    for (let i = 0; i <= 24; i++) {
      this.hours[i.toString()] = i.toString();
    }
    this.minutes = {};
    for (let i = 0; i <= 59; i++) {
      this.minutes[i.toString()] = i.toString();
    }
  }
  getHtmlElement() {
    if (!this.container) {
      throw new MetaBindInternalError("time input container is undefined");
    }
    return this.container;
  }
  getValue() {
    return TimeParser.stringify(this.time);
  }
  setValue(value) {
    var _a;
    if (!this.hourComponent) {
      throw new MetaBindInternalError("time input hour component is undefined");
    }
    if (!this.minuteComponent) {
      throw new MetaBindInternalError("time input minute component is undefined");
    }
    this.time = (_a = TimeParser.parse(value)) != null ? _a : TimeParser.getDefaultTime();
    this.hourComponent.setValue(this.time.getHour().toString());
    this.minuteComponent.setValue(this.time.getMinute().toString());
  }
  isEqualValue(value) {
    return value == this.getValue();
  }
  getDefaultValue() {
    return TimeParser.stringify(TimeParser.getDefaultTime());
  }
  render(container) {
    var _a;
    this.time = (_a = TimeParser.parse(this.inputFieldMarkdownRenderChild.getInitialValue())) != null ? _a : TimeParser.getDefaultTime();
    container.removeClass("meta-bind-plugin-input-wrapper");
    container.addClass("meta-bind-plugin-flex-input-wrapper", "meta-bind-plugin-input-element-group");
    this.hourComponent = new import_obsidian7.DropdownComponent(container);
    this.hourComponent.addOptions(this.hours);
    this.hourComponent.setValue(this.time.getHour().toString());
    this.hourComponent.onChange(this.onHourChange.bind(this));
    this.minuteComponent = new import_obsidian7.DropdownComponent(container);
    this.minuteComponent.addOptions(this.minutes);
    this.minuteComponent.setValue(this.time.getMinute().toString());
    this.minuteComponent.onChange(this.onMinuteChange.bind(this));
    this.hourComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
    this.minuteComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element");
    this.container = container;
  }
  onHourChange(value) {
    this.time.setHourFromString(value);
    this.onValueChange(this.getValue());
  }
  onMinuteChange(value) {
    this.time.setMinuteFromString(value);
    this.onValueChange(this.getValue());
  }
};

// src/utils/ParserUtils.ts
var EnclosingPair = class {
  constructor(openingString, closingString) {
    if (isFalsy(openingString)) {
      throw new MetaBindInternalError("opening string must not be empty");
    }
    this.openingEqualsClosing = isFalsy(closingString) || openingString === closingString;
    if (this.openingEqualsClosing) {
      this._openingString = openingString;
      this._closingString = openingString;
    } else {
      this._openingString = openingString;
      this._closingString = closingString;
    }
  }
  get openingString() {
    return this._openingString;
  }
  get closingString() {
    return this.openingEqualsClosing ? this._openingString : this._closingString;
  }
  overlaps(other) {
    return equalOrIncludes(this.openingString, other.openingString) || equalOrIncludes(this.openingString, other.closingString) || equalOrIncludes(this.closingString, other.openingString) || equalOrIncludes(this.closingString, other.closingString);
  }
  equals(other) {
    if (isFalsy(other)) {
      return false;
    }
    return this.openingString === other.openingString && this.closingString === other.closingString;
  }
  toString() {
    return JSON.stringify(this);
  }
};
var ParserUtils = class {
  static split(str, separator, ignore) {
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    if (!separator) {
      throw new MetaBindInternalError("separator must not be empty");
    }
    let subStr = "";
    const subStrings = [];
    if (ignore) {
      let remainingOpeningStringCount = ParserUtils.numberOfOccurrences(str, ignore.openingString);
      let remainingClosingStringCount = ParserUtils.numberOfOccurrences(str, ignore.closingString);
      let enclosingLevel = 0;
      strLoop:
        for (let i = 0; i < str.length; i++) {
          if (enclosingLevel === 0 && ParserUtils.isStringAt(str, separator, i)) {
            subStrings.push(subStr);
            subStr = "";
            i += separator.length - 1;
          } else {
            subStr += str[i];
          }
          if (ignore.openingEqualsClosing) {
            if (ParserUtils.isStringAt(str, ignore.openingString, i)) {
              if (enclosingLevel % 2 === 0 && remainingOpeningStringCount === 1) {
              } else if (enclosingLevel % 2 === 0) {
                enclosingLevel += 1;
                for (let j = 1; j < ignore.openingString.length; j++) {
                  i += 1;
                  subStr += str[i];
                  if (i >= str.length) {
                    break strLoop;
                  }
                }
              } else {
                enclosingLevel -= 1;
                for (let j = 1; j < ignore.closingString.length; j++) {
                  i += 1;
                  subStr += str[i];
                  if (i >= str.length) {
                    break strLoop;
                  }
                }
              }
              remainingOpeningStringCount -= 1;
            }
          } else {
            if (ParserUtils.isStringAt(str, ignore.openingString, i)) {
              if (remainingOpeningStringCount <= remainingClosingStringCount) {
                enclosingLevel += 1;
                for (let j = 1; j < ignore.openingString.length; j++) {
                  i += 1;
                  subStr += str[i];
                  if (i >= str.length) {
                    break strLoop;
                  }
                }
              }
              remainingOpeningStringCount -= 1;
            } else if (ParserUtils.isStringAt(str, ignore.closingString, i)) {
              if (enclosingLevel > 0) {
                enclosingLevel -= 1;
                for (let j = 1; j < ignore.closingString.length; j++) {
                  i += 1;
                  subStr += str[i];
                  if (i >= str.length) {
                    break strLoop;
                  }
                }
              }
              remainingClosingStringCount -= 1;
            }
          }
        }
    } else {
      for (let i = 0; i < str.length; i++) {
        if (ParserUtils.isStringAt(str, separator, i)) {
          subStrings.push(subStr);
          subStr = "";
          i += separator.length - 1;
        } else {
          subStr += str[i];
        }
      }
    }
    subStrings.push(subStr);
    return subStrings;
  }
  static removeInBetween(str, enclosingPair) {
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    let remainingOpeningStringCount = ParserUtils.numberOfOccurrences(str, enclosingPair.openingString);
    let remainingClosingStringCount = ParserUtils.numberOfOccurrences(str, enclosingPair.closingString);
    let enclosingLevel = 0;
    let subStr = "";
    for (let i = 0; i < str.length; i++) {
      if (enclosingPair.openingEqualsClosing) {
        if (ParserUtils.isStringAt(str, enclosingPair.openingString, i)) {
          if (enclosingLevel % 2 === 0 && remainingOpeningStringCount === 1) {
          } else if (enclosingLevel % 2 === 0) {
            enclosingLevel += 1;
            i += enclosingPair.openingString.length;
            if (i >= str.length) {
              break;
            }
          } else {
            enclosingLevel -= 1;
            i += enclosingPair.closingString.length;
            if (i >= str.length) {
              break;
            }
          }
          remainingOpeningStringCount -= 1;
        }
      } else {
        if (ParserUtils.isStringAt(str, enclosingPair.openingString, i)) {
          if (remainingOpeningStringCount <= remainingClosingStringCount) {
            enclosingLevel += 1;
            i += enclosingPair.openingString.length;
            if (i >= str.length) {
              break;
            }
          }
          remainingOpeningStringCount -= 1;
        } else if (ParserUtils.isStringAt(str, enclosingPair.closingString, i)) {
          if (enclosingLevel > 0) {
            enclosingLevel -= 1;
            i += enclosingPair.closingString.length;
            if (i >= str.length) {
              break;
            }
          }
          remainingClosingStringCount -= 1;
        }
      }
      if (enclosingLevel === 0) {
        subStr += str[i];
      }
    }
    return subStr;
  }
  static getInBetween(str, enclosingPair) {
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    let remainingOpeningStringCount = ParserUtils.numberOfOccurrences(str, enclosingPair.openingString);
    let remainingClosingStringCount = ParserUtils.numberOfOccurrences(str, enclosingPair.closingString);
    let enclosingLevel = 0;
    let subStr = "";
    const subStrings = [];
    strLoop:
      for (let i = 0; i < str.length; i++) {
        if (enclosingPair.openingEqualsClosing) {
          if (ParserUtils.isStringAt(str, enclosingPair.openingString, i)) {
            if (enclosingLevel % 2 === 0 && remainingOpeningStringCount === 1) {
            } else if (enclosingLevel % 2 === 0) {
              enclosingLevel += 1;
              subStr += str[i];
              for (let j = 1; j < enclosingPair.openingString.length; j++) {
                i += 1;
                subStr += str[i];
                if (i >= str.length) {
                  break strLoop;
                }
              }
            } else {
              enclosingLevel -= 1;
              subStr += str[i];
              for (let j = 1; j < enclosingPair.closingString.length; j++) {
                i += 1;
                subStr += str[i];
                if (i > str.length) {
                  break strLoop;
                }
              }
              subStrings.push(subStr);
              subStr = "";
            }
            remainingOpeningStringCount -= 1;
          } else {
            if (enclosingLevel >= 1) {
              subStr += str[i];
            }
          }
        } else {
          if (ParserUtils.isStringAt(str, enclosingPair.openingString, i)) {
            if (remainingOpeningStringCount <= remainingClosingStringCount) {
              enclosingLevel += 1;
              subStr += str[i];
              for (let j = 1; j < enclosingPair.openingString.length; j++) {
                i += 1;
                subStr += str[i];
                if (i >= str.length) {
                  break strLoop;
                }
              }
            }
            remainingOpeningStringCount -= 1;
          } else if (ParserUtils.isStringAt(str, enclosingPair.closingString, i)) {
            if (enclosingLevel > 0) {
              enclosingLevel -= 1;
              subStr += str[i];
              for (let j = 1; j < enclosingPair.closingString.length; j++) {
                i += 1;
                subStr += str[i];
                if (i > str.length) {
                  break strLoop;
                }
              }
              if (enclosingLevel === 0) {
                subStrings.push(subStr);
                subStr = "";
              }
            }
            remainingClosingStringCount -= 1;
          } else {
            if (enclosingLevel >= 1) {
              subStr += str[i];
            }
          }
        }
      }
    if (subStrings.length === 0) {
      return "";
    } else if (subStrings.length === 1) {
      return subStrings[0].substring(enclosingPair.openingString.length, subStrings[0].length - enclosingPair.closingString.length);
    } else {
      return subStrings.map((x) => x.substring(enclosingPair.openingString.length, x.length - enclosingPair.closingString.length));
    }
  }
  static isStringAt(str, subStr, index) {
    if (index < 0) {
      throw new MetaBindInternalError("index must be greater than 0");
    }
    if (index >= str.length) {
      throw new MetaBindInternalError("index out of bounds of string");
    }
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    if (!subStr) {
      throw new MetaBindInternalError("sub string must not be empty");
    }
    for (let i = 0; i < subStr.length; i++) {
      if (str[i + index] !== subStr[i]) {
        return false;
      }
    }
    return true;
  }
  static contains(str, subStr) {
    return ParserUtils.numberOfOccurrences(str, subStr) > 0;
  }
  static numberOfOccurrences(str, subStr) {
    if (!str) {
      throw new MetaBindInternalError("string must not be empty");
    }
    if (!subStr) {
      throw new MetaBindInternalError("sub string must not be empty");
    }
    let occurrences = 0;
    for (let i = 0; i < str.length; i++) {
      if (ParserUtils.isStringAt(str, subStr, i)) {
        occurrences += 1;
      }
    }
    return occurrences;
  }
};

// src/parsers/InputFieldDeclarationParser.ts
var InputFieldType = /* @__PURE__ */ ((InputFieldType2) => {
  InputFieldType2["TOGGLE"] = "toggle";
  InputFieldType2["SLIDER"] = "slider";
  InputFieldType2["TEXT"] = "text";
  InputFieldType2["TEXT_AREA"] = "text_area";
  InputFieldType2["SELECT"] = "select";
  InputFieldType2["MULTI_SELECT"] = "multi_select";
  InputFieldType2["DATE"] = "date";
  InputFieldType2["TIME"] = "time";
  InputFieldType2["INVALID"] = "invalid";
  return InputFieldType2;
})(InputFieldType || {});
var _InputFieldDeclarationParser = class {
  static parse(fullDeclaration) {
    var _a;
    const inputFieldDeclaration = {};
    inputFieldDeclaration.fullDeclaration = fullDeclaration;
    inputFieldDeclaration.declaration = ParserUtils.getInBetween(fullDeclaration, _InputFieldDeclarationParser.squareBracesPair);
    const declarationParts = ParserUtils.split(inputFieldDeclaration.declaration, ":", _InputFieldDeclarationParser.squareBracesPair);
    inputFieldDeclaration.bindTarget = (_a = declarationParts[1]) != null ? _a : "";
    inputFieldDeclaration.isBound = isTruthy(inputFieldDeclaration.bindTarget);
    const inputFieldTypeWithArguments = declarationParts[0];
    const inputFieldTypeString = ParserUtils.removeInBetween(inputFieldTypeWithArguments, _InputFieldDeclarationParser.roundBracesPair);
    inputFieldDeclaration.inputFieldType = _InputFieldDeclarationParser.getInputFieldType(inputFieldTypeString);
    if (inputFieldDeclaration.inputFieldType === "invalid" /* INVALID */) {
      throw new MetaBindParsingError(`unknown input field type '${inputFieldTypeString}'`);
    }
    const inputFieldArgumentsString = ParserUtils.getInBetween(inputFieldTypeWithArguments, _InputFieldDeclarationParser.roundBracesPair);
    if (inputFieldArgumentsString) {
      inputFieldDeclaration.arguments = _InputFieldDeclarationParser.parseArguments(inputFieldArgumentsString, inputFieldDeclaration.inputFieldType);
    } else {
      inputFieldDeclaration.arguments = [];
    }
    return inputFieldDeclaration;
  }
  static parseArguments(inputFieldArgumentsString, inputFieldType) {
    let inputFieldArgumentStrings = ParserUtils.split(inputFieldArgumentsString, ",", _InputFieldDeclarationParser.roundBracesPair);
    inputFieldArgumentStrings = inputFieldArgumentStrings.map((x) => x.trim());
    const inputFieldArguments = [];
    for (const inputFieldArgumentString of inputFieldArgumentStrings) {
      const inputFieldArgumentName = _InputFieldDeclarationParser.extractInputFieldArgumentName(inputFieldArgumentString);
      if (inputFieldArgumentName === "class") {
        const inputFieldArgumentValue = _InputFieldDeclarationParser.extractInputFieldArgumentValue(inputFieldArgumentString);
        const inputFieldClassArgument = { name: inputFieldArgumentName, value: inputFieldArgumentValue };
        inputFieldArguments.push(inputFieldClassArgument);
      } else if (inputFieldArgumentName === "addLabels") {
        if (inputFieldType !== "slider" /* SLIDER */) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' is only applicable to slider input fields`);
        }
        inputFieldArguments.push({ name: "labels", value: true });
      } else if (inputFieldArgumentName === "minValue") {
        if (inputFieldType !== "slider" /* SLIDER */) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' is only applicable to slider input fields`);
        }
        const inputFieldArgumentValue = _InputFieldDeclarationParser.extractInputFieldArgumentValue(inputFieldArgumentString);
        const inputFieldArgumentValueAsNumber = Number.parseInt(inputFieldArgumentValue);
        if (Number.isNaN(inputFieldArgumentValueAsNumber)) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' value must be of type number`);
        }
        const inputFieldArgumentObject = { name: inputFieldArgumentName, value: inputFieldArgumentValueAsNumber };
        inputFieldArguments.push(inputFieldArgumentObject);
      } else if (inputFieldArgumentName === "maxValue") {
        if (inputFieldType !== "slider" /* SLIDER */) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' is only applicable to slider input fields`);
        }
        const inputFieldArgumentValue = _InputFieldDeclarationParser.extractInputFieldArgumentValue(inputFieldArgumentString);
        const inputFieldArgumentValueAsNumber = Number.parseInt(inputFieldArgumentValue);
        if (Number.isNaN(inputFieldArgumentValueAsNumber)) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' value must be of type number`);
        }
        const inputFieldArgumentObject = { name: inputFieldArgumentName, value: inputFieldArgumentValueAsNumber };
        inputFieldArguments.push(inputFieldArgumentObject);
      } else if (inputFieldArgumentName === "option") {
        if (inputFieldType !== "select" /* SELECT */ && inputFieldType !== "multi_select" /* MULTI_SELECT */) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' is only applicable to select and multi-select input fields`);
        }
        const inputFieldArgumentValue = _InputFieldDeclarationParser.extractInputFieldArgumentValue(inputFieldArgumentString);
        const inputFieldArgumentObject = { name: inputFieldArgumentName, value: inputFieldArgumentValue };
        inputFieldArguments.push(inputFieldArgumentObject);
      } else if (inputFieldArgumentName === "title") {
        if (inputFieldType !== "select" /* SELECT */ && inputFieldType !== "multi_select" /* MULTI_SELECT */) {
          throw new MetaBindParsingError(`argument '${inputFieldArgumentName}' is only applicable to select and multi-select input fields`);
        }
        const inputFieldArgumentValue = _InputFieldDeclarationParser.extractInputFieldArgumentValue(inputFieldArgumentString);
        const inputFieldArgumentObject = { name: inputFieldArgumentName, value: inputFieldArgumentValue };
        inputFieldArguments.push(inputFieldArgumentObject);
      } else {
        throw new MetaBindParsingError(`unknown argument '${inputFieldArgumentName}'`);
      }
    }
    return inputFieldArguments;
  }
  static extractInputFieldArgumentName(argumentString) {
    return ParserUtils.removeInBetween(argumentString, _InputFieldDeclarationParser.roundBracesPair);
  }
  static extractInputFieldArgumentValue(argumentString) {
    const argumentName = this.extractInputFieldArgumentName(argumentString);
    const argumentValue = ParserUtils.getInBetween(argumentString, _InputFieldDeclarationParser.roundBracesPair);
    if (!argumentValue) {
      throw new MetaBindParsingError(`argument '${argumentName}' requires a non empty value`);
    }
    return argumentValue;
  }
  static getInputFieldType(str) {
    for (const entry of Object.entries(InputFieldType)) {
      if (entry[1] === str) {
        return entry[1];
      }
    }
    return "invalid" /* INVALID */;
  }
};
var InputFieldDeclarationParser = _InputFieldDeclarationParser;
InputFieldDeclarationParser.roundBracesPair = new EnclosingPair("(", ")");
InputFieldDeclarationParser.squareBracesPair = new EnclosingPair("[", "]");
InputFieldDeclarationParser.curlyBracesPair = new EnclosingPair("{", "}");
InputFieldDeclarationParser.allBracesPairs = [
  _InputFieldDeclarationParser.roundBracesPair,
  _InputFieldDeclarationParser.squareBracesPair,
  _InputFieldDeclarationParser.curlyBracesPair
];

// src/inputFields/InputFieldFactory.ts
var _InputFieldFactory = class {
  static createInputField(inputFieldType, args) {
    if (inputFieldType === "toggle" /* TOGGLE */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new ToggleInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "slider" /* SLIDER */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new SliderInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "text" /* TEXT */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new TextInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "text_area" /* TEXT_AREA */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new TextAreaInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "select" /* SELECT */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new SelectInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "multi_select" /* MULTI_SELECT */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new MultiSelectInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "date" /* DATE */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new DateInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    } else if (inputFieldType === "time" /* TIME */) {
      _InputFieldFactory.checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, args.type);
      return new TimeInputField(args.inputFieldMarkdownRenderChild, args.onValueChanged);
    }
    return void 0;
  }
  static checkInputFieldMarkdownRenderChildTypeAllowed(inputFieldType, type) {
    const allowCodeBlock = _InputFieldFactory.allowCodeBlockMap[inputFieldType];
    if (type === 1 /* CODE_BLOCK */ && !allowCodeBlock.codeBlock) {
      throw new MetaBindParsingError(`'${inputFieldType}' is not allowed as code block`);
    }
    if (type === 0 /* INLINE_CODE_BLOCK */ && !allowCodeBlock.inlineCodeBlock) {
      throw new MetaBindParsingError(`'${inputFieldType}' is not allowed as inline code block`);
    }
  }
};
var InputFieldFactory = _InputFieldFactory;
InputFieldFactory.allowCodeBlockMap = {
  ["toggle" /* TOGGLE */]: { codeBlock: ToggleInputField.allowCodeBlock, inlineCodeBlock: ToggleInputField.allowInlineCodeBlock },
  ["slider" /* SLIDER */]: { codeBlock: SliderInputField.allowCodeBlock, inlineCodeBlock: SliderInputField.allowInlineCodeBlock },
  ["text" /* TEXT */]: { codeBlock: TextInputField.allowCodeBlock, inlineCodeBlock: TextInputField.allowInlineCodeBlock },
  ["text_area" /* TEXT_AREA */]: { codeBlock: TextAreaInputField.allowCodeBlock, inlineCodeBlock: TextAreaInputField.allowInlineCodeBlock },
  ["select" /* SELECT */]: { codeBlock: SelectInputField.allowCodeBlock, inlineCodeBlock: SelectInputField.allowInlineCodeBlock },
  ["multi_select" /* MULTI_SELECT */]: { codeBlock: MultiSelectInputField.allowCodeBlock, inlineCodeBlock: MultiSelectInputField.allowInlineCodeBlock },
  ["date" /* DATE */]: { codeBlock: DateInputField.allowCodeBlock, inlineCodeBlock: DateInputField.allowInlineCodeBlock },
  ["time" /* TIME */]: { codeBlock: TimeInputField.allowCodeBlock, inlineCodeBlock: TimeInputField.allowInlineCodeBlock }
};

// src/InputFieldMarkdownRenderChild.ts
var InputFieldMarkdownRenderChild2 = class extends import_obsidian8.MarkdownRenderChild {
  constructor(containerEl, type, fullDeclaration, plugin, filePath, uid) {
    super(containerEl);
    this.error = "";
    this.filePath = filePath;
    this.uid = uid;
    this.plugin = plugin;
    this.valueQueue = [];
    this.intervalCounter = 0;
    try {
      this.inputFieldDeclaration = InputFieldDeclarationParser.parse(fullDeclaration);
      if (this.inputFieldDeclaration.isBound) {
        this.parseBindTarget();
        this.metaData = this.plugin.getMetaDataForFile(this.bindTargetFile);
      }
      this.inputField = InputFieldFactory.createInputField(this.inputFieldDeclaration.inputFieldType, {
        type,
        inputFieldMarkdownRenderChild: this,
        onValueChanged: this.pushToValueQueue.bind(this)
      });
      this.limitInterval = window.setInterval(() => this.applyValueQueueToMetadata(), this.plugin.settings.syncInterval);
    } catch (e) {
      this.error = e.message;
      Logger.logWarning(e);
    }
  }
  parseBindTarget() {
    if (!this.inputFieldDeclaration) {
      throw new MetaBindInternalError("inputFieldDeclaration is undefined, can not parse bind target");
    }
    const bindTargetParts = this.inputFieldDeclaration.bindTarget.split("#");
    if (bindTargetParts.length === 1) {
      this.bindTargetMetadataField = this.inputFieldDeclaration.bindTarget;
      const files = this.plugin.getFilesByName(this.filePath);
      if (files.length === 0) {
        throw new MetaBindBindTargetError("bind target file not found");
      } else if (files.length === 1) {
        this.bindTargetFile = files[0];
      } else {
        throw new MetaBindBindTargetError("bind target resolves to multiple files, please also specify the file path");
      }
    } else if (bindTargetParts.length === 2) {
      this.bindTargetMetadataField = bindTargetParts[1];
      const files = this.plugin.getFilesByName(bindTargetParts[0]);
      if (files.length === 0) {
        throw new MetaBindBindTargetError("bind target file not found");
      } else if (files.length === 1) {
        this.bindTargetFile = files[0];
      } else {
        throw new MetaBindBindTargetError("bind target resolves to multiple files, please also specify the file path");
      }
    } else {
      throw new MetaBindBindTargetError("bind target may only contain one '#' to specify the metadata field");
    }
  }
  applyValueQueueToMetadata() {
    return __async(this, null, function* () {
      if (!this.inputFieldDeclaration) {
        throw new MetaBindInternalError("inputFieldDeclaration is undefined, can not update metadata");
      }
      if (!this.inputFieldDeclaration.isBound) {
        return;
      }
      if (!this.bindTargetMetadataField || !this.bindTargetFile) {
        throw new MetaBindInternalError("bindTargetMetadataField or bindTargetFile is undefined, can not update metadata");
      }
      if (this.valueQueue.length > 0) {
        yield this.plugin.updateMetaData(this.bindTargetMetadataField, this.valueQueue.at(-1), this.bindTargetFile);
        this.valueQueue = [];
      }
    });
  }
  pushToValueQueue(value) {
    return __async(this, null, function* () {
      var _a;
      if ((_a = this.inputFieldDeclaration) == null ? void 0 : _a.isBound) {
        this.valueQueue.push(value);
      }
    });
  }
  updateValue(value) {
    if (!this.inputField) {
      throw new MetaBindInternalError("inputField is undefined, can not update value");
    }
    if (value == null) {
      value = this.inputField.getDefaultValue();
    }
    if (!this.inputField.isEqualValue(value) && this.valueQueue.length === 0) {
      Logger.logDebug(`updating input field ${this.uid} to`, value);
      this.inputField.setValue(value);
    }
  }
  getInitialValue() {
    var _a, _b, _c, _d;
    if ((_a = this.inputFieldDeclaration) == null ? void 0 : _a.isBound) {
      return (_d = this.metaData[(_b = this.bindTargetMetadataField) != null ? _b : ""]) != null ? _d : (_c = this.inputField) == null ? void 0 : _c.getDefaultValue();
    }
  }
  getArguments(name) {
    if (!this.inputFieldDeclaration) {
      throw new MetaBindInternalError("inputFieldDeclaration is undefined, can not retrieve arguments");
    }
    return this.inputFieldDeclaration.arguments.filter((x) => x.name === name);
  }
  getArgument(name) {
    return this.getArguments(name).at(0);
  }
  onload() {
    return __async(this, null, function* () {
      Logger.logDebug("load", this);
      this.metaData = yield this.metaData;
      const container = this.containerEl.createDiv();
      container.addClass("meta-bind-plugin-input-wrapper");
      this.containerEl.addClass("meta-bind-plugin-input");
      if (this.error) {
        container.innerText = ` -> ERROR: ${this.error}`;
        container.addClass("meta-bind-plugin-error");
        this.containerEl.appendChild(container);
        return;
      }
      if (!this.inputField) {
        container.innerText = ` -> ERROR: ${new MetaBindInternalError("input field is undefined and error is empty").message}`;
        container.addClass("meta-bind-plugin-error");
        this.containerEl.appendChild(container);
        return;
      }
      this.plugin.registerInputFieldMarkdownRenderChild(this);
      this.inputField.render(container);
      const classArgument = this.getArguments("class");
      if (classArgument) {
        this.inputField.getHtmlElement().addClasses(classArgument.map((x) => x.value));
      }
      this.containerEl.empty();
      this.containerEl.appendChild(container);
    });
  }
  onunload() {
    Logger.logDebug("unload", this);
    this.plugin.unregisterInputFieldMarkdownRenderChild(this);
    super.onunload();
    window.clearInterval(this.limitInterval);
  }
};

// src/main.ts
var MetaBindPlugin = class extends import_obsidian9.Plugin {
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      Logger.devMode = this.settings.devMode;
      DateParser.dateFormat = this.settings.dateFormat;
      this.activeMarkdownInputFields = [];
      this.markDownInputFieldIndex = 0;
      this.registerMarkdownPostProcessor((element, context) => {
        const codeBlocks = element.querySelectorAll("code");
        for (let index = 0; index < codeBlocks.length; index++) {
          const codeBlock = codeBlocks.item(index);
          const text = codeBlock.innerText;
          const isInputField = text.startsWith("INPUT[") && text.endsWith("]");
          if (isInputField) {
            context.addChild(new InputFieldMarkdownRenderChild2(codeBlock, 0 /* INLINE_CODE_BLOCK */, text, this, context.sourcePath, this.markDownInputFieldIndex));
            this.markDownInputFieldIndex += 1;
          }
        }
      });
      this.registerMarkdownCodeBlockProcessor("meta-bind", (source, el, ctx) => {
        const codeBlock = el;
        const text = source.replace(/\n/g, "");
        const isInputField = text.startsWith("INPUT[") && text.endsWith("]");
        if (isInputField) {
          ctx.addChild(new InputFieldMarkdownRenderChild2(codeBlock, 1 /* CODE_BLOCK */, text, this, ctx.sourcePath, this.markDownInputFieldIndex));
          this.markDownInputFieldIndex += 1;
        }
      });
      this.registerEvent(this.app.vault.on("modify", (abstractFile) => __async(this, null, function* () {
        if (abstractFile instanceof import_obsidian9.TFile) {
          yield this.updateMarkdownInputFieldsOnFileChange(abstractFile);
        }
      })));
      this.addSettingTab(new MetaBindSettingTab(this.app, this));
    });
  }
  onunload() {
    for (const activeMarkdownInputField of this.activeMarkdownInputFields) {
      activeMarkdownInputField.unload();
    }
  }
  registerInputFieldMarkdownRenderChild(inputFieldMarkdownRenderChild) {
    this.activeMarkdownInputFields.push(inputFieldMarkdownRenderChild);
  }
  unregisterInputFieldMarkdownRenderChild(inputFieldMarkdownRenderChild) {
    this.activeMarkdownInputFields = this.activeMarkdownInputFields.filter((x) => x.uid !== inputFieldMarkdownRenderChild.uid);
  }
  updateMarkdownInputFieldsOnFileChange(file) {
    return __async(this, null, function* () {
      var _a;
      let metadata = void 0;
      for (const activeMarkdownInputField of this.activeMarkdownInputFields) {
        if (!((_a = activeMarkdownInputField.inputFieldDeclaration) == null ? void 0 : _a.isBound) || !activeMarkdownInputField.bindTargetFile || !activeMarkdownInputField.bindTargetMetadataField) {
          continue;
        }
        if (activeMarkdownInputField.bindTargetFile.path === file.path) {
          if (metadata === void 0) {
            metadata = yield this.getMetaDataForFile(file);
          }
          activeMarkdownInputField.updateValue(metadata[activeMarkdownInputField.bindTargetMetadataField]);
        }
      }
    });
  }
  updateMetaData(key, value, file) {
    return __async(this, null, function* () {
      Logger.logDebug(`updating `, key, `: `, value, ` in '${file.path}'`);
      if (!file) {
        console.log("no file");
        return;
      }
      let fileContent = yield this.app.vault.read(file);
      const regExp = new RegExp("^(---)\\n[\\s\\S]*\\n---");
      fileContent = fileContent.replace(regExp, "");
      const metadata = yield this.getMetaDataForFile(file);
      if (!metadata) {
        return;
      }
      metadata[key] = value;
      fileContent = `---
${(0, import_obsidian9.stringifyYaml)(metadata)}---` + fileContent;
      yield this.app.vault.modify(file, fileContent);
    });
  }
  getFilesByName(name) {
    const fileNameIsPath = isPath(name);
    const processedFileName = fileNameIsPath ? removeFileEnding(name) : getFileName(removeFileEnding(name));
    const allFiles = this.app.vault.getFiles();
    const files = [];
    for (const file of allFiles) {
      if (fileNameIsPath) {
        if (removeFileEnding(file.path) === processedFileName) {
          files.push(file);
        }
      } else {
        if (getFileName(removeFileEnding(file.name)) === processedFileName) {
          files.push(file);
        }
      }
    }
    return files;
  }
  getMetaDataForFile(file) {
    return __async(this, null, function* () {
      let metadata;
      const fileContent = yield this.app.vault.read(file);
      const regExp = new RegExp("^(---)\\n[\\s\\S]*\\n---");
      const frontMatterRegExpResult = regExp.exec(fileContent);
      if (!frontMatterRegExpResult) {
        return {};
      }
      let frontMatter = frontMatterRegExpResult[0];
      if (!frontMatter) {
        return {};
      }
      frontMatter = frontMatter.substring(4);
      frontMatter = frontMatter.substring(0, frontMatter.length - 3);
      metadata = (0, import_obsidian9.parseYaml)(frontMatter);
      if (!metadata) {
        metadata = {};
      }
      return metadata;
    });
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      DateParser.dateFormat = this.settings.dateFormat;
      Logger.devMode = this.settings.devMode;
      yield this.saveData(this.settings);
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vc3JjL21haW4udHMiLCAiLi4vLi4vLi4vLi4vc3JjL3NldHRpbmdzL1NldHRpbmdzLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy91dGlscy9VdGlscy50cyIsICIuLi8uLi8uLi8uLi9zcmMvcGFyc2Vycy9EYXRlUGFyc2VyLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvdXRpbHMvTG9nZ2VyLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9BYnN0cmFjdElucHV0RmllbGQudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2lucHV0RmllbGRzL1RvZ2dsZUlucHV0RmllbGQudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2lucHV0RmllbGRzL1RleHRJbnB1dEZpZWxkLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9TbGlkZXJJbnB1dEZpZWxkLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9UZXh0QXJlYUlucHV0RmllbGQudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2lucHV0RmllbGRzL1NlbGVjdElucHV0RmllbGRFbGVtZW50LnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9TZWxlY3RJbnB1dEZpZWxkLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9NdWx0aVNlbGVjdElucHV0RmllbGQudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2lucHV0RmllbGRzL0RhdGVJbnB1dEZpZWxkLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9pbnB1dEZpZWxkcy9UaW1lSW5wdXRGaWVsZC50cyIsICIuLi8uLi8uLi8uLi9zcmMvcGFyc2Vycy9UaW1lUGFyc2VyLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy91dGlscy9QYXJzZXJVdGlscy50cyIsICIuLi8uLi8uLi8uLi9zcmMvcGFyc2Vycy9JbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2lucHV0RmllbGRzL0lucHV0RmllbGRGYWN0b3J5LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge3BhcnNlWWFtbCwgUGx1Z2luLCBzdHJpbmdpZnlZYW1sLCBURmlsZX0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHtERUZBVUxUX1NFVFRJTkdTLCBNZXRhQmluZFBsdWdpblNldHRpbmdzLCBNZXRhQmluZFNldHRpbmdUYWJ9IGZyb20gJy4vc2V0dGluZ3MvU2V0dGluZ3MnO1xuaW1wb3J0IHtJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlfSBmcm9tICcuL0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkJztcbmltcG9ydCB7Z2V0RmlsZU5hbWUsIGlzUGF0aCwgcmVtb3ZlRmlsZUVuZGluZ30gZnJvbSAnLi91dGlscy9VdGlscyc7XG5pbXBvcnQge0xvZ2dlcn0gZnJvbSAnLi91dGlscy9Mb2dnZXInO1xuaW1wb3J0IHtEYXRlUGFyc2VyfSBmcm9tICcuL3BhcnNlcnMvRGF0ZVBhcnNlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1ldGFCaW5kUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0Ly8gQHRzLWlnbm9yZSBkZWZpbmVkIGluIGBvbmxvYWRgXG5cdHNldHRpbmdzOiBNZXRhQmluZFBsdWdpblNldHRpbmdzO1xuXG5cdC8vIEB0cy1pZ25vcmUgZGVmaW5lZCBpbiBgb25sb2FkYFxuXHRhY3RpdmVNYXJrZG93bklucHV0RmllbGRzOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFtdO1xuXHQvLyBAdHMtaWdub3JlIGRlZmluZWQgaW4gYG9ubG9hZGBcblx0bWFya0Rvd25JbnB1dEZpZWxkSW5kZXg6IG51bWJlcjtcblxuXHRhc3luYyBvbmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdExvZ2dlci5kZXZNb2RlID0gdGhpcy5zZXR0aW5ncy5kZXZNb2RlO1xuXHRcdERhdGVQYXJzZXIuZGF0ZUZvcm1hdCA9IHRoaXMuc2V0dGluZ3MuZGF0ZUZvcm1hdDtcblxuXHRcdHRoaXMuYWN0aXZlTWFya2Rvd25JbnB1dEZpZWxkcyA9IFtdO1xuXHRcdHRoaXMubWFya0Rvd25JbnB1dEZpZWxkSW5kZXggPSAwO1xuXG5cdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duUG9zdFByb2Nlc3NvcigoZWxlbWVudCwgY29udGV4dCkgPT4ge1xuXHRcdFx0Y29uc3QgY29kZUJsb2NrcyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnY29kZScpO1xuXHRcdFx0Zm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGNvZGVCbG9ja3MubGVuZ3RoOyBpbmRleCsrKSB7XG5cdFx0XHRcdGNvbnN0IGNvZGVCbG9jayA9IGNvZGVCbG9ja3MuaXRlbShpbmRleCk7XG5cdFx0XHRcdGNvbnN0IHRleHQgPSBjb2RlQmxvY2suaW5uZXJUZXh0O1xuXHRcdFx0XHRjb25zdCBpc0lucHV0RmllbGQgPSB0ZXh0LnN0YXJ0c1dpdGgoJ0lOUFVUWycpICYmIHRleHQuZW5kc1dpdGgoJ10nKTtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coY29udGV4dC5zb3VyY2VQYXRoKTtcblx0XHRcdFx0aWYgKGlzSW5wdXRGaWVsZCkge1xuXHRcdFx0XHRcdGNvbnRleHQuYWRkQ2hpbGQobmV3IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkKGNvZGVCbG9jaywgSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlLklOTElORV9DT0RFX0JMT0NLLCB0ZXh0LCB0aGlzLCBjb250ZXh0LnNvdXJjZVBhdGgsIHRoaXMubWFya0Rvd25JbnB1dEZpZWxkSW5kZXgpKTtcblx0XHRcdFx0XHR0aGlzLm1hcmtEb3duSW5wdXRGaWVsZEluZGV4ICs9IDE7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvcignbWV0YS1iaW5kJywgKHNvdXJjZSwgZWwsIGN0eCkgPT4ge1xuXHRcdFx0Y29uc3QgY29kZUJsb2NrID0gZWw7XG5cdFx0XHRjb25zdCB0ZXh0ID0gc291cmNlLnJlcGxhY2UoL1xcbi9nLCAnJyk7XG5cdFx0XHRjb25zdCBpc0lucHV0RmllbGQgPSB0ZXh0LnN0YXJ0c1dpdGgoJ0lOUFVUWycpICYmIHRleHQuZW5kc1dpdGgoJ10nKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKGNvbnRleHQuc291cmNlUGF0aCk7XG5cdFx0XHRpZiAoaXNJbnB1dEZpZWxkKSB7XG5cdFx0XHRcdGN0eC5hZGRDaGlsZChuZXcgSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQoY29kZUJsb2NrLCBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGUuQ09ERV9CTE9DSywgdGV4dCwgdGhpcywgY3R4LnNvdXJjZVBhdGgsIHRoaXMubWFya0Rvd25JbnB1dEZpZWxkSW5kZXgpKTtcblx0XHRcdFx0dGhpcy5tYXJrRG93bklucHV0RmllbGRJbmRleCArPSAxO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKCdtb2RpZnknLCBhc3luYyBhYnN0cmFjdEZpbGUgPT4ge1xuXHRcdFx0aWYgKGFic3RyYWN0RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMudXBkYXRlTWFya2Rvd25JbnB1dEZpZWxkc09uRmlsZUNoYW5nZShhYnN0cmFjdEZpbGUgYXMgVEZpbGUpO1xuXHRcdFx0fVxuXHRcdH0pKTtcblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTWV0YUJpbmRTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cdH1cblxuXHRvbnVubG9hZCgpOiB2b2lkIHtcblx0XHRmb3IgKGNvbnN0IGFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZCBvZiB0aGlzLmFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZHMpIHtcblx0XHRcdGFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZC51bmxvYWQoKTtcblx0XHR9XG5cdH1cblxuXHRyZWdpc3RlcklucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkKGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCk6IHZvaWQge1xuXHRcdHRoaXMuYWN0aXZlTWFya2Rvd25JbnB1dEZpZWxkcy5wdXNoKGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkKTtcblx0fVxuXG5cdHVucmVnaXN0ZXJJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZChpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQpOiB2b2lkIHtcblx0XHR0aGlzLmFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZHMgPSB0aGlzLmFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZHMuZmlsdGVyKHggPT4geC51aWQgIT09IGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLnVpZCk7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVNYXJrZG93bklucHV0RmllbGRzT25GaWxlQ2hhbmdlKGZpbGU6IFRGaWxlKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0bGV0IG1ldGFkYXRhOiBhbnkgPSB1bmRlZmluZWQ7XG5cblx0XHRmb3IgKGNvbnN0IGFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZCBvZiB0aGlzLmFjdGl2ZU1hcmtkb3duSW5wdXRGaWVsZHMpIHtcblx0XHRcdGlmICghYWN0aXZlTWFya2Rvd25JbnB1dEZpZWxkLmlucHV0RmllbGREZWNsYXJhdGlvbj8uaXNCb3VuZCB8fCAhYWN0aXZlTWFya2Rvd25JbnB1dEZpZWxkLmJpbmRUYXJnZXRGaWxlIHx8ICFhY3RpdmVNYXJrZG93bklucHV0RmllbGQuYmluZFRhcmdldE1ldGFkYXRhRmllbGQpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChhY3RpdmVNYXJrZG93bklucHV0RmllbGQuYmluZFRhcmdldEZpbGUucGF0aCA9PT0gZmlsZS5wYXRoKSB7XG5cdFx0XHRcdGlmIChtZXRhZGF0YSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0bWV0YWRhdGEgPSBhd2FpdCB0aGlzLmdldE1ldGFEYXRhRm9yRmlsZShmaWxlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRhY3RpdmVNYXJrZG93bklucHV0RmllbGQudXBkYXRlVmFsdWUobWV0YWRhdGFbYWN0aXZlTWFya2Rvd25JbnB1dEZpZWxkLmJpbmRUYXJnZXRNZXRhZGF0YUZpZWxkXSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgdXBkYXRlTWV0YURhdGEoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnksIGZpbGU6IFRGaWxlKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0TG9nZ2VyLmxvZ0RlYnVnKGB1cGRhdGluZyBgLCBrZXksIGA6IGAsIHZhbHVlLCBgIGluICcke2ZpbGUucGF0aH0nYCk7XG5cblx0XHRpZiAoIWZpbGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdubyBmaWxlJyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0bGV0IGZpbGVDb250ZW50OiBzdHJpbmcgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXHRcdGNvbnN0IHJlZ0V4cCA9IG5ldyBSZWdFeHAoJ14oLS0tKVxcXFxuW1xcXFxzXFxcXFNdKlxcXFxuLS0tJyk7XG5cdFx0ZmlsZUNvbnRlbnQgPSBmaWxlQ29udGVudC5yZXBsYWNlKHJlZ0V4cCwgJycpO1xuXG5cdFx0Y29uc3QgbWV0YWRhdGE6IGFueSA9IGF3YWl0IHRoaXMuZ2V0TWV0YURhdGFGb3JGaWxlKGZpbGUpO1xuXHRcdC8vIGNvbnNvbGUubG9nKG1ldGFkYXRhKTtcblx0XHRpZiAoIW1ldGFkYXRhKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0bWV0YWRhdGFba2V5XSA9IHZhbHVlO1xuXHRcdC8vIGNvbnNvbGUubG9nKG1ldGFkYXRhKTtcblxuXHRcdGZpbGVDb250ZW50ID0gYC0tLVxcbiR7c3RyaW5naWZ5WWFtbChtZXRhZGF0YSl9LS0tYCArIGZpbGVDb250ZW50O1xuXHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBmaWxlQ29udGVudCk7XG5cdH1cblxuXHRnZXRGaWxlc0J5TmFtZShuYW1lOiBzdHJpbmcpOiBURmlsZVtdIHtcblx0XHQvLyBjb25zb2xlLmxvZyhnZXRGaWxlTmFtZShyZW1vdmVGaWxlRW5kaW5nKG5hbWUpKSlcblx0XHRjb25zdCBmaWxlTmFtZUlzUGF0aCA9IGlzUGF0aChuYW1lKTtcblx0XHRjb25zdCBwcm9jZXNzZWRGaWxlTmFtZSA9IGZpbGVOYW1lSXNQYXRoID8gcmVtb3ZlRmlsZUVuZGluZyhuYW1lKSA6IGdldEZpbGVOYW1lKHJlbW92ZUZpbGVFbmRpbmcobmFtZSkpO1xuXG5cdFx0Y29uc3QgYWxsRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuXHRcdGNvbnN0IGZpbGVzOiBURmlsZVtdID0gW107XG5cdFx0Zm9yIChjb25zdCBmaWxlIG9mIGFsbEZpbGVzKSB7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhyZW1vdmVGaWxlRW5kaW5nKGZpbGUucGF0aCkpO1xuXHRcdFx0aWYgKGZpbGVOYW1lSXNQYXRoKSB7XG5cdFx0XHRcdGlmIChyZW1vdmVGaWxlRW5kaW5nKGZpbGUucGF0aCkgPT09IHByb2Nlc3NlZEZpbGVOYW1lKSB7XG5cdFx0XHRcdFx0ZmlsZXMucHVzaChmaWxlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKGdldEZpbGVOYW1lKHJlbW92ZUZpbGVFbmRpbmcoZmlsZS5uYW1lKSkgPT09IHByb2Nlc3NlZEZpbGVOYW1lKSB7XG5cdFx0XHRcdFx0ZmlsZXMucHVzaChmaWxlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmaWxlcztcblx0fVxuXG5cdGFzeW5jIGdldE1ldGFEYXRhRm9yRmlsZShmaWxlOiBURmlsZSk6IFByb21pc2U8YW55PiB7XG5cdFx0Ly8gTG9nZ2VyLmxvZ0RlYnVnKGByZWFkaW5nIG1ldGFkYXRhIGZvciAke2ZpbGUucGF0aH1gKTtcblx0XHRsZXQgbWV0YWRhdGE6IGFueTtcblxuXHRcdGNvbnN0IGZpbGVDb250ZW50OiBzdHJpbmcgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXHRcdGNvbnN0IHJlZ0V4cCA9IG5ldyBSZWdFeHAoJ14oLS0tKVxcXFxuW1xcXFxzXFxcXFNdKlxcXFxuLS0tJyk7XG5cdFx0Y29uc3QgZnJvbnRNYXR0ZXJSZWdFeHBSZXN1bHQgPSByZWdFeHAuZXhlYyhmaWxlQ29udGVudCk7XG5cdFx0aWYgKCFmcm9udE1hdHRlclJlZ0V4cFJlc3VsdCkge1xuXHRcdFx0cmV0dXJuIHt9O1xuXHRcdH1cblx0XHRsZXQgZnJvbnRNYXR0ZXIgPSBmcm9udE1hdHRlclJlZ0V4cFJlc3VsdFswXTtcblx0XHRpZiAoIWZyb250TWF0dGVyKSB7XG5cdFx0XHRyZXR1cm4ge307XG5cdFx0fVxuXHRcdC8vIGNvbnNvbGUubG9nKGZyb250TWF0dGVyKTtcblx0XHRmcm9udE1hdHRlciA9IGZyb250TWF0dGVyLnN1YnN0cmluZyg0KTtcblx0XHRmcm9udE1hdHRlciA9IGZyb250TWF0dGVyLnN1YnN0cmluZygwLCBmcm9udE1hdHRlci5sZW5ndGggLSAzKTtcblx0XHQvLyBjb25zb2xlLmxvZyhmcm9udE1hdHRlcik7XG5cblx0XHRtZXRhZGF0YSA9IHBhcnNlWWFtbChmcm9udE1hdHRlcik7XG5cblx0XHRpZiAoIW1ldGFkYXRhKSB7XG5cdFx0XHRtZXRhZGF0YSA9IHt9O1xuXHRcdH1cblxuXHRcdC8vY29uc29sZS5sb2cobWV0YWRhdGEpO1xuXG5cdFx0cmV0dXJuIG1ldGFkYXRhO1xuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdERhdGVQYXJzZXIuZGF0ZUZvcm1hdCA9IHRoaXMuc2V0dGluZ3MuZGF0ZUZvcm1hdDtcblx0XHRMb2dnZXIuZGV2TW9kZSA9IHRoaXMuc2V0dGluZ3MuZGV2TW9kZTtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG59XG4iLCAiaW1wb3J0IHtBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmd9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IE1ldGFCaW5kUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQge0RhdGVGb3JtYXR9IGZyb20gJy4uL3BhcnNlcnMvRGF0ZVBhcnNlcic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE1ldGFCaW5kUGx1Z2luU2V0dGluZ3Mge1xyXG5cdGRldk1vZGU6IGJvb2xlYW47XHJcblx0ZGF0ZUZvcm1hdDogRGF0ZUZvcm1hdDtcclxuXHRzeW5jSW50ZXJ2YWw6IG51bWJlcjtcclxuXHRtYXhTeW5jSW50ZXJ2YWw6IG51bWJlcjtcclxuXHRtaW5TeW5jSW50ZXJ2YWw6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE1ldGFCaW5kUGx1Z2luU2V0dGluZ3MgPSB7XHJcblx0ZGV2TW9kZTogZmFsc2UsXHJcblx0ZGF0ZUZvcm1hdDogRGF0ZUZvcm1hdC5VUyxcclxuXHRzeW5jSW50ZXJ2YWw6IDIwMCxcclxuXHRtaW5TeW5jSW50ZXJ2YWw6IDUwLFxyXG5cdG1heFN5bmNJbnRlcnZhbDogMTAwMCxcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBNZXRhQmluZFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IE1ldGFCaW5kUGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNZXRhQmluZFBsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ01ldGEgQmluZCBQbHVnaW4gU2V0dGluZ3MnfSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdTeW5jIEludGVydmFsJylcclxuXHRcdFx0LnNldERlc2MoYFRoZSBpbnRlcnZhbCBpbiBtaWxsaS1zZWNvbmRzIGJldHdlZW4gZGlzayB3cml0ZXMuIENoYW5naW5nIHRoaXMgbnVtYmVyIGlzIG5vdCByZWNvbW1lbmRlZCBleGNlcHQgaWYgeW91ciBoYXJkIGRyaXZlIGlzIGV4Y2VwdGlvbmFsbHkgc2xvdy4gU3RhbmRhcmQ6ICR7REVGQVVMVF9TRVRUSU5HUy5zeW5jSW50ZXJ2YWx9OyBNaW5pbXVtOiAke0RFRkFVTFRfU0VUVElOR1MubWluU3luY0ludGVydmFsfTsgTWF4aW11bTogJHtERUZBVUxUX1NFVFRJTkdTLm1heFN5bmNJbnRlcnZhbH1gKVxyXG5cdFx0XHQuYWRkVGV4dChjYiA9PiB7XHJcblx0XHRcdFx0Y2Iuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc3luY0ludGVydmFsLnRvU3RyaW5nKCkpO1xyXG5cdFx0XHRcdGNiLm9uQ2hhbmdlKGRhdGEgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3luY0ludGVydmFsID0gTnVtYmVyLnBhcnNlSW50KGRhdGEpO1xyXG5cdFx0XHRcdFx0aWYgKE51bWJlci5pc05hTih0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeW5jSW50ZXJ2YWwpKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA9IERFRkFVTFRfU0VUVElOR1Muc3luY0ludGVydmFsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA8IERFRkFVTFRfU0VUVElOR1MubWluU3luY0ludGVydmFsKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA9IERFRkFVTFRfU0VUVElOR1MubWluU3luY0ludGVydmFsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA+IERFRkFVTFRfU0VUVElOR1MubWF4U3luY0ludGVydmFsKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCA9IERFRkFVTFRfU0VUVElOR1MubWF4U3luY0ludGVydmFsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnRGF0ZSBmb3JtYXQnKVxyXG5cdFx0XHQuc2V0RGVzYyhgVGhlIGRhdGUgZm9ybWF0IHRvIGJlIHVzZWQgYnkgdGhpcyBwbHVnaW4uYClcclxuXHRcdFx0LmFkZERyb3Bkb3duKGNiID0+IHtcclxuXHRcdFx0XHRjYi5hZGRPcHRpb25zKHtcclxuXHRcdFx0XHRcdCd1cyc6ICdVUyBkYXRlIGZvcm1hdCAoMS8zMC8yMDIyKScsXHJcblx0XHRcdFx0XHQnZXUnOiAnRVUgZGF0ZSBmb3JtYXQgKDMwLzEvMjAyMiknLFxyXG5cdFx0XHRcdFx0J2ZfdXMnOiAnVVMgZGF0ZSBmb3JtYXQgKEphbnVhcnkgMzAsIDIwMjIpJyxcclxuXHRcdFx0XHRcdCdmc191cyc6ICdVUyBkYXRlIGZvcm1hdCAoSmFuIDMwLCAyMDIyKScsXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Y2Iub25DaGFuZ2UoZGF0YSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXRlRm9ybWF0ID0gZGF0YSBhcyBEYXRlRm9ybWF0O1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnRGV2IE1vZGUnKVxyXG5cdFx0XHQuc2V0RGVzYygnRW5hYmxlIGRldiBtb2RlLiBOb3QgcmVjb21tZW5kZWQgdW5sZXNzIHlvdSB3YW50IHRvIGRlYnVnIHRoaXMgcGx1Z2luLicpXHJcblx0XHRcdC5hZGRUb2dnbGUoY2IgPT4ge1xyXG5cdFx0XHRcdGNiLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRldk1vZGUpO1xyXG5cdFx0XHRcdGNiLm9uQ2hhbmdlKGRhdGEgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGV2TW9kZSA9IGRhdGE7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG59XHJcbiIsICJleHBvcnQgY2xhc3MgTWV0YUJpbmRJbnRlcm5hbEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcpIHtcblx0XHRzdXBlcihgW01CX0lOVEVSTkFMX0VSUk9SIC0gcGxlYXNlIHJlcG9ydCB0aGlzIGVycm9yIGhlcmUgaHR0cHM6Ly9naXRodWIuY29tL21Qcm9qZWN0c0NvZGUvb2JzaWRpYW4tbWV0YS1iaW5kLXBsdWdpbi9pc3N1ZXNdICR7bWVzc2FnZX1gKTtcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgTWV0YUJpbmRQYXJzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG5cdGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZykge1xuXHRcdHN1cGVyKGBbTUJfUEFSU0lOR19FUlJPUl0gJHttZXNzYWdlfWApO1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBNZXRhQmluZEJpbmRUYXJnZXRFcnJvciBleHRlbmRzIEVycm9yIHtcblx0Y29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG5cdFx0c3VwZXIoYFtNQl9CSU5EX1RBUkdFVF9FUlJPUl0gJHttZXNzYWdlfWApO1xuXHR9XG59XG5cbi8qKlxuICogR2V0cyB0aGUgZmlsZSBuYW1lIGZyb20gYSBwYXRoXG4gKlxuICogQHBhcmFtIHBhdGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVOYW1lKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG5cdHJldHVybiBwYXRoLnNwbGl0KCcvJykuYXQoLTEpID8/IHBhdGg7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgcGF0aCBpcyBhIHBhdGggb3IgYSBmaWxlIG5hbWVcbiAqXG4gKiBAcGFyYW0gcGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQYXRoKHBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gcGF0aC5zcGxpdCgnLycpLmxlbmd0aCA+IDE7XG59XG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgZmlsZSBlbmRpbmcgb2YgYSBmaWxlIG5hbWVcbiAqXG4gKiBAcGFyYW0gZmlsZU5hbWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUZpbGVFbmRpbmcoZmlsZU5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG5cdGNvbnN0IGZpbGVOYW1lUGFydHMgPSBmaWxlTmFtZS5zcGxpdCgnLicpO1xuXHRpZiAoZmlsZU5hbWVQYXJ0cy5sZW5ndGggPT09IDEpIHtcblx0XHRyZXR1cm4gZmlsZU5hbWU7XG5cdH0gZWxzZSB7XG5cdFx0bGV0IG5ld0ZpbGVOYW1lID0gZmlsZU5hbWVQYXJ0c1swXTtcblx0XHRmb3IgKGxldCBpID0gMTsgaSA8IGZpbGVOYW1lUGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG5cdFx0XHRuZXdGaWxlTmFtZSArPSAnLicgKyBmaWxlTmFtZVBhcnRzW2ldO1xuXHRcdH1cblx0XHRyZXR1cm4gbmV3RmlsZU5hbWU7XG5cdH1cbn1cblxuLyoqXG4gKiBDbGFtcCwgdW51c2VkXG4gKlxuICogQHBhcmFtIG51bVxuICogQHBhcmFtIG1pblxuICogQHBhcmFtIG1heFxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAobnVtOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XG5cdHJldHVybiBNYXRoLm1pbihNYXRoLm1heChudW0sIG1pbiksIG1heCk7XG59XG5cbi8qKlxuICoganMgY2FuJ3QgZXZlbiBpbXBsZW1lbnQgbW9kdWxvIGNvcnJlY3RseS4uLlxuICpcbiAqIEBwYXJhbSBuXG4gKiBAcGFyYW0gbVxuICovXG5leHBvcnQgZnVuY3Rpb24gbW9kKG46IG51bWJlciwgbTogbnVtYmVyKTogbnVtYmVyIHtcblx0cmV0dXJuICgobiAlIG0pICsgbSkgJSBtO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiAyIGFycmF5cyBhcmUgZXF1YWwsIHRoZSBhcnJheXMgc2hvdWxkIGhhdmUgdGhlIHNhbWUgZGF0YXR5cGVcbiAqXG4gKiBAcGFyYW0gYXJyMVxuICogQHBhcmFtIGFycjJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFycmF5RXF1YWxzKGFycjE6IGFueVtdLCBhcnIyOiBhbnlbXSk6IGJvb2xlYW4ge1xuXHRpZiAoYXJyMS5sZW5ndGggIT09IGFycjIubGVuZ3RoKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Zm9yIChjb25zdCBhcnIxRWxlbWVudCBvZiBhcnIxKSB7XG5cdFx0aWYgKCFhcnIyLmNvbnRhaW5zKGFycjFFbGVtZW50KSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIFRlbXBsYXRlIFwiZW5naW5lXCIgZnJvbSBteSBtZWRpYSBkYiBwbHVnaW5cbiAqXG4gKiBAcGFyYW0gdGVtcGxhdGVcbiAqIEBwYXJhbSBkYXRhTW9kZWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VUYWdzKHRlbXBsYXRlOiBzdHJpbmcsIGRhdGFNb2RlbDogYW55KTogc3RyaW5nIHtcblx0Y29uc3QgcmVzb2x2ZWRUZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UobmV3IFJlZ0V4cCgne3suKj99fScsICdnJyksIChtYXRjaDogc3RyaW5nKSA9PiByZXBsYWNlVGFnKG1hdGNoLCBkYXRhTW9kZWwpKTtcblxuXHRyZXR1cm4gcmVzb2x2ZWRUZW1wbGF0ZTtcbn1cblxuLyoqXG4gKiBUYWtlcyBpbiBhIHRlbXBsYXRlIG1hdGNoIGFuZCByZXR1cm5zIHRoZSByZXBsYWNlbWVudCBkYXRhXG4gKlxuICogQHBhcmFtIG1hdGNoXG4gKiBAcGFyYW0gZGF0YU1vZGVsXG4gKi9cbmZ1bmN0aW9uIHJlcGxhY2VUYWcobWF0Y2g6IHN0cmluZywgZGF0YU1vZGVsOiBhbnkpOiBzdHJpbmcge1xuXHRsZXQgdGFnID0gbWF0Y2g7XG5cdHRhZyA9IHRhZy5zdWJzdHJpbmcoMik7XG5cdHRhZyA9IHRhZy5zdWJzdHJpbmcoMCwgdGFnLmxlbmd0aCAtIDIpO1xuXHR0YWcgPSB0YWcudHJpbSgpO1xuXG5cdGNvbnN0IHBhcnRzID0gdGFnLnNwbGl0KCc6Jyk7XG5cdGlmIChwYXJ0cy5sZW5ndGggPT09IDEpIHtcblx0XHRjb25zdCBwYXRoID0gcGFydHNbMF0uc3BsaXQoJy4nKTtcblxuXHRcdGNvbnN0IG9iaiA9IHRyYXZlcnNlT2JqZWN0KHBhdGgsIGRhdGFNb2RlbCk7XG5cblx0XHRpZiAob2JqID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiAne3sgSU5WQUxJRCBURU1QTEFURSBUQUcgLSBvYmplY3QgdW5kZWZpbmVkIH19Jztcblx0XHR9XG5cblx0XHRyZXR1cm4gb2JqO1xuXHR9IGVsc2UgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikge1xuXHRcdGNvbnN0IG9wZXJhdG9yID0gcGFydHNbMF07XG5cblx0XHRjb25zdCBwYXRoID0gcGFydHNbMV0uc3BsaXQoJy4nKTtcblxuXHRcdGNvbnN0IG9iaiA9IHRyYXZlcnNlT2JqZWN0KHBhdGgsIGRhdGFNb2RlbCk7XG5cblx0XHRpZiAob2JqID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiAne3sgSU5WQUxJRCBURU1QTEFURSBUQUcgLSBvYmplY3QgdW5kZWZpbmVkIH19Jztcblx0XHR9XG5cblx0XHRpZiAob3BlcmF0b3IgPT09ICdMSVNUJykge1xuXHRcdFx0aWYgKCFBcnJheS5pc0FycmF5KG9iaikpIHtcblx0XHRcdFx0cmV0dXJuICd7eyBJTlZBTElEIFRFTVBMQVRFIFRBRyAtIG9wZXJhdG9yIExJU1QgaXMgb25seSBhcHBsaWNhYmxlIG9uIGFuIGFycmF5IH19Jztcblx0XHRcdH1cblx0XHRcdHJldHVybiBvYmoubWFwKChlOiBhbnkpID0+IGAtICR7ZX1gKS5qb2luKCdcXG4nKTtcblx0XHR9IGVsc2UgaWYgKG9wZXJhdG9yID09PSAnRU5VTScpIHtcblx0XHRcdGlmICghQXJyYXkuaXNBcnJheShvYmopKSB7XG5cdFx0XHRcdHJldHVybiAne3sgSU5WQUxJRCBURU1QTEFURSBUQUcgLSBvcGVyYXRvciBFTlVNIGlzIG9ubHkgYXBwbGljYWJsZSBvbiBhbiBhcnJheSB9fSc7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gb2JqLmpvaW4oJywgJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGB7eyBJTlZBTElEIFRFTVBMQVRFIFRBRyAtIHVua25vd24gb3BlcmF0b3IgJHtvcGVyYXRvcn0gfX1gO1xuXHR9XG5cblx0cmV0dXJuICd7eyBJTlZBTElEIFRFTVBMQVRFIFRBRyB9fSc7XG59XG5cbi8qKlxuICogVHJhdmVyc2VzIHRoZSBvYmplY3QgYWxvbmcgYSBwcm9wZXJ0eSBwYXRoXG4gKlxuICogQHBhcmFtIHBhdGhcbiAqIEBwYXJhbSBvYmpcbiAqL1xuZnVuY3Rpb24gdHJhdmVyc2VPYmplY3QocGF0aDogQXJyYXk8c3RyaW5nPiwgb2JqOiBhbnkpOiBhbnkge1xuXHRmb3IgKGNvbnN0IHBhcnQgb2YgcGF0aCkge1xuXHRcdGlmIChvYmogIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0b2JqID0gb2JqW3BhcnRdO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBvYmo7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1RydXRoeSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG5cdHJldHVybiAhIXZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGYWxzeSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG5cdHJldHVybiAhdmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbE9ySW5jbHVkZXMoc3RyMTogc3RyaW5nLCBzdHIyOiBzdHJpbmcpOiBib29sZWFuIHtcblx0cmV0dXJuIHN0cjEgPT09IHN0cjIgfHwgc3RyMS5pbmNsdWRlcyhzdHIyKSB8fCBzdHIyLmluY2x1ZGVzKHN0cjEpO1xufVxuIiwgImltcG9ydCB7TWV0YUJpbmRJbnRlcm5hbEVycm9yfSBmcm9tICcuLi91dGlscy9VdGlscyc7XG5cbmV4cG9ydCBjbGFzcyBEYXRlIHtcblx0cHJpdmF0ZSBfZGF5OiBudW1iZXI7XG5cdHByaXZhdGUgX21vbnRoOiBudW1iZXI7XG5cdHByaXZhdGUgX3llYXI6IG51bWJlcjtcblxuXHRwcml2YXRlIF9tb250aE1hcDogUmVjb3JkPG51bWJlciwgc3RyaW5nPiA9IHtcblx0XHQxOiAnSmFudWFyeScsXG5cdFx0MjogJ0ZlYnJ1YXJ5Jyxcblx0XHQzOiAnTWFyY2gnLFxuXHRcdDQ6ICdBcHJpbCcsXG5cdFx0NTogJ01heScsXG5cdFx0NjogJ0p1bmUnLFxuXHRcdDc6ICdKdWx5Jyxcblx0XHQ4OiAnQXVndXN0Jyxcblx0XHQ5OiAnU2VwdGVtYmVyJyxcblx0XHQxMDogJ09jdG9iZXInLFxuXHRcdDExOiAnTm92ZW1iZXInLFxuXHRcdDEyOiAnRGVjZW1iZXInLFxuXHR9O1xuXG5cdHByaXZhdGUgX21vbnRoTWFwU2hvcnQ6IFJlY29yZDxudW1iZXIsIHN0cmluZz4gPSB7XG5cdFx0MTogJ0phbicsXG5cdFx0MjogJ0ZlYicsXG5cdFx0MzogJ01hcicsXG5cdFx0NDogJ0FwcicsXG5cdFx0NTogJ01heScsXG5cdFx0NjogJ0p1bicsXG5cdFx0NzogJ0p1bCcsXG5cdFx0ODogJ0F1ZycsXG5cdFx0OTogJ1NlcCcsXG5cdFx0MTA6ICdPY3QnLFxuXHRcdDExOiAnTm92Jyxcblx0XHQxMjogJ0RlYycsXG5cdH07XG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5fZGF5ID0gRGF0ZVBhcnNlci5nZXREZWZhdWx0RGF5KCk7XG5cdFx0dGhpcy5fbW9udGggPSBEYXRlUGFyc2VyLmdldERlZmF1bHRNb250aCgpO1xuXHRcdHRoaXMuX3llYXIgPSBEYXRlUGFyc2VyLmdldERlZmF1bHRZZWFyKCk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0RGF5KCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2RheTtcblx0fVxuXG5cdHB1YmxpYyBzZXREYXkodmFsdWU6IG51bWJlcik6IHZvaWQgIHtcblx0XHRpZiAodmFsdWUgPCAxIHx8IHZhbHVlID4gMzEpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fZGF5ID0gdmFsdWU7XG5cdH1cblxuXHRwdWJsaWMgZ2V0TW9udGgoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fbW9udGg7XG5cdH1cblxuXHRwdWJsaWMgc2V0TW9udGgodmFsdWU6IG51bWJlcik6IHZvaWQgIHtcblx0XHRpZiAodmFsdWUgPCAxIHx8IHZhbHVlID4gMTIpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fbW9udGggPSB2YWx1ZTtcblx0fVxuXG5cdHB1YmxpYyBnZXRZZWFyKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX3llYXI7XG5cdH1cblxuXHRwdWJsaWMgc2V0WWVhcih2YWx1ZTogbnVtYmVyKTogdm9pZCAge1xuXHRcdHRoaXMuX3llYXIgPSB2YWx1ZTtcblx0fVxuXG5cdHB1YmxpYyBnZXRVbmlmb3JtRGF5KCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuICgnMDAnICsgdGhpcy5nZXREYXkoKS50b1N0cmluZygpKS5zbGljZSgtMik7XG5cdH1cblxuXHRwdWJsaWMgZ2V0VW5pZm9ybU1vbnRoKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuICgnMDAnICsgdGhpcy5nZXRNb250aCgpLnRvU3RyaW5nKCkpLnNsaWNlKC0yKTtcblx0fVxuXG5cdHB1YmxpYyBnZXRVbmlmb3JtWWVhcigpOiBzdHJpbmcge1xuXHRcdHJldHVybiAoJzAwMDAnICsgdGhpcy5nZXRZZWFyKCkudG9TdHJpbmcoKSkuc2xpY2UoLTQpO1xuXHR9XG5cblx0cHVibGljIHNldERheUZyb21TdHJpbmcoc3RyOiBzdHJpbmcpOiB2b2lkICB7XG5cdFx0Y29uc3QgdiA9IE51bWJlci5wYXJzZUludChzdHIpO1xuXHRcdHRoaXMuc2V0RGF5KE51bWJlci5pc05hTih2KSA/IERhdGVQYXJzZXIuZ2V0RGVmYXVsdERheSgpIDogdik7XG5cdH1cblxuXHRwdWJsaWMgc2V0TW9udGhGcm9tU3RyaW5nKHN0cjogc3RyaW5nKTogdm9pZCAge1xuXHRcdGNvbnN0IHYgPSBOdW1iZXIucGFyc2VJbnQoc3RyKTtcblx0XHR0aGlzLnNldE1vbnRoKE51bWJlci5pc05hTih2KSA/IERhdGVQYXJzZXIuZ2V0RGVmYXVsdE1vbnRoKCkgOiB2KTtcblx0fVxuXG5cdHB1YmxpYyBzZXRZZWFyRnJvbVN0cmluZyhzdHI6IHN0cmluZyk6IHZvaWQge1xuXHRcdGNvbnN0IHYgPSBOdW1iZXIucGFyc2VJbnQoc3RyKTtcblx0XHR0aGlzLnNldFllYXIoTnVtYmVyLmlzTmFOKHYpID8gRGF0ZVBhcnNlci5nZXREZWZhdWx0WWVhcigpIDogdik7XG5cdH1cblxuXHRwdWJsaWMgZ2V0TW9udGhOYW1lKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX21vbnRoTWFwW3RoaXMuZ2V0TW9udGgoKV07XG5cdH1cblxuXHRwdWJsaWMgZ2V0TW9udGhOYW1lU2hvcnQoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fbW9udGhNYXBTaG9ydFt0aGlzLmdldE1vbnRoKCldO1xuXHR9XG5cblx0cHVibGljIHNldE1vbnRoRnJvbU5hbWUobmFtZTogc3RyaW5nKTogdm9pZCB7XG5cdFx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5fbW9udGhNYXApKSB7XG5cdFx0XHRpZiAodmFsdWUgPT09IG5hbWUpIHtcblx0XHRcdFx0dGhpcy5zZXRNb250aEZyb21TdHJpbmcoa2V5KTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuX21vbnRoTWFwU2hvcnQpKSB7XG5cdFx0XHRpZiAodmFsdWUgPT09IG5hbWUpIHtcblx0XHRcdFx0dGhpcy5zZXRNb250aEZyb21TdHJpbmcoa2V5KTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgZW51bSBEYXRlRm9ybWF0IHtcblx0VVMgPSAndXMnLFxuXHRFVSA9ICdldScsXG5cdEZBTkNZX1VTID0gJ2ZfdXMnLFxuXHRGQU5DWV9TSE9SVF9VUyA9ICdmc191cycsXG59XG5cbmV4cG9ydCBjbGFzcyBEYXRlUGFyc2VyIHtcblx0cHVibGljIHN0YXRpYyBkYXRlRm9ybWF0OiBEYXRlRm9ybWF0O1xuXG5cdHB1YmxpYyBzdGF0aWMgc3RyaW5naWZ5KGRhdGU6IERhdGUpOiBzdHJpbmcge1xuXHRcdGlmIChEYXRlUGFyc2VyLmRhdGVGb3JtYXQgPT09IERhdGVGb3JtYXQuVVMpIHtcblx0XHRcdHJldHVybiBEYXRlUGFyc2VyLnN0cmluZ2lmeVVzRGF0ZShkYXRlKTtcblx0XHR9IGVsc2UgaWYgKERhdGVQYXJzZXIuZGF0ZUZvcm1hdCA9PT0gRGF0ZUZvcm1hdC5FVSkge1xuXHRcdFx0cmV0dXJuIERhdGVQYXJzZXIuc3RyaW5naWZ5RXVEYXRlKGRhdGUpO1xuXHRcdH0gZWxzZSBpZiAoRGF0ZVBhcnNlci5kYXRlRm9ybWF0ID09PSBEYXRlRm9ybWF0LkZBTkNZX1VTKSB7XG5cdFx0XHRyZXR1cm4gRGF0ZVBhcnNlci5zdHJpbmdpZnlVc0ZhbmN5RGF0ZShkYXRlKTtcblx0XHR9IGVsc2UgaWYgKERhdGVQYXJzZXIuZGF0ZUZvcm1hdCA9PT0gRGF0ZUZvcm1hdC5GQU5DWV9TSE9SVF9VUykge1xuXHRcdFx0cmV0dXJuIERhdGVQYXJzZXIuc3RyaW5naWZ5VXNGYW5jeURhdGVTaG9ydChkYXRlKTtcblx0XHR9XG5cdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignZGF0ZSBmb3JtYXQgc2V0dGluZyBkb2VzIG5vdCBtYXRjaCBhbnkgc3VwcG9ydGVkIGRhdGUgZm9ybWF0Jyk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIHBhcnNlKGRhdGVTdHJpbmc6IHN0cmluZyk6IERhdGUgfCB1bmRlZmluZWQge1xuXHRcdGlmIChEYXRlUGFyc2VyLmRhdGVGb3JtYXQgPT09IERhdGVGb3JtYXQuVVMpIHtcblx0XHRcdHJldHVybiBEYXRlUGFyc2VyLnBhcnNlVXNEYXRlKGRhdGVTdHJpbmcpO1xuXHRcdH0gZWxzZSBpZiAoRGF0ZVBhcnNlci5kYXRlRm9ybWF0ID09PSBEYXRlRm9ybWF0LkVVKSB7XG5cdFx0XHRyZXR1cm4gRGF0ZVBhcnNlci5wYXJzZUV1RGF0ZShkYXRlU3RyaW5nKTtcblx0XHR9IGVsc2UgaWYgKERhdGVQYXJzZXIuZGF0ZUZvcm1hdCA9PT0gRGF0ZUZvcm1hdC5GQU5DWV9VUykge1xuXHRcdFx0cmV0dXJuIERhdGVQYXJzZXIucGFyc2VVc0ZhbmN5RGF0ZShkYXRlU3RyaW5nKTtcblx0XHR9IGVsc2UgaWYgKERhdGVQYXJzZXIuZGF0ZUZvcm1hdCA9PT0gRGF0ZUZvcm1hdC5GQU5DWV9TSE9SVF9VUykge1xuXHRcdFx0cmV0dXJuIERhdGVQYXJzZXIucGFyc2VVc0ZhbmN5RGF0ZShkYXRlU3RyaW5nKTtcblx0XHR9XG5cdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignZGF0ZSBmb3JtYXQgc2V0dGluZyBkb2VzIG5vdCBtYXRjaCBhbnkgc3VwcG9ydGVkIGRhdGUgZm9ybWF0Jyk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIHN0cmluZ2lmeUV1RGF0ZShkYXRlOiBEYXRlKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gYCR7ZGF0ZS5nZXRVbmlmb3JtRGF5KCl9LyR7ZGF0ZS5nZXRVbmlmb3JtTW9udGgoKX0vJHtkYXRlLmdldFVuaWZvcm1ZZWFyKCl9YDtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgcGFyc2VFdURhdGUoZGF0ZVN0cmluZzogc3RyaW5nKTogRGF0ZSB8IHVuZGVmaW5lZCB7XG5cdFx0Y29uc3QgZGF0ZTogRGF0ZSA9IERhdGVQYXJzZXIuZ2V0RGVmYXVsdERhdGUoKTtcblxuXHRcdGNvbnN0IGRhdGVQYXJ0cyA9IGRhdGVTdHJpbmcuc3BsaXQoJy8nKTtcblx0XHRpZiAoZGF0ZVBhcnRzLmxlbmd0aCAhPT0gMykge1xuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHRkYXRlLnNldERheUZyb21TdHJpbmcoZGF0ZVBhcnRzWzBdKTtcblx0XHRkYXRlLnNldE1vbnRoRnJvbVN0cmluZyhkYXRlUGFydHNbMV0pO1xuXHRcdGRhdGUuc2V0WWVhckZyb21TdHJpbmcoZGF0ZVBhcnRzWzJdKTtcblxuXHRcdHJldHVybiBkYXRlO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBzdHJpbmdpZnlVc0RhdGUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIGAke2RhdGUuZ2V0VW5pZm9ybU1vbnRoKCl9LyR7ZGF0ZS5nZXRVbmlmb3JtRGF5KCl9LyR7ZGF0ZS5nZXRVbmlmb3JtWWVhcigpfWA7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIHBhcnNlVXNEYXRlKGRhdGVTdHJpbmc6IHN0cmluZyk6IERhdGUgfCB1bmRlZmluZWQge1xuXHRcdGNvbnN0IGRhdGU6IERhdGUgPSBEYXRlUGFyc2VyLmdldERlZmF1bHREYXRlKCk7XG5cblx0XHRjb25zdCBkYXRlUGFydHMgPSBkYXRlU3RyaW5nLnNwbGl0KCcvJyk7XG5cdFx0aWYgKGRhdGVQYXJ0cy5sZW5ndGggIT09IDMpIHtcblx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0ZGF0ZS5zZXRNb250aEZyb21TdHJpbmcoZGF0ZVBhcnRzWzBdKTtcblx0XHRkYXRlLnNldERheUZyb21TdHJpbmcoZGF0ZVBhcnRzWzFdKTtcblx0XHRkYXRlLnNldFllYXJGcm9tU3RyaW5nKGRhdGVQYXJ0c1syXSk7XG5cblx0XHRyZXR1cm4gZGF0ZTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgc3RyaW5naWZ5VXNGYW5jeURhdGUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIGAke2RhdGUuZ2V0TW9udGhOYW1lKCl9ICR7ZGF0ZS5nZXREYXkoKS50b1N0cmluZygpfSwgJHtkYXRlLmdldFllYXIoKS50b1N0cmluZygpfWA7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIHN0cmluZ2lmeVVzRmFuY3lEYXRlU2hvcnQoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIGAke2RhdGUuZ2V0TW9udGhOYW1lU2hvcnQoKX0gJHtkYXRlLmdldERheSgpLnRvU3RyaW5nKCl9LCAke2RhdGUuZ2V0WWVhcigpLnRvU3RyaW5nKCl9YDtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgcGFyc2VVc0ZhbmN5RGF0ZShkYXRlU3RyaW5nOiBzdHJpbmcpOiBEYXRlIHwgdW5kZWZpbmVkIHtcblx0XHRjb25zdCBkYXRlOiBEYXRlID0gRGF0ZVBhcnNlci5nZXREZWZhdWx0RGF0ZSgpO1xuXG5cdFx0Y29uc3QgZGF0ZVBhcnRzID0gZGF0ZVN0cmluZy5zcGxpdCgnLCcpLm1hcCh4ID0+IHgudHJpbSgpKTtcblx0XHRpZiAoZGF0ZVBhcnRzLmxlbmd0aCAhPT0gMikge1xuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0Y29uc3QgZGF0ZVBhcnRzUGFydHMgPSBkYXRlUGFydHNbMF0uc3BsaXQoJyAnKTtcblx0XHRpZiAoZGF0ZVBhcnRzUGFydHMubGVuZ3RoICE9PSAyKSB7XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdC8vIGNvbnNvbGUubG9nKGRhdGVQYXJ0c1BhcnRzKVxuXG5cdFx0ZGF0ZS5zZXRNb250aEZyb21OYW1lKGRhdGVQYXJ0c1BhcnRzWzBdKTtcblx0XHRkYXRlLnNldERheUZyb21TdHJpbmcoZGF0ZVBhcnRzUGFydHNbMV0pO1xuXHRcdGRhdGUuc2V0WWVhckZyb21TdHJpbmcoZGF0ZVBhcnRzWzFdKTtcblxuXHRcdHJldHVybiBkYXRlO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBnZXREZWZhdWx0RGF0ZSgpOiBEYXRlIHtcblx0XHRyZXR1cm4gbmV3IERhdGUoKTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgZ2V0RGVmYXVsdERheSgpOiBudW1iZXIge1xuXHRcdHJldHVybiAxO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBnZXREZWZhdWx0TW9udGgoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gMTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgZ2V0RGVmYXVsdFllYXIoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gMjAyMjtcblx0fVxufVxuIiwgImltcG9ydCB7TWFya2Rvd25SZW5kZXJDaGlsZCwgVEZpbGV9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBNZXRhQmluZFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHtMb2dnZXJ9IGZyb20gJy4vdXRpbHMvTG9nZ2VyJztcbmltcG9ydCB7QWJzdHJhY3RJbnB1dEZpZWxkfSBmcm9tICcuL2lucHV0RmllbGRzL0Fic3RyYWN0SW5wdXRGaWVsZCc7XG5pbXBvcnQge0lucHV0RmllbGRGYWN0b3J5fSBmcm9tICcuL2lucHV0RmllbGRzL0lucHV0RmllbGRGYWN0b3J5JztcbmltcG9ydCB7SW5wdXRGaWVsZEFyZ3VtZW50LCBJbnB1dEZpZWxkRGVjbGFyYXRpb24sIElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlcn0gZnJvbSAnLi9wYXJzZXJzL0lucHV0RmllbGREZWNsYXJhdGlvblBhcnNlcic7XG5pbXBvcnQge01ldGFCaW5kQmluZFRhcmdldEVycm9yLCBNZXRhQmluZEludGVybmFsRXJyb3J9IGZyb20gJy4vdXRpbHMvVXRpbHMnO1xuXG5leHBvcnQgZW51bSBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGUge1xuXHRJTkxJTkVfQ09ERV9CTE9DSyxcblx0Q09ERV9CTE9DSyxcbn1cblxuZXhwb3J0IGNsYXNzIElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkIGV4dGVuZHMgTWFya2Rvd25SZW5kZXJDaGlsZCB7XG5cdHBsdWdpbjogTWV0YUJpbmRQbHVnaW47XG5cdG1ldGFEYXRhOiBhbnk7XG5cdGZpbGVQYXRoOiBzdHJpbmc7XG5cdHVpZDogbnVtYmVyO1xuXHRpbnB1dEZpZWxkOiBBYnN0cmFjdElucHV0RmllbGQgfCB1bmRlZmluZWQ7XG5cdGVycm9yOiBzdHJpbmc7XG5cblx0aW5wdXRGaWVsZERlY2xhcmF0aW9uOiBJbnB1dEZpZWxkRGVjbGFyYXRpb24gfCB1bmRlZmluZWQ7XG5cdGJpbmRUYXJnZXRGaWxlOiBURmlsZSB8IHVuZGVmaW5lZDtcblx0YmluZFRhcmdldE1ldGFkYXRhRmllbGQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuXHRsaW1pdEludGVydmFsOiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cdGludGVydmFsQ291bnRlcjogbnVtYmVyO1xuXHR2YWx1ZVF1ZXVlOiBhbnlbXTtcblxuXHRjb25zdHJ1Y3Rvcihjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHR5cGU6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZSwgZnVsbERlY2xhcmF0aW9uOiBzdHJpbmcsIHBsdWdpbjogTWV0YUJpbmRQbHVnaW4sIGZpbGVQYXRoOiBzdHJpbmcsIHVpZDogbnVtYmVyKSB7XG5cdFx0c3VwZXIoY29udGFpbmVyRWwpO1xuXG5cdFx0dGhpcy5lcnJvciA9ICcnO1xuXHRcdHRoaXMuZmlsZVBhdGggPSBmaWxlUGF0aDtcblx0XHR0aGlzLnVpZCA9IHVpZDtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblxuXHRcdHRoaXMudmFsdWVRdWV1ZSA9IFtdO1xuXHRcdHRoaXMuaW50ZXJ2YWxDb3VudGVyID0gMDtcblxuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLmlucHV0RmllbGREZWNsYXJhdGlvbiA9IElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5wYXJzZShmdWxsRGVjbGFyYXRpb24pO1xuXG5cdFx0XHRpZiAodGhpcy5pbnB1dEZpZWxkRGVjbGFyYXRpb24uaXNCb3VuZCkge1xuXHRcdFx0XHR0aGlzLnBhcnNlQmluZFRhcmdldCgpO1xuXHRcdFx0XHQvLyBAdHMtaWdub3JlIGBwYXJzZUJpbmRUYXJnZXRgIHNldHMgYGJpbmRUYXJnZXRGaWxlYCBhbmQgYGJpbmRUYXJnZXRNZXRhZGF0YUZpZWxkYCBvciB0aHJvd3MgYW4gZXJyb3IuXG5cdFx0XHRcdHRoaXMubWV0YURhdGEgPSB0aGlzLnBsdWdpbi5nZXRNZXRhRGF0YUZvckZpbGUodGhpcy5iaW5kVGFyZ2V0RmlsZSk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuaW5wdXRGaWVsZCA9IElucHV0RmllbGRGYWN0b3J5LmNyZWF0ZUlucHV0RmllbGQodGhpcy5pbnB1dEZpZWxkRGVjbGFyYXRpb24uaW5wdXRGaWVsZFR5cGUsIHtcblx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0aW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ6IHRoaXMsXG5cdFx0XHRcdG9uVmFsdWVDaGFuZ2VkOiB0aGlzLnB1c2hUb1ZhbHVlUXVldWUuYmluZCh0aGlzKSxcblx0XHRcdH0pO1xuXG5cdFx0XHR0aGlzLmxpbWl0SW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4gdGhpcy5hcHBseVZhbHVlUXVldWVUb01ldGFkYXRhKCksIHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNJbnRlcnZhbCk7XG5cdFx0fSBjYXRjaCAoZTogYW55KSB7XG5cdFx0XHR0aGlzLmVycm9yID0gZS5tZXNzYWdlO1xuXHRcdFx0TG9nZ2VyLmxvZ1dhcm5pbmcoZSk7XG5cdFx0fVxuXHR9XG5cblx0cGFyc2VCaW5kVGFyZ2V0KCk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5pbnB1dEZpZWxkRGVjbGFyYXRpb24pIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ2lucHV0RmllbGREZWNsYXJhdGlvbiBpcyB1bmRlZmluZWQsIGNhbiBub3QgcGFyc2UgYmluZCB0YXJnZXQnKTtcblx0XHR9XG5cblx0XHRjb25zdCBiaW5kVGFyZ2V0UGFydHMgPSB0aGlzLmlucHV0RmllbGREZWNsYXJhdGlvbi5iaW5kVGFyZ2V0LnNwbGl0KCcjJyk7XG5cblx0XHRpZiAoYmluZFRhcmdldFBhcnRzLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0Ly8gdGhlIGJpbmQgdGFyZ2V0IGlzIGluIHRoZSBzYW1lIGZpbGVcblx0XHRcdHRoaXMuYmluZFRhcmdldE1ldGFkYXRhRmllbGQgPSB0aGlzLmlucHV0RmllbGREZWNsYXJhdGlvbi5iaW5kVGFyZ2V0O1xuXG5cdFx0XHRjb25zdCBmaWxlczogVEZpbGVbXSA9IHRoaXMucGx1Z2luLmdldEZpbGVzQnlOYW1lKHRoaXMuZmlsZVBhdGgpO1xuXHRcdFx0aWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRCaW5kVGFyZ2V0RXJyb3IoJ2JpbmQgdGFyZ2V0IGZpbGUgbm90IGZvdW5kJyk7XG5cdFx0XHR9IGVsc2UgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHR0aGlzLmJpbmRUYXJnZXRGaWxlID0gZmlsZXNbMF07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRCaW5kVGFyZ2V0RXJyb3IoJ2JpbmQgdGFyZ2V0IHJlc29sdmVzIHRvIG11bHRpcGxlIGZpbGVzLCBwbGVhc2UgYWxzbyBzcGVjaWZ5IHRoZSBmaWxlIHBhdGgnKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGJpbmRUYXJnZXRQYXJ0cy5sZW5ndGggPT09IDIpIHtcblx0XHRcdC8vIHRoZSBiaW5kIHRhcmdldCBpcyBpbiBhbm90aGVyIGZpbGVcblx0XHRcdHRoaXMuYmluZFRhcmdldE1ldGFkYXRhRmllbGQgPSBiaW5kVGFyZ2V0UGFydHNbMV07XG5cblx0XHRcdGNvbnN0IGZpbGVzOiBURmlsZVtdID0gdGhpcy5wbHVnaW4uZ2V0RmlsZXNCeU5hbWUoYmluZFRhcmdldFBhcnRzWzBdKTtcblx0XHRcdGlmIChmaWxlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kQmluZFRhcmdldEVycm9yKCdiaW5kIHRhcmdldCBmaWxlIG5vdCBmb3VuZCcpO1xuXHRcdFx0fSBlbHNlIGlmIChmaWxlcy5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0dGhpcy5iaW5kVGFyZ2V0RmlsZSA9IGZpbGVzWzBdO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kQmluZFRhcmdldEVycm9yKCdiaW5kIHRhcmdldCByZXNvbHZlcyB0byBtdWx0aXBsZSBmaWxlcywgcGxlYXNlIGFsc28gc3BlY2lmeSB0aGUgZmlsZSBwYXRoJyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEJpbmRUYXJnZXRFcnJvcignYmluZCB0YXJnZXQgbWF5IG9ubHkgY29udGFpbiBvbmUgXFwnI1xcJyB0byBzcGVjaWZ5IHRoZSBtZXRhZGF0YSBmaWVsZCcpO1xuXHRcdH1cblx0fVxuXG5cdC8vIHVzZSB0aGlzIGludGVydmFsIHRvIHJlZHVjZSB3cml0aW5nIG9wZXJhdGlvbnNcblx0YXN5bmMgYXBwbHlWYWx1ZVF1ZXVlVG9NZXRhZGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpZiAoIXRoaXMuaW5wdXRGaWVsZERlY2xhcmF0aW9uKSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdpbnB1dEZpZWxkRGVjbGFyYXRpb24gaXMgdW5kZWZpbmVkLCBjYW4gbm90IHVwZGF0ZSBtZXRhZGF0YScpO1xuXHRcdH1cblx0XHRpZiAoIXRoaXMuaW5wdXRGaWVsZERlY2xhcmF0aW9uLmlzQm91bmQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKCF0aGlzLmJpbmRUYXJnZXRNZXRhZGF0YUZpZWxkIHx8ICF0aGlzLmJpbmRUYXJnZXRGaWxlKSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdiaW5kVGFyZ2V0TWV0YWRhdGFGaWVsZCBvciBiaW5kVGFyZ2V0RmlsZSBpcyB1bmRlZmluZWQsIGNhbiBub3QgdXBkYXRlIG1ldGFkYXRhJyk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMudmFsdWVRdWV1ZS5sZW5ndGggPiAwKSB7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyh0aGlzLnZhbHVlUXVldWUuYXQoLTEpKVxuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4udXBkYXRlTWV0YURhdGEodGhpcy5iaW5kVGFyZ2V0TWV0YWRhdGFGaWVsZCwgdGhpcy52YWx1ZVF1ZXVlLmF0KC0xKSwgdGhpcy5iaW5kVGFyZ2V0RmlsZSk7XG5cdFx0XHR0aGlzLnZhbHVlUXVldWUgPSBbXTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBwdXNoVG9WYWx1ZVF1ZXVlKHZhbHVlOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpZiAodGhpcy5pbnB1dEZpZWxkRGVjbGFyYXRpb24/LmlzQm91bmQpIHtcblx0XHRcdHRoaXMudmFsdWVRdWV1ZS5wdXNoKHZhbHVlKTtcblx0XHR9XG5cdH1cblxuXHR1cGRhdGVWYWx1ZSh2YWx1ZTogYW55KTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLmlucHV0RmllbGQpIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ2lucHV0RmllbGQgaXMgdW5kZWZpbmVkLCBjYW4gbm90IHVwZGF0ZSB2YWx1ZScpO1xuXHRcdH1cblxuXHRcdGlmICh2YWx1ZSA9PSBudWxsKSB7XG5cdFx0XHR2YWx1ZSA9IHRoaXMuaW5wdXRGaWVsZC5nZXREZWZhdWx0VmFsdWUoKTtcblx0XHR9XG5cblx0XHRpZiAoIXRoaXMuaW5wdXRGaWVsZC5pc0VxdWFsVmFsdWUodmFsdWUpICYmIHRoaXMudmFsdWVRdWV1ZS5sZW5ndGggPT09IDApIHtcblx0XHRcdExvZ2dlci5sb2dEZWJ1ZyhgdXBkYXRpbmcgaW5wdXQgZmllbGQgJHt0aGlzLnVpZH0gdG9gLCB2YWx1ZSk7XG5cdFx0XHR0aGlzLmlucHV0RmllbGQuc2V0VmFsdWUodmFsdWUpO1xuXHRcdH1cblx0fVxuXG5cdGdldEluaXRpYWxWYWx1ZSgpOiBhbnkgfCB1bmRlZmluZWQge1xuXHRcdGlmICh0aGlzLmlucHV0RmllbGREZWNsYXJhdGlvbj8uaXNCb3VuZCkge1xuXHRcdFx0cmV0dXJuIHRoaXMubWV0YURhdGFbdGhpcy5iaW5kVGFyZ2V0TWV0YWRhdGFGaWVsZCA/PyAnJ10gPz8gdGhpcy5pbnB1dEZpZWxkPy5nZXREZWZhdWx0VmFsdWUoKTtcblx0XHR9XG5cdH1cblxuXHRnZXRBcmd1bWVudHMobmFtZTogc3RyaW5nKTogSW5wdXRGaWVsZEFyZ3VtZW50W10ge1xuXHRcdGlmICghdGhpcy5pbnB1dEZpZWxkRGVjbGFyYXRpb24pIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ2lucHV0RmllbGREZWNsYXJhdGlvbiBpcyB1bmRlZmluZWQsIGNhbiBub3QgcmV0cmlldmUgYXJndW1lbnRzJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuaW5wdXRGaWVsZERlY2xhcmF0aW9uLmFyZ3VtZW50cy5maWx0ZXIoeCA9PiB4Lm5hbWUgPT09IG5hbWUpO1xuXHR9XG5cblx0Z2V0QXJndW1lbnQobmFtZTogc3RyaW5nKTogSW5wdXRGaWVsZEFyZ3VtZW50IHwgdW5kZWZpbmVkIHtcblx0XHRyZXR1cm4gdGhpcy5nZXRBcmd1bWVudHMobmFtZSkuYXQoMCk7XG5cdH1cblxuXHRhc3luYyBvbmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0TG9nZ2VyLmxvZ0RlYnVnKCdsb2FkJywgdGhpcyk7XG5cblx0XHR0aGlzLm1ldGFEYXRhID0gYXdhaXQgdGhpcy5tZXRhRGF0YTtcblxuXHRcdGNvbnN0IGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuXHRcdGNvbnRhaW5lci5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC13cmFwcGVyJyk7XG5cdFx0dGhpcy5jb250YWluZXJFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dCcpO1xuXG5cdFx0aWYgKHRoaXMuZXJyb3IpIHtcblx0XHRcdGNvbnRhaW5lci5pbm5lclRleHQgPSBgIC0+IEVSUk9SOiAke3RoaXMuZXJyb3J9YDtcblx0XHRcdGNvbnRhaW5lci5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1lcnJvcicpO1xuXHRcdFx0dGhpcy5jb250YWluZXJFbC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICghdGhpcy5pbnB1dEZpZWxkKSB7XG5cdFx0XHRjb250YWluZXIuaW5uZXJUZXh0ID0gYCAtPiBFUlJPUjogJHsobmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignaW5wdXQgZmllbGQgaXMgdW5kZWZpbmVkIGFuZCBlcnJvciBpcyBlbXB0eScpLm1lc3NhZ2UpfWA7XG5cdFx0XHRjb250YWluZXIuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4tZXJyb3InKTtcblx0XHRcdHRoaXMuY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlcklucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkKHRoaXMpO1xuXG5cdFx0dGhpcy5pbnB1dEZpZWxkLnJlbmRlcihjb250YWluZXIpO1xuXG5cdFx0Y29uc3QgY2xhc3NBcmd1bWVudCA9IHRoaXMuZ2V0QXJndW1lbnRzKCdjbGFzcycpO1xuXHRcdGlmIChjbGFzc0FyZ3VtZW50KSB7XG5cdFx0XHR0aGlzLmlucHV0RmllbGQuZ2V0SHRtbEVsZW1lbnQoKS5hZGRDbGFzc2VzKGNsYXNzQXJndW1lbnQubWFwKHggPT4geC52YWx1ZSkpO1xuXHRcdH1cblxuXG5cdFx0dGhpcy5jb250YWluZXJFbC5lbXB0eSgpO1xuXHRcdHRoaXMuY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblx0fVxuXG5cdG9udW5sb2FkKCk6IHZvaWQge1xuXHRcdExvZ2dlci5sb2dEZWJ1ZygndW5sb2FkJywgdGhpcyk7XG5cblx0XHR0aGlzLnBsdWdpbi51bnJlZ2lzdGVySW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQodGhpcyk7XG5cblx0XHRzdXBlci5vbnVubG9hZCgpO1xuXG5cdFx0Ly9jb25zb2xlLmxvZygndW5sb2FkJywgdGhpcyk7XG5cdFx0d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5saW1pdEludGVydmFsKTtcblx0fVxufVxuIiwgImV4cG9ydCBjbGFzcyBMb2dnZXIge1xyXG5cdHN0YXRpYyBkZXZNb2RlOiBib29sZWFuO1xyXG5cdHN0YXRpYyBwcmVmaXg6IHN0cmluZyA9ICdtZXRhLWJpbmQgfCc7XHJcblxyXG5cdC8qKlxyXG5cdCAqIExvZ3MgdG8gdGhlIGNvbnNvbGUgd2l0aCB0aGUgcGx1Z2luIHByZWZpeFxyXG5cdCAqXHJcblx0ICogQHBhcmFtIGRhdGFcclxuXHQgKi9cclxuXHRzdGF0aWMgbG9nKC4uLmRhdGE6IGFueSk6IHZvaWQge1xyXG5cdFx0Y29uc29sZS5sb2codGhpcy5wcmVmaXgsIC4uLmRhdGEpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogTG9ncyB0byB0aGUgY29uc29sZSB3aXRoIHRoZSBwbHVnaW4gcHJlZml4LCBpZiBkZXYgbW9kZSBpcyB0dXJuZWQgb24gaW4gdGhlIHBsdWdpbiBzZXR0aW5nc1xyXG5cdCAqXHJcblx0ICogQHBhcmFtIGRhdGFcclxuXHQgKi9cclxuXHRzdGF0aWMgbG9nRGVidWcoLi4uZGF0YTogYW55KTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5kZXZNb2RlKSB7XHJcblx0XHRcdExvZ2dlci5sb2coLi4uZGF0YSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBMb2dzIGEgd2FybmluZyB0byB0aGUgY29uc29sZSB3aXRoIHRoZSBwbHVnaW4gcHJlZml4XHJcblx0ICpcclxuXHQgKiBAcGFyYW0gZGF0YVxyXG5cdCAqL1xyXG5cdHN0YXRpYyBsb2dXYXJuaW5nKC4uLmRhdGE6IGFueSk6IHZvaWQge1xyXG5cdFx0Y29uc29sZS53YXJuKHRoaXMucHJlZml4LCBkYXRhKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIExvZ3MgYW4gZXJyb3IgdG8gdGhlIGNvbnNvbGUgd2l0aCB0aGUgcGx1Z2luIHByZWZpeFxyXG5cdCAqXHJcblx0ICogQHBhcmFtIGRhdGFcclxuXHQgKi9cclxuXHRzdGF0aWMgbG9nRXJyb3IoLi4uZGF0YTogYW55KTogdm9pZCB7XHJcblx0XHRjb25zb2xlLmVycm9yKHRoaXMucHJlZml4LCBkYXRhKTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7SW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGR9IGZyb20gJy4uL0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkJztcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdElucHV0RmllbGQge1xyXG5cdHN0YXRpYyBhbGxvd0NvZGVCbG9jazogYm9vbGVhbiA9IHRydWU7XHJcblx0c3RhdGljIGFsbG93SW5saW5lQ29kZUJsb2NrOiBib29sZWFuID0gdHJ1ZTtcclxuXHRpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ7XHJcblx0b25WYWx1ZUNoYW5nZTogKHZhbHVlOiBhbnkpID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIG9uVmFsdWVDaGFuZ2U6ICh2YWx1ZTogYW55KSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPikge1xyXG5cdFx0dGhpcy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCA9IGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkO1xyXG5cdFx0dGhpcy5vblZhbHVlQ2hhbmdlID0gb25WYWx1ZUNoYW5nZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgdGhlIGN1cnJlbnQgY29udGVudCBvZiB0aGUgaW5wdXQgZmllbGRcclxuXHQgKi9cclxuXHRhYnN0cmFjdCBnZXRWYWx1ZSgpOiBhbnk7XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldHMgdGhlIHZhbHVlIG9uIHRoaXMgaW5wdXQgZmllbGQsIG92ZXJyaWRpbmcgdGhlIGN1cnJlbnQgY29udGVudFxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHZhbHVlXHJcblx0ICovXHJcblx0YWJzdHJhY3Qgc2V0VmFsdWUodmFsdWU6IGFueSk6IHZvaWQ7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrcyBpZiB0aGUgdmFsdWUgaXMgdGhlIHNhbWUgYXMgdGhlIHZhbHVlIG9mIHRoaXMgaW5wdXQgZmllbGRcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB2YWx1ZVxyXG5cdCAqL1xyXG5cdGFic3RyYWN0IGlzRXF1YWxWYWx1ZSh2YWx1ZTogYW55KTogYm9vbGVhbjtcclxuXHJcblx0LyoqXHJcblx0ICogUmV0dXJucyB0aGUgZGVmYXVsdCB2YWx1ZSBvZiB0aGlzIGlucHV0IGZpZWxkXHJcblx0ICovXHJcblx0YWJzdHJhY3QgZ2V0RGVmYXVsdFZhbHVlKCk6IGFueTtcclxuXHJcblx0LyoqXHJcblx0ICogUmV0dXJucyB0aGUgSFRNTCBlbGVtZW50IHRoaXMgaW5wdXQgZmllbGQgaXMgd3JhcHBlZCBpblxyXG5cdCAqL1xyXG5cdGFic3RyYWN0IGdldEh0bWxFbGVtZW50KCk6IEhUTUxFbGVtZW50O1xyXG5cclxuXHQvKipcclxuXHQgKiBSZW5kZXJzIHRoZSBpbnB1dCBmaWVsZCBhcyBhIGNoaWxkIG9mIHRoZSBjb250YWluZXJcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBjb250YWluZXJcclxuXHQgKi9cclxuXHRhYnN0cmFjdCByZW5kZXIoY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCk6IHZvaWQ7XHJcbn1cclxuIiwgImltcG9ydCB7QWJzdHJhY3RJbnB1dEZpZWxkfSBmcm9tICcuL0Fic3RyYWN0SW5wdXRGaWVsZCc7XG5pbXBvcnQge1RvZ2dsZUNvbXBvbmVudH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHtMb2dnZXJ9IGZyb20gJy4uL3V0aWxzL0xvZ2dlcic7XG5pbXBvcnQge01ldGFCaW5kSW50ZXJuYWxFcnJvcn0gZnJvbSAnLi4vdXRpbHMvVXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgVG9nZ2xlSW5wdXRGaWVsZCBleHRlbmRzIEFic3RyYWN0SW5wdXRGaWVsZCB7XG5cdHRvZ2dsZUNvbXBvbmVudDogVG9nZ2xlQ29tcG9uZW50IHwgdW5kZWZpbmVkO1xuXG5cdGdldFZhbHVlKCk6IGFueSB7XG5cdFx0aWYgKCF0aGlzLnRvZ2dsZUNvbXBvbmVudCkge1xuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndG9nZ2xlIGlucHV0IGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMudG9nZ2xlQ29tcG9uZW50LmdldFZhbHVlKCk7XG5cdH1cblxuXHRzZXRWYWx1ZSh2YWx1ZTogYW55KTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLnRvZ2dsZUNvbXBvbmVudCkge1xuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndG9nZ2xlIGlucHV0IGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcblx0XHR9XG5cblx0XHRpZiAodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT0gJ2Jvb2xlYW4nKSB7XG5cdFx0XHR0aGlzLnRvZ2dsZUNvbXBvbmVudC5zZXRWYWx1ZSh2YWx1ZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdExvZ2dlci5sb2dXYXJuaW5nKGBjYW4gbm90IHNldCB2YWx1ZSBvZiB0b2dnbGUgdG8gXFwnJHt2YWx1ZX1cXCdgKTtcblx0XHRcdHRoaXMudG9nZ2xlQ29tcG9uZW50LnNldFZhbHVlKGZhbHNlKTtcblx0XHR9XG5cdH1cblxuXHRpc0VxdWFsVmFsdWUodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLmdldFZhbHVlKCkgPT0gdmFsdWU7XG5cdH1cblxuXHRnZXREZWZhdWx0VmFsdWUoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Z2V0SHRtbEVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xuXHRcdGlmICghdGhpcy50b2dnbGVDb21wb25lbnQpIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3RvZ2dsZSBpbnB1dCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMudG9nZ2xlQ29tcG9uZW50LnRvZ2dsZUVsO1xuXHR9XG5cblx0cmVuZGVyKGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcblx0XHRjb25zdCBjb21wb25lbnQgPSBuZXcgVG9nZ2xlQ29tcG9uZW50KGNvbnRhaW5lcik7XG5cdFx0Y29tcG9uZW50LnNldFZhbHVlKHRoaXMuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0SW5pdGlhbFZhbHVlKCkpO1xuXHRcdGNvbXBvbmVudC5vbkNoYW5nZSh0aGlzLm9uVmFsdWVDaGFuZ2UpO1xuXHRcdHRoaXMudG9nZ2xlQ29tcG9uZW50ID0gY29tcG9uZW50O1xuXHR9XG5cbn1cbiIsICJpbXBvcnQge0Fic3RyYWN0SW5wdXRGaWVsZH0gZnJvbSAnLi9BYnN0cmFjdElucHV0RmllbGQnO1xuaW1wb3J0IHtUZXh0Q29tcG9uZW50fSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQge0xvZ2dlcn0gZnJvbSAnLi4vdXRpbHMvTG9nZ2VyJztcbmltcG9ydCB7TWV0YUJpbmRJbnRlcm5hbEVycm9yfSBmcm9tICcuLi91dGlscy9VdGlscyc7XG5cbmV4cG9ydCBjbGFzcyBUZXh0SW5wdXRGaWVsZCBleHRlbmRzIEFic3RyYWN0SW5wdXRGaWVsZCB7XG5cdHRleHRDb21wb25lbnQ6IFRleHRDb21wb25lbnQgfCB1bmRlZmluZWQ7XG5cblx0Z2V0VmFsdWUoKTogYW55IHtcblx0XHRpZiAoIXRoaXMudGV4dENvbXBvbmVudCkge1xuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndGV4dCBpbnB1dCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMudGV4dENvbXBvbmVudC5nZXRWYWx1ZSgpO1xuXHR9XG5cblx0c2V0VmFsdWUodmFsdWU6IGFueSk6IHZvaWQge1xuXHRcdGlmICghdGhpcy50ZXh0Q29tcG9uZW50KSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCd0ZXh0IGlucHV0IGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcblx0XHR9XG5cblx0XHRpZiAodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcblx0XHRcdHRoaXMudGV4dENvbXBvbmVudC5zZXRWYWx1ZSh2YWx1ZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdExvZ2dlci5sb2dXYXJuaW5nKGBjYW4gbm90IHNldCB2YWx1ZSBvZiB0ZXh0IGlucHV0IHRvIFxcJyR7dmFsdWV9XFwnYCk7XG5cdFx0XHR0aGlzLnRleHRDb21wb25lbnQuc2V0VmFsdWUoJycpO1xuXHRcdH1cblx0fVxuXG5cdGlzRXF1YWxWYWx1ZSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0VmFsdWUoKSA9PSB2YWx1ZTtcblx0fVxuXG5cdGdldERlZmF1bHRWYWx1ZSgpOiBhbnkge1xuXHRcdHJldHVybiAnJztcblx0fVxuXG5cdGdldEh0bWxFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcblx0XHRpZiAoIXRoaXMudGV4dENvbXBvbmVudCkge1xuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcigndGV4dCBpbnB1dCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMudGV4dENvbXBvbmVudC5pbnB1dEVsO1xuXHR9XG5cblx0cmVuZGVyKGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcblx0XHRjb25zdCBjb21wb25lbnQgPSBuZXcgVGV4dENvbXBvbmVudChjb250YWluZXIpO1xuXHRcdGNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEluaXRpYWxWYWx1ZSgpKTtcblx0XHRjb21wb25lbnQub25DaGFuZ2UodGhpcy5vblZhbHVlQ2hhbmdlKTtcblx0XHR0aGlzLnRleHRDb21wb25lbnQgPSBjb21wb25lbnQ7XG5cdH1cblxufVxuIiwgImltcG9ydCB7QWJzdHJhY3RJbnB1dEZpZWxkfSBmcm9tICcuL0Fic3RyYWN0SW5wdXRGaWVsZCc7XG5pbXBvcnQge1NsaWRlckNvbXBvbmVudH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHtMb2dnZXJ9IGZyb20gJy4uL3V0aWxzL0xvZ2dlcic7XG5pbXBvcnQge0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkfSBmcm9tICcuLi9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCc7XG5pbXBvcnQge01ldGFCaW5kSW50ZXJuYWxFcnJvcn0gZnJvbSAnLi4vdXRpbHMvVXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgU2xpZGVySW5wdXRGaWVsZCBleHRlbmRzIEFic3RyYWN0SW5wdXRGaWVsZCB7XG5cdHNsaWRlckNvbXBvbmVudDogU2xpZGVyQ29tcG9uZW50IHwgdW5kZWZpbmVkO1xuXHRtaW5WYWx1ZTogbnVtYmVyO1xuXHRtYXhWYWx1ZTogbnVtYmVyO1xuXG5cblx0Y29uc3RydWN0b3IoaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBvblZhbHVlQ2hhbmdlOiAodmFsdWU6IGFueSkgPT4gKHZvaWQgfCBQcm9taXNlPHZvaWQ+KSkge1xuXHRcdHN1cGVyKGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBvblZhbHVlQ2hhbmdlKTtcblx0XHR0aGlzLm1pblZhbHVlID0gaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0QXJndW1lbnQoJ21pblZhbHVlJyk/LnZhbHVlID8/IDA7XG5cdFx0dGhpcy5tYXhWYWx1ZSA9IGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEFyZ3VtZW50KCdtYXhWYWx1ZScpPy52YWx1ZSA/PyAxMDA7XG5cdH1cblxuXHRnZXRWYWx1ZSgpOiBhbnkge1xuXHRcdGlmICghdGhpcy5zbGlkZXJDb21wb25lbnQpIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3NsaWRlciBpbnB1dCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuc2xpZGVyQ29tcG9uZW50LmdldFZhbHVlKCk7XG5cdH1cblxuXHRzZXRWYWx1ZSh2YWx1ZTogYW55KTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLnNsaWRlckNvbXBvbmVudCkge1xuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignc2xpZGVyIGlucHV0IGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcblx0XHR9XG5cblx0XHRpZiAodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcblx0XHRcdGlmICh2YWx1ZSA+PSB0aGlzLm1pblZhbHVlICYmIHZhbHVlIDw9IHRoaXMubWF4VmFsdWUpIHtcblx0XHRcdFx0dGhpcy5zbGlkZXJDb21wb25lbnQuc2V0VmFsdWUodmFsdWUpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRMb2dnZXIubG9nV2FybmluZyhgY2FuIG5vdCBzZXQgdmFsdWUgb2Ygc2xpZGVyIHRvIFxcJyR7dmFsdWV9XFwnYCk7XG5cdFx0XHR0aGlzLnNsaWRlckNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmdldERlZmF1bHRWYWx1ZSgpKTtcblx0XHR9XG5cdH1cblxuXHRpc0VxdWFsVmFsdWUodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLmdldFZhbHVlKCkgPT0gdmFsdWU7XG5cdH1cblxuXHRnZXREZWZhdWx0VmFsdWUoKTogYW55IHtcblx0XHRyZXR1cm4gdGhpcy5taW5WYWx1ZTtcblx0fVxuXG5cdGdldEh0bWxFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcblx0XHRpZiAoIXRoaXMuc2xpZGVyQ29tcG9uZW50KSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdzbGlkZXIgaW5wdXQgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnNsaWRlckNvbXBvbmVudC5zbGlkZXJFbDtcblx0fVxuXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XG5cdFx0Y29udGFpbmVyLnJlbW92ZUNsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLWlucHV0LXdyYXBwZXInKTtcblx0XHRjb250YWluZXIuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4tZmxleC1pbnB1dC13cmFwcGVyJyk7XG5cblx0XHRjb25zdCBsYWJlbEFyZ3VtZW50ID0gdGhpcy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZC5nZXRBcmd1bWVudCgnbGFiZWxzJyk7XG5cdFx0aWYgKGxhYmVsQXJndW1lbnQgJiYgbGFiZWxBcmd1bWVudC52YWx1ZSA9PT0gdHJ1ZSkge1xuXHRcdFx0Y29udGFpbmVyLmNyZWF0ZVNwYW4oe3RleHQ6IHRoaXMubWluVmFsdWUudG9TdHJpbmcoKSwgY2xzOiAnbWV0YS1iaW5kLXBsdWdpbi1zbGlkZXItaW5wdXQtbGFiZWwnfSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY29tcG9uZW50ID0gbmV3IFNsaWRlckNvbXBvbmVudChjb250YWluZXIpO1xuXHRcdGNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEluaXRpYWxWYWx1ZSgpKTtcblx0XHRjb21wb25lbnQub25DaGFuZ2UodGhpcy5vblZhbHVlQ2hhbmdlKTtcblx0XHRjb21wb25lbnQuc2V0RHluYW1pY1Rvb2x0aXAoKTtcblx0XHRjb21wb25lbnQuc2V0TGltaXRzKHRoaXMubWluVmFsdWUsIHRoaXMubWF4VmFsdWUsIDEpO1xuXHRcdGNvbXBvbmVudC5zbGlkZXJFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1zbGlkZXItaW5wdXQnKTtcblxuXHRcdGlmIChsYWJlbEFyZ3VtZW50ICYmIGxhYmVsQXJndW1lbnQudmFsdWUgPT09IHRydWUpIHtcblx0XHRcdGNvbnRhaW5lci5jcmVhdGVTcGFuKHt0ZXh0OiB0aGlzLm1heFZhbHVlLnRvU3RyaW5nKCksIGNsczogJ21ldGEtYmluZC1wbHVnaW4tc2xpZGVyLWlucHV0LWxhYmVsJ30pO1xuXHRcdH1cblxuXHRcdHRoaXMuc2xpZGVyQ29tcG9uZW50ID0gY29tcG9uZW50O1xuXHR9XG5cbn1cbiIsICJpbXBvcnQge0Fic3RyYWN0SW5wdXRGaWVsZH0gZnJvbSAnLi9BYnN0cmFjdElucHV0RmllbGQnO1xuaW1wb3J0IHtUZXh0QXJlYUNvbXBvbmVudH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHtMb2dnZXJ9IGZyb20gJy4uL3V0aWxzL0xvZ2dlcic7XG5pbXBvcnQge01ldGFCaW5kSW50ZXJuYWxFcnJvcn0gZnJvbSAnLi4vdXRpbHMvVXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgVGV4dEFyZWFJbnB1dEZpZWxkIGV4dGVuZHMgQWJzdHJhY3RJbnB1dEZpZWxkIHtcblx0dGV4dEFyZWFDb21wb25lbnQ6IFRleHRBcmVhQ29tcG9uZW50IHwgdW5kZWZpbmVkO1xuXG5cdGdldFZhbHVlKCk6IGFueSB7XG5cdFx0aWYgKCF0aGlzLnRleHRBcmVhQ29tcG9uZW50KSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCd0ZXh0IGFyZWEgaW5wdXQgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnRleHRBcmVhQ29tcG9uZW50LmdldFZhbHVlKCk7XG5cdH1cblxuXHRzZXRWYWx1ZSh2YWx1ZTogYW55KTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLnRleHRBcmVhQ29tcG9uZW50KSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCd0ZXh0IGFyZWEgaW5wdXQgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xuXHRcdH1cblxuXHRcdGlmICh2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuXHRcdFx0dGhpcy50ZXh0QXJlYUNvbXBvbmVudC5zZXRWYWx1ZSh2YWx1ZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdExvZ2dlci5sb2dXYXJuaW5nKGBjYW4gbm90IHNldCB2YWx1ZSBvZiB0ZXh0IGFyZWEgaW5wdXQgdG8gXFwnJHt2YWx1ZX1cXCdgKTtcblx0XHRcdHRoaXMudGV4dEFyZWFDb21wb25lbnQuc2V0VmFsdWUoJycpO1xuXHRcdH1cblx0fVxuXG5cdGlzRXF1YWxWYWx1ZSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0VmFsdWUoKSA9PSB2YWx1ZTtcblx0fVxuXG5cdGdldERlZmF1bHRWYWx1ZSgpOiBhbnkge1xuXHRcdHJldHVybiAnJztcblx0fVxuXG5cdGdldEh0bWxFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcblx0XHRpZiAoIXRoaXMudGV4dEFyZWFDb21wb25lbnQpIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3RleHQgYXJlYSBpbnB1dCBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMudGV4dEFyZWFDb21wb25lbnQuaW5wdXRFbDtcblx0fVxuXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XG5cdFx0Y29uc3QgY29tcG9uZW50ID0gbmV3IFRleHRBcmVhQ29tcG9uZW50KGNvbnRhaW5lcik7XG5cdFx0Y29tcG9uZW50LnNldFZhbHVlKHRoaXMuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0SW5pdGlhbFZhbHVlKCkpO1xuXHRcdGNvbXBvbmVudC5vbkNoYW5nZSh0aGlzLm9uVmFsdWVDaGFuZ2UpO1xuXHRcdHRoaXMudGV4dEFyZWFDb21wb25lbnQgPSBjb21wb25lbnQ7XG5cdH1cblxufVxuIiwgImltcG9ydCB7U2VsZWN0SW5wdXRGaWVsZH0gZnJvbSAnLi9TZWxlY3RJbnB1dEZpZWxkJztcblxuZXhwb3J0IGNsYXNzIFNlbGVjdElucHV0RmllbGRFbGVtZW50IHtcblx0dmFsdWU6IHN0cmluZztcblx0c2VsZWN0SW5wdXRGaWVsZDogU2VsZWN0SW5wdXRGaWVsZDtcblx0cmVhZG9ubHkgaWQ6IG51bWJlcjtcblx0ZWxlbWVudDogSFRNTERpdkVsZW1lbnQ7XG5cblx0Y3NzQ2xhc3M6IHN0cmluZztcblx0YWN0aXZlQ2xhc3M6IHN0cmluZztcblx0aG92ZXJDbGFzczogc3RyaW5nO1xuXG5cdHByaXZhdGUgYWN0aXZlOiBib29sZWFuO1xuXHRwcml2YXRlIGhpZ2hsaWdodGVkOiBib29sZWFuO1xuXG5cdGNvbnN0cnVjdG9yKHZhbHVlOiBzdHJpbmcsIHBhcmVudEVsZW1lbnQ6IEhUTUxFbGVtZW50LCBpZDogbnVtYmVyLCBtdWx0aVNlbGVjdElucHV0RmllbGQ6IFNlbGVjdElucHV0RmllbGQsIGFjdGl2ZTogYm9vbGVhbiA9IGZhbHNlKSB7XG5cdFx0dGhpcy52YWx1ZSA9IHZhbHVlO1xuXHRcdHRoaXMuaWQgPSBpZDtcblx0XHR0aGlzLmFjdGl2ZSA9IGFjdGl2ZTtcblx0XHR0aGlzLmhpZ2hsaWdodGVkID0gZmFsc2U7XG5cdFx0dGhpcy5zZWxlY3RJbnB1dEZpZWxkID0gbXVsdGlTZWxlY3RJbnB1dEZpZWxkO1xuXG5cdFx0dGhpcy5jc3NDbGFzcyA9ICdtZXRhLWJpbmQtcGx1Z2luLXNlbGVjdC1pbnB1dC1lbGVtZW50Jztcblx0XHR0aGlzLmFjdGl2ZUNsYXNzID0gJ21ldGEtYmluZC1wbHVnaW4tc2VsZWN0LWlucHV0LWVsZW1lbnQtc2VsZWN0ZWQnO1xuXHRcdHRoaXMuaG92ZXJDbGFzcyA9ICdtZXRhLWJpbmQtcGx1Z2luLXNlbGVjdC1pbnB1dC1lbGVtZW50LWhvdmVyJztcblxuXHRcdHRoaXMuZWxlbWVudCA9IHBhcmVudEVsZW1lbnQuY3JlYXRlRGl2KHtjbHM6IHRoaXMuY3NzQ2xhc3N9KTtcblx0XHR0aGlzLmVsZW1lbnQuaWQgPSB0aGlzLmdldEhUTUxJZCgpO1xuXHRcdHRoaXMuZWxlbWVudC5vbignY2xpY2snLCAnIycgKyB0aGlzLmdldEhUTUxJZCgpLCAoKSA9PiB7XG5cdFx0XHR0aGlzLnNldEFjdGl2ZSghdGhpcy5hY3RpdmUpO1xuXHRcdFx0aWYgKCF0aGlzLnNlbGVjdElucHV0RmllbGQuYWxsb3dNdWx0aVNlbGVjdCkge1xuXHRcdFx0XHR0aGlzLnNlbGVjdElucHV0RmllbGQuZGlzYWJsZUFsbE90aGVyRWxlbWVudHModGhpcy5pZCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0dGhpcy5lbGVtZW50Lm9uKCdtb3VzZWVudGVyJywgJyMnICsgdGhpcy5nZXRIVE1MSWQoKSwgKCkgPT4ge1xuXHRcdFx0dGhpcy5zZXRIaWdobGlnaHRlZCh0cnVlKTtcblx0XHR9KTtcblx0XHR0aGlzLmVsZW1lbnQub24oJ21vdXNlbGVhdmUnLCAnIycgKyB0aGlzLmdldEhUTUxJZCgpLCAoKSA9PiB7XG5cdFx0XHR0aGlzLnNldEhpZ2hsaWdodGVkKGZhbHNlKTtcblx0XHR9KTtcblx0fVxuXG5cdGdldEhUTUxJZCgpOiBzdHJpbmcge1xuXHRcdHJldHVybiBgbWV0YS1iaW5kLXNlbGVjdC1pbnB1dC1lbGVtZW50LSR7dGhpcy5zZWxlY3RJbnB1dEZpZWxkLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLnVpZH0tJHt0aGlzLmlkfWA7XG5cdH1cblxuXHRpc0hpZ2hsaWdodGVkKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLmhpZ2hsaWdodGVkO1xuXHR9XG5cblx0c2V0SGlnaGxpZ2h0ZWQodmFsdWU6IGJvb2xlYW4pOiB2b2lkIHtcblx0XHR0aGlzLmhpZ2hsaWdodGVkID0gdmFsdWU7XG5cdFx0aWYgKHRoaXMuaGlnaGxpZ2h0ZWQpIHtcblx0XHRcdHRoaXMuYWRkQ2xhc3ModGhpcy5ob3ZlckNsYXNzKTtcblx0XHRcdHRoaXMuc2VsZWN0SW5wdXRGaWVsZC5kZUhpZ2hsaWdodEFsbE90aGVyRWxlbWVudHModGhpcy5pZCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucmVtb3ZlQ2xhc3ModGhpcy5ob3ZlckNsYXNzKTtcblx0XHR9XG5cdH1cblxuXHRpc0FjdGl2ZSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5hY3RpdmU7XG5cdH1cblxuXHRzZXRBY3RpdmUoYWN0aXZlOiBib29sZWFuLCB1cGRhdGVQYXJlbnQ6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG5cdFx0dGhpcy5hY3RpdmUgPSBhY3RpdmU7XG5cdFx0dGhpcy51cGRhdGUodXBkYXRlUGFyZW50KTtcblx0fVxuXG5cdHVwZGF0ZSh1cGRhdGVQYXJlbnQ6IGJvb2xlYW4pOiB2b2lkIHtcblx0XHRpZiAodGhpcy5hY3RpdmUpIHtcblx0XHRcdHRoaXMuYWRkQ2xhc3ModGhpcy5hY3RpdmVDbGFzcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucmVtb3ZlQ2xhc3ModGhpcy5hY3RpdmVDbGFzcyk7XG5cdFx0fVxuXHRcdGlmICh1cGRhdGVQYXJlbnQpIHtcblx0XHRcdHRoaXMuc2VsZWN0SW5wdXRGaWVsZC5vbkNoYW5nZSgpO1xuXHRcdH1cblx0fVxuXG5cdGFkZENsYXNzKGNzc0NsYXNzOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMuZWxlbWVudC5oYXNDbGFzcyhjc3NDbGFzcykpIHtcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyhjc3NDbGFzcyk7XG5cdFx0fVxuXHR9XG5cblx0cmVtb3ZlQ2xhc3MoY3NzQ2xhc3M6IHN0cmluZyk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmVsZW1lbnQuaGFzQ2xhc3MoY3NzQ2xhc3MpKSB7XG5cdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoY3NzQ2xhc3MpO1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlcigpOiB2b2lkIHtcblx0XHR0aGlzLmVsZW1lbnQuY3JlYXRlRWwoJ2RpdicsIHt0ZXh0OiB0aGlzLnZhbHVlfSk7XG5cdH1cbn1cbiIsICJpbXBvcnQge0Fic3RyYWN0SW5wdXRGaWVsZH0gZnJvbSAnLi9BYnN0cmFjdElucHV0RmllbGQnO1xuaW1wb3J0IHtTZWxlY3RJbnB1dEZpZWxkRWxlbWVudH0gZnJvbSAnLi9TZWxlY3RJbnB1dEZpZWxkRWxlbWVudCc7XG5pbXBvcnQge01ldGFCaW5kSW50ZXJuYWxFcnJvciwgbW9kfSBmcm9tICcuLi91dGlscy9VdGlscyc7XG5pbXBvcnQge0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkfSBmcm9tICcuLi9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCc7XG5cbmV4cG9ydCBjbGFzcyBTZWxlY3RJbnB1dEZpZWxkIGV4dGVuZHMgQWJzdHJhY3RJbnB1dEZpZWxkIHtcblx0c3RhdGljIGFsbG93SW5saW5lQ29kZUJsb2NrOiBib29sZWFuID0gZmFsc2U7XG5cdGVsZW1lbnRzOiBTZWxlY3RJbnB1dEZpZWxkRWxlbWVudFtdO1xuXHRhbGxvd011bHRpU2VsZWN0OiBib29sZWFuO1xuXHRjb250YWluZXI6IEhUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkO1xuXG5cdGNvbnN0cnVjdG9yKGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgb25WYWx1ZUNoYW5nZTogKHZhbHVlOiBhbnkpID0+ICh2b2lkIHwgUHJvbWlzZTx2b2lkPikpIHtcblx0XHRzdXBlcihpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgb25WYWx1ZUNoYW5nZSk7XG5cdFx0dGhpcy5lbGVtZW50cyA9IFtdO1xuXHRcdHRoaXMuYWxsb3dNdWx0aVNlbGVjdCA9IGZhbHNlO1xuXHR9XG5cblx0Z2V0SHRtbEVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xuXHRcdGlmICghdGhpcy5jb250YWluZXIpIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3NlbGVjdCBpbnB1dCBjb250YWluZXIgaXMgdW5kZWZpbmVkJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuY29udGFpbmVyO1xuXHR9XG5cblx0Z2V0VmFsdWUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5lbGVtZW50cy5maWx0ZXIoeCA9PiB4LmlzQWN0aXZlKCkpLmZpcnN0KCk/LnZhbHVlID8/ICcnO1xuXHR9XG5cblx0c2V0VmFsdWUodmFsdWU6IGFueSk6IHZvaWQge1xuXHRcdGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLmVsZW1lbnRzKSB7XG5cdFx0XHRpZiAodmFsdWUgPT09IGVsZW1lbnQudmFsdWUpIHtcblx0XHRcdFx0ZWxlbWVudC5zZXRBY3RpdmUodHJ1ZSwgZmFsc2UpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbWVudC5zZXRBY3RpdmUoZmFsc2UsIGZhbHNlKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRpc0VxdWFsVmFsdWUodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLmdldFZhbHVlKCkgPT0gdmFsdWU7XG5cdH1cblxuXHRnZXREZWZhdWx0VmFsdWUoKTogYW55IHtcblx0XHRyZXR1cm4gJyc7XG5cdH1cblxuXHRvbkNoYW5nZSgpOiB2b2lkIHtcblx0XHR0aGlzLm9uVmFsdWVDaGFuZ2UodGhpcy5nZXRWYWx1ZSgpKTtcblx0fVxuXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XG5cdFx0Y29udGFpbmVyLmFkZENsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLXNlbGVjdC1pbnB1dC1iZycpO1xuXHRcdHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuXG5cdFx0Y29uc3QgZWxlbWVudFdyYXBwZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHtjbHM6ICdtZXRhLWJpbmQtcGx1Z2luLXNlbGVjdC1pbnB1dC13cmFwcGVyJ30pO1xuXG5cdFx0Y29uc3QgdGl0bGVBcmd1bWVudCA9IHRoaXMuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0QXJndW1lbnQoJ3RpdGxlJyk7XG5cdFx0aWYgKHRpdGxlQXJndW1lbnQpIHtcblx0XHRcdGVsZW1lbnRXcmFwcGVyLmNyZWF0ZUVsKCdkaXYnLCB7dGV4dDogdGl0bGVBcmd1bWVudC52YWx1ZSwgY2xzOiAnbWV0YS1iaW5kLXBsdWdpbi1zZWxlY3QtaW5wdXQtaGVhZGVyJ30pO1xuXHRcdH1cblxuXHRcdGNvbnN0IGVsZW1lbnRBcmd1bWVudHM6IHsgbmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH1bXSA9IHRoaXMuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQuZ2V0QXJndW1lbnRzKCdvcHRpb24nKTtcblxuXHRcdGxldCBpID0gMDtcblx0XHRmb3IgKGNvbnN0IGVsZW1lbnRBcmd1bWVudCBvZiBlbGVtZW50QXJndW1lbnRzKSB7XG5cdFx0XHRjb25zdCBzZWxlY3RJbnB1dEZpZWxkRWxlbWVudCA9IG5ldyBTZWxlY3RJbnB1dEZpZWxkRWxlbWVudChlbGVtZW50QXJndW1lbnQudmFsdWUsIGVsZW1lbnRXcmFwcGVyLCBpLCB0aGlzLCBmYWxzZSk7XG5cblx0XHRcdHRoaXMuZWxlbWVudHMucHVzaChzZWxlY3RJbnB1dEZpZWxkRWxlbWVudCk7XG5cblx0XHRcdHNlbGVjdElucHV0RmllbGRFbGVtZW50LnJlbmRlcigpO1xuXG5cdFx0XHRpICs9IDE7XG5cdFx0fVxuXG5cdFx0dGhpcy5zZXRWYWx1ZSh0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEluaXRpYWxWYWx1ZSgpKTtcblx0fVxuXG5cdGRpc2FibGVBbGxPdGhlckVsZW1lbnRzKGVsZW1lbnRJZDogbnVtYmVyKTogdm9pZCB7XG5cdFx0Zm9yIChjb25zdCBzZWxlY3RNb2RhbEVsZW1lbnQgb2YgdGhpcy5lbGVtZW50cykge1xuXHRcdFx0aWYgKHNlbGVjdE1vZGFsRWxlbWVudC5pZCAhPT0gZWxlbWVudElkKSB7XG5cdFx0XHRcdHNlbGVjdE1vZGFsRWxlbWVudC5zZXRBY3RpdmUoZmFsc2UpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGRlSGlnaGxpZ2h0QWxsT3RoZXJFbGVtZW50cyhlbGVtZW50SWQ6IG51bWJlcik6IHZvaWQge1xuXHRcdGZvciAoY29uc3Qgc2VsZWN0TW9kYWxFbGVtZW50IG9mIHRoaXMuZWxlbWVudHMpIHtcblx0XHRcdGlmIChzZWxlY3RNb2RhbEVsZW1lbnQuaWQgIT09IGVsZW1lbnRJZCkge1xuXHRcdFx0XHRzZWxlY3RNb2RhbEVsZW1lbnQuc2V0SGlnaGxpZ2h0ZWQoZmFsc2UpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGFjdGl2YXRlSGlnaGxpZ2h0ZWQoKTogdm9pZCB7XG5cdFx0Zm9yIChjb25zdCBzZWxlY3RNb2RhbEVsZW1lbnQgb2YgdGhpcy5lbGVtZW50cykge1xuXHRcdFx0aWYgKHNlbGVjdE1vZGFsRWxlbWVudC5pc0hpZ2hsaWdodGVkKCkpIHtcblx0XHRcdFx0c2VsZWN0TW9kYWxFbGVtZW50LnNldEFjdGl2ZSghc2VsZWN0TW9kYWxFbGVtZW50LmlzQWN0aXZlKCkpO1xuXHRcdFx0XHRpZiAoIXRoaXMuYWxsb3dNdWx0aVNlbGVjdCkge1xuXHRcdFx0XHRcdHRoaXMuZGlzYWJsZUFsbE90aGVyRWxlbWVudHMoc2VsZWN0TW9kYWxFbGVtZW50LmlkKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGhpZ2hsaWdodFVwKCk6IHZvaWQge1xuXHRcdGZvciAoY29uc3Qgc2VsZWN0TW9kYWxFbGVtZW50IG9mIHRoaXMuZWxlbWVudHMpIHtcblx0XHRcdGlmIChzZWxlY3RNb2RhbEVsZW1lbnQuaXNIaWdobGlnaHRlZCgpKSB7XG5cdFx0XHRcdHRoaXMuZ2V0UHJldmlvdXNTZWxlY3RNb2RhbEVsZW1lbnQoc2VsZWN0TW9kYWxFbGVtZW50KT8uc2V0SGlnaGxpZ2h0ZWQodHJ1ZSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBub3RoaW5nIGlzIGhpZ2hsaWdodGVkXG5cdFx0dGhpcy5lbGVtZW50cy5hdCgtMSk/LnNldEhpZ2hsaWdodGVkKHRydWUpO1xuXHR9XG5cblx0aGlnaGxpZ2h0RG93bigpOiB2b2lkIHtcblx0XHRmb3IgKGNvbnN0IHNlbGVjdE1vZGFsRWxlbWVudCBvZiB0aGlzLmVsZW1lbnRzKSB7XG5cdFx0XHRpZiAoc2VsZWN0TW9kYWxFbGVtZW50LmlzSGlnaGxpZ2h0ZWQoKSkge1xuXHRcdFx0XHR0aGlzLmdldE5leHRTZWxlY3RNb2RhbEVsZW1lbnQoc2VsZWN0TW9kYWxFbGVtZW50KT8uc2V0SGlnaGxpZ2h0ZWQodHJ1ZSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBub3RoaW5nIGlzIGhpZ2hsaWdodGVkXG5cdFx0dGhpcy5lbGVtZW50cy5hdCgwKT8uc2V0SGlnaGxpZ2h0ZWQodHJ1ZSk7XG5cdH1cblxuXHRwcml2YXRlIGdldE5leHRTZWxlY3RNb2RhbEVsZW1lbnQoZWxlbWVudDogU2VsZWN0SW5wdXRGaWVsZEVsZW1lbnQpOiBTZWxlY3RJbnB1dEZpZWxkRWxlbWVudCB8IHVuZGVmaW5lZCB7XG5cdFx0bGV0IG5leHRJZCA9IGVsZW1lbnQuaWQgKyAxO1xuXHRcdG5leHRJZCA9IG1vZChuZXh0SWQsIHRoaXMuZWxlbWVudHMubGVuZ3RoKTtcblxuXHRcdHJldHVybiB0aGlzLmVsZW1lbnRzLmZpbHRlcih4ID0+IHguaWQgPT09IG5leHRJZCkuYXQoMCk7XG5cdH1cblxuXHRwcml2YXRlIGdldFByZXZpb3VzU2VsZWN0TW9kYWxFbGVtZW50KGVsZW1lbnQ6IFNlbGVjdElucHV0RmllbGRFbGVtZW50KTogU2VsZWN0SW5wdXRGaWVsZEVsZW1lbnQgfCB1bmRlZmluZWQge1xuXHRcdGxldCBuZXh0SWQgPSBlbGVtZW50LmlkIC0gMTtcblx0XHRuZXh0SWQgPSBtb2QobmV4dElkLCB0aGlzLmVsZW1lbnRzLmxlbmd0aCk7XG5cblx0XHRyZXR1cm4gdGhpcy5lbGVtZW50cy5maWx0ZXIoeCA9PiB4LmlkID09PSBuZXh0SWQpLmF0KDApO1xuXHR9XG59XG4iLCAiaW1wb3J0IHtTZWxlY3RJbnB1dEZpZWxkfSBmcm9tICcuL1NlbGVjdElucHV0RmllbGQnO1xyXG5pbXBvcnQge0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkfSBmcm9tICcuLi9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCc7XHJcbmltcG9ydCB7YXJyYXlFcXVhbHN9IGZyb20gJy4uL3V0aWxzL1V0aWxzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBNdWx0aVNlbGVjdElucHV0RmllbGQgZXh0ZW5kcyBTZWxlY3RJbnB1dEZpZWxkIHtcclxuXHJcblx0Y29uc3RydWN0b3IoaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBvblZhbHVlQ2hhbmdlOiAodmFsdWU6IGFueSkgPT4gKHZvaWQgfCBQcm9taXNlPHZvaWQ+KSkge1xyXG5cdFx0c3VwZXIoaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIG9uVmFsdWVDaGFuZ2UpO1xyXG5cdFx0dGhpcy5hbGxvd011bHRpU2VsZWN0ID0gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdGdldFZhbHVlKCk6IGFueSB7XHJcblx0XHRyZXR1cm4gdGhpcy5lbGVtZW50cy5maWx0ZXIoeCA9PiB4LmlzQWN0aXZlKCkpLm1hcCh4ID0+IHgudmFsdWUpO1xyXG5cdH1cclxuXHJcblx0c2V0VmFsdWUodmFsdWU6IHN0cmluZ1tdKTogdm9pZCB7XHJcblx0XHRpZiAodmFsdWUubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLmVsZW1lbnRzKSB7XHJcblx0XHRcdFx0ZWxlbWVudC5zZXRBY3RpdmUoZmFsc2UsIGZhbHNlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0ZWxlbWVudExvb3AgOiBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy5lbGVtZW50cykge1xyXG5cdFx0XHRmb3IgKGNvbnN0IHZhbHVlRWxlbWVudCBvZiB2YWx1ZSkge1xyXG5cdFx0XHRcdGlmICh2YWx1ZUVsZW1lbnQgPT09IGVsZW1lbnQudmFsdWUpIHtcclxuXHRcdFx0XHRcdGVsZW1lbnQuc2V0QWN0aXZlKHRydWUsIGZhbHNlKTtcclxuXHRcdFx0XHRcdGNvbnRpbnVlIGVsZW1lbnRMb29wO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRlbGVtZW50LnNldEFjdGl2ZShmYWxzZSwgZmFsc2UpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aXNFcXVhbFZhbHVlKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcclxuXHRcdGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBhcnJheUVxdWFscyh0aGlzLmdldFZhbHVlKCksIHZhbHVlKTtcclxuXHR9XHJcblxyXG5cdGdldERlZmF1bHRWYWx1ZSgpOiBzdHJpbmdbXSB7XHJcblx0XHRyZXR1cm4gW107XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQge0Fic3RyYWN0SW5wdXRGaWVsZH0gZnJvbSAnLi9BYnN0cmFjdElucHV0RmllbGQnO1xuaW1wb3J0IHtEcm9wZG93bkNvbXBvbmVudCwgVGV4dENvbXBvbmVudH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHtJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZH0gZnJvbSAnLi4vSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQnO1xuaW1wb3J0IHtEYXRlLCBEYXRlRm9ybWF0LCBEYXRlUGFyc2VyfSBmcm9tICcuLi9wYXJzZXJzL0RhdGVQYXJzZXInO1xuaW1wb3J0IHtNZXRhQmluZEludGVybmFsRXJyb3J9IGZyb20gJy4uL3V0aWxzL1V0aWxzJztcblxuZXhwb3J0IGNsYXNzIERhdGVJbnB1dEZpZWxkIGV4dGVuZHMgQWJzdHJhY3RJbnB1dEZpZWxkIHtcblx0Y29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCB8IHVuZGVmaW5lZDtcblx0ZGF0ZTogRGF0ZTtcblxuXHRtb250aHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG5cdFx0JzEnOiAnSmFudWFyeScsXG5cdFx0JzInOiAnRmVicnVhcnknLFxuXHRcdCczJzogJ01hcmNoJyxcblx0XHQnNCc6ICdBcHJpbCcsXG5cdFx0JzUnOiAnTWF5Jyxcblx0XHQnNic6ICdKdW5lJyxcblx0XHQnNyc6ICdKdWx5Jyxcblx0XHQnOCc6ICdBdWd1c3QnLFxuXHRcdCc5JzogJ1NlcHRlbWJlcicsXG5cdFx0JzEwJzogJ09jdG9iZXInLFxuXHRcdCcxMSc6ICdOb3ZlbWJlcicsXG5cdFx0JzEyJzogJ0RlY2VtYmVyJyxcblx0fTtcblx0ZGF5czogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcblxuXHRtb250aENvbXBvbmVudDogRHJvcGRvd25Db21wb25lbnQgfCB1bmRlZmluZWQ7XG5cdGRheUNvbXBvbmVudDogRHJvcGRvd25Db21wb25lbnQgfCB1bmRlZmluZWQ7XG5cdHllYXJDb21wb25lbnQ6IFRleHRDb21wb25lbnQgfCB1bmRlZmluZWQ7XG5cblxuXHRjb25zdHJ1Y3RvcihpbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZDogSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIG9uVmFsdWVDaGFuZ2U6ICh2YWx1ZTogYW55KSA9PiAodm9pZCB8IFByb21pc2U8dm9pZD4pKSB7XG5cdFx0c3VwZXIoaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIG9uVmFsdWVDaGFuZ2UpO1xuXG5cdFx0dGhpcy5kYXRlID0gRGF0ZVBhcnNlci5nZXREZWZhdWx0RGF0ZSgpO1xuXG5cdFx0dGhpcy5kYXlzID0ge307XG5cdFx0Zm9yIChsZXQgaSA9IDE7IGkgPD0gMzE7IGkrKykge1xuXHRcdFx0dGhpcy5kYXlzW2kudG9TdHJpbmcoKV0gPSBpLnRvU3RyaW5nKCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIGdldEh0bWxFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcblx0XHRpZiAoIXRoaXMuY29udGFpbmVyKSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCd0b2dnbGUgaW5wdXQgY29udGFpbmVyIGlzIHVuZGVmaW5lZCcpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmNvbnRhaW5lcjtcblx0fVxuXG5cdHB1YmxpYyBnZXRWYWx1ZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiBEYXRlUGFyc2VyLnN0cmluZ2lmeSh0aGlzLmRhdGUpO1xuXHR9XG5cblx0cHVibGljIHNldFZhbHVlKHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMubW9udGhDb21wb25lbnQpIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ2RhdGUgaW5wdXQgbW9udGggY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xuXHRcdH1cblx0XHRpZiAoIXRoaXMuZGF5Q29tcG9uZW50KSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdkYXRlIGlucHV0IGRheSBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XG5cdFx0fVxuXHRcdGlmICghdGhpcy55ZWFyQ29tcG9uZW50KSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdkYXRlIGlucHV0IGhvdXIgY29tcG9uZW50IGlzIHVuZGVmaW5lZCcpO1xuXHRcdH1cblxuXHRcdHRoaXMuZGF0ZSA9IERhdGVQYXJzZXIucGFyc2UodmFsdWUpID8/IERhdGVQYXJzZXIuZ2V0RGVmYXVsdERhdGUoKTtcblx0XHQvLyBjb25zb2xlLmxvZyh0aGlzLmRhdGUpO1xuXHRcdHRoaXMubW9udGhDb21wb25lbnQuc2V0VmFsdWUodGhpcy5kYXRlLmdldE1vbnRoKCkudG9TdHJpbmcoKSk7XG5cdFx0dGhpcy5kYXlDb21wb25lbnQuc2V0VmFsdWUodGhpcy5kYXRlLmdldERheSgpLnRvU3RyaW5nKCkpO1xuXHRcdHRoaXMueWVhckNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmRhdGUuZ2V0WWVhcigpLnRvU3RyaW5nKCkpO1xuXHR9XG5cblx0cHVibGljIGlzRXF1YWxWYWx1ZSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHZhbHVlID09IHRoaXMuZ2V0VmFsdWUoKTtcblx0fVxuXG5cdHB1YmxpYyBnZXREZWZhdWx0VmFsdWUoKTogYW55IHtcblx0XHRyZXR1cm4gRGF0ZVBhcnNlci5zdHJpbmdpZnkoRGF0ZVBhcnNlci5nZXREZWZhdWx0RGF0ZSgpKTtcblx0fVxuXG5cdHB1YmxpYyByZW5kZXIoY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCk6IHZvaWQge1xuXHRcdHRoaXMuZGF0ZSA9IERhdGVQYXJzZXIucGFyc2UodGhpcy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZC5nZXRJbml0aWFsVmFsdWUoKSkgPz8gRGF0ZVBhcnNlci5nZXREZWZhdWx0RGF0ZSgpO1xuXG5cdFx0Y29udGFpbmVyLnJlbW92ZUNsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLWlucHV0LXdyYXBwZXInKTtcblx0XHRjb250YWluZXIuYWRkQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4tZmxleC1pbnB1dC13cmFwcGVyJywgJ21ldGEtYmluZC1wbHVnaW4taW5wdXQtZWxlbWVudC1ncm91cCcpO1xuXG5cdFx0aWYgKERhdGVQYXJzZXIuZGF0ZUZvcm1hdCA9PT0gRGF0ZUZvcm1hdC5FVSkge1xuXHRcdFx0dGhpcy5kYXlDb21wb25lbnQgPSBuZXcgRHJvcGRvd25Db21wb25lbnQoY29udGFpbmVyKTtcblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50LmFkZE9wdGlvbnModGhpcy5kYXlzKTtcblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50LnNldFZhbHVlKHRoaXMuZGF0ZS5nZXREYXkoKS50b1N0cmluZygpKTtcblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50Lm9uQ2hhbmdlKHRoaXMub25EYXlDaGFuZ2UuYmluZCh0aGlzKSk7XG5cblx0XHRcdHRoaXMubW9udGhDb21wb25lbnQgPSBuZXcgRHJvcGRvd25Db21wb25lbnQoY29udGFpbmVyKTtcblx0XHRcdHRoaXMubW9udGhDb21wb25lbnQuYWRkT3B0aW9ucyh0aGlzLm1vbnRocyk7XG5cdFx0XHR0aGlzLm1vbnRoQ29tcG9uZW50LnNldFZhbHVlKHRoaXMuZGF0ZS5nZXRNb250aCgpLnRvU3RyaW5nKCkpO1xuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5vbkNoYW5nZSh0aGlzLm9uTW9udGhDaGFuZ2UuYmluZCh0aGlzKSk7XG5cblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50LnNlbGVjdEVsLmFkZENsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLWlucHV0LWVsZW1lbnQtZ3JvdXAtZWxlbWVudCcpO1xuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5zZWxlY3RFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC1lbGVtZW50LWdyb3VwLWVsZW1lbnQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudCA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250YWluZXIpO1xuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5hZGRPcHRpb25zKHRoaXMubW9udGhzKTtcblx0XHRcdHRoaXMubW9udGhDb21wb25lbnQuc2V0VmFsdWUodGhpcy5kYXRlLmdldE1vbnRoKCkudG9TdHJpbmcoKSk7XG5cdFx0XHR0aGlzLm1vbnRoQ29tcG9uZW50Lm9uQ2hhbmdlKHRoaXMub25Nb250aENoYW5nZS5iaW5kKHRoaXMpKTtcblxuXHRcdFx0dGhpcy5kYXlDb21wb25lbnQgPSBuZXcgRHJvcGRvd25Db21wb25lbnQoY29udGFpbmVyKTtcblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50LmFkZE9wdGlvbnModGhpcy5kYXlzKTtcblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50LnNldFZhbHVlKHRoaXMuZGF0ZS5nZXREYXkoKS50b1N0cmluZygpKTtcblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50Lm9uQ2hhbmdlKHRoaXMub25EYXlDaGFuZ2UuYmluZCh0aGlzKSk7XG5cblx0XHRcdHRoaXMuZGF5Q29tcG9uZW50LnNlbGVjdEVsLmFkZENsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLWlucHV0LWVsZW1lbnQtZ3JvdXAtZWxlbWVudCcpO1xuXHRcdFx0dGhpcy5tb250aENvbXBvbmVudC5zZWxlY3RFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC1lbGVtZW50LWdyb3VwLWVsZW1lbnQnKTtcblx0XHR9XG5cblx0XHR0aGlzLnllYXJDb21wb25lbnQgPSBuZXcgVGV4dENvbXBvbmVudChjb250YWluZXIpO1xuXHRcdHRoaXMueWVhckNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLmRhdGUuZ2V0WWVhcigpLnRvU3RyaW5nKCkpO1xuXHRcdHRoaXMueWVhckNvbXBvbmVudC5vbkNoYW5nZSh0aGlzLm9uWWVhckNoYW5nZS5iaW5kKHRoaXMpKTtcblxuXHRcdHRoaXMueWVhckNvbXBvbmVudC5pbnB1dEVsLmFkZENsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLWRhdGUtaW5wdXQteWVhci1pbnB1dCcpO1xuXHRcdHRoaXMueWVhckNvbXBvbmVudC5pbnB1dEVsLmFkZENsYXNzKCdtZXRhLWJpbmQtcGx1Z2luLWlucHV0LWVsZW1lbnQtZ3JvdXAtZWxlbWVudCcpO1xuXHRcdHRoaXMueWVhckNvbXBvbmVudC5pbnB1dEVsLnR5cGUgPSAnbnVtYmVyJztcblx0XHR0aGlzLnllYXJDb21wb25lbnQuaW5wdXRFbC5tYXggPSAnOTk5OSc7XG5cblx0XHR0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcblx0fVxuXG5cdHByaXZhdGUgb25Nb250aENoYW5nZSh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XG5cdFx0Ly8gY29uc29sZS5sb2codmFsdWUpO1xuXHRcdHRoaXMuZGF0ZS5zZXRNb250aEZyb21TdHJpbmcodmFsdWUpO1xuXHRcdHRoaXMub25WYWx1ZUNoYW5nZSh0aGlzLmdldFZhbHVlKCkpO1xuXHR9XG5cblx0cHJpdmF0ZSBvbkRheUNoYW5nZSh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XG5cdFx0dGhpcy5kYXRlLnNldERheUZyb21TdHJpbmcodmFsdWUpO1xuXHRcdHRoaXMub25WYWx1ZUNoYW5nZSh0aGlzLmdldFZhbHVlKCkpO1xuXHR9XG5cblx0cHJpdmF0ZSBvblllYXJDaGFuZ2UodmFsdWU6IHN0cmluZyk6IHZvaWQge1xuXHRcdHRoaXMuZGF0ZS5zZXRZZWFyRnJvbVN0cmluZyh2YWx1ZSk7XG5cdFx0dGhpcy5vblZhbHVlQ2hhbmdlKHRoaXMuZ2V0VmFsdWUoKSk7XG5cdH1cblxufVxuIiwgImltcG9ydCB7QWJzdHJhY3RJbnB1dEZpZWxkfSBmcm9tICcuL0Fic3RyYWN0SW5wdXRGaWVsZCc7XG5pbXBvcnQge0Ryb3Bkb3duQ29tcG9uZW50fSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQge0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkfSBmcm9tICcuLi9JbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCc7XG5pbXBvcnQge1RpbWUsIFRpbWVQYXJzZXJ9IGZyb20gJy4uL3BhcnNlcnMvVGltZVBhcnNlcic7XG5pbXBvcnQge01ldGFCaW5kSW50ZXJuYWxFcnJvcn0gZnJvbSAnLi4vdXRpbHMvVXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgVGltZUlucHV0RmllbGQgZXh0ZW5kcyBBYnN0cmFjdElucHV0RmllbGQge1xuXHRjb250YWluZXI6IEhUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkO1xuXHR0aW1lOiBUaW1lO1xuXG5cdGhvdXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuXHRtaW51dGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuXG5cdGhvdXJDb21wb25lbnQ6IERyb3Bkb3duQ29tcG9uZW50IHwgdW5kZWZpbmVkO1xuXHRtaW51dGVDb21wb25lbnQ6IERyb3Bkb3duQ29tcG9uZW50IHwgdW5kZWZpbmVkO1xuXG5cblx0Y29uc3RydWN0b3IoaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQ6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBvblZhbHVlQ2hhbmdlOiAodmFsdWU6IGFueSkgPT4gKHZvaWQgfCBQcm9taXNlPHZvaWQ+KSkge1xuXHRcdHN1cGVyKGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBvblZhbHVlQ2hhbmdlKTtcblxuXHRcdHRoaXMudGltZSA9IFRpbWVQYXJzZXIuZ2V0RGVmYXVsdFRpbWUoKTtcblxuXHRcdHRoaXMuaG91cnMgPSB7fTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8PSAyNDsgaSsrKSB7XG5cdFx0XHR0aGlzLmhvdXJzW2kudG9TdHJpbmcoKV0gPSBpLnRvU3RyaW5nKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5taW51dGVzID0ge307XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPD0gNTk7IGkrKykge1xuXHRcdFx0dGhpcy5taW51dGVzW2kudG9TdHJpbmcoKV0gPSBpLnRvU3RyaW5nKCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIGdldEh0bWxFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcblx0XHRpZiAoIXRoaXMuY29udGFpbmVyKSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCd0aW1lIGlucHV0IGNvbnRhaW5lciBpcyB1bmRlZmluZWQnKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5jb250YWluZXI7XG5cdH1cblxuXHRwdWJsaWMgZ2V0VmFsdWUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gVGltZVBhcnNlci5zdHJpbmdpZnkodGhpcy50aW1lKTtcblx0fVxuXG5cdHB1YmxpYyBzZXRWYWx1ZSh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLmhvdXJDb21wb25lbnQpIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3RpbWUgaW5wdXQgaG91ciBjb21wb25lbnQgaXMgdW5kZWZpbmVkJyk7XG5cdFx0fVxuXHRcdGlmICghdGhpcy5taW51dGVDb21wb25lbnQpIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3RpbWUgaW5wdXQgbWludXRlIGNvbXBvbmVudCBpcyB1bmRlZmluZWQnKTtcblx0XHR9XG5cblx0XHR0aGlzLnRpbWUgPSBUaW1lUGFyc2VyLnBhcnNlKHZhbHVlKSA/PyBUaW1lUGFyc2VyLmdldERlZmF1bHRUaW1lKCk7XG5cdFx0Ly8gY29uc29sZS5sb2codGhpcy50aW1lKTtcblx0XHR0aGlzLmhvdXJDb21wb25lbnQuc2V0VmFsdWUodGhpcy50aW1lLmdldEhvdXIoKS50b1N0cmluZygpKTtcblx0XHR0aGlzLm1pbnV0ZUNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLnRpbWUuZ2V0TWludXRlKCkudG9TdHJpbmcoKSk7XG5cdH1cblxuXHRwdWJsaWMgaXNFcXVhbFZhbHVlKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdmFsdWUgPT0gdGhpcy5nZXRWYWx1ZSgpO1xuXHR9XG5cblx0cHVibGljIGdldERlZmF1bHRWYWx1ZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiBUaW1lUGFyc2VyLnN0cmluZ2lmeShUaW1lUGFyc2VyLmdldERlZmF1bHRUaW1lKCkpO1xuXHR9XG5cblx0cHVibGljIHJlbmRlcihjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XG5cdFx0dGhpcy50aW1lID0gVGltZVBhcnNlci5wYXJzZSh0aGlzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLmdldEluaXRpYWxWYWx1ZSgpKSA/PyBUaW1lUGFyc2VyLmdldERlZmF1bHRUaW1lKCk7XG5cblx0XHRjb250YWluZXIucmVtb3ZlQ2xhc3MoJ21ldGEtYmluZC1wbHVnaW4taW5wdXQtd3JhcHBlcicpO1xuXHRcdGNvbnRhaW5lci5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1mbGV4LWlucHV0LXdyYXBwZXInLCAnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC1lbGVtZW50LWdyb3VwJyk7XG5cblx0XHR0aGlzLmhvdXJDb21wb25lbnQgPSBuZXcgRHJvcGRvd25Db21wb25lbnQoY29udGFpbmVyKTtcblx0XHR0aGlzLmhvdXJDb21wb25lbnQuYWRkT3B0aW9ucyh0aGlzLmhvdXJzKTtcblx0XHR0aGlzLmhvdXJDb21wb25lbnQuc2V0VmFsdWUodGhpcy50aW1lLmdldEhvdXIoKS50b1N0cmluZygpKTtcblx0XHR0aGlzLmhvdXJDb21wb25lbnQub25DaGFuZ2UodGhpcy5vbkhvdXJDaGFuZ2UuYmluZCh0aGlzKSk7XG5cblx0XHR0aGlzLm1pbnV0ZUNvbXBvbmVudCA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250YWluZXIpO1xuXHRcdHRoaXMubWludXRlQ29tcG9uZW50LmFkZE9wdGlvbnModGhpcy5taW51dGVzKTtcblx0XHR0aGlzLm1pbnV0ZUNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLnRpbWUuZ2V0TWludXRlKCkudG9TdHJpbmcoKSk7XG5cdFx0dGhpcy5taW51dGVDb21wb25lbnQub25DaGFuZ2UodGhpcy5vbk1pbnV0ZUNoYW5nZS5iaW5kKHRoaXMpKTtcblxuXHRcdHRoaXMuaG91ckNvbXBvbmVudC5zZWxlY3RFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC1lbGVtZW50LWdyb3VwLWVsZW1lbnQnKTtcblx0XHR0aGlzLm1pbnV0ZUNvbXBvbmVudC5zZWxlY3RFbC5hZGRDbGFzcygnbWV0YS1iaW5kLXBsdWdpbi1pbnB1dC1lbGVtZW50LWdyb3VwLWVsZW1lbnQnKTtcblxuXHRcdHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuXHR9XG5cblx0cHJpdmF0ZSBvbkhvdXJDaGFuZ2UodmFsdWU6IHN0cmluZyk6IHZvaWQge1xuXHRcdHRoaXMudGltZS5zZXRIb3VyRnJvbVN0cmluZyh2YWx1ZSk7XG5cdFx0dGhpcy5vblZhbHVlQ2hhbmdlKHRoaXMuZ2V0VmFsdWUoKSk7XG5cdH1cblxuXHRwcml2YXRlIG9uTWludXRlQ2hhbmdlKHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcblx0XHR0aGlzLnRpbWUuc2V0TWludXRlRnJvbVN0cmluZyh2YWx1ZSk7XG5cdFx0dGhpcy5vblZhbHVlQ2hhbmdlKHRoaXMuZ2V0VmFsdWUoKSk7XG5cdH1cbn1cbiIsICJleHBvcnQgY2xhc3MgVGltZSB7XG5cdHByaXZhdGUgX2hvdXI6IG51bWJlcjtcblx0cHJpdmF0ZSBfbWludXRlOiBudW1iZXI7XG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5faG91ciA9IFRpbWVQYXJzZXIuZ2V0RGVmYXVsdEhvdXIoKTtcblx0XHR0aGlzLl9taW51dGUgPSBUaW1lUGFyc2VyLmdldERlZmF1bHRIb3VyKCk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0SG91cigpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9ob3VyO1xuXHR9XG5cblx0cHVibGljIHNldEhvdXIodmFsdWU6IG51bWJlcik6IHZvaWQge1xuXHRcdGlmICh2YWx1ZSA8IDAgfHwgdmFsdWUgPiAyNCkge1xuXHRcdFx0dGhpcy5faG91ciA9IFRpbWVQYXJzZXIuZ2V0RGVmYXVsdEhvdXIoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5faG91ciA9IHZhbHVlO1xuXHR9XG5cblx0cHVibGljIGdldE1pbnV0ZSgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9taW51dGU7XG5cdH1cblxuXHRwdWJsaWMgc2V0TWludXRlKHZhbHVlOiBudW1iZXIpOiB2b2lkICB7XG5cdFx0aWYgKHZhbHVlIDwgMCB8fCB2YWx1ZSA+IDU5KSB7XG5cdFx0XHR0aGlzLl9taW51dGUgPSBUaW1lUGFyc2VyLmdldERlZmF1bHRNaW51dGUoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fbWludXRlID0gdmFsdWU7XG5cdH1cblxuXHRwdWJsaWMgZ2V0VW5pZm9ybUhvdXIoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gKCcwMCcgKyB0aGlzLmdldEhvdXIoKS50b1N0cmluZygpKS5zbGljZSgtMik7XG5cdH1cblxuXHRwdWJsaWMgZ2V0VW5pZm9ybU1pbnV0ZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiAoJzAwJyArIHRoaXMuZ2V0TWludXRlKCkudG9TdHJpbmcoKSkuc2xpY2UoLTIpO1xuXHR9XG5cblx0cHVibGljIHNldEhvdXJGcm9tU3RyaW5nKHN0cjogc3RyaW5nKTogdm9pZCAge1xuXHRcdGNvbnN0IHYgPSBOdW1iZXIucGFyc2VJbnQoc3RyKTtcblx0XHR0aGlzLnNldEhvdXIoTnVtYmVyLmlzTmFOKHYpID8gVGltZVBhcnNlci5nZXREZWZhdWx0SG91cigpIDogdik7XG5cdH1cblxuXHRwdWJsaWMgc2V0TWludXRlRnJvbVN0cmluZyhzdHI6IHN0cmluZyk6IHZvaWQgIHtcblx0XHRjb25zdCB2ID0gTnVtYmVyLnBhcnNlSW50KHN0cik7XG5cdFx0dGhpcy5zZXRNaW51dGUoTnVtYmVyLmlzTmFOKHYpID8gVGltZVBhcnNlci5nZXREZWZhdWx0TWludXRlKCkgOiB2KTtcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgVGltZVBhcnNlciB7XG5cdHB1YmxpYyBzdGF0aWMgcGFyc2UodGltZVN0cmluZzogc3RyaW5nKTogVGltZSB8IHVuZGVmaW5lZCB7XG5cdFx0Y29uc3QgdGltZTogVGltZSA9IFRpbWVQYXJzZXIuZ2V0RGVmYXVsdFRpbWUoKTtcblxuXHRcdGNvbnN0IHRpbWVQYXJ0cyA9IHRpbWVTdHJpbmcuc3BsaXQoJzonKTtcblx0XHRpZiAodGltZVBhcnRzLmxlbmd0aCAhPT0gMikge1xuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHR0aW1lLnNldEhvdXJGcm9tU3RyaW5nKHRpbWVQYXJ0c1swXSk7XG5cdFx0dGltZS5zZXRNaW51dGVGcm9tU3RyaW5nKHRpbWVQYXJ0c1sxXSk7XG5cblx0XHRyZXR1cm4gdGltZTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgc3RyaW5naWZ5KHRpbWU6IFRpbWUpOiBzdHJpbmcge1xuXHRcdHJldHVybiBgJHt0aW1lLmdldFVuaWZvcm1Ib3VyKCl9OiR7dGltZS5nZXRVbmlmb3JtTWludXRlKCl9YDtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgZ2V0RGVmYXVsdFRpbWUoKTogVGltZSB7XG5cdFx0cmV0dXJuIG5ldyBUaW1lKCk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIGdldERlZmF1bHRIb3VyKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIDA7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIGdldERlZmF1bHRNaW51dGUoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gMDtcblx0fVxufVxuIiwgImltcG9ydCB7ZXF1YWxPckluY2x1ZGVzLCBpc0ZhbHN5LCBNZXRhQmluZEludGVybmFsRXJyb3J9IGZyb20gJy4vVXRpbHMnO1xuXG5cbmV4cG9ydCBjbGFzcyBFbmNsb3NpbmdQYWlyIHtcblx0cmVhZG9ubHkgb3BlbmluZ0VxdWFsc0Nsb3Npbmc6IGJvb2xlYW47XG5cdHByaXZhdGUgcmVhZG9ubHkgX29wZW5pbmdTdHJpbmc6IHN0cmluZztcblx0cHJpdmF0ZSByZWFkb25seSBfY2xvc2luZ1N0cmluZzogc3RyaW5nO1xuXG5cdGNvbnN0cnVjdG9yKG9wZW5pbmdTdHJpbmc6IHN0cmluZywgY2xvc2luZ1N0cmluZz86IHN0cmluZykge1xuXHRcdGlmIChpc0ZhbHN5KG9wZW5pbmdTdHJpbmcpKSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdvcGVuaW5nIHN0cmluZyBtdXN0IG5vdCBiZSBlbXB0eScpO1xuXHRcdH1cblxuXHRcdHRoaXMub3BlbmluZ0VxdWFsc0Nsb3NpbmcgPSBpc0ZhbHN5KGNsb3NpbmdTdHJpbmcpIHx8IG9wZW5pbmdTdHJpbmcgPT09IGNsb3NpbmdTdHJpbmc7XG5cblx0XHRpZiAodGhpcy5vcGVuaW5nRXF1YWxzQ2xvc2luZykge1xuXHRcdFx0dGhpcy5fb3BlbmluZ1N0cmluZyA9IG9wZW5pbmdTdHJpbmc7XG5cdFx0XHR0aGlzLl9jbG9zaW5nU3RyaW5nID0gb3BlbmluZ1N0cmluZztcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5fb3BlbmluZ1N0cmluZyA9IG9wZW5pbmdTdHJpbmc7XG5cdFx0XHQvLyBAdHMtaWdub3JlIHRoaXMgY2FuIG5vdCBiZSB1bmRlZmluZWQgaGVyZVxuXHRcdFx0dGhpcy5fY2xvc2luZ1N0cmluZyA9IGNsb3NpbmdTdHJpbmc7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIGdldCBvcGVuaW5nU3RyaW5nKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX29wZW5pbmdTdHJpbmc7XG5cdH1cblxuXHRwdWJsaWMgZ2V0IGNsb3NpbmdTdHJpbmcoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5vcGVuaW5nRXF1YWxzQ2xvc2luZyA/IHRoaXMuX29wZW5pbmdTdHJpbmcgOiB0aGlzLl9jbG9zaW5nU3RyaW5nO1xuXHR9XG5cblx0b3ZlcmxhcHMob3RoZXI6IEVuY2xvc2luZ1BhaXIpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gZXF1YWxPckluY2x1ZGVzKHRoaXMub3BlbmluZ1N0cmluZywgb3RoZXIub3BlbmluZ1N0cmluZykgfHxcblx0XHRcdGVxdWFsT3JJbmNsdWRlcyh0aGlzLm9wZW5pbmdTdHJpbmcsIG90aGVyLmNsb3NpbmdTdHJpbmcpIHx8XG5cdFx0XHRlcXVhbE9ySW5jbHVkZXModGhpcy5jbG9zaW5nU3RyaW5nLCBvdGhlci5vcGVuaW5nU3RyaW5nKSB8fFxuXHRcdFx0ZXF1YWxPckluY2x1ZGVzKHRoaXMuY2xvc2luZ1N0cmluZywgb3RoZXIuY2xvc2luZ1N0cmluZyk7XG5cdH1cblxuXHRlcXVhbHMob3RoZXI6IEVuY2xvc2luZ1BhaXIpOiBib29sZWFuIHtcblx0XHRpZiAoaXNGYWxzeShvdGhlcikpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0cmV0dXJuICh0aGlzLm9wZW5pbmdTdHJpbmcgPT09IG90aGVyLm9wZW5pbmdTdHJpbmcpICYmICh0aGlzLmNsb3NpbmdTdHJpbmcgPT09IG90aGVyLmNsb3NpbmdTdHJpbmcpO1xuXHR9XG5cblx0dG9TdHJpbmcoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcyk7XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIFBhcnNlclV0aWxzIHtcblxuXHQvLyBUT0RPOiByZW5hbWUgc3R1ZmZcblx0c3RhdGljIHNwbGl0KHN0cjogc3RyaW5nLCBzZXBhcmF0b3I6IHN0cmluZywgaWdub3JlPzogRW5jbG9zaW5nUGFpcik6IHN0cmluZ1tdIHtcblx0XHRpZiAoIXN0cikge1xuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignc3RyaW5nIG11c3Qgbm90IGJlIGVtcHR5Jyk7XG5cdFx0fVxuXHRcdGlmICghc2VwYXJhdG9yKSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdzZXBhcmF0b3IgbXVzdCBub3QgYmUgZW1wdHknKTtcblx0XHR9XG5cblx0XHRsZXQgc3ViU3RyOiBzdHJpbmcgPSAnJztcblx0XHRjb25zdCBzdWJTdHJpbmdzOiBzdHJpbmdbXSA9IFtdO1xuXG5cdFx0aWYgKGlnbm9yZSkge1xuXHRcdFx0bGV0IHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCA9IFBhcnNlclV0aWxzLm51bWJlck9mT2NjdXJyZW5jZXMoc3RyLCBpZ25vcmUub3BlbmluZ1N0cmluZyk7XG5cdFx0XHRsZXQgcmVtYWluaW5nQ2xvc2luZ1N0cmluZ0NvdW50ID0gUGFyc2VyVXRpbHMubnVtYmVyT2ZPY2N1cnJlbmNlcyhzdHIsIGlnbm9yZS5jbG9zaW5nU3RyaW5nKTtcblxuXHRcdFx0bGV0IGVuY2xvc2luZ0xldmVsOiBudW1iZXIgPSAwO1xuXG5cdFx0XHRzdHJMb29wIDogZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0Ly8gaWdub3JlIHNwZWNpZmllZFxuXHRcdFx0XHRpZiAoZW5jbG9zaW5nTGV2ZWwgPT09IDAgJiYgUGFyc2VyVXRpbHMuaXNTdHJpbmdBdChzdHIsIHNlcGFyYXRvciwgaSkpIHtcblx0XHRcdFx0XHRzdWJTdHJpbmdzLnB1c2goc3ViU3RyKTtcblx0XHRcdFx0XHRzdWJTdHIgPSAnJztcblx0XHRcdFx0XHRpICs9IHNlcGFyYXRvci5sZW5ndGggLSAxO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoaWdub3JlLm9wZW5pbmdFcXVhbHNDbG9zaW5nKSB7XG5cdFx0XHRcdFx0aWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBpZ25vcmUub3BlbmluZ1N0cmluZywgaSkpIHtcblx0XHRcdFx0XHRcdGlmIChlbmNsb3NpbmdMZXZlbCAlIDIgPT09IDAgJiYgcmVtYWluaW5nT3BlbmluZ1N0cmluZ0NvdW50ID09PSAxKSB7XG5cdFx0XHRcdFx0XHRcdC8vIG5vdCBpbiBhIHBhcnQgdGhhdCBzaG91bGQgYmUgcmVtb3ZlZCBhbmQgdGhlcmUgaXMgc3RpbGwgYW4gb3BlbmluZyBzdHJpbmcgbGVmdCwgc28gd2UgaWdub3JlIGl0XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGVuY2xvc2luZ0xldmVsICUgMiA9PT0gMCkge1xuXHRcdFx0XHRcdFx0XHQvLyBvcGVuaW5nIHN0cmluZ1xuXHRcdFx0XHRcdFx0XHRlbmNsb3NpbmdMZXZlbCArPSAxO1xuXG5cdFx0XHRcdFx0XHRcdC8vIGNvcHkgdGhlIG9wZW5pbmcgc3RyaW5nXG5cdFx0XHRcdFx0XHRcdGZvciAobGV0IGogPSAxOyBqIDwgaWdub3JlLm9wZW5pbmdTdHJpbmcubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRcdFx0XHRpICs9IDE7XG5cdFx0XHRcdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcblxuXHRcdFx0XHRcdFx0XHRcdGlmIChpID49IHN0ci5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrIHN0ckxvb3A7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBjbG9zaW5nIHN0cmluZ1xuXHRcdFx0XHRcdFx0XHRlbmNsb3NpbmdMZXZlbCAtPSAxO1xuXG5cdFx0XHRcdFx0XHRcdC8vIGNvcHkgdGhlIGNsb3Npbmcgc3RyaW5nXG5cdFx0XHRcdFx0XHRcdGZvciAobGV0IGogPSAxOyBqIDwgaWdub3JlLmNsb3NpbmdTdHJpbmcubGVuZ3RoOyBqKyspIHsgLy8gKG9wZW5pbmcgYW5kIGNsb3Npbmcgc3RyaW5nIGFyZSB0aGUgc2FtZSlcblx0XHRcdFx0XHRcdFx0XHRpICs9IDE7XG5cdFx0XHRcdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcblxuXHRcdFx0XHRcdFx0XHRcdGlmIChpID49IHN0ci5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrIHN0ckxvb3A7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgLT0gMTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBpZ25vcmUub3BlbmluZ1N0cmluZywgaSkpIHtcblx0XHRcdFx0XHRcdC8vIG9wZW5pbmcgc3RyaW5nXG5cdFx0XHRcdFx0XHRpZiAocmVtYWluaW5nT3BlbmluZ1N0cmluZ0NvdW50IDw9IHJlbWFpbmluZ0Nsb3NpbmdTdHJpbmdDb3VudCkge1xuXHRcdFx0XHRcdFx0XHQvLyBzdHIgc3RpbGwgaGFzIHN1ZmZpY2llbnQgY2xvc2luZyBzdHJpbmcgdG8gZmluZCB0aGlzIGEgcGFydG5lclxuXHRcdFx0XHRcdFx0XHRlbmNsb3NpbmdMZXZlbCArPSAxO1xuXG5cdFx0XHRcdFx0XHRcdC8vIGNvcHkgdGhlIG9wZW5pbmcgc3RyaW5nXG5cdFx0XHRcdFx0XHRcdGZvciAobGV0IGogPSAxOyBqIDwgaWdub3JlLm9wZW5pbmdTdHJpbmcubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRcdFx0XHRpICs9IDE7XG5cdFx0XHRcdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcblxuXHRcdFx0XHRcdFx0XHRcdGlmIChpID49IHN0ci5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrIHN0ckxvb3A7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgLT0gMTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBpZ25vcmUuY2xvc2luZ1N0cmluZywgaSkpIHtcblx0XHRcdFx0XHRcdC8vIGNsb3Npbmcgc3RyaW5nXG5cdFx0XHRcdFx0XHRpZiAoZW5jbG9zaW5nTGV2ZWwgPiAwKSB7XG5cdFx0XHRcdFx0XHRcdC8vIHRoZXJlIHdhcyBhbiBvcGVuaW5nIHN0cmluZyBiZWZvcmUgdGhpc1xuXHRcdFx0XHRcdFx0XHRlbmNsb3NpbmdMZXZlbCAtPSAxO1xuXG5cdFx0XHRcdFx0XHRcdC8vIGNvcHkgdGhlIGNsb3Npbmcgc3RyaW5nXG5cdFx0XHRcdFx0XHRcdGZvciAobGV0IGogPSAxOyBqIDwgaWdub3JlLmNsb3NpbmdTdHJpbmcubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRcdFx0XHRpICs9IDE7XG5cdFx0XHRcdFx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcblxuXHRcdFx0XHRcdFx0XHRcdGlmIChpID49IHN0ci5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrIHN0ckxvb3A7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZW1haW5pbmdDbG9zaW5nU3RyaW5nQ291bnQgLT0gMTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gbm8gaWdub3JlIHNwZWNpZmllZFxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcblxuXHRcdFx0XHRpZiAoUGFyc2VyVXRpbHMuaXNTdHJpbmdBdChzdHIsIHNlcGFyYXRvciwgaSkpIHtcblx0XHRcdFx0XHRzdWJTdHJpbmdzLnB1c2goc3ViU3RyKTtcblx0XHRcdFx0XHRzdWJTdHIgPSAnJztcblx0XHRcdFx0XHRpICs9IHNlcGFyYXRvci5sZW5ndGggLSAxO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRzdWJTdHJpbmdzLnB1c2goc3ViU3RyKTtcblxuXHRcdHJldHVybiBzdWJTdHJpbmdzO1xuXHR9XG5cblx0c3RhdGljIHJlbW92ZUluQmV0d2VlbihzdHI6IHN0cmluZywgZW5jbG9zaW5nUGFpcjogRW5jbG9zaW5nUGFpcik6IHN0cmluZyB7XG5cdFx0aWYgKCFzdHIpIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3N0cmluZyBtdXN0IG5vdCBiZSBlbXB0eScpO1xuXHRcdH1cblxuXHRcdGxldCByZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgPSBQYXJzZXJVdGlscy5udW1iZXJPZk9jY3VycmVuY2VzKHN0ciwgZW5jbG9zaW5nUGFpci5vcGVuaW5nU3RyaW5nKTtcblx0XHRsZXQgcmVtYWluaW5nQ2xvc2luZ1N0cmluZ0NvdW50ID0gUGFyc2VyVXRpbHMubnVtYmVyT2ZPY2N1cnJlbmNlcyhzdHIsIGVuY2xvc2luZ1BhaXIuY2xvc2luZ1N0cmluZyk7XG5cblx0XHRsZXQgZW5jbG9zaW5nTGV2ZWw6IG51bWJlciA9IDA7XG5cblx0XHRsZXQgc3ViU3RyOiBzdHJpbmcgPSAnJztcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAoZW5jbG9zaW5nUGFpci5vcGVuaW5nRXF1YWxzQ2xvc2luZykge1xuXHRcdFx0XHRpZiAoUGFyc2VyVXRpbHMuaXNTdHJpbmdBdChzdHIsIGVuY2xvc2luZ1BhaXIub3BlbmluZ1N0cmluZywgaSkpIHtcblx0XHRcdFx0XHRpZiAoZW5jbG9zaW5nTGV2ZWwgJSAyID09PSAwICYmIHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCA9PT0gMSkge1xuXHRcdFx0XHRcdFx0Ly8gbm90IGluIGEgcGFydCB0aGF0IHNob3VsZCBiZSByZW1vdmVkIGFuZCB0aGVyZSBpcyBzdGlsbCBhbiBvcGVuaW5nIHN0cmluZyBsZWZ0LCBzbyB3ZSBpZ25vcmUgaXRcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGVuY2xvc2luZ0xldmVsICUgMiA9PT0gMCkge1xuXHRcdFx0XHRcdFx0Ly8gb3BlbmluZyBzdHJpbmdcblx0XHRcdFx0XHRcdGVuY2xvc2luZ0xldmVsICs9IDE7XG5cblx0XHRcdFx0XHRcdC8vIHNraXAgdGhlIG9wZW5pbmcgc3RyaW5nXG5cdFx0XHRcdFx0XHRpICs9IGVuY2xvc2luZ1BhaXIub3BlbmluZ1N0cmluZy5sZW5ndGg7XG5cdFx0XHRcdFx0XHRpZiAoaSA+PSBzdHIubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBjbG9zaW5nIHN0cmluZ1xuXHRcdFx0XHRcdFx0ZW5jbG9zaW5nTGV2ZWwgLT0gMTtcblxuXHRcdFx0XHRcdFx0Ly8gc2tpcCB0aGUgY2xvc2luZyBzdHJpbmdcblx0XHRcdFx0XHRcdGkgKz0gZW5jbG9zaW5nUGFpci5jbG9zaW5nU3RyaW5nLmxlbmd0aDsgLy8gKG9wZW5pbmcgYW5kIGNsb3Npbmcgc3RyaW5nIGFyZSB0aGUgc2FtZSlcblx0XHRcdFx0XHRcdGlmIChpID49IHN0ci5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCAtPSAxO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoUGFyc2VyVXRpbHMuaXNTdHJpbmdBdChzdHIsIGVuY2xvc2luZ1BhaXIub3BlbmluZ1N0cmluZywgaSkpIHtcblx0XHRcdFx0XHQvLyBvcGVuaW5nIHN0cmluZ1xuXHRcdFx0XHRcdGlmIChyZW1haW5pbmdPcGVuaW5nU3RyaW5nQ291bnQgPD0gcmVtYWluaW5nQ2xvc2luZ1N0cmluZ0NvdW50KSB7XG5cdFx0XHRcdFx0XHQvLyBzdHIgc3RpbGwgaGFzIHN1ZmZpY2llbnQgY2xvc2luZyBzdHJpbmcgdG8gZmluZCB0aGlzIGEgcGFydG5lclxuXHRcdFx0XHRcdFx0ZW5jbG9zaW5nTGV2ZWwgKz0gMTtcblxuXHRcdFx0XHRcdFx0Ly8gc2tpcCB0aGUgb3BlbmluZyBzdHJpbmdcblx0XHRcdFx0XHRcdGkgKz0gZW5jbG9zaW5nUGFpci5vcGVuaW5nU3RyaW5nLmxlbmd0aDtcblx0XHRcdFx0XHRcdGlmIChpID49IHN0ci5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCAtPSAxO1xuXHRcdFx0XHR9IGVsc2UgaWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBlbmNsb3NpbmdQYWlyLmNsb3NpbmdTdHJpbmcsIGkpKSB7XG5cdFx0XHRcdFx0Ly8gY2xvc2luZyBzdHJpbmdcblx0XHRcdFx0XHRpZiAoZW5jbG9zaW5nTGV2ZWwgPiAwKSB7XG5cdFx0XHRcdFx0XHQvLyB0aGVyZSB3YXMgYW4gb3BlbmluZyBzdHJpbmcgYmVmb3JlIHRoaXNcblx0XHRcdFx0XHRcdGVuY2xvc2luZ0xldmVsIC09IDE7XG5cblx0XHRcdFx0XHRcdC8vIHNraXAgdGhlIGNsb3Npbmcgc3RyaW5nXG5cdFx0XHRcdFx0XHRpICs9IGVuY2xvc2luZ1BhaXIuY2xvc2luZ1N0cmluZy5sZW5ndGg7XG5cdFx0XHRcdFx0XHRpZiAoaSA+PSBzdHIubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZW1haW5pbmdDbG9zaW5nU3RyaW5nQ291bnQgLT0gMTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZW5jbG9zaW5nTGV2ZWwgPT09IDApIHtcblx0XHRcdFx0c3ViU3RyICs9IHN0cltpXTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gc3ViU3RyO1xuXHR9XG5cblx0c3RhdGljIGdldEluQmV0d2VlbihzdHI6IHN0cmluZywgZW5jbG9zaW5nUGFpcjogRW5jbG9zaW5nUGFpcik6IHN0cmluZyB8IHN0cmluZ1tdIHtcblx0XHRpZiAoIXN0cikge1xuXHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kSW50ZXJuYWxFcnJvcignc3RyaW5nIG11c3Qgbm90IGJlIGVtcHR5Jyk7XG5cdFx0fVxuXG5cdFx0bGV0IHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCA9IFBhcnNlclV0aWxzLm51bWJlck9mT2NjdXJyZW5jZXMoc3RyLCBlbmNsb3NpbmdQYWlyLm9wZW5pbmdTdHJpbmcpO1xuXHRcdGxldCByZW1haW5pbmdDbG9zaW5nU3RyaW5nQ291bnQgPSBQYXJzZXJVdGlscy5udW1iZXJPZk9jY3VycmVuY2VzKHN0ciwgZW5jbG9zaW5nUGFpci5jbG9zaW5nU3RyaW5nKTtcblxuXHRcdGxldCBlbmNsb3NpbmdMZXZlbDogbnVtYmVyID0gMDtcblxuXHRcdGxldCBzdWJTdHI6IHN0cmluZyA9ICcnO1xuXHRcdGNvbnN0IHN1YlN0cmluZ3M6IHN0cmluZ1tdID0gW107XG5cblx0XHRzdHJMb29wIDogZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmIChlbmNsb3NpbmdQYWlyLm9wZW5pbmdFcXVhbHNDbG9zaW5nKSB7XG5cdFx0XHRcdGlmIChQYXJzZXJVdGlscy5pc1N0cmluZ0F0KHN0ciwgZW5jbG9zaW5nUGFpci5vcGVuaW5nU3RyaW5nLCBpKSkge1xuXHRcdFx0XHRcdGlmIChlbmNsb3NpbmdMZXZlbCAlIDIgPT09IDAgJiYgcmVtYWluaW5nT3BlbmluZ1N0cmluZ0NvdW50ID09PSAxKSB7XG5cdFx0XHRcdFx0XHQvLyBub3QgaW4gYSBwYXJ0IHRoYXQgc2hvdWxkIGJlIHJlbW92ZWQgYW5kIHRoZXJlIGlzIHN0aWxsIGFuIG9wZW5pbmcgc3RyaW5nIGxlZnQsIHNvIHdlIGlnbm9yZSBpdFxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoZW5jbG9zaW5nTGV2ZWwgJSAyID09PSAwKSB7XG5cdFx0XHRcdFx0XHQvLyBvcGVuaW5nIHN0cmluZ1xuXHRcdFx0XHRcdFx0ZW5jbG9zaW5nTGV2ZWwgKz0gMTtcblxuXHRcdFx0XHRcdFx0Ly8gc2tpcCB0aGUgb3BlbmluZyBzdHJpbmdcblx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XG5cdFx0XHRcdFx0XHRmb3IgKGxldCBqID0gMTsgaiA8IGVuY2xvc2luZ1BhaXIub3BlbmluZ1N0cmluZy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdFx0XHRpICs9IDE7XG5cdFx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XG5cblx0XHRcdFx0XHRcdFx0aWYgKGkgPj0gc3RyLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrIHN0ckxvb3A7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gY2xvc2luZyBzdHJpbmdcblx0XHRcdFx0XHRcdGVuY2xvc2luZ0xldmVsIC09IDE7XG5cblx0XHRcdFx0XHRcdC8vIHNraXAgdGhlIGNsb3Npbmcgc3RyaW5nXG5cdFx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xuXHRcdFx0XHRcdFx0Zm9yIChsZXQgaiA9IDE7IGogPCBlbmNsb3NpbmdQYWlyLmNsb3NpbmdTdHJpbmcubGVuZ3RoOyBqKyspIHsgLy8gKG9wZW5pbmcgYW5kIGNsb3Npbmcgc3RyaW5nIGFyZSB0aGUgc2FtZSlcblx0XHRcdFx0XHRcdFx0aSArPSAxO1xuXHRcdFx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xuXG5cdFx0XHRcdFx0XHRcdGlmIChpID4gc3RyLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrIHN0ckxvb3A7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHN1YlN0cmluZ3MucHVzaChzdWJTdHIpO1xuXHRcdFx0XHRcdFx0c3ViU3RyID0gJyc7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCAtPSAxO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmIChlbmNsb3NpbmdMZXZlbCA+PSAxKSB7XG5cdFx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBlbmNsb3NpbmdQYWlyLm9wZW5pbmdTdHJpbmcsIGkpKSB7XG5cdFx0XHRcdFx0Ly8gb3BlbmluZyBzdHJpbmdcblx0XHRcdFx0XHRpZiAocmVtYWluaW5nT3BlbmluZ1N0cmluZ0NvdW50IDw9IHJlbWFpbmluZ0Nsb3NpbmdTdHJpbmdDb3VudCkge1xuXHRcdFx0XHRcdFx0Ly8gc3RyIHN0aWxsIGhhcyBzdWZmaWNpZW50IGNsb3Npbmcgc3RyaW5nIHRvIGZpbmQgdGhpcyBhIHBhcnRuZXJcblx0XHRcdFx0XHRcdGVuY2xvc2luZ0xldmVsICs9IDE7XG5cblx0XHRcdFx0XHRcdC8vIGNvcHkgdGhlIG9wZW5pbmcgc3RyaW5nXG5cdFx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xuXHRcdFx0XHRcdFx0Zm9yIChsZXQgaiA9IDE7IGogPCBlbmNsb3NpbmdQYWlyLm9wZW5pbmdTdHJpbmcubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRcdFx0aSArPSAxO1xuXHRcdFx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xuXG5cdFx0XHRcdFx0XHRcdGlmIChpID49IHN0ci5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRicmVhayBzdHJMb29wO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJlbWFpbmluZ09wZW5pbmdTdHJpbmdDb3VudCAtPSAxO1xuXHRcdFx0XHR9IGVsc2UgaWYgKFBhcnNlclV0aWxzLmlzU3RyaW5nQXQoc3RyLCBlbmNsb3NpbmdQYWlyLmNsb3NpbmdTdHJpbmcsIGkpKSB7XG5cdFx0XHRcdFx0Ly8gY2xvc2luZyBzdHJpbmdcblx0XHRcdFx0XHRpZiAoZW5jbG9zaW5nTGV2ZWwgPiAwKSB7XG5cdFx0XHRcdFx0XHQvLyB0aGVyZSB3YXMgYW4gb3BlbmluZyBzdHJpbmcgYmVmb3JlIHRoaXNcblx0XHRcdFx0XHRcdGVuY2xvc2luZ0xldmVsIC09IDE7XG5cblx0XHRcdFx0XHRcdC8vIGNvcHkgdGhlIGNsb3Npbmcgc3RyaW5nXG5cdFx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xuXHRcdFx0XHRcdFx0Zm9yIChsZXQgaiA9IDE7IGogPCBlbmNsb3NpbmdQYWlyLmNsb3NpbmdTdHJpbmcubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRcdFx0aSArPSAxO1xuXHRcdFx0XHRcdFx0XHRzdWJTdHIgKz0gc3RyW2ldO1xuXG5cdFx0XHRcdFx0XHRcdGlmIChpID4gc3RyLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrIHN0ckxvb3A7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKGVuY2xvc2luZ0xldmVsID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdHN1YlN0cmluZ3MucHVzaChzdWJTdHIpO1xuXHRcdFx0XHRcdFx0XHRzdWJTdHIgPSAnJztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmVtYWluaW5nQ2xvc2luZ1N0cmluZ0NvdW50IC09IDE7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYgKGVuY2xvc2luZ0xldmVsID49IDEpIHtcblx0XHRcdFx0XHRcdHN1YlN0ciArPSBzdHJbaV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHN1YlN0cmluZ3MubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRyZXR1cm4gJyc7XG5cdFx0fSBlbHNlIGlmIChzdWJTdHJpbmdzLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0cmV0dXJuIHN1YlN0cmluZ3NbMF0uc3Vic3RyaW5nKGVuY2xvc2luZ1BhaXIub3BlbmluZ1N0cmluZy5sZW5ndGgsIHN1YlN0cmluZ3NbMF0ubGVuZ3RoIC0gZW5jbG9zaW5nUGFpci5jbG9zaW5nU3RyaW5nLmxlbmd0aCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBzdWJTdHJpbmdzLm1hcCh4ID0+IHguc3Vic3RyaW5nKGVuY2xvc2luZ1BhaXIub3BlbmluZ1N0cmluZy5sZW5ndGgsIHgubGVuZ3RoIC0gZW5jbG9zaW5nUGFpci5jbG9zaW5nU3RyaW5nLmxlbmd0aCkpO1xuXHRcdH1cblx0fVxuXG5cdHN0YXRpYyBpc1N0cmluZ0F0KHN0cjogc3RyaW5nLCBzdWJTdHI6IHN0cmluZywgaW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuXHRcdGlmIChpbmRleCA8IDApIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ2luZGV4IG11c3QgYmUgZ3JlYXRlciB0aGFuIDAnKTtcblx0XHR9XG5cdFx0aWYgKGluZGV4ID49IHN0ci5sZW5ndGgpIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ2luZGV4IG91dCBvZiBib3VuZHMgb2Ygc3RyaW5nJyk7XG5cdFx0fVxuXHRcdGlmICghc3RyKSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdzdHJpbmcgbXVzdCBub3QgYmUgZW1wdHknKTtcblx0XHR9XG5cdFx0aWYgKCFzdWJTdHIpIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3N1YiBzdHJpbmcgbXVzdCBub3QgYmUgZW1wdHknKTtcblx0XHR9XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHN1YlN0ci5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKHN0cltpICsgaW5kZXhdICE9PSBzdWJTdHJbaV0pIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0c3RhdGljIGNvbnRhaW5zKHN0cjogc3RyaW5nLCBzdWJTdHI6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBQYXJzZXJVdGlscy5udW1iZXJPZk9jY3VycmVuY2VzKHN0ciwgc3ViU3RyKSA+IDA7XG5cdH1cblxuXHRzdGF0aWMgbnVtYmVyT2ZPY2N1cnJlbmNlcyhzdHI6IHN0cmluZywgc3ViU3RyOiBzdHJpbmcpOiBudW1iZXIge1xuXHRcdGlmICghc3RyKSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRJbnRlcm5hbEVycm9yKCdzdHJpbmcgbXVzdCBub3QgYmUgZW1wdHknKTtcblx0XHR9XG5cdFx0aWYgKCFzdWJTdHIpIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZEludGVybmFsRXJyb3IoJ3N1YiBzdHJpbmcgbXVzdCBub3QgYmUgZW1wdHknKTtcblx0XHR9XG5cblx0XHRsZXQgb2NjdXJyZW5jZXMgPSAwO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAoUGFyc2VyVXRpbHMuaXNTdHJpbmdBdChzdHIsIHN1YlN0ciwgaSkpIHtcblx0XHRcdFx0b2NjdXJyZW5jZXMgKz0gMTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gb2NjdXJyZW5jZXM7XG5cdH1cbn1cbiIsICJpbXBvcnQge0VuY2xvc2luZ1BhaXIsIFBhcnNlclV0aWxzfSBmcm9tICcuLi91dGlscy9QYXJzZXJVdGlscyc7XG5pbXBvcnQge2lzVHJ1dGh5LCBNZXRhQmluZFBhcnNpbmdFcnJvcn0gZnJvbSAnLi4vdXRpbHMvVXRpbHMnO1xuXG5leHBvcnQgZW51bSBJbnB1dEZpZWxkVHlwZSB7XG5cdFRPR0dMRSA9ICd0b2dnbGUnLFxuXHRTTElERVIgPSAnc2xpZGVyJyxcblx0VEVYVCA9ICd0ZXh0Jyxcblx0VEVYVF9BUkVBID0gJ3RleHRfYXJlYScsXG5cdFNFTEVDVCA9ICdzZWxlY3QnLFxuXHRNVUxUSV9TRUxFQ1QgPSAnbXVsdGlfc2VsZWN0Jyxcblx0REFURSA9ICdkYXRlJyxcblx0VElNRSA9ICd0aW1lJyxcblx0SU5WQUxJRCA9ICdpbnZhbGlkJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbnB1dEZpZWxkRGVjbGFyYXRpb24ge1xuXHRmdWxsRGVjbGFyYXRpb246IHN0cmluZztcblx0ZGVjbGFyYXRpb246IHN0cmluZztcblx0aW5wdXRGaWVsZFR5cGU6IElucHV0RmllbGRUeXBlO1xuXHRpc0JvdW5kOiBib29sZWFuO1xuXHRiaW5kVGFyZ2V0OiBzdHJpbmc7XG5cblx0YXJndW1lbnRzOiBJbnB1dEZpZWxkQXJndW1lbnRbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbnB1dEZpZWxkQXJndW1lbnQge1xuXHRuYW1lOiBzdHJpbmc7XG5cdHZhbHVlOiBhbnk7XG59XG5cbmV4cG9ydCBjbGFzcyBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIge1xuXHRzdGF0aWMgcm91bmRCcmFjZXNQYWlyOiBFbmNsb3NpbmdQYWlyID0gbmV3IEVuY2xvc2luZ1BhaXIoJygnLCAnKScpO1xuXHRzdGF0aWMgc3F1YXJlQnJhY2VzUGFpcjogRW5jbG9zaW5nUGFpciA9IG5ldyBFbmNsb3NpbmdQYWlyKCdbJywgJ10nKTtcblx0c3RhdGljIGN1cmx5QnJhY2VzUGFpcjogRW5jbG9zaW5nUGFpciA9IG5ldyBFbmNsb3NpbmdQYWlyKCd7JywgJ30nKTtcblx0c3RhdGljIGFsbEJyYWNlc1BhaXJzOiBFbmNsb3NpbmdQYWlyW10gPSBbXG5cdFx0SW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLnJvdW5kQnJhY2VzUGFpcixcblx0XHRJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIuc3F1YXJlQnJhY2VzUGFpcixcblx0XHRJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIuY3VybHlCcmFjZXNQYWlyLFxuXHRdO1xuXG5cblx0c3RhdGljIHBhcnNlKGZ1bGxEZWNsYXJhdGlvbjogc3RyaW5nKTogSW5wdXRGaWVsZERlY2xhcmF0aW9uIHtcblx0XHRjb25zdCBpbnB1dEZpZWxkRGVjbGFyYXRpb246IElucHV0RmllbGREZWNsYXJhdGlvbiA9IHt9IGFzIElucHV0RmllbGREZWNsYXJhdGlvbjtcblxuXHRcdC8vIGRlY2xhcmF0aW9uXG5cdFx0aW5wdXRGaWVsZERlY2xhcmF0aW9uLmZ1bGxEZWNsYXJhdGlvbiA9IGZ1bGxEZWNsYXJhdGlvbjtcblx0XHRpbnB1dEZpZWxkRGVjbGFyYXRpb24uZGVjbGFyYXRpb24gPSBQYXJzZXJVdGlscy5nZXRJbkJldHdlZW4oZnVsbERlY2xhcmF0aW9uLCBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIuc3F1YXJlQnJhY2VzUGFpcikgYXMgc3RyaW5nO1xuXG5cdFx0Ly8gZGVjbGFyYXRpb24gcGFydHNcblx0XHRjb25zdCBkZWNsYXJhdGlvblBhcnRzOiBzdHJpbmdbXSA9IFBhcnNlclV0aWxzLnNwbGl0KGlucHV0RmllbGREZWNsYXJhdGlvbi5kZWNsYXJhdGlvbiwgJzonLCBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIuc3F1YXJlQnJhY2VzUGFpcik7XG5cblx0XHQvLyBiaW5kIHRhcmdldFxuXHRcdGlucHV0RmllbGREZWNsYXJhdGlvbi5iaW5kVGFyZ2V0ID0gZGVjbGFyYXRpb25QYXJ0c1sxXSA/PyAnJztcblx0XHRpbnB1dEZpZWxkRGVjbGFyYXRpb24uaXNCb3VuZCA9IGlzVHJ1dGh5KGlucHV0RmllbGREZWNsYXJhdGlvbi5iaW5kVGFyZ2V0KTtcblxuXHRcdC8vIGlucHV0IGZpZWxkIHR5cGUgYW5kIGFyZ3VtZW50c1xuXHRcdGNvbnN0IGlucHV0RmllbGRUeXBlV2l0aEFyZ3VtZW50czogc3RyaW5nID0gZGVjbGFyYXRpb25QYXJ0c1swXTtcblx0XHQvLyBpbnB1dCBmaWVsZCB0eXBlXG5cdFx0Y29uc3QgaW5wdXRGaWVsZFR5cGVTdHJpbmcgPSBQYXJzZXJVdGlscy5yZW1vdmVJbkJldHdlZW4oaW5wdXRGaWVsZFR5cGVXaXRoQXJndW1lbnRzLCBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIucm91bmRCcmFjZXNQYWlyKTtcblx0XHRpbnB1dEZpZWxkRGVjbGFyYXRpb24uaW5wdXRGaWVsZFR5cGUgPSBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIuZ2V0SW5wdXRGaWVsZFR5cGUoaW5wdXRGaWVsZFR5cGVTdHJpbmcpO1xuXHRcdGlmIChpbnB1dEZpZWxkRGVjbGFyYXRpb24uaW5wdXRGaWVsZFR5cGUgPT09IElucHV0RmllbGRUeXBlLklOVkFMSUQpIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcihgdW5rbm93biBpbnB1dCBmaWVsZCB0eXBlIFxcJyR7aW5wdXRGaWVsZFR5cGVTdHJpbmd9XFwnYCk7XG5cdFx0fVxuXHRcdC8vIGFyZ3VtZW50c1xuXHRcdGNvbnN0IGlucHV0RmllbGRBcmd1bWVudHNTdHJpbmc6IHN0cmluZyA9IFBhcnNlclV0aWxzLmdldEluQmV0d2VlbihpbnB1dEZpZWxkVHlwZVdpdGhBcmd1bWVudHMsIElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5yb3VuZEJyYWNlc1BhaXIpIGFzIHN0cmluZztcblx0XHQvLyBjb25zb2xlLmxvZyhpbnB1dEZpZWxkQXJndW1lbnRzU3RyaW5nKTtcblx0XHRpZiAoaW5wdXRGaWVsZEFyZ3VtZW50c1N0cmluZykge1xuXHRcdFx0aW5wdXRGaWVsZERlY2xhcmF0aW9uLmFyZ3VtZW50cyA9IElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5wYXJzZUFyZ3VtZW50cyhpbnB1dEZpZWxkQXJndW1lbnRzU3RyaW5nLCBpbnB1dEZpZWxkRGVjbGFyYXRpb24uaW5wdXRGaWVsZFR5cGUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpbnB1dEZpZWxkRGVjbGFyYXRpb24uYXJndW1lbnRzID0gW107XG5cdFx0fVxuXHRcdC8vIGNvbnNvbGUubG9nKGlucHV0RmllbGREZWNsYXJhdGlvbi5hcmd1bWVudHMpO1xuXG5cdFx0cmV0dXJuIGlucHV0RmllbGREZWNsYXJhdGlvbjtcblx0fVxuXG5cdHN0YXRpYyBwYXJzZUFyZ3VtZW50cyhpbnB1dEZpZWxkQXJndW1lbnRzU3RyaW5nOiBzdHJpbmcsIGlucHV0RmllbGRUeXBlOiBJbnB1dEZpZWxkVHlwZSk6IElucHV0RmllbGRBcmd1bWVudFtdIHtcblx0XHQvLyBjb25zb2xlLmxvZygnaW5wdXRGaWVsZEFyZ3VtZW50c1N0cmluZycsIGlucHV0RmllbGRBcmd1bWVudHNTdHJpbmcpO1xuXHRcdGxldCBpbnB1dEZpZWxkQXJndW1lbnRTdHJpbmdzOiBzdHJpbmdbXSA9IFBhcnNlclV0aWxzLnNwbGl0KGlucHV0RmllbGRBcmd1bWVudHNTdHJpbmcsICcsJywgSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLnJvdW5kQnJhY2VzUGFpcik7XG5cdFx0aW5wdXRGaWVsZEFyZ3VtZW50U3RyaW5ncyA9IGlucHV0RmllbGRBcmd1bWVudFN0cmluZ3MubWFwKHggPT4geC50cmltKCkpO1xuXG5cdFx0Y29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50czogSW5wdXRGaWVsZEFyZ3VtZW50W10gPSBbXTtcblxuXHRcdGZvciAoY29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50U3RyaW5nIG9mIGlucHV0RmllbGRBcmd1bWVudFN0cmluZ3MpIHtcblx0XHRcdGNvbnN0IGlucHV0RmllbGRBcmd1bWVudE5hbWU6IHN0cmluZyA9IElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5leHRyYWN0SW5wdXRGaWVsZEFyZ3VtZW50TmFtZShpbnB1dEZpZWxkQXJndW1lbnRTdHJpbmcpO1xuXHRcdFx0Ly8gY29uc29sZS5sb2coaW5wdXRGaWVsZEFyZ3VtZW50TmFtZSk7XG5cblx0XHRcdGlmIChpbnB1dEZpZWxkQXJndW1lbnROYW1lID09PSAnY2xhc3MnKSB7XG5cdFx0XHRcdGNvbnN0IGlucHV0RmllbGRBcmd1bWVudFZhbHVlOiBzdHJpbmcgPSBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIuZXh0cmFjdElucHV0RmllbGRBcmd1bWVudFZhbHVlKGlucHV0RmllbGRBcmd1bWVudFN0cmluZyk7XG5cblx0XHRcdFx0Y29uc3QgaW5wdXRGaWVsZENsYXNzQXJndW1lbnQ6IElucHV0RmllbGRBcmd1bWVudCA9IHtuYW1lOiBpbnB1dEZpZWxkQXJndW1lbnROYW1lLCB2YWx1ZTogaW5wdXRGaWVsZEFyZ3VtZW50VmFsdWV9O1xuXHRcdFx0XHRpbnB1dEZpZWxkQXJndW1lbnRzLnB1c2goaW5wdXRGaWVsZENsYXNzQXJndW1lbnQpO1xuXHRcdFx0fVxuXG5cdFx0XHRlbHNlIGlmIChpbnB1dEZpZWxkQXJndW1lbnROYW1lID09PSAnYWRkTGFiZWxzJykge1xuXHRcdFx0XHRpZiAoaW5wdXRGaWVsZFR5cGUgIT09IElucHV0RmllbGRUeXBlLlNMSURFUikge1xuXHRcdFx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcihgYXJndW1lbnQgXFwnJHtpbnB1dEZpZWxkQXJndW1lbnROYW1lfVxcJyBpcyBvbmx5IGFwcGxpY2FibGUgdG8gc2xpZGVyIGlucHV0IGZpZWxkc2ApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aW5wdXRGaWVsZEFyZ3VtZW50cy5wdXNoKHtuYW1lOiAnbGFiZWxzJywgdmFsdWU6IHRydWV9KTtcblx0XHRcdH1cblxuXHRcdFx0ZWxzZSBpZiAoaW5wdXRGaWVsZEFyZ3VtZW50TmFtZSA9PT0gJ21pblZhbHVlJykge1xuXHRcdFx0XHRpZiAoaW5wdXRGaWVsZFR5cGUgIT09IElucHV0RmllbGRUeXBlLlNMSURFUikge1xuXHRcdFx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcihgYXJndW1lbnQgXFwnJHtpbnB1dEZpZWxkQXJndW1lbnROYW1lfVxcJyBpcyBvbmx5IGFwcGxpY2FibGUgdG8gc2xpZGVyIGlucHV0IGZpZWxkc2ApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50VmFsdWU6IHN0cmluZyA9IElucHV0RmllbGREZWNsYXJhdGlvblBhcnNlci5leHRyYWN0SW5wdXRGaWVsZEFyZ3VtZW50VmFsdWUoaW5wdXRGaWVsZEFyZ3VtZW50U3RyaW5nKTtcblx0XHRcdFx0Y29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50VmFsdWVBc051bWJlcjogbnVtYmVyID0gTnVtYmVyLnBhcnNlSW50KGlucHV0RmllbGRBcmd1bWVudFZhbHVlKTtcblxuXHRcdFx0XHRpZiAoTnVtYmVyLmlzTmFOKGlucHV0RmllbGRBcmd1bWVudFZhbHVlQXNOdW1iZXIpKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kUGFyc2luZ0Vycm9yKGBhcmd1bWVudCBcXCcke2lucHV0RmllbGRBcmd1bWVudE5hbWV9XFwnIHZhbHVlIG11c3QgYmUgb2YgdHlwZSBudW1iZXJgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGlucHV0RmllbGRBcmd1bWVudE9iamVjdDogSW5wdXRGaWVsZEFyZ3VtZW50ID0ge25hbWU6IGlucHV0RmllbGRBcmd1bWVudE5hbWUsIHZhbHVlOiBpbnB1dEZpZWxkQXJndW1lbnRWYWx1ZUFzTnVtYmVyfTtcblx0XHRcdFx0aW5wdXRGaWVsZEFyZ3VtZW50cy5wdXNoKGlucHV0RmllbGRBcmd1bWVudE9iamVjdCk7XG5cdFx0XHR9XG5cblx0XHRcdGVsc2UgaWYgKGlucHV0RmllbGRBcmd1bWVudE5hbWUgPT09ICdtYXhWYWx1ZScpIHtcblx0XHRcdFx0aWYgKGlucHV0RmllbGRUeXBlICE9PSBJbnB1dEZpZWxkVHlwZS5TTElERVIpIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRQYXJzaW5nRXJyb3IoYGFyZ3VtZW50IFxcJyR7aW5wdXRGaWVsZEFyZ3VtZW50TmFtZX1cXCcgaXMgb25seSBhcHBsaWNhYmxlIHRvIHNsaWRlciBpbnB1dCBmaWVsZHNgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGlucHV0RmllbGRBcmd1bWVudFZhbHVlOiBzdHJpbmcgPSBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIuZXh0cmFjdElucHV0RmllbGRBcmd1bWVudFZhbHVlKGlucHV0RmllbGRBcmd1bWVudFN0cmluZyk7XG5cdFx0XHRcdGNvbnN0IGlucHV0RmllbGRBcmd1bWVudFZhbHVlQXNOdW1iZXI6IG51bWJlciA9IE51bWJlci5wYXJzZUludChpbnB1dEZpZWxkQXJndW1lbnRWYWx1ZSk7XG5cblx0XHRcdFx0aWYgKE51bWJlci5pc05hTihpbnB1dEZpZWxkQXJndW1lbnRWYWx1ZUFzTnVtYmVyKSkge1xuXHRcdFx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcihgYXJndW1lbnQgXFwnJHtpbnB1dEZpZWxkQXJndW1lbnROYW1lfVxcJyB2YWx1ZSBtdXN0IGJlIG9mIHR5cGUgbnVtYmVyYCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBpbnB1dEZpZWxkQXJndW1lbnRPYmplY3Q6IElucHV0RmllbGRBcmd1bWVudCA9IHtuYW1lOiBpbnB1dEZpZWxkQXJndW1lbnROYW1lLCB2YWx1ZTogaW5wdXRGaWVsZEFyZ3VtZW50VmFsdWVBc051bWJlcn07XG5cdFx0XHRcdGlucHV0RmllbGRBcmd1bWVudHMucHVzaChpbnB1dEZpZWxkQXJndW1lbnRPYmplY3QpO1xuXHRcdFx0fVxuXG5cdFx0XHRlbHNlIGlmIChpbnB1dEZpZWxkQXJndW1lbnROYW1lID09PSAnb3B0aW9uJykge1xuXHRcdFx0XHRpZiAoaW5wdXRGaWVsZFR5cGUgIT09IElucHV0RmllbGRUeXBlLlNFTEVDVCAmJiBpbnB1dEZpZWxkVHlwZSAhPT0gSW5wdXRGaWVsZFR5cGUuTVVMVElfU0VMRUNUKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kUGFyc2luZ0Vycm9yKGBhcmd1bWVudCBcXCcke2lucHV0RmllbGRBcmd1bWVudE5hbWV9XFwnIGlzIG9ubHkgYXBwbGljYWJsZSB0byBzZWxlY3QgYW5kIG11bHRpLXNlbGVjdCBpbnB1dCBmaWVsZHNgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGlucHV0RmllbGRBcmd1bWVudFZhbHVlOiBzdHJpbmcgPSBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIuZXh0cmFjdElucHV0RmllbGRBcmd1bWVudFZhbHVlKGlucHV0RmllbGRBcmd1bWVudFN0cmluZyk7XG5cblx0XHRcdFx0Y29uc3QgaW5wdXRGaWVsZEFyZ3VtZW50T2JqZWN0OiBJbnB1dEZpZWxkQXJndW1lbnQgPSB7bmFtZTogaW5wdXRGaWVsZEFyZ3VtZW50TmFtZSwgdmFsdWU6IGlucHV0RmllbGRBcmd1bWVudFZhbHVlfTtcblx0XHRcdFx0aW5wdXRGaWVsZEFyZ3VtZW50cy5wdXNoKGlucHV0RmllbGRBcmd1bWVudE9iamVjdCk7XG5cdFx0XHR9XG5cblx0XHRcdGVsc2UgaWYgKGlucHV0RmllbGRBcmd1bWVudE5hbWUgPT09ICd0aXRsZScpIHtcblx0XHRcdFx0aWYgKGlucHV0RmllbGRUeXBlICE9PSBJbnB1dEZpZWxkVHlwZS5TRUxFQ1QgJiYgaW5wdXRGaWVsZFR5cGUgIT09IElucHV0RmllbGRUeXBlLk1VTFRJX1NFTEVDVCkge1xuXHRcdFx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcihgYXJndW1lbnQgXFwnJHtpbnB1dEZpZWxkQXJndW1lbnROYW1lfVxcJyBpcyBvbmx5IGFwcGxpY2FibGUgdG8gc2VsZWN0IGFuZCBtdWx0aS1zZWxlY3QgaW5wdXQgZmllbGRzYCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBpbnB1dEZpZWxkQXJndW1lbnRWYWx1ZTogc3RyaW5nID0gSW5wdXRGaWVsZERlY2xhcmF0aW9uUGFyc2VyLmV4dHJhY3RJbnB1dEZpZWxkQXJndW1lbnRWYWx1ZShpbnB1dEZpZWxkQXJndW1lbnRTdHJpbmcpO1xuXG5cdFx0XHRcdGNvbnN0IGlucHV0RmllbGRBcmd1bWVudE9iamVjdDogSW5wdXRGaWVsZEFyZ3VtZW50ID0ge25hbWU6IGlucHV0RmllbGRBcmd1bWVudE5hbWUsIHZhbHVlOiBpbnB1dEZpZWxkQXJndW1lbnRWYWx1ZX07XG5cdFx0XHRcdGlucHV0RmllbGRBcmd1bWVudHMucHVzaChpbnB1dEZpZWxkQXJndW1lbnRPYmplY3QpO1xuXHRcdFx0fVxuXG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0dGhyb3cgbmV3IE1ldGFCaW5kUGFyc2luZ0Vycm9yKGB1bmtub3duIGFyZ3VtZW50IFxcJyR7aW5wdXRGaWVsZEFyZ3VtZW50TmFtZX1cXCdgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gaW5wdXRGaWVsZEFyZ3VtZW50cztcblx0fVxuXG5cdHN0YXRpYyBleHRyYWN0SW5wdXRGaWVsZEFyZ3VtZW50TmFtZShhcmd1bWVudFN0cmluZzogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gUGFyc2VyVXRpbHMucmVtb3ZlSW5CZXR3ZWVuKGFyZ3VtZW50U3RyaW5nLCBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIucm91bmRCcmFjZXNQYWlyKTtcblx0fVxuXG5cdHN0YXRpYyBleHRyYWN0SW5wdXRGaWVsZEFyZ3VtZW50VmFsdWUoYXJndW1lbnRTdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Y29uc3QgYXJndW1lbnROYW1lID0gdGhpcy5leHRyYWN0SW5wdXRGaWVsZEFyZ3VtZW50TmFtZShhcmd1bWVudFN0cmluZyk7XG5cblx0XHRjb25zdCBhcmd1bWVudFZhbHVlID0gUGFyc2VyVXRpbHMuZ2V0SW5CZXR3ZWVuKGFyZ3VtZW50U3RyaW5nLCBJbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXIucm91bmRCcmFjZXNQYWlyKSBhcyBzdHJpbmc7XG5cdFx0aWYgKCFhcmd1bWVudFZhbHVlKSB7XG5cdFx0XHR0aHJvdyBuZXcgTWV0YUJpbmRQYXJzaW5nRXJyb3IoYGFyZ3VtZW50IFxcJyR7YXJndW1lbnROYW1lfVxcJyByZXF1aXJlcyBhIG5vbiBlbXB0eSB2YWx1ZWApO1xuXHRcdH1cblxuXHRcdHJldHVybiBhcmd1bWVudFZhbHVlO1xuXHR9XG5cblx0c3RhdGljIGdldElucHV0RmllbGRUeXBlKHN0cjogc3RyaW5nKTogSW5wdXRGaWVsZFR5cGUge1xuXHRcdGZvciAoY29uc3QgZW50cnkgb2YgT2JqZWN0LmVudHJpZXMoSW5wdXRGaWVsZFR5cGUpKSB7XG5cdFx0XHRpZiAoZW50cnlbMV0gPT09IHN0cikge1xuXHRcdFx0XHRyZXR1cm4gZW50cnlbMV07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIElucHV0RmllbGRUeXBlLklOVkFMSUQ7XG5cdH1cblxufVxuIiwgImltcG9ydCB7VG9nZ2xlSW5wdXRGaWVsZH0gZnJvbSAnLi9Ub2dnbGVJbnB1dEZpZWxkJztcbmltcG9ydCB7SW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZX0gZnJvbSAnLi4vSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQnO1xuaW1wb3J0IHtUZXh0SW5wdXRGaWVsZH0gZnJvbSAnLi9UZXh0SW5wdXRGaWVsZCc7XG5pbXBvcnQge1NsaWRlcklucHV0RmllbGR9IGZyb20gJy4vU2xpZGVySW5wdXRGaWVsZCc7XG5pbXBvcnQge1RleHRBcmVhSW5wdXRGaWVsZH0gZnJvbSAnLi9UZXh0QXJlYUlucHV0RmllbGQnO1xuaW1wb3J0IHtTZWxlY3RJbnB1dEZpZWxkfSBmcm9tICcuL1NlbGVjdElucHV0RmllbGQnO1xuaW1wb3J0IHtNdWx0aVNlbGVjdElucHV0RmllbGR9IGZyb20gJy4vTXVsdGlTZWxlY3RJbnB1dEZpZWxkJztcbmltcG9ydCB7RGF0ZUlucHV0RmllbGR9IGZyb20gJy4vRGF0ZUlucHV0RmllbGQnO1xuaW1wb3J0IHtUaW1lSW5wdXRGaWVsZH0gZnJvbSAnLi9UaW1lSW5wdXRGaWVsZCc7XG5pbXBvcnQge01ldGFCaW5kUGFyc2luZ0Vycm9yfSBmcm9tICcuLi91dGlscy9VdGlscyc7XG5pbXBvcnQge0Fic3RyYWN0SW5wdXRGaWVsZH0gZnJvbSAnLi9BYnN0cmFjdElucHV0RmllbGQnO1xuaW1wb3J0IHtJbnB1dEZpZWxkVHlwZX0gZnJvbSAnLi4vcGFyc2Vycy9JbnB1dEZpZWxkRGVjbGFyYXRpb25QYXJzZXInO1xuXG5cbmV4cG9ydCBjbGFzcyBJbnB1dEZpZWxkRmFjdG9yeSB7XG5cdHN0YXRpYyBhbGxvd0NvZGVCbG9ja01hcDogUmVjb3JkPHN0cmluZywgeyBjb2RlQmxvY2s6IGJvb2xlYW4sIGlubGluZUNvZGVCbG9jazogYm9vbGVhbiB9PiA9IHtcblx0XHRbSW5wdXRGaWVsZFR5cGUuVE9HR0xFXTogeyBjb2RlQmxvY2s6IFRvZ2dsZUlucHV0RmllbGQuYWxsb3dDb2RlQmxvY2ssIGlubGluZUNvZGVCbG9jazogVG9nZ2xlSW5wdXRGaWVsZC5hbGxvd0lubGluZUNvZGVCbG9jayB9LFxuXHRcdFtJbnB1dEZpZWxkVHlwZS5TTElERVJdOiB7IGNvZGVCbG9jazogU2xpZGVySW5wdXRGaWVsZC5hbGxvd0NvZGVCbG9jaywgaW5saW5lQ29kZUJsb2NrOiBTbGlkZXJJbnB1dEZpZWxkLmFsbG93SW5saW5lQ29kZUJsb2NrIH0sXG5cdFx0W0lucHV0RmllbGRUeXBlLlRFWFRdOiB7IGNvZGVCbG9jazogVGV4dElucHV0RmllbGQuYWxsb3dDb2RlQmxvY2ssIGlubGluZUNvZGVCbG9jazogVGV4dElucHV0RmllbGQuYWxsb3dJbmxpbmVDb2RlQmxvY2sgfSxcblx0XHRbSW5wdXRGaWVsZFR5cGUuVEVYVF9BUkVBXTogeyBjb2RlQmxvY2s6IFRleHRBcmVhSW5wdXRGaWVsZC5hbGxvd0NvZGVCbG9jaywgaW5saW5lQ29kZUJsb2NrOiBUZXh0QXJlYUlucHV0RmllbGQuYWxsb3dJbmxpbmVDb2RlQmxvY2sgfSxcblx0XHRbSW5wdXRGaWVsZFR5cGUuU0VMRUNUXTogeyBjb2RlQmxvY2s6IFNlbGVjdElucHV0RmllbGQuYWxsb3dDb2RlQmxvY2ssIGlubGluZUNvZGVCbG9jazogU2VsZWN0SW5wdXRGaWVsZC5hbGxvd0lubGluZUNvZGVCbG9jayB9LFxuXHRcdFtJbnB1dEZpZWxkVHlwZS5NVUxUSV9TRUxFQ1RdOiB7IGNvZGVCbG9jazogTXVsdGlTZWxlY3RJbnB1dEZpZWxkLmFsbG93Q29kZUJsb2NrLCBpbmxpbmVDb2RlQmxvY2s6IE11bHRpU2VsZWN0SW5wdXRGaWVsZC5hbGxvd0lubGluZUNvZGVCbG9jayB9LFxuXHRcdFtJbnB1dEZpZWxkVHlwZS5EQVRFXTogeyBjb2RlQmxvY2s6IERhdGVJbnB1dEZpZWxkLmFsbG93Q29kZUJsb2NrLCBpbmxpbmVDb2RlQmxvY2s6IERhdGVJbnB1dEZpZWxkLmFsbG93SW5saW5lQ29kZUJsb2NrIH0sXG5cdFx0W0lucHV0RmllbGRUeXBlLlRJTUVdOiB7IGNvZGVCbG9jazogVGltZUlucHV0RmllbGQuYWxsb3dDb2RlQmxvY2ssIGlubGluZUNvZGVCbG9jazogVGltZUlucHV0RmllbGQuYWxsb3dJbmxpbmVDb2RlQmxvY2sgfSxcblx0fVxuXG5cdHN0YXRpYyBjcmVhdGVJbnB1dEZpZWxkKGlucHV0RmllbGRUeXBlOiBJbnB1dEZpZWxkVHlwZSwgYXJnczogeyB0eXBlOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGUsIGlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkOiBJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgb25WYWx1ZUNoYW5nZWQ6ICh2YWx1ZTogYW55KSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPiB9KTogQWJzdHJhY3RJbnB1dEZpZWxkIHwgdW5kZWZpbmVkIHtcblx0XHRpZiAoaW5wdXRGaWVsZFR5cGUgPT09IElucHV0RmllbGRUeXBlLlRPR0dMRSkge1xuXHRcdFx0SW5wdXRGaWVsZEZhY3RvcnkuY2hlY2tJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGVBbGxvd2VkKGlucHV0RmllbGRUeXBlLCBhcmdzLnR5cGUpO1xuXHRcdFx0cmV0dXJuIG5ldyBUb2dnbGVJbnB1dEZpZWxkKGFyZ3MuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIGFyZ3Mub25WYWx1ZUNoYW5nZWQpO1xuXHRcdH0gZWxzZSBpZiAoaW5wdXRGaWVsZFR5cGUgPT09IElucHV0RmllbGRUeXBlLlNMSURFUikge1xuXHRcdFx0SW5wdXRGaWVsZEZhY3RvcnkuY2hlY2tJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGVBbGxvd2VkKGlucHV0RmllbGRUeXBlLCBhcmdzLnR5cGUpO1xuXHRcdFx0cmV0dXJuIG5ldyBTbGlkZXJJbnB1dEZpZWxkKGFyZ3MuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIGFyZ3Mub25WYWx1ZUNoYW5nZWQpO1xuXHRcdH0gZWxzZSBpZiAoaW5wdXRGaWVsZFR5cGUgPT09IElucHV0RmllbGRUeXBlLlRFWFQpIHtcblx0XHRcdElucHV0RmllbGRGYWN0b3J5LmNoZWNrSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlQWxsb3dlZChpbnB1dEZpZWxkVHlwZSwgYXJncy50eXBlKTtcblx0XHRcdHJldHVybiBuZXcgVGV4dElucHV0RmllbGQoYXJncy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgYXJncy5vblZhbHVlQ2hhbmdlZCk7XG5cdFx0fSBlbHNlIGlmIChpbnB1dEZpZWxkVHlwZSA9PT0gSW5wdXRGaWVsZFR5cGUuVEVYVF9BUkVBKSB7XG5cdFx0XHRJbnB1dEZpZWxkRmFjdG9yeS5jaGVja0lucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZUFsbG93ZWQoaW5wdXRGaWVsZFR5cGUsIGFyZ3MudHlwZSk7XG5cdFx0XHRyZXR1cm4gbmV3IFRleHRBcmVhSW5wdXRGaWVsZChhcmdzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBhcmdzLm9uVmFsdWVDaGFuZ2VkKTtcblx0XHR9IGVsc2UgaWYgKGlucHV0RmllbGRUeXBlID09PSBJbnB1dEZpZWxkVHlwZS5TRUxFQ1QpIHtcblx0XHRcdElucHV0RmllbGRGYWN0b3J5LmNoZWNrSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlQWxsb3dlZChpbnB1dEZpZWxkVHlwZSwgYXJncy50eXBlKTtcblx0XHRcdHJldHVybiBuZXcgU2VsZWN0SW5wdXRGaWVsZChhcmdzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBhcmdzLm9uVmFsdWVDaGFuZ2VkKTtcblx0XHR9IGVsc2UgaWYgKGlucHV0RmllbGRUeXBlID09PSBJbnB1dEZpZWxkVHlwZS5NVUxUSV9TRUxFQ1QpIHtcblx0XHRcdElucHV0RmllbGRGYWN0b3J5LmNoZWNrSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlQWxsb3dlZChpbnB1dEZpZWxkVHlwZSwgYXJncy50eXBlKTtcblx0XHRcdHJldHVybiBuZXcgTXVsdGlTZWxlY3RJbnB1dEZpZWxkKGFyZ3MuaW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGQsIGFyZ3Mub25WYWx1ZUNoYW5nZWQpO1xuXHRcdH0gZWxzZSBpZiAoaW5wdXRGaWVsZFR5cGUgPT09IElucHV0RmllbGRUeXBlLkRBVEUpIHtcblx0XHRcdElucHV0RmllbGRGYWN0b3J5LmNoZWNrSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlQWxsb3dlZChpbnB1dEZpZWxkVHlwZSwgYXJncy50eXBlKTtcblx0XHRcdHJldHVybiBuZXcgRGF0ZUlucHV0RmllbGQoYXJncy5pbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZCwgYXJncy5vblZhbHVlQ2hhbmdlZCk7XG5cdFx0fSBlbHNlIGlmIChpbnB1dEZpZWxkVHlwZSA9PT0gSW5wdXRGaWVsZFR5cGUuVElNRSkge1xuXHRcdFx0SW5wdXRGaWVsZEZhY3RvcnkuY2hlY2tJbnB1dEZpZWxkTWFya2Rvd25SZW5kZXJDaGlsZFR5cGVBbGxvd2VkKGlucHV0RmllbGRUeXBlLCBhcmdzLnR5cGUpO1xuXHRcdFx0cmV0dXJuIG5ldyBUaW1lSW5wdXRGaWVsZChhcmdzLmlucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkLCBhcmdzLm9uVmFsdWVDaGFuZ2VkKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHR9XG5cblx0c3RhdGljIGNoZWNrSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlQWxsb3dlZChpbnB1dEZpZWxkVHlwZTogSW5wdXRGaWVsZFR5cGUsIHR5cGU6IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZSk6IHZvaWQge1xuXHRcdGNvbnN0IGFsbG93Q29kZUJsb2NrOiB7IGNvZGVCbG9jazogYm9vbGVhbjsgaW5saW5lQ29kZUJsb2NrOiBib29sZWFuIH0gPSBJbnB1dEZpZWxkRmFjdG9yeS5hbGxvd0NvZGVCbG9ja01hcFtpbnB1dEZpZWxkVHlwZV07XG5cdFx0aWYgKHR5cGUgPT09IElucHV0RmllbGRNYXJrZG93blJlbmRlckNoaWxkVHlwZS5DT0RFX0JMT0NLICYmICFhbGxvd0NvZGVCbG9jay5jb2RlQmxvY2spIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcihgXFwnJHtpbnB1dEZpZWxkVHlwZX1cXCcgaXMgbm90IGFsbG93ZWQgYXMgY29kZSBibG9ja2ApO1xuXHRcdH1cblx0XHRpZiAodHlwZSA9PT0gSW5wdXRGaWVsZE1hcmtkb3duUmVuZGVyQ2hpbGRUeXBlLklOTElORV9DT0RFX0JMT0NLICYmICFhbGxvd0NvZGVCbG9jay5pbmxpbmVDb2RlQmxvY2spIHtcblx0XHRcdHRocm93IG5ldyBNZXRhQmluZFBhcnNpbmdFcnJvcihgXFwnJHtpbnB1dEZpZWxkVHlwZX1cXCcgaXMgbm90IGFsbG93ZWQgYXMgaW5saW5lIGNvZGUgYmxvY2tgKTtcblx0XHR9XG5cdH1cblxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHVCQUFzRDs7O0FDQXRELHNCQUE2Qzs7O0FDQXRDLElBQU0sd0JBQU4sY0FBb0MsTUFBTTtBQUFBLEVBQ2hE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STtBQUNsQyxVQUFNLG9CQUFvQixpQkFBaUIsaUJBQWlCLElBQUksSUFBSSxZQUFZLGlCQUFpQixJQUFJLENBQUM7QUFFdEcsVUFBTSxXQUFXLEtBQUssSUFBSSxNQUFNLFNBQVM7QUFDekMsVUFBTSxRQUFpQixDQUFDO0FBQ3hCLGVBQVcsUUFBUSxVQUFVO0FBRTVCLFVBQUksZ0JBQWdCO0FBQ25CLFlBQUksaUJBQWlCLEtBQUssSUFBSSxNQUFNLG1CQUFtQjtBQUN0RCxnQkFBTSxLQUFLLElBQUk7QUFBQSxRQUNoQjtBQUFBLE1BQ0QsT0FBTztBQUNOLFlBQUksWUFBWSxpQkFBaUIsS0FBSyxJQUFJLENBQUMsTUFBTSxtQkFBbUI7QUFDbkUsZ0JBQU0sS0FBSyxJQUFJO0FBQUEsUUFDaEI7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUVBLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxBQUFNLG1CQUFtQixNQUEyQjtBQUFBO0FBRW5ELFVBQUk7QUFFSixZQUFNLGNBQXNCLE1BQU0sS0FBSyxJQUFJLE1BQU0sS0FBSyxJQUFJO0FBQzFELFlBQU0sU0FBUyxJQUFJLE9BQU8sMEJBQTBCO0FBQ3BELFlBQU0sMEJBQTBCLE9BQU8sS0FBSyxXQUFXO0FBQ3ZELFVBQUksQ0FBQyx5QkFBeUI7QUFDN0IsZUFBTyxDQUFDO0FBQUEsTUFDVDtBQUNBLFVBQUksY0FBYyx3QkFBd0I7QUFDMUMsVUFBSSxDQUFDLGFBQWE7QUFDakIsZUFBTyxDQUFDO0FBQUEsTUFDVDtBQUVBLG9CQUFjLFlBQVksVUFBVSxDQUFDO0FBQ3JDLG9CQUFjLFlBQVksVUFBVSxHQUFHLFlBQVksU0FBUyxDQUFDO0FBRzdELGlCQUFXLGdDQUFVLFdBQVc7QUFFaEMsVUFBSSxDQUFDLFVBQVU7QUFDZCxtQkFBVyxDQUFDO0FBQUEsTUFDYjtBQUlBLGFBQU87QUFBQSxJQUNSO0FBQUE7QUFBQSxFQUVBLEFBQU0sZUFBOEI7QUFBQTtBQUNuQyxXQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxrQkFBa0IsTUFBTSxLQUFLLFNBQVMsQ0FBQztBQUFBLElBQzFFO0FBQUE7QUFBQSxFQUVBLEFBQU0sZUFBOEI7QUFBQTtBQUNuQyxpQkFBVyxhQUFhLEtBQUssU0FBUztBQUN0QyxhQUFPLFVBQVUsS0FBSyxTQUFTO0FBQy9CLFlBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLElBQ2xDO0FBQUE7QUFDRDsiLAogICJuYW1lcyI6IFtdCn0K
